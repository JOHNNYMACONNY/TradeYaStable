{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","AlertCircle","AlertTriangle","ArrowLeft","ArrowRight","AtSign","Award","Briefcase","Calendar","CheckCheck","CheckCircle2","CheckCircle","Check","Clock","Copy","ExternalLink","Facebook","Filter","HelpCircle","History","Link","Linkedin","Loader","LogOut","Menu","MessageSquare","Palette","PenSquare","Pencil","Play","Plus","RefreshCw","RotateCcw","Save","Search","Send","Share","Shield","Sparkles","Star","Tag","ThumbsUp","Trophy","Twitter","Upload","UserPlus","User","Users","Wand","X","Zap","ZoomIn","name","version","PENDING_TIMEOUT_MS","PACKAGE_VERSION","INTERNAL_AUTH_VERSION","INSTALLATIONS_API_URL","TOKEN_EXPIRATION_BUFFER","SERVICE","SERVICE_NAME","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","ErrorFactory","isServerError","error","FirebaseError","getInstallationsEndpoint","projectId","extractAuthTokenInfoFromResponse","response","getExpiresInFromResponseExpiresIn","getErrorFromResponse","requestName","errorData","getHeaders","apiKey","getHeadersWithAuth","appConfig","refreshToken","headers","getAuthorizationHeader","retryIfServerError","fn","result","responseExpiresIn","createInstallationRequest","heartbeatServiceProvider","fid","endpoint","heartbeatService","heartbeatsHeader","body","request","responseValue","sleep","ms","resolve","bufferToBase64UrlSafe","array","VALID_FID_PATTERN","INVALID_FID","generateFid","fidByteArray","encode","getKey","fidChangeCallbacks","fidChanged","key","callFidChangeCallbacks","broadcastFidChange","callbacks","callback","channel","getBroadcastChannel","closeBroadcastChannel","broadcastChannel","DATABASE_NAME","DATABASE_VERSION","OBJECT_STORE_NAME","dbPromise","getDbPromise","openDB","db","oldVersion","set","value","tx","objectStore","oldValue","remove","update","updateFn","store","newValue","getInstallationEntry","installations","registrationPromise","installationEntry","oldEntry","updateOrCreateInstallationEntry","entryWithPromise","triggerRegistrationIfNecessary","entry","clearTimedOutRequest","registrationPromiseWithError","inProgressEntry","registerInstallation","waitUntilFidRegistration","registeredInstallationEntry","updateInstallationRequest","hasInstallationRequestTimedOut","generateAuthTokenRequest","getGenerateAuthTokenEndpoint","refreshAuthToken","forceRefresh","tokenPromise","isEntryRegistered","oldAuthToken","isAuthTokenValid","waitUntilAuthTokenRequest","makeAuthTokenRequestInProgressEntry","fetchAuthTokenFromServer","updateAuthTokenRequest","authToken","hasAuthTokenRequestTimedOut","updatedInstallationEntry","isAuthTokenExpired","now","inProgressAuthToken","getId","installationsImpl","getToken","completeInstallationRegistration","extractAppConfig","app","getMissingValueError","configKeys","keyName","valueName","INSTALLATIONS_NAME","INSTALLATIONS_NAME_INTERNAL","publicFactory","container","_getProvider","internalFactory","registerInstallations","_registerComponent","registerVersion","ANALYTICS_TYPE","GA_FID_KEY","ORIGIN_KEY","FETCH_TIMEOUT_MILLIS","DYNAMIC_CONFIG_URL","GTAG_URL","logger","Logger","ERRORS","createGtagTrustedTypesScriptURL","url","err","promiseAllSettled","promises","promise","createTrustedTypesPolicy","policyName","policyOptions","trustedTypesPolicy","insertScriptTag","dataLayerName","measurementId","script","gtagScriptURL","getOrCreateDataLayer","dataLayer","gtagOnConfig","gtagCore","initializationPromisesMap","dynamicConfigPromisesList","measurementIdToAppId","gtagParams","correspondingAppId","foundConfig","config","gtagOnEvent","initializationPromisesToWaitFor","gaSendToList","dynamicConfigResults","sendToId","initializationPromise","wrapGtag","gtagWrapper","command","args","consentAction","fieldName","customParams","wrapOrCreateGtag","gtagFunctionName","_args","findGtagScriptOnPage","scriptTags","LONG_RETRY_FACTOR","BASE_INTERVAL_MILLIS","RetryData","throttleMetadata","intervalMillis","appId","metadata","defaultRetryData","fetchDynamicConfig","appFields","_a","appUrl","errorMessage","jsonResponse","fetchDynamicConfigWithRetry","retryData","timeoutMillis","signal","AnalyticsAbortSignal","attemptFetchDynamicConfigWithRetry","throttleEndTimeMillis","backoffCount","setAbortableTimeout","isRetriableError","backoffMillis","calculateBackoffMillis","reject","timeout","httpStatus","listener","logEvent$1","gtagFunction","eventName","eventParams","options","params","validateIndexedDB","isIndexedDBAvailable","validateIndexedDBOpenable","_initializeAnalytics","dynamicConfigPromise","fidPromise","envIsValid","dynamicConfig","configProperties","AnalyticsService","gtagName","gtagCoreFunction","wrappedGtagFunction","globalInitDone","warnOnBrowserContextMismatch","mismatchedEnvMessages","isBrowserExtension","areCookiesEnabled","details","message","index","factory","wrappedGtag","getAnalytics","getApp","getModularInstance","analyticsProvider","initializeAnalytics","existingInstance","deepEqual","logEvent","analyticsInstance","registerAnalytics","analyticsOptions","analytics","_assertClassBrand","t","_checkPrivateRedeclaration","_classPrivateFieldGet2","s","_classPrivateFieldInitSpec","_classPrivateFieldSet2","r","RESTORE_FOCUS_TIMEOUT","globalState","focusPreviousActiveElement","restoreActiveElement","returnFocus","x","y","swalPrefix","classNames","swalClasses","acc","icons","iconTypes","icon","consolePrefix","capitalizeFirstLetter","str","warn","previousWarnOnceMessages","warnOnce","warnAboutDeprecation","deprecatedParam","useInstead","callIfFunction","arg","hasToPromiseFn","asPromise","isPromise","getContainer","elementBySelector","selectorString","elementByClass","getPopup","getIcon","getIconContent","getTitle","getHtmlContainer","getImage","getProgressSteps","getValidationMessage","getConfirmButton","getCancelButton","getDenyButton","getInputLabel","getLoader","getActions","getFooter","getTimerProgressBar","getCloseButton","focusable","getFocusableElements","popup","focusableElementsWithTabindex","focusableElementsWithTabindexSorted","tabindexA","tabindexB","otherFocusableElements","otherFocusableElementsFiltered","el","isVisible$1","isModal","hasClass","isToast","isLoading","setInnerHtml","elem","html","parsed","head","child","classList","i","removeCustomClasses","applyCustomClass","customClass","addClass","getInput$1","inputClass","focusInput","input","val","toggleClass","target","condition","removeClass","getDirectChildByClass","applyNumericalStyle","property","show","display","hide","showWhenInnerHtmlPresent","toggle","setStyle","parent","selector","allButtonsAreHidden","isScrollable","hasCssAnimation","style","animDuration","transDuration","animateTimerProgressBar","timer","reset","timerProgressBar","stopTimerProgressBar","timerProgressBarWidth","timerProgressBarFullWidth","timerProgressBarPercent","isNodeEnv","sweetHTML","resetOldContainer","oldContainer","resetValidationMessage$1","addInputChangeListeners","file","range","rangeOutput","select","checkbox","textarea","getTarget","setupAccessibility","setupRTL","targetElement","init","oldContainerExisted","parseHtmlToContainer","param","handleObject","handleJqueryElem","renderActions","instance","actions","loader","renderButtons","confirmButton","denyButton","cancelButton","renderButton","handleButtonsStyling","button","buttonType","buttonName","renderCloseButton","closeButton","renderContainer","handleBackdropParam","handlePositionParam","handleGrowParam","backdrop","position","grow","privateProps","inputClasses","renderInput","innerParams","rerender","inputContainer","setAttributes","showInput","setCustomClass","renderInputType","getInputContainer","removeAttributes","attrName","inputAttributes","attr","setInputPlaceholder","setInputLabel","prependTo","label","labelClass","inputType","checkAndSetInputValue","inputValue","rangeInput","placeholder","radio","checkboxContainer","getMargin","initialPopupWidth","textareaResizeHandler","textareaWidth","renderContent","htmlContainer","renderFooter","footer","renderIcon","setContent","applyStyles","adjustSuccessIconBackgroundColor","iconType","iconClassName","setColor","popupBackgroundColor","successIconParts","successIconHtml","errorIconHtml","oldContent","newContent","iconContent","sel","content","renderImage","image","dragging","mousedownX","mousedownY","initialX","initialY","addDraggableListeners","down","move","up","removeDraggableListeners","event","clientXY","getClientXY","clientX","clientY","renderPopup","addClasses$1","showClass","renderProgressSteps","progressStepsContainer","progressSteps","currentProgressStep","step","stepEl","createStepElement","lineEl","createLineElement","renderTitle","title","render","isVisible","clickConfirm","_dom$getConfirmButton","clickDeny","_dom$getDenyButton","clickCancel","_dom$getCancelButton","DismissReason","removeKeydownHandler","addKeydownHandler","dismissWith","keydownHandler","setFocus","increment","_dom$getPopup","focusableElements","arrowKeysNextButton","arrowKeysPreviousButton","handleEnter","handleTab","handleArrows","handleEsc","btnIndex","buttons","sibling","buttonToFocus","privateMethods","setAriaHidden","unsetAriaHidden","isSafariOrIOS","iOSfix","offset","lockBodyScroll","preventTouchMove","shouldPreventTouchMove","isStylus","isZoom","undoIOSfix","measureScrollbar","scrollDiv","scrollbarWidth","previousBodyPadding","replaceScrollbarWithPadding","initialBodyOverflow","undoReplaceScrollbarWithPadding","removePopupAndResetState","didClose","triggerDidCloseAndDispose","removeBodyClasses","close","resolveValue","prepareResolveValue","swalPromiseResolve","triggerClosePopup","handleAwaitingPromise","handlePopupAnimation","rejectPromise","_globalState$eventEmi","animationIsSupported","animatePopup","swalCloseAnimationFinished","_globalState$swalClos","_globalState$eventEmi2","showLoading","buttonToReplace","Swal","replaceButton","handleInputOptionsAndValue","handleInputOptions","handleInputValue","getInputValue","getCheckboxValue","getRadioValue","getFileValue","processInputOptions","inputOptions","populateSelectOptions","formatInputOptions","populateRadioOptions","renderOption","optionLabel","optionValue","option","isSelected","inputOption","optgroup","o","radioValue","radioLabel","radioInput","radioLabelElement","radios","valueFormatted","handleConfirmButtonClick","handleConfirmOrDenyWithInput","confirm","handleDenyButtonClick","deny","handleCancelButtonClick","type","handleInputValidator","validationMessage","preDenyValue","rejectWith","succeedWith","preConfirmValue","hideLoading","domCache","showRelatedButton","getInput","setButtonsDisabled","disabled","setInputDisabled","enableButtons","disableButtons","enableInput","disableInput","showValidationMessage","resetValidationMessage","defaultParams","updatableParams","deprecatedParams","toastIncompatibleParams","isValidParameter","paramName","isUpdatableParameter","isDeprecatedParameter","checkIfParamIsValid","checkIfToastParamIsValid","checkIfParamIsDeprecated","isDeprecated","showWarningsForParams","validUpdatableParams","filterValidParams","updatedParams","_destroy","disposeWeakMaps","disposeSwal","unsetWeakMaps","obj","instanceMethods","handlePopupClick","handleToastClick","handleModalMousedown","handleContainerMousedown","handleModalClick","isAnyButtonShown","ignoreOutsideClick","isJqueryElement","isElement","argsToParams","fire","_len","_key","mixin","mixinParams","MixinSwal","priorityMixinParams","getTimerLeft","stopTimer","resumeTimer","remaining","toggleTimer","increaseTimer","isTimerRunning","bodyClickListenerAdded","clickHandlers","bindClickHandler","bodyClickListener","template","EventEmitter","eventHandler","currentHandlers","_this","onceFn","_len2","_key2","on","once","off","staticMethods","Timer","delay","running","swalStringParams","getTemplateParams","templateContent","showWarningsForElements","getSwalParams","getSwalFunctionParams","getSwalButtons","getSwalImage","getSwalIcon","getSwalInput","getSwalStringParams","showWarningsForAttributes","optionName","paramNames","allowedElements","tagName","allowedAttributes","attribute","SHOW_CLASS_TIMEOUT","openPopup","addClasses","setScrollingVisibility","fixScrollContainer","swalOpenAnimationFinished","scrollbarPadding","defaultInputValidators","setDefaultInputValidators","validateCustomTargetElement","setParameters","currentInstance","_promise","SweetAlert","outerParams","userParams","isAwaitingPromise","prepareParams","populateDomCache","swalPromise","onFulfilled","onFinally","dismiss","setupTimer","initFocus","templateParams","blurActiveElement","focusAutofocus","focusButton","autofocusElements","autofocusElement","initiationDate","ukrainianAnthem","mounts","swal","noop","withReactContent","ParentSwal","extractReactParams","reactParams","otherParams","mountKeys","mount","_ref","React","_ref2","domElement","root","createRoot","unrender","superWillOpen","superDidOpen","superDidDestroy","MySwal","baseConfig","createSafeAlert","showAlert","showSuccess","text","showError","firebaseConfig","initializeApp","initializeFirestore","persistentLocalCache","persistentMultipleTabManager","auth","getAuth","getStorage","withRetry","operation","maxRetries","baseDelay","onRetry","lastError","attempt","collection","checkCollection","collectionName","colRef","initializeCollections","initializeChallenges","__vitePreload","aiChallenges","generateUsername","displayName","suffix","isValidUsername","username","isUsernameAvailable","usersRef","query","where","getDocs","generateUniqueUsername","baseUsername","UsernameError","updateUsername","userId","newUsername","userRef","doc","runTransaction","transaction","userDoc","AuthContext","createContext","AuthProvider","user","setUser","useState","loading","setLoading","setError","useEffect","onAuthStateChanged","getRedirectResult","handleGoogleSignIn","getDoc","setDoc","signUp","email","password","userCredential","createUserWithEmailAndPassword","updateProfile","signIn","signInWithEmailAndPassword","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","popupError","signInWithRedirect","logout","signOut","updateUsernameUtil","jsx","useAuth","context","useContext","AdminContext","AdminProvider","isAdmin","setIsAdmin","tokenResult","getIdTokenResult","useAdmin","ProtectedRoute","jsxs","Navigate","AdminRoute","Login","setEmail","setPassword","navigate","useNavigate","handleEmailSignIn","Register","setDisplayName","handleEmailSignUp","handleGoogleSignUp","useFirestore","constraints","data","setData","documents","addDoc","id","docRef","updateDoc","docSnap","ProfilePicture","sizeClasses","ProfileHoverCard","profile","onMessageClick","setIsVisible","setPosition","triggerRef","useRef","cardRef","timeoutRef","topSkills","skill","_b","_d","_c","updatePosition","triggerRect","cardRect","viewportHeight","scrollY","spaceBelow","spaceAbove","handleUpdate","handleMouseEnter","handleMouseLeave","LinkIcon","Discover","searchTerm","setSearchTerm","selectedSkills","setSelectedSkills","trades","creators","setCreators","fetchCreators","creatorIds","trade","creatorsData","creatorId","creatorDoc","filteredTrades","matchesSearch","matchesSkills","allSkills","handleSkillToggle","prev","handleStartChat","creator","Fragment","XP_CONFIG","LEVEL_THRESHOLDS","BADGES","calculateLevel","experience","level","threshold","awardExperience","amount","skills","addEndorsement","endorserId","arrayUnion","awardBadge","badgeId","badge","checkAndAwardBadges","endorsers","ReputationCard","showEndorsements","nextLevelXP","currentLevelXP","progress","getBannerName","bannerId","BannerUnlockNotification","onClose","onClick","ReactPropTypesSecret","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","props","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","propTypesModule","COMMON_MIME_TYPES","toFileWithPath","path","withMimeType","webkitRelativePath","setObjProp","ext","FILES_TO_IGNORE","fromEvent","evt","__awaiter","isObject","isDataTransfer","getDataTransferFiles","isChangeEvt","getInputFiles","item","getFsHandleFiles","v","fromList","handles","dt","items","files","toFilePromises","noIgnoredFiles","flatten","fromDataTransferItem","fromDirEntry","fromEntry","fromFileEntry","reader","entries","readEntries","batch","fwp","es","acceptedFiles","acceptedFilesArray","fileName","mimeType","baseMimeType","validType","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","iter","_arrayLikeToArray","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread","source","_defineProperty","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","minLen","len","arr2","_i","_arr","_n","_s","_e","accepts","_accepts","FILE_INVALID_TYPE","FILE_TOO_LARGE","FILE_TOO_SMALL","TOO_MANY_FILES","getInvalidTypeRejectionErr","accept","acceptArr","msg","getTooLargeRejectionErr","maxSize","getTooSmallRejectionErr","minSize","TOO_MANY_FILES_REJECTION","fileAccepted","isAcceptable","fileMatchSize","isDefined","allFilesAccepted","multiple","maxFiles","validator","_fileAccepted","_fileAccepted2","accepted","_fileMatchSize","_fileMatchSize2","sizeMatch","customErrors","isPropagationStopped","isEvtWithFiles","onDocumentDragOver","isIe","userAgent","isEdge","isIeOrEdge","composeEventHandlers","fns","canUseFileSystemAccessAPI","pickerOptionsFromAccept","acceptForPicker","_ref3","ok","isMIMEType","isExt","agg","_ref4","_ref5","acceptPropAsAcceptAttr","_ref6","_ref7","isAbort","isSecurityError","_excluded","_excluded2","_excluded3","_excluded4","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","sourceKeys","Dropzone","_useDropzone","useDropzone","open","useImperativeHandle","defaultProps","PropTypes","initialState","_defaultProps$props","getFilesFromEvent","onDragEnter","onDragLeave","onDragOver","onDrop","onDropAccepted","onDropRejected","onFileDialogCancel","onFileDialogOpen","useFsAccessApi","autoFocus","preventDropOnDocument","noClick","noKeyboard","noDrag","noDragEventsBubbling","onError","acceptAttr","useMemo","pickerTypes","onFileDialogOpenCb","onFileDialogCancelCb","rootRef","inputRef","_useReducer","useReducer","reducer","_useReducer2","state","dispatch","isFocused","isFileDialogActive","fsAccessApiWorksRef","onWindowFocus","dragTargetsRef","onDocumentDrop","onErrCb","useCallback","onDragEnterCb","stopPropagation","fileCount","isDragAccept","isDragReject","onDragOverCb","hasFiles","onDragLeaveCb","targets","targetIdx","setFiles","fileRejections","acceptError","sizeError","errors","onDropCb","openFileDialog","opts","onKeyDownCb","onFocusCb","onBlurCb","onClickCb","composeHandler","composeKeyboardHandler","composeDragHandler","getRootProps","_ref2$refKey","refKey","role","onKeyDown","onFocus","onBlur","onInputElementClick","getInputProps","_ref3$refKey","onChange","inputProps","action","_populated","_ie","_firefox","_opera","_webkit","_chrome","_ie_real_version","_osx","_windows","_linux","_android","_win64","_iphone","_ipad","_native","_mobile","_populate","uas","agent","os","trident","ver","UserAgent_DEPRECATED","UserAgent_DEPRECATED_1","canUseDOM","ExecutionEnvironment","ExecutionEnvironment_1","useHasFeature","isEventSupported","eventNameSuffix","capture","isSupported","element","isEventSupported_1","require$$1","PIXEL_STEP","LINE_HEIGHT","PAGE_HEIGHT","normalizeWheel","sX","sY","pX","pY","normalizeWheel_1","getCropSize","mediaWidth","mediaHeight","containerWidth","containerHeight","aspect","rotation","rotateSize","width","height","fittingWidth","fittingHeight","getMediaZoom","mediaSize","restrictPosition","cropSize","zoom","restrictPositionCoord","maxPosition","clamp","getDistanceBetweenPoints","pointA","pointB","getRotationBetweenPoints","computeCroppedArea","crop","limitAreaFn","limitArea","noOp","mediaBBoxSize","mediaNaturalBBoxSize","croppedAreaPercentages","widthInPixels","heightInPixels","isImgWiderThanHigh","sizePixels","croppedAreaPixels","__assign","max","_max","getInitialCropFromCroppedAreaPercentages","minZoom","maxZoom","getZoomFromCroppedAreaPixels","mediaZoom","getInitialCropFromCroppedAreaPixels","cropZoom","getCenter","getRadianAngle","degreeValue","rotRad","min","css_248z","MIN_ZOOM","MAX_ZOOM","KEYBOARD_STEP","Cropper","_super","__extends","React.createRef","isFirstResize","_f","mediaRef","containerAspect","naturalWidth","naturalHeight","isMediaScaledDown","mediaAspect","renderedMediaSize","bounds","point","newZoom","newRotation","offsetX","offsetY","requestedPosition","newPosition","pixelY","containerTopLeft","shouldUpdatePosition","zoomPoint","zoomTarget","restrictedPosition","cropData","onCropChange","keyboardStep","newCrop","prevProps","_g","_h","_j","objectFit","center","distance","video","mediaProps","transform","cropShape","showGrid","containerStyle","cropAreaStyle","mediaStyle","containerClassName","cropAreaClassName","mediaClassName","React.createElement","touch","React.Component","ImageCropper","onCropComplete","onCancel","aspectRatio","setCrop","setZoom","setCroppedAreaPixels","cropping","setCropping","onZoomChange","onCropAreaChange","croppedArea","createImage","getCroppedImg","imageSrc","pixelCrop","canvas","ctx","blob","handleCrop","croppedImage","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","randomUUID","native","v4","buf","rnds","uploadProfilePicture","CLOUD_NAME","UPLOAD_PRESET","formData","uuidv4","ProfilePictureUpload","currentUrl","onUpload","uploading","setUploading","cropImage","setCropImage","handleUpload","isDragActive","handleCropComplete","defaultOptions","loadImage","img","getBannerColors","generateBannerPreview","includeProfile","color1","color2","gradient","noisePattern","overlayGradient","banner","defaultBanners","Toast","duration","ToastContext","ToastProvider","toasts","setToasts","counter","setCounter","showToast","removeToast","toast","useToast","platforms","BannerShareButton","isOpen","setIsOpen","isGenerating","setIsGenerating","handleShare","platform","previewImage","bannerName","shareUrl","shareTitle","preloadBanner","div","ProfileBanner","selectedBanner","userLevel","editable","onUpdate","isCustomizing","setIsCustomizing","previewBanner","setPreviewBanner","isTransitioning","setIsTransitioning","handleBannerSelect","availableBanners","upcomingBanners","Profile","setProfile","isEditing","setIsEditing","editedProfile","setEditedProfile","newSkill","setNewSkill","saving","setSaving","endorsing","setEndorsing","usernameError","setUsernameError","usernameAvailable","setUsernameAvailable","checkingUsername","setCheckingUsername","unlockedBanner","setUnlockedBanner","isCustomizingBanner","setIsCustomizingBanner","fetchProfile","profileData","initializedProfile","newUnlock","unlock","handleUsernameChange","handleProfilePictureUpload","handleSave","updates","handleAddSkill","handleRemoveSkill","skillToRemove","removedSkill","remainingSkills","handleEndorse","currentEndorsers","UserSearchModal","onSelectUser","excludeUserId","searchQuery","setSearchQuery","results","setResults","handleSearch","searchTrimmed","searchLower","users","orderBy","startAt","endAt","limit","querySnapshot","emailQuery","emailUsers","existing","finalUsers","displayNameMatch","emailMatch","usernameMatch","aName","bName","aContains","bContains","errMsg","CreateTrade","add","showUserSearch","setShowUserSearch","setFormData","skillsArray","skillField","handleSubmit","TradeDetails","useParams","setTrade","setCreator","startingChat","setStartingChat","updatingStatus","setUpdatingStatus","showStatusModal","setShowStatusModal","fetchTradeAndCreator","tradeDoc","tradeData","handleContact","conversationsRef","conversationId","serverTimestamp","handleUpdateStatus","newStatus","creatorProfile","participantProfile","Messages","useSearchParams","conversations","setConversations","participants","setParticipants","unsubscribe","onSnapshot","snapshot","conversationsData","sortedConversations","timeA","participantIds","conv","participantsData","participantId","userDocRef","getOtherParticipant","conversation","otherUserId","otherParticipant","hasUnread","Conversation","setConversation","messages","setMessages","newMessage","setNewMessage","isTyping","setIsTyping","otherUser","setOtherUser","messagesEndRef","unsubConversation","conversationData","pid","messagesRef","unsubMessages","newMessages","docSnapshot","unreadMessages","messageRef","updateTypingStatus","conversationRef","typingUpdate","timeoutId","userStatusRef","handleSend","tempMessage","messageData","revertError","isOwnMessage","Projects","statusFilter","setStatusFilter","projects","filteredProjects","project","matchesStatus","getAvailableRoles","CreateProject","handleAddRole","handleRemoveRole","_","ProjectDetails","setProject","joining","setJoining","fetchProjectAndCreator","projectDoc","projectData","creatorData","handleJoinRole","roleIndex","updatedRoles","participant","isCreator","allRolesFilled","sendConnectionRequest","fromUserId","toUserId","fromUser","toUser","receivedRequest","sentRequest","writeBatch","timestamp","getConnectionStatus","getOrCreateConversation","currentUserId","otherParticipants","allParticipants","and","existingConversations","startConversation","UserProfileCard","initialStatus","onConnect","onMessage","connectionStatus","setConnectionStatus","isConnecting","setIsConnecting","isStartingChat","setIsStartingChat","handleMessage","handleConnect","UserDirectory","connectionStatuses","setConnectionStatuses","connectingUsers","setConnectingUsers","usersLoading","statuses","status","filteredUsers","success","joinChallenge","challengeId","challengeRef","claimChallengeRewards","challenge","ChallengeCard","userProgress","claiming","setClaiming","isParticipating","hasCompleted","canClaimRewards","timeLeft","daysLeft","handleJoin","handleClaimRewards","req","skillCategoryMap","getSkillCategory","category","lowerSkill","getPopularSkills","categoryCounts","userData","sortedCategories","generateVariation","categories","types","requirements","description","generateChallenge","useAI","variation","Timestamp","deleteAllChallenges","challengesQuery","checkAndGenerateChallenges","Challenges","challenges","setChallenges","refreshing","setRefreshing","filter","setFilter","fetchChallenges","weeklyQuery","monthlyQuery","weeklySnapshot","monthlySnapshot","weeklyData","monthlyData","sortChallenges","sortedWeekly","sortedMonthly","handleRefresh","filteredChallenges","ChallengeEditor","onSave","editedChallenge","setEditedChallenge","generating","setGenerating","handleGenerateNew","challengeDoc","newReqs","AdminChallenges","pendingChallenges","setPendingChallenges","editingChallenge","setEditingChallenge","handleActivate","httpsCallable","functions","Edit","acceptConnectionRequest","connectionId","connectionRef","connectionDoc","connection","reciprocalId","declineConnectionRequest","deleteDoc","Connections","connections","setConnections","pendingRequests","setPendingRequests","profiles","setProfiles","fetchProfiles","userIds","uniqueIds","newProfiles","pendingQuery","acceptedQuery","unsubPending","requests","unsubAccepted","acceptedConnections","conn","handleAcceptRequest","handleDeclineRequest","PublicProfile","completedTrades","setCompletedTrades","profileDoc","tradesQuery","ErrorBoundaryContext","ErrorBoundary","_this$props$onReset","_this$props","info","_this$props$onError","_this$props2","prevState","didCatch","resetKeys","hasArrayChanged","_this$props$onReset2","_this$props3","fallbackRender","FallbackComponent","fallback","childToRender","classifyError","ErrorFallback","resetErrorBoundary","errorInfo","handleAction","App","mobileMenuOpen","setMobileMenuOpen","handleLogout","closeMobileMenu","Routes","Route","showFatalError","requiredEnvVars","missingVars","__vite_import_meta_env__","errorHtml","BrowserRouter"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,92,93,94,124],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../node_modules/lucide-react/dist/esm/icons/at-sign.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/briefcase.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-check.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/facebook.js","../../node_modules/lucide-react/dist/esm/icons/filter.js","../../node_modules/lucide-react/dist/esm/icons/help-circle.js","../../node_modules/lucide-react/dist/esm/icons/history.js","../../node_modules/lucide-react/dist/esm/icons/link.js","../../node_modules/lucide-react/dist/esm/icons/linkedin.js","../../node_modules/lucide-react/dist/esm/icons/loader.js","../../node_modules/lucide-react/dist/esm/icons/log-out.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/palette.js","../../node_modules/lucide-react/dist/esm/icons/pen-square.js","../../node_modules/lucide-react/dist/esm/icons/pencil.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/share.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/tag.js","../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js","../../node_modules/lucide-react/dist/esm/icons/trophy.js","../../node_modules/lucide-react/dist/esm/icons/twitter.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user-plus.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/wand.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../node_modules/lucide-react/dist/esm/icons/zoom-in.js","../../node_modules/@firebase/installations/dist/esm/index.esm2017.js","../../node_modules/@firebase/analytics/dist/esm/index.esm2017.js","../../node_modules/sweetalert2/dist/sweetalert2.esm.all.js","../../node_modules/sweetalert2-react-content/dist/sweetalert2-react-content.es.js","../../src/lib/alerts.ts","../../src/lib/firebase.ts","../../src/utils/username.ts","../../src/contexts/authcontext.tsx","../../src/contexts/admincontext.tsx","../../src/components/protectedroute.tsx","../../src/components/adminroute.tsx","../../src/pages/login.tsx","../../src/pages/register.tsx","../../src/hooks/usefirestore.ts","../../src/components/profilepicture.tsx","../../src/components/profilehovercard.tsx","../../src/pages/discover.tsx","../../src/lib/reputation.ts","../../src/components/reputationcard.tsx","../../src/components/BannerUnlockNotification.tsx","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../../node_modules/file-selector/dist/es2015/file.js","../../node_modules/file-selector/dist/es2015/file-selector.js","../../node_modules/attr-accept/dist/es/index.js","../../node_modules/react-dropzone/dist/es/utils/index.js","../../node_modules/react-dropzone/dist/es/index.js","../../node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js","../../node_modules/normalize-wheel/src/ExecutionEnvironment.js","../../node_modules/normalize-wheel/src/isEventSupported.js","../../node_modules/normalize-wheel/src/normalizeWheel.js","../../node_modules/normalize-wheel/index.js","../../node_modules/react-easy-crop/index.module.js","../../src/components/imagecropper.tsx","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/lib/storage.ts","../../src/components/profilepictureupload.tsx","../../src/utils/banner-preview.ts","../../src/components/Toast.tsx","../../src/contexts/ToastContext.tsx","../../src/components/BannerShareButton.tsx","../../src/components/profilebanner.tsx","../../src/pages/profile.tsx","../../src/components/UserSearchModal.tsx","../../src/pages/createtrade.tsx","../../src/pages/tradedetails.tsx","../../src/pages/messages.tsx","../../src/pages/conversation.tsx","../../src/pages/projects.tsx","../../src/pages/createproject.tsx","../../src/pages/projectdetails.tsx","../../src/lib/networking.ts","../../src/lib/messaging.ts","../../src/components/userprofilecard.tsx","../../src/pages/userdirectory.tsx","../../src/lib/challenges.ts","../../src/components/challengecard.tsx","../../src/lib/ai-challenges.ts","../../src/pages/challenges.tsx","../../src/components/challengeeditor.tsx","../../src/pages/adminchallenges.tsx","../../src/lib/connections.ts","../../src/pages/connections.tsx","../../src/pages/publicprofile.tsx","../../node_modules/react-error-boundary/dist/react-error-boundary.esm.js","../../src/app.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowRight = createLucideIcon(\"ArrowRight\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n]);\n\nexport { ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AtSign = createLucideIcon(\"AtSign\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8\", key: \"7n84p3\" }]\n]);\n\nexport { AtSign as default };\n//# sourceMappingURL=at-sign.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Briefcase = createLucideIcon(\"Briefcase\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"7\", rx: \"2\", ry: \"2\", key: \"eto64e\" }],\n  [\"path\", { d: \"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16\", key: \"zwj3tp\" }]\n]);\n\nexport { Briefcase as default };\n//# sourceMappingURL=briefcase.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", ry: \"2\", key: \"eu3xkr\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCheck = createLucideIcon(\"CheckCheck\", [\n  [\"path\", { d: \"M18 6 7 17l-5-5\", key: \"116fxf\" }],\n  [\"path\", { d: \"m22 10-7.5 7.5L13 16\", key: \"ke71qq\" }]\n]);\n\nexport { CheckCheck as default };\n//# sourceMappingURL=check-check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\nexport { Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }],\n  [\"polyline\", { points: \"15 3 21 3 21 9\", key: \"mznyad\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"14\", y2: \"3\", key: \"18c3s4\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Facebook = createLucideIcon(\"Facebook\", [\n  [\n    \"path\",\n    { d: \"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z\", key: \"1jg4f8\" }\n  ]\n]);\n\nexport { Facebook as default };\n//# sourceMappingURL=facebook.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Filter = createLucideIcon(\"Filter\", [\n  [\"polygon\", { points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\", key: \"1yg77f\" }]\n]);\n\nexport { Filter as default };\n//# sourceMappingURL=filter.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst History = createLucideIcon(\"History\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M12 7v5l4 2\", key: \"1fdv2h\" }]\n]);\n\nexport { History as default };\n//# sourceMappingURL=history.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link = createLucideIcon(\"Link\", [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n]);\n\nexport { Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Linkedin = createLucideIcon(\"Linkedin\", [\n  [\n    \"path\",\n    {\n      d: \"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\",\n      key: \"c2jq9f\"\n    }\n  ],\n  [\"rect\", { width: \"4\", height: \"12\", x: \"2\", y: \"9\", key: \"mk3on5\" }],\n  [\"circle\", { cx: \"4\", cy: \"4\", r: \"2\", key: \"bt5ra8\" }]\n]);\n\nexport { Linkedin as default };\n//# sourceMappingURL=linkedin.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"6\", key: \"gza1u7\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"18\", y2: \"22\", key: \"1qhbu9\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"4.93\", y2: \"7.76\", key: \"xae44r\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"16.24\", y2: \"19.07\", key: \"bxnmvf\" }],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"12\", y2: \"12\", key: \"89khin\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"12\", y2: \"12\", key: \"pb8tfm\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"19.07\", y2: \"16.24\", key: \"1uxjnu\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"7.76\", y2: \"4.93\", key: \"6duxfx\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogOut = createLucideIcon(\"LogOut\", [\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }],\n  [\"polyline\", { points: \"16 17 21 12 16 7\", key: \"1gabdz\" }],\n  [\"line\", { x1: \"21\", x2: \"9\", y1: \"12\", y2: \"12\", key: \"1uyos4\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Palette = createLucideIcon(\"Palette\", [\n  [\"circle\", { cx: \"13.5\", cy: \"6.5\", r: \".5\", key: \"1xcu5\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"10.5\", r: \".5\", key: \"736e4u\" }],\n  [\"circle\", { cx: \"8.5\", cy: \"7.5\", r: \".5\", key: \"clrty\" }],\n  [\"circle\", { cx: \"6.5\", cy: \"12.5\", r: \".5\", key: \"1s4xz9\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z\",\n      key: \"12rzf8\"\n    }\n  ]\n]);\n\nexport { Palette as default };\n//# sourceMappingURL=palette.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PenSquare = createLucideIcon(\"PenSquare\", [\n  [\"path\", { d: \"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1qinfi\" }],\n  [\"path\", { d: \"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z\", key: \"w2jsv5\" }]\n]);\n\nexport { PenSquare as default };\n//# sourceMappingURL=pen-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"Pencil\", [\n  [\"path\", { d: \"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\", key: \"5qss01\" }],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"RotateCcw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\"path\", { d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\", key: \"1owoqh\" }],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share = createLucideIcon(\"Share\", [\n  [\"path\", { d: \"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\", key: \"1b2hhj\" }],\n  [\"polyline\", { points: \"16 6 12 2 8 6\", key: \"m901s6\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"15\", key: \"1p0rca\" }]\n]);\n\nexport { Share as default };\n//# sourceMappingURL=share.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"Sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\",\n      key: \"17u4zn\"\n    }\n  ],\n  [\"path\", { d: \"M5 3v4\", key: \"bklmnn\" }],\n  [\"path\", { d: \"M19 17v4\", key: \"iiml17\" }],\n  [\"path\", { d: \"M3 5h4\", key: \"nem4j1\" }],\n  [\"path\", { d: \"M17 19h4\", key: \"lbex7p\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Tag = createLucideIcon(\"Tag\", [\n  [\n    \"path\",\n    {\n      d: \"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z\",\n      key: \"14b2ls\"\n    }\n  ],\n  [\"path\", { d: \"M7 7h.01\", key: \"7u93v4\" }]\n]);\n\nexport { Tag as default };\n//# sourceMappingURL=tag.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ThumbsUp = createLucideIcon(\"ThumbsUp\", [\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"y3tblf\"\n    }\n  ]\n]);\n\nexport { ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trophy = createLucideIcon(\"Trophy\", [\n  [\"path\", { d: \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\", key: \"17hqa7\" }],\n  [\"path\", { d: \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\", key: \"lmptdp\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\"path\", { d: \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\", key: \"1nw9bq\" }],\n  [\"path\", { d: \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\", key: \"1np0yb\" }],\n  [\"path\", { d: \"M18 2H6v7a6 6 0 0 0 12 0V2Z\", key: \"u46fv3\" }]\n]);\n\nexport { Trophy as default };\n//# sourceMappingURL=trophy.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Twitter = createLucideIcon(\"Twitter\", [\n  [\n    \"path\",\n    {\n      d: \"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z\",\n      key: \"pff0z6\"\n    }\n  ]\n]);\n\nexport { Twitter as default };\n//# sourceMappingURL=twitter.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserPlus = createLucideIcon(\"UserPlus\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"8\", y2: \"14\", key: \"1bvyxn\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"11\", y2: \"11\", key: \"1shjgl\" }]\n]);\n\nexport { UserPlus as default };\n//# sourceMappingURL=user-plus.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wand = createLucideIcon(\"Wand\", [\n  [\"path\", { d: \"M15 4V2\", key: \"z1p9b7\" }],\n  [\"path\", { d: \"M15 16v-2\", key: \"px0unx\" }],\n  [\"path\", { d: \"M8 9h2\", key: \"1g203m\" }],\n  [\"path\", { d: \"M20 9h2\", key: \"19tzq7\" }],\n  [\"path\", { d: \"M17.8 11.8 19 13\", key: \"yihg8r\" }],\n  [\"path\", { d: \"M15 9h0\", key: \"kg5t1u\" }],\n  [\"path\", { d: \"M17.8 6.2 19 5\", key: \"fd4us0\" }],\n  [\"path\", { d: \"m3 21 9-9\", key: \"1jfql5\" }],\n  [\"path\", { d: \"M12.2 6.2 11 5\", key: \"i3da3b\" }]\n]);\n\nexport { Wand as default };\n//# sourceMappingURL=wand.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ZoomIn = createLucideIcon(\"ZoomIn\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomIn as default };\n//# sourceMappingURL=zoom-in.js.map\n","import { _getProvider, getApp, _registerComponent, registerVersion } from '@firebase/app';\nimport { Component } from '@firebase/component';\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { openDB } from 'idb';\n\nconst name = \"@firebase/installations\";\nconst version = \"0.6.9\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst PENDING_TIMEOUT_MS = 10000;\r\nconst PACKAGE_VERSION = `w:${version}`;\r\nconst INTERNAL_AUTH_VERSION = 'FIS_v2';\r\nconst INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\r\nconst TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\r\nconst SERVICE = 'installations';\r\nconst SERVICE_NAME = 'Installations';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERROR_DESCRIPTION_MAP = {\r\n    [\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */]: 'Missing App configuration value: \"{$valueName}\"',\r\n    [\"not-registered\" /* ErrorCode.NOT_REGISTERED */]: 'Firebase Installation is not registered.',\r\n    [\"installation-not-found\" /* ErrorCode.INSTALLATION_NOT_FOUND */]: 'Firebase Installation not found.',\r\n    [\"request-failed\" /* ErrorCode.REQUEST_FAILED */]: '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',\r\n    [\"app-offline\" /* ErrorCode.APP_OFFLINE */]: 'Could not process request. Application offline.',\r\n    [\"delete-pending-registration\" /* ErrorCode.DELETE_PENDING_REGISTRATION */]: \"Can't delete installation while there is a pending registration request.\"\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\r\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\r\nfunction isServerError(error) {\r\n    return (error instanceof FirebaseError &&\r\n        error.code.includes(\"request-failed\" /* ErrorCode.REQUEST_FAILED */));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getInstallationsEndpoint({ projectId }) {\r\n    return `${INSTALLATIONS_API_URL}/projects/${projectId}/installations`;\r\n}\r\nfunction extractAuthTokenInfoFromResponse(response) {\r\n    return {\r\n        token: response.token,\r\n        requestStatus: 2 /* RequestStatus.COMPLETED */,\r\n        expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\r\n        creationTime: Date.now()\r\n    };\r\n}\r\nasync function getErrorFromResponse(requestName, response) {\r\n    const responseJson = await response.json();\r\n    const errorData = responseJson.error;\r\n    return ERROR_FACTORY.create(\"request-failed\" /* ErrorCode.REQUEST_FAILED */, {\r\n        requestName,\r\n        serverCode: errorData.code,\r\n        serverMessage: errorData.message,\r\n        serverStatus: errorData.status\r\n    });\r\n}\r\nfunction getHeaders({ apiKey }) {\r\n    return new Headers({\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'x-goog-api-key': apiKey\r\n    });\r\n}\r\nfunction getHeadersWithAuth(appConfig, { refreshToken }) {\r\n    const headers = getHeaders(appConfig);\r\n    headers.append('Authorization', getAuthorizationHeader(refreshToken));\r\n    return headers;\r\n}\r\n/**\r\n * Calls the passed in fetch wrapper and returns the response.\r\n * If the returned response has a status of 5xx, re-runs the function once and\r\n * returns the response.\r\n */\r\nasync function retryIfServerError(fn) {\r\n    const result = await fn();\r\n    if (result.status >= 500 && result.status < 600) {\r\n        // Internal Server Error. Retry request.\r\n        return fn();\r\n    }\r\n    return result;\r\n}\r\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\r\n    // This works because the server will never respond with fractions of a second.\r\n    return Number(responseExpiresIn.replace('s', '000'));\r\n}\r\nfunction getAuthorizationHeader(refreshToken) {\r\n    return `${INTERNAL_AUTH_VERSION} ${refreshToken}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function createInstallationRequest({ appConfig, heartbeatServiceProvider }, { fid }) {\r\n    const endpoint = getInstallationsEndpoint(appConfig);\r\n    const headers = getHeaders(appConfig);\r\n    // If heartbeat service exists, add the heartbeat string to the header.\r\n    const heartbeatService = heartbeatServiceProvider.getImmediate({\r\n        optional: true\r\n    });\r\n    if (heartbeatService) {\r\n        const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\r\n        if (heartbeatsHeader) {\r\n            headers.append('x-firebase-client', heartbeatsHeader);\r\n        }\r\n    }\r\n    const body = {\r\n        fid,\r\n        authVersion: INTERNAL_AUTH_VERSION,\r\n        appId: appConfig.appId,\r\n        sdkVersion: PACKAGE_VERSION\r\n    };\r\n    const request = {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n    };\r\n    const response = await retryIfServerError(() => fetch(endpoint, request));\r\n    if (response.ok) {\r\n        const responseValue = await response.json();\r\n        const registeredInstallationEntry = {\r\n            fid: responseValue.fid || fid,\r\n            registrationStatus: 2 /* RequestStatus.COMPLETED */,\r\n            refreshToken: responseValue.refreshToken,\r\n            authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\r\n        };\r\n        return registeredInstallationEntry;\r\n    }\r\n    else {\r\n        throw await getErrorFromResponse('Create Installation', response);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a promise that resolves after given time passes. */\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction bufferToBase64UrlSafe(array) {\r\n    const b64 = btoa(String.fromCharCode(...array));\r\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\r\nconst INVALID_FID = '';\r\n/**\r\n * Generates a new FID using random values from Web Crypto API.\r\n * Returns an empty string if FID generation fails for any reason.\r\n */\r\nfunction generateFid() {\r\n    try {\r\n        // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\r\n        // bytes. our implementation generates a 17 byte array instead.\r\n        const fidByteArray = new Uint8Array(17);\r\n        const crypto = self.crypto || self.msCrypto;\r\n        crypto.getRandomValues(fidByteArray);\r\n        // Replace the first 4 random bits with the constant FID header of 0b0111.\r\n        fidByteArray[0] = 0b01110000 + (fidByteArray[0] % 0b00010000);\r\n        const fid = encode(fidByteArray);\r\n        return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\r\n    }\r\n    catch (_a) {\r\n        // FID generation errored\r\n        return INVALID_FID;\r\n    }\r\n}\r\n/** Converts a FID Uint8Array to a base64 string representation. */\r\nfunction encode(fidByteArray) {\r\n    const b64String = bufferToBase64UrlSafe(fidByteArray);\r\n    // Remove the 23rd character that was added because of the extra 4 bits at the\r\n    // end of our 17 byte array, and the '=' padding.\r\n    return b64String.substr(0, 22);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a string key that can be used to identify the app. */\r\nfunction getKey(appConfig) {\r\n    return `${appConfig.appName}!${appConfig.appId}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst fidChangeCallbacks = new Map();\r\n/**\r\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\r\n * change to other tabs.\r\n */\r\nfunction fidChanged(appConfig, fid) {\r\n    const key = getKey(appConfig);\r\n    callFidChangeCallbacks(key, fid);\r\n    broadcastFidChange(key, fid);\r\n}\r\nfunction addCallback(appConfig, callback) {\r\n    // Open the broadcast channel if it's not already open,\r\n    // to be able to listen to change events from other tabs.\r\n    getBroadcastChannel();\r\n    const key = getKey(appConfig);\r\n    let callbackSet = fidChangeCallbacks.get(key);\r\n    if (!callbackSet) {\r\n        callbackSet = new Set();\r\n        fidChangeCallbacks.set(key, callbackSet);\r\n    }\r\n    callbackSet.add(callback);\r\n}\r\nfunction removeCallback(appConfig, callback) {\r\n    const key = getKey(appConfig);\r\n    const callbackSet = fidChangeCallbacks.get(key);\r\n    if (!callbackSet) {\r\n        return;\r\n    }\r\n    callbackSet.delete(callback);\r\n    if (callbackSet.size === 0) {\r\n        fidChangeCallbacks.delete(key);\r\n    }\r\n    // Close broadcast channel if there are no more callbacks.\r\n    closeBroadcastChannel();\r\n}\r\nfunction callFidChangeCallbacks(key, fid) {\r\n    const callbacks = fidChangeCallbacks.get(key);\r\n    if (!callbacks) {\r\n        return;\r\n    }\r\n    for (const callback of callbacks) {\r\n        callback(fid);\r\n    }\r\n}\r\nfunction broadcastFidChange(key, fid) {\r\n    const channel = getBroadcastChannel();\r\n    if (channel) {\r\n        channel.postMessage({ key, fid });\r\n    }\r\n    closeBroadcastChannel();\r\n}\r\nlet broadcastChannel = null;\r\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\r\nfunction getBroadcastChannel() {\r\n    if (!broadcastChannel && 'BroadcastChannel' in self) {\r\n        broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\r\n        broadcastChannel.onmessage = e => {\r\n            callFidChangeCallbacks(e.data.key, e.data.fid);\r\n        };\r\n    }\r\n    return broadcastChannel;\r\n}\r\nfunction closeBroadcastChannel() {\r\n    if (fidChangeCallbacks.size === 0 && broadcastChannel) {\r\n        broadcastChannel.close();\r\n        broadcastChannel = null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DATABASE_NAME = 'firebase-installations-database';\r\nconst DATABASE_VERSION = 1;\r\nconst OBJECT_STORE_NAME = 'firebase-installations-store';\r\nlet dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\r\n            upgrade: (db, oldVersion) => {\r\n                // We don't use 'break' in this switch statement, the fall-through\r\n                // behavior is what we want, because if there are multiple versions between\r\n                // the old version and the current version, we want ALL the migrations\r\n                // that correspond to those versions to run, not only the last one.\r\n                // eslint-disable-next-line default-case\r\n                switch (oldVersion) {\r\n                    case 0:\r\n                        db.createObjectStore(OBJECT_STORE_NAME);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\n/** Assigns or overwrites the record for the given key with the given value. */\r\nasync function set(appConfig, value) {\r\n    const key = getKey(appConfig);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    const objectStore = tx.objectStore(OBJECT_STORE_NAME);\r\n    const oldValue = (await objectStore.get(key));\r\n    await objectStore.put(value, key);\r\n    await tx.done;\r\n    if (!oldValue || oldValue.fid !== value.fid) {\r\n        fidChanged(appConfig, value.fid);\r\n    }\r\n    return value;\r\n}\r\n/** Removes record(s) from the objectStore that match the given key. */\r\nasync function remove(appConfig) {\r\n    const key = getKey(appConfig);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    await tx.objectStore(OBJECT_STORE_NAME).delete(key);\r\n    await tx.done;\r\n}\r\n/**\r\n * Atomically updates a record with the result of updateFn, which gets\r\n * called with the current value. If newValue is undefined, the record is\r\n * deleted instead.\r\n * @return Updated value\r\n */\r\nasync function update(appConfig, updateFn) {\r\n    const key = getKey(appConfig);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    const store = tx.objectStore(OBJECT_STORE_NAME);\r\n    const oldValue = (await store.get(key));\r\n    const newValue = updateFn(oldValue);\r\n    if (newValue === undefined) {\r\n        await store.delete(key);\r\n    }\r\n    else {\r\n        await store.put(newValue, key);\r\n    }\r\n    await tx.done;\r\n    if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\r\n        fidChanged(appConfig, newValue.fid);\r\n    }\r\n    return newValue;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Updates and returns the InstallationEntry from the database.\r\n * Also triggers a registration request if it is necessary and possible.\r\n */\r\nasync function getInstallationEntry(installations) {\r\n    let registrationPromise;\r\n    const installationEntry = await update(installations.appConfig, oldEntry => {\r\n        const installationEntry = updateOrCreateInstallationEntry(oldEntry);\r\n        const entryWithPromise = triggerRegistrationIfNecessary(installations, installationEntry);\r\n        registrationPromise = entryWithPromise.registrationPromise;\r\n        return entryWithPromise.installationEntry;\r\n    });\r\n    if (installationEntry.fid === INVALID_FID) {\r\n        // FID generation failed. Waiting for the FID from the server.\r\n        return { installationEntry: await registrationPromise };\r\n    }\r\n    return {\r\n        installationEntry,\r\n        registrationPromise\r\n    };\r\n}\r\n/**\r\n * Creates a new Installation Entry if one does not exist.\r\n * Also clears timed out pending requests.\r\n */\r\nfunction updateOrCreateInstallationEntry(oldEntry) {\r\n    const entry = oldEntry || {\r\n        fid: generateFid(),\r\n        registrationStatus: 0 /* RequestStatus.NOT_STARTED */\r\n    };\r\n    return clearTimedOutRequest(entry);\r\n}\r\n/**\r\n * If the Firebase Installation is not registered yet, this will trigger the\r\n * registration and return an InProgressInstallationEntry.\r\n *\r\n * If registrationPromise does not exist, the installationEntry is guaranteed\r\n * to be registered.\r\n */\r\nfunction triggerRegistrationIfNecessary(installations, installationEntry) {\r\n    if (installationEntry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n        if (!navigator.onLine) {\r\n            // Registration required but app is offline.\r\n            const registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */));\r\n            return {\r\n                installationEntry,\r\n                registrationPromise: registrationPromiseWithError\r\n            };\r\n        }\r\n        // Try registering. Change status to IN_PROGRESS.\r\n        const inProgressEntry = {\r\n            fid: installationEntry.fid,\r\n            registrationStatus: 1 /* RequestStatus.IN_PROGRESS */,\r\n            registrationTime: Date.now()\r\n        };\r\n        const registrationPromise = registerInstallation(installations, inProgressEntry);\r\n        return { installationEntry: inProgressEntry, registrationPromise };\r\n    }\r\n    else if (installationEntry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n        return {\r\n            installationEntry,\r\n            registrationPromise: waitUntilFidRegistration(installations)\r\n        };\r\n    }\r\n    else {\r\n        return { installationEntry };\r\n    }\r\n}\r\n/** This will be executed only once for each new Firebase Installation. */\r\nasync function registerInstallation(installations, installationEntry) {\r\n    try {\r\n        const registeredInstallationEntry = await createInstallationRequest(installations, installationEntry);\r\n        return set(installations.appConfig, registeredInstallationEntry);\r\n    }\r\n    catch (e) {\r\n        if (isServerError(e) && e.customData.serverCode === 409) {\r\n            // Server returned a \"FID cannot be used\" error.\r\n            // Generate a new ID next time.\r\n            await remove(installations.appConfig);\r\n        }\r\n        else {\r\n            // Registration failed. Set FID as not registered.\r\n            await set(installations.appConfig, {\r\n                fid: installationEntry.fid,\r\n                registrationStatus: 0 /* RequestStatus.NOT_STARTED */\r\n            });\r\n        }\r\n        throw e;\r\n    }\r\n}\r\n/** Call if FID registration is pending in another request. */\r\nasync function waitUntilFidRegistration(installations) {\r\n    // Unfortunately, there is no way of reliably observing when a value in\r\n    // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\r\n    // so we need to poll.\r\n    let entry = await updateInstallationRequest(installations.appConfig);\r\n    while (entry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n        // createInstallation request still in progress.\r\n        await sleep(100);\r\n        entry = await updateInstallationRequest(installations.appConfig);\r\n    }\r\n    if (entry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n        // The request timed out or failed in a different call. Try again.\r\n        const { installationEntry, registrationPromise } = await getInstallationEntry(installations);\r\n        if (registrationPromise) {\r\n            return registrationPromise;\r\n        }\r\n        else {\r\n            // if there is no registrationPromise, entry is registered.\r\n            return installationEntry;\r\n        }\r\n    }\r\n    return entry;\r\n}\r\n/**\r\n * Called only if there is a CreateInstallation request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * CreateInstallation request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\r\nfunction updateInstallationRequest(appConfig) {\r\n    return update(appConfig, oldEntry => {\r\n        if (!oldEntry) {\r\n            throw ERROR_FACTORY.create(\"installation-not-found\" /* ErrorCode.INSTALLATION_NOT_FOUND */);\r\n        }\r\n        return clearTimedOutRequest(oldEntry);\r\n    });\r\n}\r\nfunction clearTimedOutRequest(entry) {\r\n    if (hasInstallationRequestTimedOut(entry)) {\r\n        return {\r\n            fid: entry.fid,\r\n            registrationStatus: 0 /* RequestStatus.NOT_STARTED */\r\n        };\r\n    }\r\n    return entry;\r\n}\r\nfunction hasInstallationRequestTimedOut(installationEntry) {\r\n    return (installationEntry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */ &&\r\n        installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now());\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function generateAuthTokenRequest({ appConfig, heartbeatServiceProvider }, installationEntry) {\r\n    const endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\r\n    const headers = getHeadersWithAuth(appConfig, installationEntry);\r\n    // If heartbeat service exists, add the heartbeat string to the header.\r\n    const heartbeatService = heartbeatServiceProvider.getImmediate({\r\n        optional: true\r\n    });\r\n    if (heartbeatService) {\r\n        const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\r\n        if (heartbeatsHeader) {\r\n            headers.append('x-firebase-client', heartbeatsHeader);\r\n        }\r\n    }\r\n    const body = {\r\n        installation: {\r\n            sdkVersion: PACKAGE_VERSION,\r\n            appId: appConfig.appId\r\n        }\r\n    };\r\n    const request = {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n    };\r\n    const response = await retryIfServerError(() => fetch(endpoint, request));\r\n    if (response.ok) {\r\n        const responseValue = await response.json();\r\n        const completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\r\n        return completedAuthToken;\r\n    }\r\n    else {\r\n        throw await getErrorFromResponse('Generate Auth Token', response);\r\n    }\r\n}\r\nfunction getGenerateAuthTokenEndpoint(appConfig, { fid }) {\r\n    return `${getInstallationsEndpoint(appConfig)}/${fid}/authTokens:generate`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a valid authentication token for the installation. Generates a new\r\n * token if one doesn't exist, is expired or about to expire.\r\n *\r\n * Should only be called if the Firebase Installation is registered.\r\n */\r\nasync function refreshAuthToken(installations, forceRefresh = false) {\r\n    let tokenPromise;\r\n    const entry = await update(installations.appConfig, oldEntry => {\r\n        if (!isEntryRegistered(oldEntry)) {\r\n            throw ERROR_FACTORY.create(\"not-registered\" /* ErrorCode.NOT_REGISTERED */);\r\n        }\r\n        const oldAuthToken = oldEntry.authToken;\r\n        if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\r\n            // There is a valid token in the DB.\r\n            return oldEntry;\r\n        }\r\n        else if (oldAuthToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n            // There already is a token request in progress.\r\n            tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\r\n            return oldEntry;\r\n        }\r\n        else {\r\n            // No token or token expired.\r\n            if (!navigator.onLine) {\r\n                throw ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */);\r\n            }\r\n            const inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\r\n            tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\r\n            return inProgressEntry;\r\n        }\r\n    });\r\n    const authToken = tokenPromise\r\n        ? await tokenPromise\r\n        : entry.authToken;\r\n    return authToken;\r\n}\r\n/**\r\n * Call only if FID is registered and Auth Token request is in progress.\r\n *\r\n * Waits until the current pending request finishes. If the request times out,\r\n * tries once in this thread as well.\r\n */\r\nasync function waitUntilAuthTokenRequest(installations, forceRefresh) {\r\n    // Unfortunately, there is no way of reliably observing when a value in\r\n    // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\r\n    // so we need to poll.\r\n    let entry = await updateAuthTokenRequest(installations.appConfig);\r\n    while (entry.authToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n        // generateAuthToken still in progress.\r\n        await sleep(100);\r\n        entry = await updateAuthTokenRequest(installations.appConfig);\r\n    }\r\n    const authToken = entry.authToken;\r\n    if (authToken.requestStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n        // The request timed out or failed in a different call. Try again.\r\n        return refreshAuthToken(installations, forceRefresh);\r\n    }\r\n    else {\r\n        return authToken;\r\n    }\r\n}\r\n/**\r\n * Called only if there is a GenerateAuthToken request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * GenerateAuthToken request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\r\nfunction updateAuthTokenRequest(appConfig) {\r\n    return update(appConfig, oldEntry => {\r\n        if (!isEntryRegistered(oldEntry)) {\r\n            throw ERROR_FACTORY.create(\"not-registered\" /* ErrorCode.NOT_REGISTERED */);\r\n        }\r\n        const oldAuthToken = oldEntry.authToken;\r\n        if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\r\n            return Object.assign(Object.assign({}, oldEntry), { authToken: { requestStatus: 0 /* RequestStatus.NOT_STARTED */ } });\r\n        }\r\n        return oldEntry;\r\n    });\r\n}\r\nasync function fetchAuthTokenFromServer(installations, installationEntry) {\r\n    try {\r\n        const authToken = await generateAuthTokenRequest(installations, installationEntry);\r\n        const updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), { authToken });\r\n        await set(installations.appConfig, updatedInstallationEntry);\r\n        return authToken;\r\n    }\r\n    catch (e) {\r\n        if (isServerError(e) &&\r\n            (e.customData.serverCode === 401 || e.customData.serverCode === 404)) {\r\n            // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\r\n            // Generate a new ID next time.\r\n            await remove(installations.appConfig);\r\n        }\r\n        else {\r\n            const updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), { authToken: { requestStatus: 0 /* RequestStatus.NOT_STARTED */ } });\r\n            await set(installations.appConfig, updatedInstallationEntry);\r\n        }\r\n        throw e;\r\n    }\r\n}\r\nfunction isEntryRegistered(installationEntry) {\r\n    return (installationEntry !== undefined &&\r\n        installationEntry.registrationStatus === 2 /* RequestStatus.COMPLETED */);\r\n}\r\nfunction isAuthTokenValid(authToken) {\r\n    return (authToken.requestStatus === 2 /* RequestStatus.COMPLETED */ &&\r\n        !isAuthTokenExpired(authToken));\r\n}\r\nfunction isAuthTokenExpired(authToken) {\r\n    const now = Date.now();\r\n    return (now < authToken.creationTime ||\r\n        authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER);\r\n}\r\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\r\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\r\n    const inProgressAuthToken = {\r\n        requestStatus: 1 /* RequestStatus.IN_PROGRESS */,\r\n        requestTime: Date.now()\r\n    };\r\n    return Object.assign(Object.assign({}, oldEntry), { authToken: inProgressAuthToken });\r\n}\r\nfunction hasAuthTokenRequestTimedOut(authToken) {\r\n    return (authToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */ &&\r\n        authToken.requestTime + PENDING_TIMEOUT_MS < Date.now());\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Creates a Firebase Installation if there isn't one for the app and\r\n * returns the Installation ID.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\r\nasync function getId(installations) {\r\n    const installationsImpl = installations;\r\n    const { installationEntry, registrationPromise } = await getInstallationEntry(installationsImpl);\r\n    if (registrationPromise) {\r\n        registrationPromise.catch(console.error);\r\n    }\r\n    else {\r\n        // If the installation is already registered, update the authentication\r\n        // token if needed.\r\n        refreshAuthToken(installationsImpl).catch(console.error);\r\n    }\r\n    return installationEntry.fid;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a Firebase Installations auth token, identifying the current\r\n * Firebase Installation.\r\n * @param installations - The `Installations` instance.\r\n * @param forceRefresh - Force refresh regardless of token expiration.\r\n *\r\n * @public\r\n */\r\nasync function getToken(installations, forceRefresh = false) {\r\n    const installationsImpl = installations;\r\n    await completeInstallationRegistration(installationsImpl);\r\n    // At this point we either have a Registered Installation in the DB, or we've\r\n    // already thrown an error.\r\n    const authToken = await refreshAuthToken(installationsImpl, forceRefresh);\r\n    return authToken.token;\r\n}\r\nasync function completeInstallationRegistration(installations) {\r\n    const { registrationPromise } = await getInstallationEntry(installations);\r\n    if (registrationPromise) {\r\n        // A createInstallation request is in progress. Wait until it finishes.\r\n        await registrationPromise;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function deleteInstallationRequest(appConfig, installationEntry) {\r\n    const endpoint = getDeleteEndpoint(appConfig, installationEntry);\r\n    const headers = getHeadersWithAuth(appConfig, installationEntry);\r\n    const request = {\r\n        method: 'DELETE',\r\n        headers\r\n    };\r\n    const response = await retryIfServerError(() => fetch(endpoint, request));\r\n    if (!response.ok) {\r\n        throw await getErrorFromResponse('Delete Installation', response);\r\n    }\r\n}\r\nfunction getDeleteEndpoint(appConfig, { fid }) {\r\n    return `${getInstallationsEndpoint(appConfig)}/${fid}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Deletes the Firebase Installation and all associated data.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\r\nasync function deleteInstallations(installations) {\r\n    const { appConfig } = installations;\r\n    const entry = await update(appConfig, oldEntry => {\r\n        if (oldEntry && oldEntry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n            // Delete the unregistered entry without sending a deleteInstallation request.\r\n            return undefined;\r\n        }\r\n        return oldEntry;\r\n    });\r\n    if (entry) {\r\n        if (entry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n            // Can't delete while trying to register.\r\n            throw ERROR_FACTORY.create(\"delete-pending-registration\" /* ErrorCode.DELETE_PENDING_REGISTRATION */);\r\n        }\r\n        else if (entry.registrationStatus === 2 /* RequestStatus.COMPLETED */) {\r\n            if (!navigator.onLine) {\r\n                throw ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */);\r\n            }\r\n            else {\r\n                await deleteInstallationRequest(appConfig, entry);\r\n                await remove(appConfig);\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Sets a new callback that will get called when Installation ID changes.\r\n * Returns an unsubscribe function that will remove the callback when called.\r\n * @param installations - The `Installations` instance.\r\n * @param callback - The callback function that is invoked when FID changes.\r\n * @returns A function that can be called to unsubscribe.\r\n *\r\n * @public\r\n */\r\nfunction onIdChange(installations, callback) {\r\n    const { appConfig } = installations;\r\n    addCallback(appConfig, callback);\r\n    return () => {\r\n        removeCallback(appConfig, callback);\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns an instance of {@link Installations} associated with the given\r\n * {@link @firebase/app#FirebaseApp} instance.\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * @public\r\n */\r\nfunction getInstallations(app = getApp()) {\r\n    const installationsImpl = _getProvider(app, 'installations').getImmediate();\r\n    return installationsImpl;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction extractAppConfig(app) {\r\n    if (!app || !app.options) {\r\n        throw getMissingValueError('App Configuration');\r\n    }\r\n    if (!app.name) {\r\n        throw getMissingValueError('App Name');\r\n    }\r\n    // Required app config keys\r\n    const configKeys = [\r\n        'projectId',\r\n        'apiKey',\r\n        'appId'\r\n    ];\r\n    for (const keyName of configKeys) {\r\n        if (!app.options[keyName]) {\r\n            throw getMissingValueError(keyName);\r\n        }\r\n    }\r\n    return {\r\n        appName: app.name,\r\n        projectId: app.options.projectId,\r\n        apiKey: app.options.apiKey,\r\n        appId: app.options.appId\r\n    };\r\n}\r\nfunction getMissingValueError(valueName) {\r\n    return ERROR_FACTORY.create(\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */, {\r\n        valueName\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst INSTALLATIONS_NAME = 'installations';\r\nconst INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\r\nconst publicFactory = (container) => {\r\n    const app = container.getProvider('app').getImmediate();\r\n    // Throws if app isn't configured properly.\r\n    const appConfig = extractAppConfig(app);\r\n    const heartbeatServiceProvider = _getProvider(app, 'heartbeat');\r\n    const installationsImpl = {\r\n        app,\r\n        appConfig,\r\n        heartbeatServiceProvider,\r\n        _delete: () => Promise.resolve()\r\n    };\r\n    return installationsImpl;\r\n};\r\nconst internalFactory = (container) => {\r\n    const app = container.getProvider('app').getImmediate();\r\n    // Internal FIS instance relies on public FIS instance.\r\n    const installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\r\n    const installationsInternal = {\r\n        getId: () => getId(installations),\r\n        getToken: (forceRefresh) => getToken(installations, forceRefresh)\r\n    };\r\n    return installationsInternal;\r\n};\r\nfunction registerInstallations() {\r\n    _registerComponent(new Component(INSTALLATIONS_NAME, publicFactory, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n    _registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL, internalFactory, \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n}\n\n/**\r\n * The Firebase Installations Web SDK.\r\n * This SDK does not work in a Node.js environment.\r\n *\r\n * @packageDocumentation\r\n */\r\nregisterInstallations();\r\nregisterVersion(name, version);\r\n// BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\nregisterVersion(name, version, 'esm2017');\n\nexport { deleteInstallations, getId, getInstallations, getToken, onIdChange };\n//# sourceMappingURL=index.esm2017.js.map\n","import { _getProvider, getApp, _registerComponent, registerVersion } from '@firebase/app';\nimport { Logger } from '@firebase/logger';\nimport { ErrorFactory, calculateBackoffMillis, FirebaseError, isIndexedDBAvailable, validateIndexedDBOpenable, isBrowserExtension, areCookiesEnabled, getModularInstance, deepEqual } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport '@firebase/installations';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Analytics.\r\n */\r\nconst ANALYTICS_TYPE = 'analytics';\r\n// Key to attach FID to in gtag params.\r\nconst GA_FID_KEY = 'firebase_id';\r\nconst ORIGIN_KEY = 'origin';\r\nconst FETCH_TIMEOUT_MILLIS = 60 * 1000;\r\nconst DYNAMIC_CONFIG_URL = 'https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig';\r\nconst GTAG_URL = 'https://www.googletagmanager.com/gtag/js';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logger = new Logger('@firebase/analytics');\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERRORS = {\r\n    [\"already-exists\" /* AnalyticsError.ALREADY_EXISTS */]: 'A Firebase Analytics instance with the appId {$id} ' +\r\n        ' already exists. ' +\r\n        'Only one Firebase Analytics instance can be created for each appId.',\r\n    [\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */]: 'initializeAnalytics() cannot be called again with different options than those ' +\r\n        'it was initially called with. It can be called again with the same options to ' +\r\n        'return the existing instance, or getAnalytics() can be used ' +\r\n        'to get a reference to the already-initialized instance.',\r\n    [\"already-initialized-settings\" /* AnalyticsError.ALREADY_INITIALIZED_SETTINGS */]: 'Firebase Analytics has already been initialized.' +\r\n        'settings() must be called before initializing any Analytics instance' +\r\n        'or it will have no effect.',\r\n    [\"interop-component-reg-failed\" /* AnalyticsError.INTEROP_COMPONENT_REG_FAILED */]: 'Firebase Analytics Interop Component failed to instantiate: {$reason}',\r\n    [\"invalid-analytics-context\" /* AnalyticsError.INVALID_ANALYTICS_CONTEXT */]: 'Firebase Analytics is not supported in this environment. ' +\r\n        'Wrap initialization of analytics in analytics.isSupported() ' +\r\n        'to prevent initialization in unsupported environments. Details: {$errorInfo}',\r\n    [\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */]: 'IndexedDB unavailable or restricted in this environment. ' +\r\n        'Wrap initialization of analytics in analytics.isSupported() ' +\r\n        'to prevent initialization in unsupported environments. Details: {$errorInfo}',\r\n    [\"fetch-throttle\" /* AnalyticsError.FETCH_THROTTLE */]: 'The config fetch request timed out while in an exponential backoff state.' +\r\n        ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\r\n    [\"config-fetch-failed\" /* AnalyticsError.CONFIG_FETCH_FAILED */]: 'Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}',\r\n    [\"no-api-key\" /* AnalyticsError.NO_API_KEY */]: 'The \"apiKey\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\r\n        'contain a valid API key.',\r\n    [\"no-app-id\" /* AnalyticsError.NO_APP_ID */]: 'The \"appId\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\r\n        'contain a valid app ID.',\r\n    [\"no-client-id\" /* AnalyticsError.NO_CLIENT_ID */]: 'The \"client_id\" field is empty.',\r\n    [\"invalid-gtag-resource\" /* AnalyticsError.INVALID_GTAG_RESOURCE */]: 'Trusted Types detected an invalid gtag resource: {$gtagURL}.'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('analytics', 'Analytics', ERRORS);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Verifies and creates a TrustedScriptURL.\r\n */\r\nfunction createGtagTrustedTypesScriptURL(url) {\r\n    if (!url.startsWith(GTAG_URL)) {\r\n        const err = ERROR_FACTORY.create(\"invalid-gtag-resource\" /* AnalyticsError.INVALID_GTAG_RESOURCE */, {\r\n            gtagURL: url\r\n        });\r\n        logger.warn(err.message);\r\n        return '';\r\n    }\r\n    return url;\r\n}\r\n/**\r\n * Makeshift polyfill for Promise.allSettled(). Resolves when all promises\r\n * have either resolved or rejected.\r\n *\r\n * @param promises Array of promises to wait for.\r\n */\r\nfunction promiseAllSettled(promises) {\r\n    return Promise.all(promises.map(promise => promise.catch(e => e)));\r\n}\r\n/**\r\n * Creates a TrustedTypePolicy object that implements the rules passed as policyOptions.\r\n *\r\n * @param policyName A string containing the name of the policy\r\n * @param policyOptions Object containing implementations of instance methods for TrustedTypesPolicy, see {@link https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy#instance_methods\r\n * | the TrustedTypePolicy reference documentation}.\r\n */\r\nfunction createTrustedTypesPolicy(policyName, policyOptions) {\r\n    // Create a TrustedTypes policy that we can use for updating src\r\n    // properties\r\n    let trustedTypesPolicy;\r\n    if (window.trustedTypes) {\r\n        trustedTypesPolicy = window.trustedTypes.createPolicy(policyName, policyOptions);\r\n    }\r\n    return trustedTypesPolicy;\r\n}\r\n/**\r\n * Inserts gtag script tag into the page to asynchronously download gtag.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\r\n */\r\nfunction insertScriptTag(dataLayerName, measurementId) {\r\n    const trustedTypesPolicy = createTrustedTypesPolicy('firebase-js-sdk-policy', {\r\n        createScriptURL: createGtagTrustedTypesScriptURL\r\n    });\r\n    const script = document.createElement('script');\r\n    // We are not providing an analyticsId in the URL because it would trigger a `page_view`\r\n    // without fid. We will initialize ga-id using gtag (config) command together with fid.\r\n    const gtagScriptURL = `${GTAG_URL}?l=${dataLayerName}&id=${measurementId}`;\r\n    script.src = trustedTypesPolicy\r\n        ? trustedTypesPolicy === null || trustedTypesPolicy === void 0 ? void 0 : trustedTypesPolicy.createScriptURL(gtagScriptURL)\r\n        : gtagScriptURL;\r\n    script.async = true;\r\n    document.head.appendChild(script);\r\n}\r\n/**\r\n * Get reference to, or create, global datalayer.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\r\n */\r\nfunction getOrCreateDataLayer(dataLayerName) {\r\n    // Check for existing dataLayer and create if needed.\r\n    let dataLayer = [];\r\n    if (Array.isArray(window[dataLayerName])) {\r\n        dataLayer = window[dataLayerName];\r\n    }\r\n    else {\r\n        window[dataLayerName] = dataLayer;\r\n    }\r\n    return dataLayer;\r\n}\r\n/**\r\n * Wrapped gtag logic when gtag is called with 'config' command.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n * @param measurementId GA Measurement ID to set config for.\r\n * @param gtagParams Gtag config params to set.\r\n */\r\nasync function gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams) {\r\n    // If config is already fetched, we know the appId and can use it to look up what FID promise we\r\n    /// are waiting for, and wait only on that one.\r\n    const correspondingAppId = measurementIdToAppId[measurementId];\r\n    try {\r\n        if (correspondingAppId) {\r\n            await initializationPromisesMap[correspondingAppId];\r\n        }\r\n        else {\r\n            // If config is not fetched yet, wait for all configs (we don't know which one we need) and\r\n            // find the appId (if any) corresponding to this measurementId. If there is one, wait on\r\n            // that appId's initialization promise. If there is none, promise resolves and gtag\r\n            // call goes through.\r\n            const dynamicConfigResults = await promiseAllSettled(dynamicConfigPromisesList);\r\n            const foundConfig = dynamicConfigResults.find(config => config.measurementId === measurementId);\r\n            if (foundConfig) {\r\n                await initializationPromisesMap[foundConfig.appId];\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        logger.error(e);\r\n    }\r\n    gtagCore(\"config\" /* GtagCommand.CONFIG */, measurementId, gtagParams);\r\n}\r\n/**\r\n * Wrapped gtag logic when gtag is called with 'event' command.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementId GA Measurement ID to log event to.\r\n * @param gtagParams Params to log with this event.\r\n */\r\nasync function gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams) {\r\n    try {\r\n        let initializationPromisesToWaitFor = [];\r\n        // If there's a 'send_to' param, check if any ID specified matches\r\n        // an initializeIds() promise we are waiting for.\r\n        if (gtagParams && gtagParams['send_to']) {\r\n            let gaSendToList = gtagParams['send_to'];\r\n            // Make it an array if is isn't, so it can be dealt with the same way.\r\n            if (!Array.isArray(gaSendToList)) {\r\n                gaSendToList = [gaSendToList];\r\n            }\r\n            // Checking 'send_to' fields requires having all measurement ID results back from\r\n            // the dynamic config fetch.\r\n            const dynamicConfigResults = await promiseAllSettled(dynamicConfigPromisesList);\r\n            for (const sendToId of gaSendToList) {\r\n                // Any fetched dynamic measurement ID that matches this 'send_to' ID\r\n                const foundConfig = dynamicConfigResults.find(config => config.measurementId === sendToId);\r\n                const initializationPromise = foundConfig && initializationPromisesMap[foundConfig.appId];\r\n                if (initializationPromise) {\r\n                    initializationPromisesToWaitFor.push(initializationPromise);\r\n                }\r\n                else {\r\n                    // Found an item in 'send_to' that is not associated\r\n                    // directly with an FID, possibly a group.  Empty this array,\r\n                    // exit the loop early, and let it get populated below.\r\n                    initializationPromisesToWaitFor = [];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // This will be unpopulated if there was no 'send_to' field , or\r\n        // if not all entries in the 'send_to' field could be mapped to\r\n        // a FID. In these cases, wait on all pending initialization promises.\r\n        if (initializationPromisesToWaitFor.length === 0) {\r\n            /* eslint-disable-next-line @typescript-eslint/no-floating-promises */\r\n            initializationPromisesToWaitFor = Object.values(initializationPromisesMap);\r\n        }\r\n        // Run core gtag function with args after all relevant initialization\r\n        // promises have been resolved.\r\n        await Promise.all(initializationPromisesToWaitFor);\r\n        // Workaround for http://b/141370449 - third argument cannot be undefined.\r\n        gtagCore(\"event\" /* GtagCommand.EVENT */, measurementId, gtagParams || {});\r\n    }\r\n    catch (e) {\r\n        logger.error(e);\r\n    }\r\n}\r\n/**\r\n * Wraps a standard gtag function with extra code to wait for completion of\r\n * relevant initialization promises before sending requests.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n */\r\nfunction wrapGtag(gtagCore, \r\n/**\r\n * Allows wrapped gtag calls to wait on whichever initialization promises are required,\r\n * depending on the contents of the gtag params' `send_to` field, if any.\r\n */\r\ninitializationPromisesMap, \r\n/**\r\n * Wrapped gtag calls sometimes require all dynamic config fetches to have returned\r\n * before determining what initialization promises (which include FIDs) to wait for.\r\n */\r\ndynamicConfigPromisesList, \r\n/**\r\n * Wrapped gtag config calls can narrow down which initialization promise (with FID)\r\n * to wait for if the measurementId is already fetched, by getting the corresponding appId,\r\n * which is the key for the initialization promises map.\r\n */\r\nmeasurementIdToAppId) {\r\n    /**\r\n     * Wrapper around gtag that ensures FID is sent with gtag calls.\r\n     * @param command Gtag command type.\r\n     * @param idOrNameOrParams Measurement ID if command is EVENT/CONFIG, params if command is SET.\r\n     * @param gtagParams Params if event is EVENT/CONFIG.\r\n     */\r\n    async function gtagWrapper(command, ...args) {\r\n        try {\r\n            // If event, check that relevant initialization promises have completed.\r\n            if (command === \"event\" /* GtagCommand.EVENT */) {\r\n                const [measurementId, gtagParams] = args;\r\n                // If EVENT, second arg must be measurementId.\r\n                await gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams);\r\n            }\r\n            else if (command === \"config\" /* GtagCommand.CONFIG */) {\r\n                const [measurementId, gtagParams] = args;\r\n                // If CONFIG, second arg must be measurementId.\r\n                await gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams);\r\n            }\r\n            else if (command === \"consent\" /* GtagCommand.CONSENT */) {\r\n                const [consentAction, gtagParams] = args;\r\n                // consentAction can be one of 'default' or 'update'.\r\n                gtagCore(\"consent\" /* GtagCommand.CONSENT */, consentAction, gtagParams);\r\n            }\r\n            else if (command === \"get\" /* GtagCommand.GET */) {\r\n                const [measurementId, fieldName, callback] = args;\r\n                gtagCore(\"get\" /* GtagCommand.GET */, measurementId, fieldName, callback);\r\n            }\r\n            else if (command === \"set\" /* GtagCommand.SET */) {\r\n                const [customParams] = args;\r\n                // If SET, second arg must be params.\r\n                gtagCore(\"set\" /* GtagCommand.SET */, customParams);\r\n            }\r\n            else {\r\n                gtagCore(command, ...args);\r\n            }\r\n        }\r\n        catch (e) {\r\n            logger.error(e);\r\n        }\r\n    }\r\n    return gtagWrapper;\r\n}\r\n/**\r\n * Creates global gtag function or wraps existing one if found.\r\n * This wrapped function attaches Firebase instance ID (FID) to gtag 'config' and\r\n * 'event' calls that belong to the GAID associated with this Firebase instance.\r\n *\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n * @param dataLayerName Name of global GA datalayer array.\r\n * @param gtagFunctionName Name of global gtag function (\"gtag\" if not user-specified).\r\n */\r\nfunction wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagFunctionName) {\r\n    // Create a basic core gtag function\r\n    let gtagCore = function (..._args) {\r\n        // Must push IArguments object, not an array.\r\n        window[dataLayerName].push(arguments);\r\n    };\r\n    // Replace it with existing one if found\r\n    if (window[gtagFunctionName] &&\r\n        typeof window[gtagFunctionName] === 'function') {\r\n        // @ts-ignore\r\n        gtagCore = window[gtagFunctionName];\r\n    }\r\n    window[gtagFunctionName] = wrapGtag(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId);\r\n    return {\r\n        gtagCore,\r\n        wrappedGtag: window[gtagFunctionName]\r\n    };\r\n}\r\n/**\r\n * Returns the script tag in the DOM matching both the gtag url pattern\r\n * and the provided data layer name.\r\n */\r\nfunction findGtagScriptOnPage(dataLayerName) {\r\n    const scriptTags = window.document.getElementsByTagName('script');\r\n    for (const tag of Object.values(scriptTags)) {\r\n        if (tag.src &&\r\n            tag.src.includes(GTAG_URL) &&\r\n            tag.src.includes(dataLayerName)) {\r\n            return tag;\r\n        }\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Backoff factor for 503 errors, which we want to be conservative about\r\n * to avoid overloading servers. Each retry interval will be\r\n * BASE_INTERVAL_MILLIS * LONG_RETRY_FACTOR ^ retryCount, so the second one\r\n * will be ~30 seconds (with fuzzing).\r\n */\r\nconst LONG_RETRY_FACTOR = 30;\r\n/**\r\n * Base wait interval to multiplied by backoffFactor^backoffCount.\r\n */\r\nconst BASE_INTERVAL_MILLIS = 1000;\r\n/**\r\n * Stubbable retry data storage class.\r\n */\r\nclass RetryData {\r\n    constructor(throttleMetadata = {}, intervalMillis = BASE_INTERVAL_MILLIS) {\r\n        this.throttleMetadata = throttleMetadata;\r\n        this.intervalMillis = intervalMillis;\r\n    }\r\n    getThrottleMetadata(appId) {\r\n        return this.throttleMetadata[appId];\r\n    }\r\n    setThrottleMetadata(appId, metadata) {\r\n        this.throttleMetadata[appId] = metadata;\r\n    }\r\n    deleteThrottleMetadata(appId) {\r\n        delete this.throttleMetadata[appId];\r\n    }\r\n}\r\nconst defaultRetryData = new RetryData();\r\n/**\r\n * Set GET request headers.\r\n * @param apiKey App API key.\r\n */\r\nfunction getHeaders(apiKey) {\r\n    return new Headers({\r\n        Accept: 'application/json',\r\n        'x-goog-api-key': apiKey\r\n    });\r\n}\r\n/**\r\n * Fetches dynamic config from backend.\r\n * @param app Firebase app to fetch config for.\r\n */\r\nasync function fetchDynamicConfig(appFields) {\r\n    var _a;\r\n    const { appId, apiKey } = appFields;\r\n    const request = {\r\n        method: 'GET',\r\n        headers: getHeaders(apiKey)\r\n    };\r\n    const appUrl = DYNAMIC_CONFIG_URL.replace('{app-id}', appId);\r\n    const response = await fetch(appUrl, request);\r\n    if (response.status !== 200 && response.status !== 304) {\r\n        let errorMessage = '';\r\n        try {\r\n            // Try to get any error message text from server response.\r\n            const jsonResponse = (await response.json());\r\n            if ((_a = jsonResponse.error) === null || _a === void 0 ? void 0 : _a.message) {\r\n                errorMessage = jsonResponse.error.message;\r\n            }\r\n        }\r\n        catch (_ignored) { }\r\n        throw ERROR_FACTORY.create(\"config-fetch-failed\" /* AnalyticsError.CONFIG_FETCH_FAILED */, {\r\n            httpStatus: response.status,\r\n            responseMessage: errorMessage\r\n        });\r\n    }\r\n    return response.json();\r\n}\r\n/**\r\n * Fetches dynamic config from backend, retrying if failed.\r\n * @param app Firebase app to fetch config for.\r\n */\r\nasync function fetchDynamicConfigWithRetry(app, \r\n// retryData and timeoutMillis are parameterized to allow passing a different value for testing.\r\nretryData = defaultRetryData, timeoutMillis) {\r\n    const { appId, apiKey, measurementId } = app.options;\r\n    if (!appId) {\r\n        throw ERROR_FACTORY.create(\"no-app-id\" /* AnalyticsError.NO_APP_ID */);\r\n    }\r\n    if (!apiKey) {\r\n        if (measurementId) {\r\n            return {\r\n                measurementId,\r\n                appId\r\n            };\r\n        }\r\n        throw ERROR_FACTORY.create(\"no-api-key\" /* AnalyticsError.NO_API_KEY */);\r\n    }\r\n    const throttleMetadata = retryData.getThrottleMetadata(appId) || {\r\n        backoffCount: 0,\r\n        throttleEndTimeMillis: Date.now()\r\n    };\r\n    const signal = new AnalyticsAbortSignal();\r\n    setTimeout(async () => {\r\n        // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\r\n        signal.abort();\r\n    }, timeoutMillis !== undefined ? timeoutMillis : FETCH_TIMEOUT_MILLIS);\r\n    return attemptFetchDynamicConfigWithRetry({ appId, apiKey, measurementId }, throttleMetadata, signal, retryData);\r\n}\r\n/**\r\n * Runs one retry attempt.\r\n * @param appFields Necessary app config fields.\r\n * @param throttleMetadata Ongoing metadata to determine throttling times.\r\n * @param signal Abort signal.\r\n */\r\nasync function attemptFetchDynamicConfigWithRetry(appFields, { throttleEndTimeMillis, backoffCount }, signal, retryData = defaultRetryData // for testing\r\n) {\r\n    var _a;\r\n    const { appId, measurementId } = appFields;\r\n    // Starts with a (potentially zero) timeout to support resumption from stored state.\r\n    // Ensures the throttle end time is honored if the last attempt timed out.\r\n    // Note the SDK will never make a request if the fetch timeout expires at this point.\r\n    try {\r\n        await setAbortableTimeout(signal, throttleEndTimeMillis);\r\n    }\r\n    catch (e) {\r\n        if (measurementId) {\r\n            logger.warn(`Timed out fetching this Firebase app's measurement ID from the server.` +\r\n                ` Falling back to the measurement ID ${measurementId}` +\r\n                ` provided in the \"measurementId\" field in the local Firebase config. [${e === null || e === void 0 ? void 0 : e.message}]`);\r\n            return { appId, measurementId };\r\n        }\r\n        throw e;\r\n    }\r\n    try {\r\n        const response = await fetchDynamicConfig(appFields);\r\n        // Note the SDK only clears throttle state if response is success or non-retriable.\r\n        retryData.deleteThrottleMetadata(appId);\r\n        return response;\r\n    }\r\n    catch (e) {\r\n        const error = e;\r\n        if (!isRetriableError(error)) {\r\n            retryData.deleteThrottleMetadata(appId);\r\n            if (measurementId) {\r\n                logger.warn(`Failed to fetch this Firebase app's measurement ID from the server.` +\r\n                    ` Falling back to the measurement ID ${measurementId}` +\r\n                    ` provided in the \"measurementId\" field in the local Firebase config. [${error === null || error === void 0 ? void 0 : error.message}]`);\r\n                return { appId, measurementId };\r\n            }\r\n            else {\r\n                throw e;\r\n            }\r\n        }\r\n        const backoffMillis = Number((_a = error === null || error === void 0 ? void 0 : error.customData) === null || _a === void 0 ? void 0 : _a.httpStatus) === 503\r\n            ? calculateBackoffMillis(backoffCount, retryData.intervalMillis, LONG_RETRY_FACTOR)\r\n            : calculateBackoffMillis(backoffCount, retryData.intervalMillis);\r\n        // Increments backoff state.\r\n        const throttleMetadata = {\r\n            throttleEndTimeMillis: Date.now() + backoffMillis,\r\n            backoffCount: backoffCount + 1\r\n        };\r\n        // Persists state.\r\n        retryData.setThrottleMetadata(appId, throttleMetadata);\r\n        logger.debug(`Calling attemptFetch again in ${backoffMillis} millis`);\r\n        return attemptFetchDynamicConfigWithRetry(appFields, throttleMetadata, signal, retryData);\r\n    }\r\n}\r\n/**\r\n * Supports waiting on a backoff by:\r\n *\r\n * <ul>\r\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\r\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\r\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\r\n *       request appear the same.</li>\r\n * </ul>\r\n *\r\n * <p>Visible for testing.\r\n */\r\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\r\n    return new Promise((resolve, reject) => {\r\n        // Derives backoff from given end time, normalizing negative numbers to zero.\r\n        const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\r\n        const timeout = setTimeout(resolve, backoffMillis);\r\n        // Adds listener, rather than sets onabort, because signal is a shared object.\r\n        signal.addEventListener(() => {\r\n            clearTimeout(timeout);\r\n            // If the request completes before this timeout, the rejection has no effect.\r\n            reject(ERROR_FACTORY.create(\"fetch-throttle\" /* AnalyticsError.FETCH_THROTTLE */, {\r\n                throttleEndTimeMillis\r\n            }));\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\r\n */\r\nfunction isRetriableError(e) {\r\n    if (!(e instanceof FirebaseError) || !e.customData) {\r\n        return false;\r\n    }\r\n    // Uses string index defined by ErrorData, which FirebaseError implements.\r\n    const httpStatus = Number(e.customData['httpStatus']);\r\n    return (httpStatus === 429 ||\r\n        httpStatus === 500 ||\r\n        httpStatus === 503 ||\r\n        httpStatus === 504);\r\n}\r\n/**\r\n * Shims a minimal AbortSignal (copied from Remote Config).\r\n *\r\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\r\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\r\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\r\n * swapped out if/when we do.\r\n */\r\nclass AnalyticsAbortSignal {\r\n    constructor() {\r\n        this.listeners = [];\r\n    }\r\n    addEventListener(listener) {\r\n        this.listeners.push(listener);\r\n    }\r\n    abort() {\r\n        this.listeners.forEach(listener => listener());\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Event parameters to set on 'gtag' during initialization.\r\n */\r\nlet defaultEventParametersForInit;\r\n/**\r\n * Logs an analytics event through the Firebase SDK.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param eventName Google Analytics event name, choose from standard list or use a custom string.\r\n * @param eventParams Analytics event parameters.\r\n */\r\nasync function logEvent$1(gtagFunction, initializationPromise, eventName, eventParams, options) {\r\n    if (options && options.global) {\r\n        gtagFunction(\"event\" /* GtagCommand.EVENT */, eventName, eventParams);\r\n        return;\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        const params = Object.assign(Object.assign({}, eventParams), { 'send_to': measurementId });\r\n        gtagFunction(\"event\" /* GtagCommand.EVENT */, eventName, params);\r\n    }\r\n}\r\n/**\r\n * Set screen_name parameter for this Google Analytics ID.\r\n *\r\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\r\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param screenName Screen name string to set.\r\n */\r\nasync function setCurrentScreen$1(gtagFunction, initializationPromise, screenName, options) {\r\n    if (options && options.global) {\r\n        gtagFunction(\"set\" /* GtagCommand.SET */, { 'screen_name': screenName });\r\n        return Promise.resolve();\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\r\n            update: true,\r\n            'screen_name': screenName\r\n        });\r\n    }\r\n}\r\n/**\r\n * Set user_id parameter for this Google Analytics ID.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param id User ID string to set\r\n */\r\nasync function setUserId$1(gtagFunction, initializationPromise, id, options) {\r\n    if (options && options.global) {\r\n        gtagFunction(\"set\" /* GtagCommand.SET */, { 'user_id': id });\r\n        return Promise.resolve();\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\r\n            update: true,\r\n            'user_id': id\r\n        });\r\n    }\r\n}\r\n/**\r\n * Set all other user properties other than user_id and screen_name.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param properties Map of user properties to set\r\n */\r\nasync function setUserProperties$1(gtagFunction, initializationPromise, properties, options) {\r\n    if (options && options.global) {\r\n        const flatProperties = {};\r\n        for (const key of Object.keys(properties)) {\r\n            // use dot notation for merge behavior in gtag.js\r\n            flatProperties[`user_properties.${key}`] = properties[key];\r\n        }\r\n        gtagFunction(\"set\" /* GtagCommand.SET */, flatProperties);\r\n        return Promise.resolve();\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\r\n            update: true,\r\n            'user_properties': properties\r\n        });\r\n    }\r\n}\r\n/**\r\n * Retrieves a unique Google Analytics identifier for the web client.\r\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n */\r\nasync function internalGetGoogleAnalyticsClientId(gtagFunction, initializationPromise) {\r\n    const measurementId = await initializationPromise;\r\n    return new Promise((resolve, reject) => {\r\n        gtagFunction(\"get\" /* GtagCommand.GET */, measurementId, 'client_id', (clientId) => {\r\n            if (!clientId) {\r\n                reject(ERROR_FACTORY.create(\"no-client-id\" /* AnalyticsError.NO_CLIENT_ID */));\r\n            }\r\n            resolve(clientId);\r\n        });\r\n    });\r\n}\r\n/**\r\n * Set whether collection is enabled for this ID.\r\n *\r\n * @param enabled If true, collection is enabled for this ID.\r\n */\r\nasync function setAnalyticsCollectionEnabled$1(initializationPromise, enabled) {\r\n    const measurementId = await initializationPromise;\r\n    window[`ga-disable-${measurementId}`] = !enabled;\r\n}\r\n/**\r\n * Consent parameters to default to during 'gtag' initialization.\r\n */\r\nlet defaultConsentSettingsForInit;\r\n/**\r\n * Sets the variable {@link defaultConsentSettingsForInit} for use in the initialization of\r\n * analytics.\r\n *\r\n * @param consentSettings Maps the applicable end user consent state for gtag.js.\r\n */\r\nfunction _setConsentDefaultForInit(consentSettings) {\r\n    defaultConsentSettingsForInit = consentSettings;\r\n}\r\n/**\r\n * Sets the variable `defaultEventParametersForInit` for use in the initialization of\r\n * analytics.\r\n *\r\n * @param customParams Any custom params the user may pass to gtag.js.\r\n */\r\nfunction _setDefaultEventParametersForInit(customParams) {\r\n    defaultEventParametersForInit = customParams;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function validateIndexedDB() {\r\n    if (!isIndexedDBAvailable()) {\r\n        logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */, {\r\n            errorInfo: 'IndexedDB is not available in this environment.'\r\n        }).message);\r\n        return false;\r\n    }\r\n    else {\r\n        try {\r\n            await validateIndexedDBOpenable();\r\n        }\r\n        catch (e) {\r\n            logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */, {\r\n                errorInfo: e === null || e === void 0 ? void 0 : e.toString()\r\n            }).message);\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Initialize the analytics instance in gtag.js by calling config command with fid.\r\n *\r\n * NOTE: We combine analytics initialization and setting fid together because we want fid to be\r\n * part of the `page_view` event that's sent during the initialization\r\n * @param app Firebase app\r\n * @param gtagCore The gtag function that's not wrapped.\r\n * @param dynamicConfigPromisesList Array of all dynamic config promises.\r\n * @param measurementIdToAppId Maps measurementID to appID.\r\n * @param installations _FirebaseInstallationsInternal instance.\r\n *\r\n * @returns Measurement ID.\r\n */\r\nasync function _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCore, dataLayerName, options) {\r\n    var _a;\r\n    const dynamicConfigPromise = fetchDynamicConfigWithRetry(app);\r\n    // Once fetched, map measurementIds to appId, for ease of lookup in wrapped gtag function.\r\n    dynamicConfigPromise\r\n        .then(config => {\r\n        measurementIdToAppId[config.measurementId] = config.appId;\r\n        if (app.options.measurementId &&\r\n            config.measurementId !== app.options.measurementId) {\r\n            logger.warn(`The measurement ID in the local Firebase config (${app.options.measurementId})` +\r\n                ` does not match the measurement ID fetched from the server (${config.measurementId}).` +\r\n                ` To ensure analytics events are always sent to the correct Analytics property,` +\r\n                ` update the` +\r\n                ` measurement ID field in the local config or remove it from the local config.`);\r\n        }\r\n    })\r\n        .catch(e => logger.error(e));\r\n    // Add to list to track state of all dynamic config promises.\r\n    dynamicConfigPromisesList.push(dynamicConfigPromise);\r\n    const fidPromise = validateIndexedDB().then(envIsValid => {\r\n        if (envIsValid) {\r\n            return installations.getId();\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    });\r\n    const [dynamicConfig, fid] = await Promise.all([\r\n        dynamicConfigPromise,\r\n        fidPromise\r\n    ]);\r\n    // Detect if user has already put the gtag <script> tag on this page with the passed in\r\n    // data layer name.\r\n    if (!findGtagScriptOnPage(dataLayerName)) {\r\n        insertScriptTag(dataLayerName, dynamicConfig.measurementId);\r\n    }\r\n    // Detects if there are consent settings that need to be configured.\r\n    if (defaultConsentSettingsForInit) {\r\n        gtagCore(\"consent\" /* GtagCommand.CONSENT */, 'default', defaultConsentSettingsForInit);\r\n        _setConsentDefaultForInit(undefined);\r\n    }\r\n    // This command initializes gtag.js and only needs to be called once for the entire web app,\r\n    // but since it is idempotent, we can call it multiple times.\r\n    // We keep it together with other initialization logic for better code structure.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    gtagCore('js', new Date());\r\n    // User config added first. We don't want users to accidentally overwrite\r\n    // base Firebase config properties.\r\n    const configProperties = (_a = options === null || options === void 0 ? void 0 : options.config) !== null && _a !== void 0 ? _a : {};\r\n    // guard against developers accidentally setting properties with prefix `firebase_`\r\n    configProperties[ORIGIN_KEY] = 'firebase';\r\n    configProperties.update = true;\r\n    if (fid != null) {\r\n        configProperties[GA_FID_KEY] = fid;\r\n    }\r\n    // It should be the first config command called on this GA-ID\r\n    // Initialize this GA-ID and set FID on it using the gtag config API.\r\n    // Note: This will trigger a page_view event unless 'send_page_view' is set to false in\r\n    // `configProperties`.\r\n    gtagCore(\"config\" /* GtagCommand.CONFIG */, dynamicConfig.measurementId, configProperties);\r\n    // Detects if there is data that will be set on every event logged from the SDK.\r\n    if (defaultEventParametersForInit) {\r\n        gtagCore(\"set\" /* GtagCommand.SET */, defaultEventParametersForInit);\r\n        _setDefaultEventParametersForInit(undefined);\r\n    }\r\n    return dynamicConfig.measurementId;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Analytics Service class.\r\n */\r\nclass AnalyticsService {\r\n    constructor(app) {\r\n        this.app = app;\r\n    }\r\n    _delete() {\r\n        delete initializationPromisesMap[this.app.options.appId];\r\n        return Promise.resolve();\r\n    }\r\n}\r\n/**\r\n * Maps appId to full initialization promise. Wrapped gtag calls must wait on\r\n * all or some of these, depending on the call's `send_to` param and the status\r\n * of the dynamic config fetches (see below).\r\n */\r\nlet initializationPromisesMap = {};\r\n/**\r\n * List of dynamic config fetch promises. In certain cases, wrapped gtag calls\r\n * wait on all these to be complete in order to determine if it can selectively\r\n * wait for only certain initialization (FID) promises or if it must wait for all.\r\n */\r\nlet dynamicConfigPromisesList = [];\r\n/**\r\n * Maps fetched measurementIds to appId. Populated when the app's dynamic config\r\n * fetch completes. If already populated, gtag config calls can use this to\r\n * selectively wait for only this app's initialization promise (FID) instead of all\r\n * initialization promises.\r\n */\r\nconst measurementIdToAppId = {};\r\n/**\r\n * Name for window global data layer array used by GA: defaults to 'dataLayer'.\r\n */\r\nlet dataLayerName = 'dataLayer';\r\n/**\r\n * Name for window global gtag function used by GA: defaults to 'gtag'.\r\n */\r\nlet gtagName = 'gtag';\r\n/**\r\n * Reproduction of standard gtag function or reference to existing\r\n * gtag function on window object.\r\n */\r\nlet gtagCoreFunction;\r\n/**\r\n * Wrapper around gtag function that ensures FID is sent with all\r\n * relevant event and config calls.\r\n */\r\nlet wrappedGtagFunction;\r\n/**\r\n * Flag to ensure page initialization steps (creation or wrapping of\r\n * dataLayer and gtag script) are only run once per page load.\r\n */\r\nlet globalInitDone = false;\r\n/**\r\n * Configures Firebase Analytics to use custom `gtag` or `dataLayer` names.\r\n * Intended to be used if `gtag.js` script has been installed on\r\n * this page independently of Firebase Analytics, and is using non-default\r\n * names for either the `gtag` function or for `dataLayer`.\r\n * Must be called before calling `getAnalytics()` or it won't\r\n * have any effect.\r\n *\r\n * @public\r\n *\r\n * @param options - Custom gtag and dataLayer names.\r\n */\r\nfunction settings(options) {\r\n    if (globalInitDone) {\r\n        throw ERROR_FACTORY.create(\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */);\r\n    }\r\n    if (options.dataLayerName) {\r\n        dataLayerName = options.dataLayerName;\r\n    }\r\n    if (options.gtagName) {\r\n        gtagName = options.gtagName;\r\n    }\r\n}\r\n/**\r\n * Returns true if no environment mismatch is found.\r\n * If environment mismatches are found, throws an INVALID_ANALYTICS_CONTEXT\r\n * error that also lists details for each mismatch found.\r\n */\r\nfunction warnOnBrowserContextMismatch() {\r\n    const mismatchedEnvMessages = [];\r\n    if (isBrowserExtension()) {\r\n        mismatchedEnvMessages.push('This is a browser extension environment.');\r\n    }\r\n    if (!areCookiesEnabled()) {\r\n        mismatchedEnvMessages.push('Cookies are not available.');\r\n    }\r\n    if (mismatchedEnvMessages.length > 0) {\r\n        const details = mismatchedEnvMessages\r\n            .map((message, index) => `(${index + 1}) ${message}`)\r\n            .join(' ');\r\n        const err = ERROR_FACTORY.create(\"invalid-analytics-context\" /* AnalyticsError.INVALID_ANALYTICS_CONTEXT */, {\r\n            errorInfo: details\r\n        });\r\n        logger.warn(err.message);\r\n    }\r\n}\r\n/**\r\n * Analytics instance factory.\r\n * @internal\r\n */\r\nfunction factory(app, installations, options) {\r\n    warnOnBrowserContextMismatch();\r\n    const appId = app.options.appId;\r\n    if (!appId) {\r\n        throw ERROR_FACTORY.create(\"no-app-id\" /* AnalyticsError.NO_APP_ID */);\r\n    }\r\n    if (!app.options.apiKey) {\r\n        if (app.options.measurementId) {\r\n            logger.warn(`The \"apiKey\" field is empty in the local Firebase config. This is needed to fetch the latest` +\r\n                ` measurement ID for this Firebase app. Falling back to the measurement ID ${app.options.measurementId}` +\r\n                ` provided in the \"measurementId\" field in the local Firebase config.`);\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"no-api-key\" /* AnalyticsError.NO_API_KEY */);\r\n        }\r\n    }\r\n    if (initializationPromisesMap[appId] != null) {\r\n        throw ERROR_FACTORY.create(\"already-exists\" /* AnalyticsError.ALREADY_EXISTS */, {\r\n            id: appId\r\n        });\r\n    }\r\n    if (!globalInitDone) {\r\n        // Steps here should only be done once per page: creation or wrapping\r\n        // of dataLayer and global gtag function.\r\n        getOrCreateDataLayer(dataLayerName);\r\n        const { wrappedGtag, gtagCore } = wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagName);\r\n        wrappedGtagFunction = wrappedGtag;\r\n        gtagCoreFunction = gtagCore;\r\n        globalInitDone = true;\r\n    }\r\n    // Async but non-blocking.\r\n    // This map reflects the completion state of all promises for each appId.\r\n    initializationPromisesMap[appId] = _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCoreFunction, dataLayerName, options);\r\n    const analyticsInstance = new AnalyticsService(app);\r\n    return analyticsInstance;\r\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/**\r\n * Returns an {@link Analytics} instance for the given app.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\r\nfunction getAnalytics(app = getApp()) {\r\n    app = getModularInstance(app);\r\n    // Dependencies\r\n    const analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\r\n    if (analyticsProvider.isInitialized()) {\r\n        return analyticsProvider.getImmediate();\r\n    }\r\n    return initializeAnalytics(app);\r\n}\r\n/**\r\n * Returns an {@link Analytics} instance for the given app.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\r\nfunction initializeAnalytics(app, options = {}) {\r\n    // Dependencies\r\n    const analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\r\n    if (analyticsProvider.isInitialized()) {\r\n        const existingInstance = analyticsProvider.getImmediate();\r\n        if (deepEqual(options, analyticsProvider.getOptions())) {\r\n            return existingInstance;\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */);\r\n        }\r\n    }\r\n    const analyticsInstance = analyticsProvider.initialize({ options });\r\n    return analyticsInstance;\r\n}\r\n/**\r\n * This is a public static method provided to users that wraps four different checks:\r\n *\r\n * 1. Check if it's not a browser extension environment.\r\n * 2. Check if cookies are enabled in current browser.\r\n * 3. Check if IndexedDB is supported by the browser environment.\r\n * 4. Check if the current browser context is valid for using `IndexedDB.open()`.\r\n *\r\n * @public\r\n *\r\n */\r\nasync function isSupported() {\r\n    if (isBrowserExtension()) {\r\n        return false;\r\n    }\r\n    if (!areCookiesEnabled()) {\r\n        return false;\r\n    }\r\n    if (!isIndexedDBAvailable()) {\r\n        return false;\r\n    }\r\n    try {\r\n        const isDBOpenable = await validateIndexedDBOpenable();\r\n        return isDBOpenable;\r\n    }\r\n    catch (error) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Use gtag `config` command to set `screen_name`.\r\n *\r\n * @public\r\n *\r\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\r\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param screenName - Screen name to set.\r\n */\r\nfunction setCurrentScreen(analyticsInstance, screenName, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setCurrentScreen$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], screenName, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Retrieves a unique Google Analytics identifier for the web client.\r\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\r\nasync function getGoogleAnalyticsClientId(analyticsInstance) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    return internalGetGoogleAnalyticsClientId(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId]);\r\n}\r\n/**\r\n * Use gtag `config` command to set `user_id`.\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param id - User ID to set.\r\n */\r\nfunction setUserId(analyticsInstance, id, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setUserId$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], id, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Use gtag `config` command to set all params specified.\r\n *\r\n * @public\r\n */\r\nfunction setUserProperties(analyticsInstance, properties, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setUserProperties$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], properties, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Sets whether Google Analytics collection is enabled for this app on this device.\r\n * Sets global `window['ga-disable-analyticsId'] = true;`\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param enabled - If true, enables collection, if false, disables it.\r\n */\r\nfunction setAnalyticsCollectionEnabled(analyticsInstance, enabled) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setAnalyticsCollectionEnabled$1(initializationPromisesMap[analyticsInstance.app.options.appId], enabled).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Adds data that will be set on every event logged from the SDK, including automatic ones.\r\n * With gtag's \"set\" command, the values passed persist on the current page and are passed with\r\n * all subsequent events.\r\n * @public\r\n * @param customParams - Any custom params the user may pass to gtag.js.\r\n */\r\nfunction setDefaultEventParameters(customParams) {\r\n    // Check if reference to existing gtag function on window object exists\r\n    if (wrappedGtagFunction) {\r\n        wrappedGtagFunction(\"set\" /* GtagCommand.SET */, customParams);\r\n    }\r\n    else {\r\n        _setDefaultEventParametersForInit(customParams);\r\n    }\r\n}\r\n/**\r\n * Sends a Google Analytics event with given `eventParams`. This method\r\n * automatically associates this logged event with this Firebase web\r\n * app instance on this device.\r\n * List of official event parameters can be found in the gtag.js\r\n * reference documentation:\r\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\r\n * | the GA4 reference documentation}.\r\n *\r\n * @public\r\n */\r\nfunction logEvent(analyticsInstance, eventName, eventParams, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    logEvent$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], eventName, eventParams, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Sets the applicable end user consent state for this web app across all gtag references once\r\n * Firebase Analytics is initialized.\r\n *\r\n * Use the {@link ConsentSettings} to specify individual consent type values. By default consent\r\n * types are set to \"granted\".\r\n * @public\r\n * @param consentSettings - Maps the applicable end user consent state for gtag.js.\r\n */\r\nfunction setConsent(consentSettings) {\r\n    // Check if reference to existing gtag function on window object exists\r\n    if (wrappedGtagFunction) {\r\n        wrappedGtagFunction(\"consent\" /* GtagCommand.CONSENT */, 'update', consentSettings);\r\n    }\r\n    else {\r\n        _setConsentDefaultForInit(consentSettings);\r\n    }\r\n}\n\nconst name = \"@firebase/analytics\";\nconst version = \"0.10.8\";\n\n/**\r\n * The Firebase Analytics Web SDK.\r\n * This SDK does not work in a Node.js environment.\r\n *\r\n * @packageDocumentation\r\n */\r\nfunction registerAnalytics() {\r\n    _registerComponent(new Component(ANALYTICS_TYPE, (container, { options: analyticsOptions }) => {\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app').getImmediate();\r\n        const installations = container\r\n            .getProvider('installations-internal')\r\n            .getImmediate();\r\n        return factory(app, installations, analyticsOptions);\r\n    }, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n    _registerComponent(new Component('analytics-internal', internalFactory, \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n    registerVersion(name, version);\r\n    // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n    registerVersion(name, version, 'esm2017');\r\n    function internalFactory(container) {\r\n        try {\r\n            const analytics = container.getProvider(ANALYTICS_TYPE).getImmediate();\r\n            return {\r\n                logEvent: (eventName, eventParams, options) => logEvent(analytics, eventName, eventParams, options)\r\n            };\r\n        }\r\n        catch (e) {\r\n            throw ERROR_FACTORY.create(\"interop-component-reg-failed\" /* AnalyticsError.INTEROP_COMPONENT_REG_FAILED */, {\r\n                reason: e\r\n            });\r\n        }\r\n    }\r\n}\r\nregisterAnalytics();\n\nexport { getAnalytics, getGoogleAnalyticsClientId, initializeAnalytics, isSupported, logEvent, setAnalyticsCollectionEnabled, setConsent, setCurrentScreen, setDefaultEventParameters, setUserId, setUserProperties, settings };\n//# sourceMappingURL=index.esm2017.js.map\n","/*!\n* sweetalert2 v11.17.2\n* Released under the MIT License.\n*/\nfunction _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nfunction _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _classPrivateFieldGet2(s, a) {\n  return s.get(_assertClassBrand(s, a));\n}\nfunction _classPrivateFieldInitSpec(e, t, a) {\n  _checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nfunction _classPrivateFieldSet2(s, a, r) {\n  return s.set(_assertClassBrand(s, a), r), r;\n}\n\nconst RESTORE_FOCUS_TIMEOUT = 100;\n\n/** @type {GlobalState} */\nconst globalState = {};\nconst focusPreviousActiveElement = () => {\n  if (globalState.previousActiveElement instanceof HTMLElement) {\n    globalState.previousActiveElement.focus();\n    globalState.previousActiveElement = null;\n  } else if (document.body) {\n    document.body.focus();\n  }\n};\n\n/**\n * Restore previous active (focused) element\n *\n * @param {boolean} returnFocus\n * @returns {Promise<void>}\n */\nconst restoreActiveElement = returnFocus => {\n  return new Promise(resolve => {\n    if (!returnFocus) {\n      return resolve();\n    }\n    const x = window.scrollX;\n    const y = window.scrollY;\n    globalState.restoreFocusTimeout = setTimeout(() => {\n      focusPreviousActiveElement();\n      resolve();\n    }, RESTORE_FOCUS_TIMEOUT); // issues/900\n\n    window.scrollTo(x, y);\n  });\n};\n\nconst swalPrefix = 'swal2-';\n\n/**\n * @typedef {Record<SwalClass, string>} SwalClasses\n */\n\n/**\n * @typedef {'success' | 'warning' | 'info' | 'question' | 'error'} SwalIcon\n * @typedef {Record<SwalIcon, string>} SwalIcons\n */\n\n/** @type {SwalClass[]} */\nconst classNames = ['container', 'shown', 'height-auto', 'iosfix', 'popup', 'modal', 'no-backdrop', 'no-transition', 'toast', 'toast-shown', 'show', 'hide', 'close', 'title', 'html-container', 'actions', 'confirm', 'deny', 'cancel', 'default-outline', 'footer', 'icon', 'icon-content', 'image', 'input', 'file', 'range', 'select', 'radio', 'checkbox', 'label', 'textarea', 'inputerror', 'input-label', 'validation-message', 'progress-steps', 'active-progress-step', 'progress-step', 'progress-step-line', 'loader', 'loading', 'styled', 'top', 'top-start', 'top-end', 'top-left', 'top-right', 'center', 'center-start', 'center-end', 'center-left', 'center-right', 'bottom', 'bottom-start', 'bottom-end', 'bottom-left', 'bottom-right', 'grow-row', 'grow-column', 'grow-fullscreen', 'rtl', 'timer-progress-bar', 'timer-progress-bar-container', 'scrollbar-measure', 'icon-success', 'icon-warning', 'icon-info', 'icon-question', 'icon-error', 'draggable', 'dragging'];\nconst swalClasses = classNames.reduce((acc, className) => {\n  acc[className] = swalPrefix + className;\n  return acc;\n}, /** @type {SwalClasses} */{});\n\n/** @type {SwalIcon[]} */\nconst icons = ['success', 'warning', 'info', 'question', 'error'];\nconst iconTypes = icons.reduce((acc, icon) => {\n  acc[icon] = swalPrefix + icon;\n  return acc;\n}, /** @type {SwalIcons} */{});\n\nconst consolePrefix = 'SweetAlert2:';\n\n/**\n * Capitalize the first letter of a string\n *\n * @param {string} str\n * @returns {string}\n */\nconst capitalizeFirstLetter = str => str.charAt(0).toUpperCase() + str.slice(1);\n\n/**\n * Standardize console warnings\n *\n * @param {string | string[]} message\n */\nconst warn = message => {\n  console.warn(`${consolePrefix} ${typeof message === 'object' ? message.join(' ') : message}`);\n};\n\n/**\n * Standardize console errors\n *\n * @param {string} message\n */\nconst error = message => {\n  console.error(`${consolePrefix} ${message}`);\n};\n\n/**\n * Private global state for `warnOnce`\n *\n * @type {string[]}\n * @private\n */\nconst previousWarnOnceMessages = [];\n\n/**\n * Show a console warning, but only if it hasn't already been shown\n *\n * @param {string} message\n */\nconst warnOnce = message => {\n  if (!previousWarnOnceMessages.includes(message)) {\n    previousWarnOnceMessages.push(message);\n    warn(message);\n  }\n};\n\n/**\n * Show a one-time console warning about deprecated params/methods\n *\n * @param {string} deprecatedParam\n * @param {string?} useInstead\n */\nconst warnAboutDeprecation = function (deprecatedParam) {\n  let useInstead = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  warnOnce(`\"${deprecatedParam}\" is deprecated and will be removed in the next major release.${useInstead ? ` Use \"${useInstead}\" instead.` : ''}`);\n};\n\n/**\n * If `arg` is a function, call it (with no arguments or context) and return the result.\n * Otherwise, just pass the value through\n *\n * @param {Function | any} arg\n * @returns {any}\n */\nconst callIfFunction = arg => typeof arg === 'function' ? arg() : arg;\n\n/**\n * @param {any} arg\n * @returns {boolean}\n */\nconst hasToPromiseFn = arg => arg && typeof arg.toPromise === 'function';\n\n/**\n * @param {any} arg\n * @returns {Promise<any>}\n */\nconst asPromise = arg => hasToPromiseFn(arg) ? arg.toPromise() : Promise.resolve(arg);\n\n/**\n * @param {any} arg\n * @returns {boolean}\n */\nconst isPromise = arg => arg && Promise.resolve(arg) === arg;\n\n/**\n * Gets the popup container which contains the backdrop and the popup itself.\n *\n * @returns {HTMLElement | null}\n */\nconst getContainer = () => document.body.querySelector(`.${swalClasses.container}`);\n\n/**\n * @param {string} selectorString\n * @returns {HTMLElement | null}\n */\nconst elementBySelector = selectorString => {\n  const container = getContainer();\n  return container ? container.querySelector(selectorString) : null;\n};\n\n/**\n * @param {string} className\n * @returns {HTMLElement | null}\n */\nconst elementByClass = className => {\n  return elementBySelector(`.${className}`);\n};\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getPopup = () => elementByClass(swalClasses.popup);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getIcon = () => elementByClass(swalClasses.icon);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getIconContent = () => elementByClass(swalClasses['icon-content']);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getTitle = () => elementByClass(swalClasses.title);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getHtmlContainer = () => elementByClass(swalClasses['html-container']);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getImage = () => elementByClass(swalClasses.image);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getProgressSteps = () => elementByClass(swalClasses['progress-steps']);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getValidationMessage = () => elementByClass(swalClasses['validation-message']);\n\n/**\n * @returns {HTMLButtonElement | null}\n */\nconst getConfirmButton = () => (/** @type {HTMLButtonElement} */elementBySelector(`.${swalClasses.actions} .${swalClasses.confirm}`));\n\n/**\n * @returns {HTMLButtonElement | null}\n */\nconst getCancelButton = () => (/** @type {HTMLButtonElement} */elementBySelector(`.${swalClasses.actions} .${swalClasses.cancel}`));\n\n/**\n * @returns {HTMLButtonElement | null}\n */\nconst getDenyButton = () => (/** @type {HTMLButtonElement} */elementBySelector(`.${swalClasses.actions} .${swalClasses.deny}`));\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getInputLabel = () => elementByClass(swalClasses['input-label']);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getLoader = () => elementBySelector(`.${swalClasses.loader}`);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getActions = () => elementByClass(swalClasses.actions);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getFooter = () => elementByClass(swalClasses.footer);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getTimerProgressBar = () => elementByClass(swalClasses['timer-progress-bar']);\n\n/**\n * @returns {HTMLElement | null}\n */\nconst getCloseButton = () => elementByClass(swalClasses.close);\n\n// https://github.com/jkup/focusable/blob/master/index.js\nconst focusable = `\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex=\"0\"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n`;\n/**\n * @returns {HTMLElement[]}\n */\nconst getFocusableElements = () => {\n  const popup = getPopup();\n  if (!popup) {\n    return [];\n  }\n  /** @type {NodeListOf<HTMLElement>} */\n  const focusableElementsWithTabindex = popup.querySelectorAll('[tabindex]:not([tabindex=\"-1\"]):not([tabindex=\"0\"])');\n  const focusableElementsWithTabindexSorted = Array.from(focusableElementsWithTabindex)\n  // sort according to tabindex\n  .sort((a, b) => {\n    const tabindexA = parseInt(a.getAttribute('tabindex') || '0');\n    const tabindexB = parseInt(b.getAttribute('tabindex') || '0');\n    if (tabindexA > tabindexB) {\n      return 1;\n    } else if (tabindexA < tabindexB) {\n      return -1;\n    }\n    return 0;\n  });\n\n  /** @type {NodeListOf<HTMLElement>} */\n  const otherFocusableElements = popup.querySelectorAll(focusable);\n  const otherFocusableElementsFiltered = Array.from(otherFocusableElements).filter(el => el.getAttribute('tabindex') !== '-1');\n  return [...new Set(focusableElementsWithTabindexSorted.concat(otherFocusableElementsFiltered))].filter(el => isVisible$1(el));\n};\n\n/**\n * @returns {boolean}\n */\nconst isModal = () => {\n  return hasClass(document.body, swalClasses.shown) && !hasClass(document.body, swalClasses['toast-shown']) && !hasClass(document.body, swalClasses['no-backdrop']);\n};\n\n/**\n * @returns {boolean}\n */\nconst isToast = () => {\n  const popup = getPopup();\n  if (!popup) {\n    return false;\n  }\n  return hasClass(popup, swalClasses.toast);\n};\n\n/**\n * @returns {boolean}\n */\nconst isLoading = () => {\n  const popup = getPopup();\n  if (!popup) {\n    return false;\n  }\n  return popup.hasAttribute('data-loading');\n};\n\n/**\n * Securely set innerHTML of an element\n * https://github.com/sweetalert2/sweetalert2/issues/1926\n *\n * @param {HTMLElement} elem\n * @param {string} html\n */\nconst setInnerHtml = (elem, html) => {\n  elem.textContent = '';\n  if (html) {\n    const parser = new DOMParser();\n    const parsed = parser.parseFromString(html, `text/html`);\n    const head = parsed.querySelector('head');\n    if (head) {\n      Array.from(head.childNodes).forEach(child => {\n        elem.appendChild(child);\n      });\n    }\n    const body = parsed.querySelector('body');\n    if (body) {\n      Array.from(body.childNodes).forEach(child => {\n        if (child instanceof HTMLVideoElement || child instanceof HTMLAudioElement) {\n          elem.appendChild(child.cloneNode(true)); // https://github.com/sweetalert2/sweetalert2/issues/2507\n        } else {\n          elem.appendChild(child);\n        }\n      });\n    }\n  }\n};\n\n/**\n * @param {HTMLElement} elem\n * @param {string} className\n * @returns {boolean}\n */\nconst hasClass = (elem, className) => {\n  if (!className) {\n    return false;\n  }\n  const classList = className.split(/\\s+/);\n  for (let i = 0; i < classList.length; i++) {\n    if (!elem.classList.contains(classList[i])) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * @param {HTMLElement} elem\n * @param {SweetAlertOptions} params\n */\nconst removeCustomClasses = (elem, params) => {\n  Array.from(elem.classList).forEach(className => {\n    if (!Object.values(swalClasses).includes(className) && !Object.values(iconTypes).includes(className) && !Object.values(params.showClass || {}).includes(className)) {\n      elem.classList.remove(className);\n    }\n  });\n};\n\n/**\n * @param {HTMLElement} elem\n * @param {SweetAlertOptions} params\n * @param {string} className\n */\nconst applyCustomClass = (elem, params, className) => {\n  removeCustomClasses(elem, params);\n  if (!params.customClass) {\n    return;\n  }\n  const customClass = params.customClass[(/** @type {keyof SweetAlertCustomClass} */className)];\n  if (!customClass) {\n    return;\n  }\n  if (typeof customClass !== 'string' && !customClass.forEach) {\n    warn(`Invalid type of customClass.${className}! Expected string or iterable object, got \"${typeof customClass}\"`);\n    return;\n  }\n  addClass(elem, customClass);\n};\n\n/**\n * @param {HTMLElement} popup\n * @param {import('./renderers/renderInput').InputClass | SweetAlertInput} inputClass\n * @returns {HTMLInputElement | null}\n */\nconst getInput$1 = (popup, inputClass) => {\n  if (!inputClass) {\n    return null;\n  }\n  switch (inputClass) {\n    case 'select':\n    case 'textarea':\n    case 'file':\n      return popup.querySelector(`.${swalClasses.popup} > .${swalClasses[inputClass]}`);\n    case 'checkbox':\n      return popup.querySelector(`.${swalClasses.popup} > .${swalClasses.checkbox} input`);\n    case 'radio':\n      return popup.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:checked`) || popup.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:first-child`);\n    case 'range':\n      return popup.querySelector(`.${swalClasses.popup} > .${swalClasses.range} input`);\n    default:\n      return popup.querySelector(`.${swalClasses.popup} > .${swalClasses.input}`);\n  }\n};\n\n/**\n * @param {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} input\n */\nconst focusInput = input => {\n  input.focus();\n\n  // place cursor at end of text in text input\n  if (input.type !== 'file') {\n    // http://stackoverflow.com/a/2345915\n    const val = input.value;\n    input.value = '';\n    input.value = val;\n  }\n};\n\n/**\n * @param {HTMLElement | HTMLElement[] | null} target\n * @param {string | string[] | readonly string[] | undefined} classList\n * @param {boolean} condition\n */\nconst toggleClass = (target, classList, condition) => {\n  if (!target || !classList) {\n    return;\n  }\n  if (typeof classList === 'string') {\n    classList = classList.split(/\\s+/).filter(Boolean);\n  }\n  classList.forEach(className => {\n    if (Array.isArray(target)) {\n      target.forEach(elem => {\n        if (condition) {\n          elem.classList.add(className);\n        } else {\n          elem.classList.remove(className);\n        }\n      });\n    } else {\n      if (condition) {\n        target.classList.add(className);\n      } else {\n        target.classList.remove(className);\n      }\n    }\n  });\n};\n\n/**\n * @param {HTMLElement | HTMLElement[] | null} target\n * @param {string | string[] | readonly string[] | undefined} classList\n */\nconst addClass = (target, classList) => {\n  toggleClass(target, classList, true);\n};\n\n/**\n * @param {HTMLElement | HTMLElement[] | null} target\n * @param {string | string[] | readonly string[] | undefined} classList\n */\nconst removeClass = (target, classList) => {\n  toggleClass(target, classList, false);\n};\n\n/**\n * Get direct child of an element by class name\n *\n * @param {HTMLElement} elem\n * @param {string} className\n * @returns {HTMLElement | undefined}\n */\nconst getDirectChildByClass = (elem, className) => {\n  const children = Array.from(elem.children);\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (child instanceof HTMLElement && hasClass(child, className)) {\n      return child;\n    }\n  }\n};\n\n/**\n * @param {HTMLElement} elem\n * @param {string} property\n * @param {*} value\n */\nconst applyNumericalStyle = (elem, property, value) => {\n  if (value === `${parseInt(value)}`) {\n    value = parseInt(value);\n  }\n  if (value || parseInt(value) === 0) {\n    elem.style.setProperty(property, typeof value === 'number' ? `${value}px` : value);\n  } else {\n    elem.style.removeProperty(property);\n  }\n};\n\n/**\n * @param {HTMLElement | null} elem\n * @param {string} display\n */\nconst show = function (elem) {\n  let display = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'flex';\n  if (!elem) {\n    return;\n  }\n  elem.style.display = display;\n};\n\n/**\n * @param {HTMLElement | null} elem\n */\nconst hide = elem => {\n  if (!elem) {\n    return;\n  }\n  elem.style.display = 'none';\n};\n\n/**\n * @param {HTMLElement | null} elem\n * @param {string} display\n */\nconst showWhenInnerHtmlPresent = function (elem) {\n  let display = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'block';\n  if (!elem) {\n    return;\n  }\n  new MutationObserver(() => {\n    toggle(elem, elem.innerHTML, display);\n  }).observe(elem, {\n    childList: true,\n    subtree: true\n  });\n};\n\n/**\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {string} property\n * @param {string} value\n */\nconst setStyle = (parent, selector, property, value) => {\n  /** @type {HTMLElement | null} */\n  const el = parent.querySelector(selector);\n  if (el) {\n    el.style.setProperty(property, value);\n  }\n};\n\n/**\n * @param {HTMLElement} elem\n * @param {any} condition\n * @param {string} display\n */\nconst toggle = function (elem, condition) {\n  let display = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'flex';\n  if (condition) {\n    show(elem, display);\n  } else {\n    hide(elem);\n  }\n};\n\n/**\n * borrowed from jquery $(elem).is(':visible') implementation\n *\n * @param {HTMLElement | null} elem\n * @returns {boolean}\n */\nconst isVisible$1 = elem => !!(elem && (elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length));\n\n/**\n * @returns {boolean}\n */\nconst allButtonsAreHidden = () => !isVisible$1(getConfirmButton()) && !isVisible$1(getDenyButton()) && !isVisible$1(getCancelButton());\n\n/**\n * @param {HTMLElement} elem\n * @returns {boolean}\n */\nconst isScrollable = elem => !!(elem.scrollHeight > elem.clientHeight);\n\n/**\n * borrowed from https://stackoverflow.com/a/46352119\n *\n * @param {HTMLElement} elem\n * @returns {boolean}\n */\nconst hasCssAnimation = elem => {\n  const style = window.getComputedStyle(elem);\n  const animDuration = parseFloat(style.getPropertyValue('animation-duration') || '0');\n  const transDuration = parseFloat(style.getPropertyValue('transition-duration') || '0');\n  return animDuration > 0 || transDuration > 0;\n};\n\n/**\n * @param {number} timer\n * @param {boolean} reset\n */\nconst animateTimerProgressBar = function (timer) {\n  let reset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const timerProgressBar = getTimerProgressBar();\n  if (!timerProgressBar) {\n    return;\n  }\n  if (isVisible$1(timerProgressBar)) {\n    if (reset) {\n      timerProgressBar.style.transition = 'none';\n      timerProgressBar.style.width = '100%';\n    }\n    setTimeout(() => {\n      timerProgressBar.style.transition = `width ${timer / 1000}s linear`;\n      timerProgressBar.style.width = '0%';\n    }, 10);\n  }\n};\nconst stopTimerProgressBar = () => {\n  const timerProgressBar = getTimerProgressBar();\n  if (!timerProgressBar) {\n    return;\n  }\n  const timerProgressBarWidth = parseInt(window.getComputedStyle(timerProgressBar).width);\n  timerProgressBar.style.removeProperty('transition');\n  timerProgressBar.style.width = '100%';\n  const timerProgressBarFullWidth = parseInt(window.getComputedStyle(timerProgressBar).width);\n  const timerProgressBarPercent = timerProgressBarWidth / timerProgressBarFullWidth * 100;\n  timerProgressBar.style.width = `${timerProgressBarPercent}%`;\n};\n\n/**\n * Detect Node env\n *\n * @returns {boolean}\n */\nconst isNodeEnv = () => typeof window === 'undefined' || typeof document === 'undefined';\n\nconst sweetHTML = `\n <div aria-labelledby=\"${swalClasses.title}\" aria-describedby=\"${swalClasses['html-container']}\" class=\"${swalClasses.popup}\" tabindex=\"-1\">\n   <button type=\"button\" class=\"${swalClasses.close}\"></button>\n   <ul class=\"${swalClasses['progress-steps']}\"></ul>\n   <div class=\"${swalClasses.icon}\"></div>\n   <img class=\"${swalClasses.image}\" />\n   <h2 class=\"${swalClasses.title}\" id=\"${swalClasses.title}\"></h2>\n   <div class=\"${swalClasses['html-container']}\" id=\"${swalClasses['html-container']}\"></div>\n   <input class=\"${swalClasses.input}\" id=\"${swalClasses.input}\" />\n   <input type=\"file\" class=\"${swalClasses.file}\" />\n   <div class=\"${swalClasses.range}\">\n     <input type=\"range\" />\n     <output></output>\n   </div>\n   <select class=\"${swalClasses.select}\" id=\"${swalClasses.select}\"></select>\n   <div class=\"${swalClasses.radio}\"></div>\n   <label class=\"${swalClasses.checkbox}\">\n     <input type=\"checkbox\" id=\"${swalClasses.checkbox}\" />\n     <span class=\"${swalClasses.label}\"></span>\n   </label>\n   <textarea class=\"${swalClasses.textarea}\" id=\"${swalClasses.textarea}\"></textarea>\n   <div class=\"${swalClasses['validation-message']}\" id=\"${swalClasses['validation-message']}\"></div>\n   <div class=\"${swalClasses.actions}\">\n     <div class=\"${swalClasses.loader}\"></div>\n     <button type=\"button\" class=\"${swalClasses.confirm}\"></button>\n     <button type=\"button\" class=\"${swalClasses.deny}\"></button>\n     <button type=\"button\" class=\"${swalClasses.cancel}\"></button>\n   </div>\n   <div class=\"${swalClasses.footer}\"></div>\n   <div class=\"${swalClasses['timer-progress-bar-container']}\">\n     <div class=\"${swalClasses['timer-progress-bar']}\"></div>\n   </div>\n </div>\n`.replace(/(^|\\n)\\s*/g, '');\n\n/**\n * @returns {boolean}\n */\nconst resetOldContainer = () => {\n  const oldContainer = getContainer();\n  if (!oldContainer) {\n    return false;\n  }\n  oldContainer.remove();\n  removeClass([document.documentElement, document.body], [swalClasses['no-backdrop'], swalClasses['toast-shown'], swalClasses['has-column']]);\n  return true;\n};\nconst resetValidationMessage$1 = () => {\n  globalState.currentInstance.resetValidationMessage();\n};\nconst addInputChangeListeners = () => {\n  const popup = getPopup();\n  const input = getDirectChildByClass(popup, swalClasses.input);\n  const file = getDirectChildByClass(popup, swalClasses.file);\n  /** @type {HTMLInputElement} */\n  const range = popup.querySelector(`.${swalClasses.range} input`);\n  /** @type {HTMLOutputElement} */\n  const rangeOutput = popup.querySelector(`.${swalClasses.range} output`);\n  const select = getDirectChildByClass(popup, swalClasses.select);\n  /** @type {HTMLInputElement} */\n  const checkbox = popup.querySelector(`.${swalClasses.checkbox} input`);\n  const textarea = getDirectChildByClass(popup, swalClasses.textarea);\n  input.oninput = resetValidationMessage$1;\n  file.onchange = resetValidationMessage$1;\n  select.onchange = resetValidationMessage$1;\n  checkbox.onchange = resetValidationMessage$1;\n  textarea.oninput = resetValidationMessage$1;\n  range.oninput = () => {\n    resetValidationMessage$1();\n    rangeOutput.value = range.value;\n  };\n  range.onchange = () => {\n    resetValidationMessage$1();\n    rangeOutput.value = range.value;\n  };\n};\n\n/**\n * @param {string | HTMLElement} target\n * @returns {HTMLElement}\n */\nconst getTarget = target => typeof target === 'string' ? document.querySelector(target) : target;\n\n/**\n * @param {SweetAlertOptions} params\n */\nconst setupAccessibility = params => {\n  const popup = getPopup();\n  popup.setAttribute('role', params.toast ? 'alert' : 'dialog');\n  popup.setAttribute('aria-live', params.toast ? 'polite' : 'assertive');\n  if (!params.toast) {\n    popup.setAttribute('aria-modal', 'true');\n  }\n};\n\n/**\n * @param {HTMLElement} targetElement\n */\nconst setupRTL = targetElement => {\n  if (window.getComputedStyle(targetElement).direction === 'rtl') {\n    addClass(getContainer(), swalClasses.rtl);\n  }\n};\n\n/**\n * Add modal + backdrop + no-war message for Russians to DOM\n *\n * @param {SweetAlertOptions} params\n */\nconst init = params => {\n  // Clean up the old popup container if it exists\n  const oldContainerExisted = resetOldContainer();\n  if (isNodeEnv()) {\n    error('SweetAlert2 requires document to initialize');\n    return;\n  }\n  const container = document.createElement('div');\n  container.className = swalClasses.container;\n  if (oldContainerExisted) {\n    addClass(container, swalClasses['no-transition']);\n  }\n  setInnerHtml(container, sweetHTML);\n  container.dataset['swal2Theme'] = params.theme;\n  const targetElement = getTarget(params.target);\n  targetElement.appendChild(container);\n  setupAccessibility(params);\n  setupRTL(targetElement);\n  addInputChangeListeners();\n};\n\n/**\n * @param {HTMLElement | object | string} param\n * @param {HTMLElement} target\n */\nconst parseHtmlToContainer = (param, target) => {\n  // DOM element\n  if (param instanceof HTMLElement) {\n    target.appendChild(param);\n  }\n\n  // Object\n  else if (typeof param === 'object') {\n    handleObject(param, target);\n  }\n\n  // Plain string\n  else if (param) {\n    setInnerHtml(target, param);\n  }\n};\n\n/**\n * @param {any} param\n * @param {HTMLElement} target\n */\nconst handleObject = (param, target) => {\n  // JQuery element(s)\n  if (param.jquery) {\n    handleJqueryElem(target, param);\n  }\n\n  // For other objects use their string representation\n  else {\n    setInnerHtml(target, param.toString());\n  }\n};\n\n/**\n * @param {HTMLElement} target\n * @param {any} elem\n */\nconst handleJqueryElem = (target, elem) => {\n  target.textContent = '';\n  if (0 in elem) {\n    for (let i = 0; i in elem; i++) {\n      target.appendChild(elem[i].cloneNode(true));\n    }\n  } else {\n    target.appendChild(elem.cloneNode(true));\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderActions = (instance, params) => {\n  const actions = getActions();\n  const loader = getLoader();\n  if (!actions || !loader) {\n    return;\n  }\n\n  // Actions (buttons) wrapper\n  if (!params.showConfirmButton && !params.showDenyButton && !params.showCancelButton) {\n    hide(actions);\n  } else {\n    show(actions);\n  }\n\n  // Custom class\n  applyCustomClass(actions, params, 'actions');\n\n  // Render all the buttons\n  renderButtons(actions, loader, params);\n\n  // Loader\n  setInnerHtml(loader, params.loaderHtml || '');\n  applyCustomClass(loader, params, 'loader');\n};\n\n/**\n * @param {HTMLElement} actions\n * @param {HTMLElement} loader\n * @param {SweetAlertOptions} params\n */\nfunction renderButtons(actions, loader, params) {\n  const confirmButton = getConfirmButton();\n  const denyButton = getDenyButton();\n  const cancelButton = getCancelButton();\n  if (!confirmButton || !denyButton || !cancelButton) {\n    return;\n  }\n\n  // Render buttons\n  renderButton(confirmButton, 'confirm', params);\n  renderButton(denyButton, 'deny', params);\n  renderButton(cancelButton, 'cancel', params);\n  handleButtonsStyling(confirmButton, denyButton, cancelButton, params);\n  if (params.reverseButtons) {\n    if (params.toast) {\n      actions.insertBefore(cancelButton, confirmButton);\n      actions.insertBefore(denyButton, confirmButton);\n    } else {\n      actions.insertBefore(cancelButton, loader);\n      actions.insertBefore(denyButton, loader);\n      actions.insertBefore(confirmButton, loader);\n    }\n  }\n}\n\n/**\n * @param {HTMLElement} confirmButton\n * @param {HTMLElement} denyButton\n * @param {HTMLElement} cancelButton\n * @param {SweetAlertOptions} params\n */\nfunction handleButtonsStyling(confirmButton, denyButton, cancelButton, params) {\n  if (!params.buttonsStyling) {\n    removeClass([confirmButton, denyButton, cancelButton], swalClasses.styled);\n    return;\n  }\n  addClass([confirmButton, denyButton, cancelButton], swalClasses.styled);\n\n  // Buttons background colors\n  if (params.confirmButtonColor) {\n    confirmButton.style.backgroundColor = params.confirmButtonColor;\n    addClass(confirmButton, swalClasses['default-outline']);\n  }\n  if (params.denyButtonColor) {\n    denyButton.style.backgroundColor = params.denyButtonColor;\n    addClass(denyButton, swalClasses['default-outline']);\n  }\n  if (params.cancelButtonColor) {\n    cancelButton.style.backgroundColor = params.cancelButtonColor;\n    addClass(cancelButton, swalClasses['default-outline']);\n  }\n}\n\n/**\n * @param {HTMLElement} button\n * @param {'confirm' | 'deny' | 'cancel'} buttonType\n * @param {SweetAlertOptions} params\n */\nfunction renderButton(button, buttonType, params) {\n  const buttonName = /** @type {'Confirm' | 'Deny' | 'Cancel'} */capitalizeFirstLetter(buttonType);\n  toggle(button, params[`show${buttonName}Button`], 'inline-block');\n  setInnerHtml(button, params[`${buttonType}ButtonText`] || ''); // Set caption text\n  button.setAttribute('aria-label', params[`${buttonType}ButtonAriaLabel`] || ''); // ARIA label\n\n  // Add buttons custom classes\n  button.className = swalClasses[buttonType];\n  applyCustomClass(button, params, `${buttonType}Button`);\n}\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderCloseButton = (instance, params) => {\n  const closeButton = getCloseButton();\n  if (!closeButton) {\n    return;\n  }\n  setInnerHtml(closeButton, params.closeButtonHtml || '');\n\n  // Custom class\n  applyCustomClass(closeButton, params, 'closeButton');\n  toggle(closeButton, params.showCloseButton);\n  closeButton.setAttribute('aria-label', params.closeButtonAriaLabel || '');\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderContainer = (instance, params) => {\n  const container = getContainer();\n  if (!container) {\n    return;\n  }\n  handleBackdropParam(container, params.backdrop);\n  handlePositionParam(container, params.position);\n  handleGrowParam(container, params.grow);\n\n  // Custom class\n  applyCustomClass(container, params, 'container');\n};\n\n/**\n * @param {HTMLElement} container\n * @param {SweetAlertOptions['backdrop']} backdrop\n */\nfunction handleBackdropParam(container, backdrop) {\n  if (typeof backdrop === 'string') {\n    container.style.background = backdrop;\n  } else if (!backdrop) {\n    addClass([document.documentElement, document.body], swalClasses['no-backdrop']);\n  }\n}\n\n/**\n * @param {HTMLElement} container\n * @param {SweetAlertOptions['position']} position\n */\nfunction handlePositionParam(container, position) {\n  if (!position) {\n    return;\n  }\n  if (position in swalClasses) {\n    addClass(container, swalClasses[position]);\n  } else {\n    warn('The \"position\" parameter is not valid, defaulting to \"center\"');\n    addClass(container, swalClasses.center);\n  }\n}\n\n/**\n * @param {HTMLElement} container\n * @param {SweetAlertOptions['grow']} grow\n */\nfunction handleGrowParam(container, grow) {\n  if (!grow) {\n    return;\n  }\n  addClass(container, swalClasses[`grow-${grow}`]);\n}\n\n/**\n * This module contains `WeakMap`s for each effectively-\"private  property\" that a `Swal` has.\n * For example, to set the private property \"foo\" of `this` to \"bar\", you can `privateProps.foo.set(this, 'bar')`\n * This is the approach that Babel will probably take to implement private methods/fields\n *   https://github.com/tc39/proposal-private-methods\n *   https://github.com/babel/babel/pull/7555\n * Once we have the changes from that PR in Babel, and our core class fits reasonable in *one module*\n *   then we can use that language feature.\n */\n\nvar privateProps = {\n  innerParams: new WeakMap(),\n  domCache: new WeakMap()\n};\n\n/// <reference path=\"../../../../sweetalert2.d.ts\"/>\n\n\n/** @type {InputClass[]} */\nconst inputClasses = ['input', 'file', 'range', 'select', 'radio', 'checkbox', 'textarea'];\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderInput = (instance, params) => {\n  const popup = getPopup();\n  if (!popup) {\n    return;\n  }\n  const innerParams = privateProps.innerParams.get(instance);\n  const rerender = !innerParams || params.input !== innerParams.input;\n  inputClasses.forEach(inputClass => {\n    const inputContainer = getDirectChildByClass(popup, swalClasses[inputClass]);\n    if (!inputContainer) {\n      return;\n    }\n\n    // set attributes\n    setAttributes(inputClass, params.inputAttributes);\n\n    // set class\n    inputContainer.className = swalClasses[inputClass];\n    if (rerender) {\n      hide(inputContainer);\n    }\n  });\n  if (params.input) {\n    if (rerender) {\n      showInput(params);\n    }\n    // set custom class\n    setCustomClass(params);\n  }\n};\n\n/**\n * @param {SweetAlertOptions} params\n */\nconst showInput = params => {\n  if (!params.input) {\n    return;\n  }\n  if (!renderInputType[params.input]) {\n    error(`Unexpected type of input! Expected ${Object.keys(renderInputType).join(' | ')}, got \"${params.input}\"`);\n    return;\n  }\n  const inputContainer = getInputContainer(params.input);\n  if (!inputContainer) {\n    return;\n  }\n  const input = renderInputType[params.input](inputContainer, params);\n  show(inputContainer);\n\n  // input autofocus\n  if (params.inputAutoFocus) {\n    setTimeout(() => {\n      focusInput(input);\n    });\n  }\n};\n\n/**\n * @param {HTMLInputElement} input\n */\nconst removeAttributes = input => {\n  for (let i = 0; i < input.attributes.length; i++) {\n    const attrName = input.attributes[i].name;\n    if (!['id', 'type', 'value', 'style'].includes(attrName)) {\n      input.removeAttribute(attrName);\n    }\n  }\n};\n\n/**\n * @param {InputClass} inputClass\n * @param {SweetAlertOptions['inputAttributes']} inputAttributes\n */\nconst setAttributes = (inputClass, inputAttributes) => {\n  const popup = getPopup();\n  if (!popup) {\n    return;\n  }\n  const input = getInput$1(popup, inputClass);\n  if (!input) {\n    return;\n  }\n  removeAttributes(input);\n  for (const attr in inputAttributes) {\n    input.setAttribute(attr, inputAttributes[attr]);\n  }\n};\n\n/**\n * @param {SweetAlertOptions} params\n */\nconst setCustomClass = params => {\n  if (!params.input) {\n    return;\n  }\n  const inputContainer = getInputContainer(params.input);\n  if (inputContainer) {\n    applyCustomClass(inputContainer, params, 'input');\n  }\n};\n\n/**\n * @param {HTMLInputElement | HTMLTextAreaElement} input\n * @param {SweetAlertOptions} params\n */\nconst setInputPlaceholder = (input, params) => {\n  if (!input.placeholder && params.inputPlaceholder) {\n    input.placeholder = params.inputPlaceholder;\n  }\n};\n\n/**\n * @param {Input} input\n * @param {Input} prependTo\n * @param {SweetAlertOptions} params\n */\nconst setInputLabel = (input, prependTo, params) => {\n  if (params.inputLabel) {\n    const label = document.createElement('label');\n    const labelClass = swalClasses['input-label'];\n    label.setAttribute('for', input.id);\n    label.className = labelClass;\n    if (typeof params.customClass === 'object') {\n      addClass(label, params.customClass.inputLabel);\n    }\n    label.innerText = params.inputLabel;\n    prependTo.insertAdjacentElement('beforebegin', label);\n  }\n};\n\n/**\n * @param {SweetAlertInput} inputType\n * @returns {HTMLElement | undefined}\n */\nconst getInputContainer = inputType => {\n  const popup = getPopup();\n  if (!popup) {\n    return;\n  }\n  return getDirectChildByClass(popup, swalClasses[(/** @type {SwalClass} */inputType)] || swalClasses.input);\n};\n\n/**\n * @param {HTMLInputElement | HTMLOutputElement | HTMLTextAreaElement} input\n * @param {SweetAlertOptions['inputValue']} inputValue\n */\nconst checkAndSetInputValue = (input, inputValue) => {\n  if (['string', 'number'].includes(typeof inputValue)) {\n    input.value = `${inputValue}`;\n  } else if (!isPromise(inputValue)) {\n    warn(`Unexpected type of inputValue! Expected \"string\", \"number\" or \"Promise\", got \"${typeof inputValue}\"`);\n  }\n};\n\n/** @type {Record<SweetAlertInput, (input: Input | HTMLElement, params: SweetAlertOptions) => Input>} */\nconst renderInputType = {};\n\n/**\n * @param {HTMLInputElement} input\n * @param {SweetAlertOptions} params\n * @returns {HTMLInputElement}\n */\nrenderInputType.text = renderInputType.email = renderInputType.password = renderInputType.number = renderInputType.tel = renderInputType.url = renderInputType.search = renderInputType.date = renderInputType['datetime-local'] = renderInputType.time = renderInputType.week = renderInputType.month = /** @type {(input: Input | HTMLElement, params: SweetAlertOptions) => Input} */\n(input, params) => {\n  checkAndSetInputValue(input, params.inputValue);\n  setInputLabel(input, input, params);\n  setInputPlaceholder(input, params);\n  input.type = params.input;\n  return input;\n};\n\n/**\n * @param {HTMLInputElement} input\n * @param {SweetAlertOptions} params\n * @returns {HTMLInputElement}\n */\nrenderInputType.file = (input, params) => {\n  setInputLabel(input, input, params);\n  setInputPlaceholder(input, params);\n  return input;\n};\n\n/**\n * @param {HTMLInputElement} range\n * @param {SweetAlertOptions} params\n * @returns {HTMLInputElement}\n */\nrenderInputType.range = (range, params) => {\n  const rangeInput = range.querySelector('input');\n  const rangeOutput = range.querySelector('output');\n  checkAndSetInputValue(rangeInput, params.inputValue);\n  rangeInput.type = params.input;\n  checkAndSetInputValue(rangeOutput, params.inputValue);\n  setInputLabel(rangeInput, range, params);\n  return range;\n};\n\n/**\n * @param {HTMLSelectElement} select\n * @param {SweetAlertOptions} params\n * @returns {HTMLSelectElement}\n */\nrenderInputType.select = (select, params) => {\n  select.textContent = '';\n  if (params.inputPlaceholder) {\n    const placeholder = document.createElement('option');\n    setInnerHtml(placeholder, params.inputPlaceholder);\n    placeholder.value = '';\n    placeholder.disabled = true;\n    placeholder.selected = true;\n    select.appendChild(placeholder);\n  }\n  setInputLabel(select, select, params);\n  return select;\n};\n\n/**\n * @param {HTMLInputElement} radio\n * @returns {HTMLInputElement}\n */\nrenderInputType.radio = radio => {\n  radio.textContent = '';\n  return radio;\n};\n\n/**\n * @param {HTMLLabelElement} checkboxContainer\n * @param {SweetAlertOptions} params\n * @returns {HTMLInputElement}\n */\nrenderInputType.checkbox = (checkboxContainer, params) => {\n  const checkbox = getInput$1(getPopup(), 'checkbox');\n  checkbox.value = '1';\n  checkbox.checked = Boolean(params.inputValue);\n  const label = checkboxContainer.querySelector('span');\n  setInnerHtml(label, params.inputPlaceholder || params.inputLabel);\n  return checkbox;\n};\n\n/**\n * @param {HTMLTextAreaElement} textarea\n * @param {SweetAlertOptions} params\n * @returns {HTMLTextAreaElement}\n */\nrenderInputType.textarea = (textarea, params) => {\n  checkAndSetInputValue(textarea, params.inputValue);\n  setInputPlaceholder(textarea, params);\n  setInputLabel(textarea, textarea, params);\n\n  /**\n   * @param {HTMLElement} el\n   * @returns {number}\n   */\n  const getMargin = el => parseInt(window.getComputedStyle(el).marginLeft) + parseInt(window.getComputedStyle(el).marginRight);\n\n  // https://github.com/sweetalert2/sweetalert2/issues/2291\n  setTimeout(() => {\n    // https://github.com/sweetalert2/sweetalert2/issues/1699\n    if ('MutationObserver' in window) {\n      const initialPopupWidth = parseInt(window.getComputedStyle(getPopup()).width);\n      const textareaResizeHandler = () => {\n        // check if texarea is still in document (i.e. popup wasn't closed in the meantime)\n        if (!document.body.contains(textarea)) {\n          return;\n        }\n        const textareaWidth = textarea.offsetWidth + getMargin(textarea);\n        if (textareaWidth > initialPopupWidth) {\n          getPopup().style.width = `${textareaWidth}px`;\n        } else {\n          applyNumericalStyle(getPopup(), 'width', params.width);\n        }\n      };\n      new MutationObserver(textareaResizeHandler).observe(textarea, {\n        attributes: true,\n        attributeFilter: ['style']\n      });\n    }\n  });\n  return textarea;\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderContent = (instance, params) => {\n  const htmlContainer = getHtmlContainer();\n  if (!htmlContainer) {\n    return;\n  }\n  showWhenInnerHtmlPresent(htmlContainer);\n  applyCustomClass(htmlContainer, params, 'htmlContainer');\n\n  // Content as HTML\n  if (params.html) {\n    parseHtmlToContainer(params.html, htmlContainer);\n    show(htmlContainer, 'block');\n  }\n\n  // Content as plain text\n  else if (params.text) {\n    htmlContainer.textContent = params.text;\n    show(htmlContainer, 'block');\n  }\n\n  // No content\n  else {\n    hide(htmlContainer);\n  }\n  renderInput(instance, params);\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderFooter = (instance, params) => {\n  const footer = getFooter();\n  if (!footer) {\n    return;\n  }\n  showWhenInnerHtmlPresent(footer);\n  toggle(footer, params.footer, 'block');\n  if (params.footer) {\n    parseHtmlToContainer(params.footer, footer);\n  }\n\n  // Custom class\n  applyCustomClass(footer, params, 'footer');\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderIcon = (instance, params) => {\n  const innerParams = privateProps.innerParams.get(instance);\n  const icon = getIcon();\n  if (!icon) {\n    return;\n  }\n\n  // if the given icon already rendered, apply the styling without re-rendering the icon\n  if (innerParams && params.icon === innerParams.icon) {\n    // Custom or default content\n    setContent(icon, params);\n    applyStyles(icon, params);\n    return;\n  }\n  if (!params.icon && !params.iconHtml) {\n    hide(icon);\n    return;\n  }\n  if (params.icon && Object.keys(iconTypes).indexOf(params.icon) === -1) {\n    error(`Unknown icon! Expected \"success\", \"error\", \"warning\", \"info\" or \"question\", got \"${params.icon}\"`);\n    hide(icon);\n    return;\n  }\n  show(icon);\n\n  // Custom or default content\n  setContent(icon, params);\n  applyStyles(icon, params);\n\n  // Animate icon\n  addClass(icon, params.showClass && params.showClass.icon);\n\n  // Re-adjust the success icon on system theme change\n  const colorSchemeQueryList = window.matchMedia('(prefers-color-scheme: dark)');\n  colorSchemeQueryList.addEventListener('change', adjustSuccessIconBackgroundColor);\n};\n\n/**\n * @param {HTMLElement} icon\n * @param {SweetAlertOptions} params\n */\nconst applyStyles = (icon, params) => {\n  for (const [iconType, iconClassName] of Object.entries(iconTypes)) {\n    if (params.icon !== iconType) {\n      removeClass(icon, iconClassName);\n    }\n  }\n  addClass(icon, params.icon && iconTypes[params.icon]);\n\n  // Icon color\n  setColor(icon, params);\n\n  // Success icon background color\n  adjustSuccessIconBackgroundColor();\n\n  // Custom class\n  applyCustomClass(icon, params, 'icon');\n};\n\n// Adjust success icon background color to match the popup background color\nconst adjustSuccessIconBackgroundColor = () => {\n  const popup = getPopup();\n  if (!popup) {\n    return;\n  }\n  const popupBackgroundColor = window.getComputedStyle(popup).getPropertyValue('background-color');\n  /** @type {NodeListOf<HTMLElement>} */\n  const successIconParts = popup.querySelectorAll('[class^=swal2-success-circular-line], .swal2-success-fix');\n  for (let i = 0; i < successIconParts.length; i++) {\n    successIconParts[i].style.backgroundColor = popupBackgroundColor;\n  }\n};\nconst successIconHtml = `\n  <div class=\"swal2-success-circular-line-left\"></div>\n  <span class=\"swal2-success-line-tip\"></span> <span class=\"swal2-success-line-long\"></span>\n  <div class=\"swal2-success-ring\"></div> <div class=\"swal2-success-fix\"></div>\n  <div class=\"swal2-success-circular-line-right\"></div>\n`;\nconst errorIconHtml = `\n  <span class=\"swal2-x-mark\">\n    <span class=\"swal2-x-mark-line-left\"></span>\n    <span class=\"swal2-x-mark-line-right\"></span>\n  </span>\n`;\n\n/**\n * @param {HTMLElement} icon\n * @param {SweetAlertOptions} params\n */\nconst setContent = (icon, params) => {\n  if (!params.icon && !params.iconHtml) {\n    return;\n  }\n  let oldContent = icon.innerHTML;\n  let newContent = '';\n  if (params.iconHtml) {\n    newContent = iconContent(params.iconHtml);\n  } else if (params.icon === 'success') {\n    newContent = successIconHtml;\n    oldContent = oldContent.replace(/ style=\".*?\"/g, ''); // undo adjustSuccessIconBackgroundColor()\n  } else if (params.icon === 'error') {\n    newContent = errorIconHtml;\n  } else if (params.icon) {\n    const defaultIconHtml = {\n      question: '?',\n      warning: '!',\n      info: 'i'\n    };\n    newContent = iconContent(defaultIconHtml[params.icon]);\n  }\n  if (oldContent.trim() !== newContent.trim()) {\n    setInnerHtml(icon, newContent);\n  }\n};\n\n/**\n * @param {HTMLElement} icon\n * @param {SweetAlertOptions} params\n */\nconst setColor = (icon, params) => {\n  if (!params.iconColor) {\n    return;\n  }\n  icon.style.color = params.iconColor;\n  icon.style.borderColor = params.iconColor;\n  for (const sel of ['.swal2-success-line-tip', '.swal2-success-line-long', '.swal2-x-mark-line-left', '.swal2-x-mark-line-right']) {\n    setStyle(icon, sel, 'background-color', params.iconColor);\n  }\n  setStyle(icon, '.swal2-success-ring', 'border-color', params.iconColor);\n};\n\n/**\n * @param {string} content\n * @returns {string}\n */\nconst iconContent = content => `<div class=\"${swalClasses['icon-content']}\">${content}</div>`;\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderImage = (instance, params) => {\n  const image = getImage();\n  if (!image) {\n    return;\n  }\n  if (!params.imageUrl) {\n    hide(image);\n    return;\n  }\n  show(image, '');\n\n  // Src, alt\n  image.setAttribute('src', params.imageUrl);\n  image.setAttribute('alt', params.imageAlt || '');\n\n  // Width, height\n  applyNumericalStyle(image, 'width', params.imageWidth);\n  applyNumericalStyle(image, 'height', params.imageHeight);\n\n  // Class\n  image.className = swalClasses.image;\n  applyCustomClass(image, params, 'image');\n};\n\nlet dragging = false;\nlet mousedownX = 0;\nlet mousedownY = 0;\nlet initialX = 0;\nlet initialY = 0;\n\n/**\n * @param {HTMLElement} popup\n */\nconst addDraggableListeners = popup => {\n  popup.addEventListener('mousedown', down);\n  document.body.addEventListener('mousemove', move);\n  popup.addEventListener('mouseup', up);\n  popup.addEventListener('touchstart', down);\n  document.body.addEventListener('touchmove', move);\n  popup.addEventListener('touchend', up);\n};\n\n/**\n * @param {HTMLElement} popup\n */\nconst removeDraggableListeners = popup => {\n  popup.removeEventListener('mousedown', down);\n  document.body.removeEventListener('mousemove', move);\n  popup.removeEventListener('mouseup', up);\n  popup.removeEventListener('touchstart', down);\n  document.body.removeEventListener('touchmove', move);\n  popup.removeEventListener('touchend', up);\n};\n\n/**\n * @param {MouseEvent | TouchEvent} event\n */\nconst down = event => {\n  const popup = getPopup();\n  if (event.target === popup || getIcon().contains(/** @type {HTMLElement} */event.target)) {\n    dragging = true;\n    const clientXY = getClientXY(event);\n    mousedownX = clientXY.clientX;\n    mousedownY = clientXY.clientY;\n    initialX = parseInt(popup.style.insetInlineStart) || 0;\n    initialY = parseInt(popup.style.insetBlockStart) || 0;\n    addClass(popup, 'swal2-dragging');\n  }\n};\n\n/**\n * @param {MouseEvent | TouchEvent} event\n */\nconst move = event => {\n  const popup = getPopup();\n  if (dragging) {\n    let {\n      clientX,\n      clientY\n    } = getClientXY(event);\n    popup.style.insetInlineStart = `${initialX + (clientX - mousedownX)}px`;\n    popup.style.insetBlockStart = `${initialY + (clientY - mousedownY)}px`;\n  }\n};\nconst up = () => {\n  const popup = getPopup();\n  dragging = false;\n  removeClass(popup, 'swal2-dragging');\n};\n\n/**\n * @param {MouseEvent | TouchEvent} event\n * @returns {{ clientX: number, clientY: number }}\n */\nconst getClientXY = event => {\n  let clientX = 0,\n    clientY = 0;\n  if (event.type.startsWith('mouse')) {\n    clientX = /** @type {MouseEvent} */event.clientX;\n    clientY = /** @type {MouseEvent} */event.clientY;\n  } else if (event.type.startsWith('touch')) {\n    clientX = /** @type {TouchEvent} */event.touches[0].clientX;\n    clientY = /** @type {TouchEvent} */event.touches[0].clientY;\n  }\n  return {\n    clientX,\n    clientY\n  };\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderPopup = (instance, params) => {\n  const container = getContainer();\n  const popup = getPopup();\n  if (!container || !popup) {\n    return;\n  }\n\n  // Width\n  // https://github.com/sweetalert2/sweetalert2/issues/2170\n  if (params.toast) {\n    applyNumericalStyle(container, 'width', params.width);\n    popup.style.width = '100%';\n    const loader = getLoader();\n    if (loader) {\n      popup.insertBefore(loader, getIcon());\n    }\n  } else {\n    applyNumericalStyle(popup, 'width', params.width);\n  }\n\n  // Padding\n  applyNumericalStyle(popup, 'padding', params.padding);\n\n  // Color\n  if (params.color) {\n    popup.style.color = params.color;\n  }\n\n  // Background\n  if (params.background) {\n    popup.style.background = params.background;\n  }\n  hide(getValidationMessage());\n\n  // Classes\n  addClasses$1(popup, params);\n  if (params.draggable && !params.toast) {\n    addClass(popup, swalClasses.draggable);\n    addDraggableListeners(popup);\n  } else {\n    removeClass(popup, swalClasses.draggable);\n    removeDraggableListeners(popup);\n  }\n};\n\n/**\n * @param {HTMLElement} popup\n * @param {SweetAlertOptions} params\n */\nconst addClasses$1 = (popup, params) => {\n  const showClass = params.showClass || {};\n  // Default Class + showClass when updating Swal.update({})\n  popup.className = `${swalClasses.popup} ${isVisible$1(popup) ? showClass.popup : ''}`;\n  if (params.toast) {\n    addClass([document.documentElement, document.body], swalClasses['toast-shown']);\n    addClass(popup, swalClasses.toast);\n  } else {\n    addClass(popup, swalClasses.modal);\n  }\n\n  // Custom class\n  applyCustomClass(popup, params, 'popup');\n  // TODO: remove in the next major\n  if (typeof params.customClass === 'string') {\n    addClass(popup, params.customClass);\n  }\n\n  // Icon class (#1842)\n  if (params.icon) {\n    addClass(popup, swalClasses[`icon-${params.icon}`]);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderProgressSteps = (instance, params) => {\n  const progressStepsContainer = getProgressSteps();\n  if (!progressStepsContainer) {\n    return;\n  }\n  const {\n    progressSteps,\n    currentProgressStep\n  } = params;\n  if (!progressSteps || progressSteps.length === 0 || currentProgressStep === undefined) {\n    hide(progressStepsContainer);\n    return;\n  }\n  show(progressStepsContainer);\n  progressStepsContainer.textContent = '';\n  if (currentProgressStep >= progressSteps.length) {\n    warn('Invalid currentProgressStep parameter, it should be less than progressSteps.length ' + '(currentProgressStep like JS arrays starts from 0)');\n  }\n  progressSteps.forEach((step, index) => {\n    const stepEl = createStepElement(step);\n    progressStepsContainer.appendChild(stepEl);\n    if (index === currentProgressStep) {\n      addClass(stepEl, swalClasses['active-progress-step']);\n    }\n    if (index !== progressSteps.length - 1) {\n      const lineEl = createLineElement(params);\n      progressStepsContainer.appendChild(lineEl);\n    }\n  });\n};\n\n/**\n * @param {string} step\n * @returns {HTMLLIElement}\n */\nconst createStepElement = step => {\n  const stepEl = document.createElement('li');\n  addClass(stepEl, swalClasses['progress-step']);\n  setInnerHtml(stepEl, step);\n  return stepEl;\n};\n\n/**\n * @param {SweetAlertOptions} params\n * @returns {HTMLLIElement}\n */\nconst createLineElement = params => {\n  const lineEl = document.createElement('li');\n  addClass(lineEl, swalClasses['progress-step-line']);\n  if (params.progressStepsDistance) {\n    applyNumericalStyle(lineEl, 'width', params.progressStepsDistance);\n  }\n  return lineEl;\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst renderTitle = (instance, params) => {\n  const title = getTitle();\n  if (!title) {\n    return;\n  }\n  showWhenInnerHtmlPresent(title);\n  toggle(title, params.title || params.titleText, 'block');\n  if (params.title) {\n    parseHtmlToContainer(params.title, title);\n  }\n  if (params.titleText) {\n    title.innerText = params.titleText;\n  }\n\n  // Custom class\n  applyCustomClass(title, params, 'title');\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst render = (instance, params) => {\n  renderPopup(instance, params);\n  renderContainer(instance, params);\n  renderProgressSteps(instance, params);\n  renderIcon(instance, params);\n  renderImage(instance, params);\n  renderTitle(instance, params);\n  renderCloseButton(instance, params);\n  renderContent(instance, params);\n  renderActions(instance, params);\n  renderFooter(instance, params);\n  const popup = getPopup();\n  if (typeof params.didRender === 'function' && popup) {\n    params.didRender(popup);\n  }\n  globalState.eventEmitter.emit('didRender', popup);\n};\n\n/*\n * Global function to determine if SweetAlert2 popup is shown\n */\nconst isVisible = () => {\n  return isVisible$1(getPopup());\n};\n\n/*\n * Global function to click 'Confirm' button\n */\nconst clickConfirm = () => {\n  var _dom$getConfirmButton;\n  return (_dom$getConfirmButton = getConfirmButton()) === null || _dom$getConfirmButton === void 0 ? void 0 : _dom$getConfirmButton.click();\n};\n\n/*\n * Global function to click 'Deny' button\n */\nconst clickDeny = () => {\n  var _dom$getDenyButton;\n  return (_dom$getDenyButton = getDenyButton()) === null || _dom$getDenyButton === void 0 ? void 0 : _dom$getDenyButton.click();\n};\n\n/*\n * Global function to click 'Cancel' button\n */\nconst clickCancel = () => {\n  var _dom$getCancelButton;\n  return (_dom$getCancelButton = getCancelButton()) === null || _dom$getCancelButton === void 0 ? void 0 : _dom$getCancelButton.click();\n};\n\n/** @typedef {'cancel' | 'backdrop' | 'close' | 'esc' | 'timer'} DismissReason */\n\n/** @type {Record<DismissReason, DismissReason>} */\nconst DismissReason = Object.freeze({\n  cancel: 'cancel',\n  backdrop: 'backdrop',\n  close: 'close',\n  esc: 'esc',\n  timer: 'timer'\n});\n\n/**\n * @param {GlobalState} globalState\n */\nconst removeKeydownHandler = globalState => {\n  if (globalState.keydownTarget && globalState.keydownHandlerAdded) {\n    globalState.keydownTarget.removeEventListener('keydown', globalState.keydownHandler, {\n      capture: globalState.keydownListenerCapture\n    });\n    globalState.keydownHandlerAdded = false;\n  }\n};\n\n/**\n * @param {GlobalState} globalState\n * @param {SweetAlertOptions} innerParams\n * @param {*} dismissWith\n */\nconst addKeydownHandler = (globalState, innerParams, dismissWith) => {\n  removeKeydownHandler(globalState);\n  if (!innerParams.toast) {\n    globalState.keydownHandler = e => keydownHandler(innerParams, e, dismissWith);\n    globalState.keydownTarget = innerParams.keydownListenerCapture ? window : getPopup();\n    globalState.keydownListenerCapture = innerParams.keydownListenerCapture;\n    globalState.keydownTarget.addEventListener('keydown', globalState.keydownHandler, {\n      capture: globalState.keydownListenerCapture\n    });\n    globalState.keydownHandlerAdded = true;\n  }\n};\n\n/**\n * @param {number} index\n * @param {number} increment\n */\nconst setFocus = (index, increment) => {\n  var _dom$getPopup;\n  const focusableElements = getFocusableElements();\n  // search for visible elements and select the next possible match\n  if (focusableElements.length) {\n    index = index + increment;\n\n    // rollover to first item\n    if (index === focusableElements.length) {\n      index = 0;\n\n      // go to last item\n    } else if (index === -1) {\n      index = focusableElements.length - 1;\n    }\n    focusableElements[index].focus();\n    return;\n  }\n  // no visible focusable elements, focus the popup\n  (_dom$getPopup = getPopup()) === null || _dom$getPopup === void 0 || _dom$getPopup.focus();\n};\nconst arrowKeysNextButton = ['ArrowRight', 'ArrowDown'];\nconst arrowKeysPreviousButton = ['ArrowLeft', 'ArrowUp'];\n\n/**\n * @param {SweetAlertOptions} innerParams\n * @param {KeyboardEvent} event\n * @param {Function} dismissWith\n */\nconst keydownHandler = (innerParams, event, dismissWith) => {\n  if (!innerParams) {\n    return; // This instance has already been destroyed\n  }\n\n  // Ignore keydown during IME composition\n  // https://developer.mozilla.org/en-US/docs/Web/API/Document/keydown_event#ignoring_keydown_during_ime_composition\n  // https://github.com/sweetalert2/sweetalert2/issues/720\n  // https://github.com/sweetalert2/sweetalert2/issues/2406\n  if (event.isComposing || event.keyCode === 229) {\n    return;\n  }\n  if (innerParams.stopKeydownPropagation) {\n    event.stopPropagation();\n  }\n\n  // ENTER\n  if (event.key === 'Enter') {\n    handleEnter(event, innerParams);\n  }\n\n  // TAB\n  else if (event.key === 'Tab') {\n    handleTab(event);\n  }\n\n  // ARROWS - switch focus between buttons\n  else if ([...arrowKeysNextButton, ...arrowKeysPreviousButton].includes(event.key)) {\n    handleArrows(event.key);\n  }\n\n  // ESC\n  else if (event.key === 'Escape') {\n    handleEsc(event, innerParams, dismissWith);\n  }\n};\n\n/**\n * @param {KeyboardEvent} event\n * @param {SweetAlertOptions} innerParams\n */\nconst handleEnter = (event, innerParams) => {\n  // https://github.com/sweetalert2/sweetalert2/issues/2386\n  if (!callIfFunction(innerParams.allowEnterKey)) {\n    return;\n  }\n  const input = getInput$1(getPopup(), innerParams.input);\n  if (event.target && input && event.target instanceof HTMLElement && event.target.outerHTML === input.outerHTML) {\n    if (['textarea', 'file'].includes(innerParams.input)) {\n      return; // do not submit\n    }\n    clickConfirm();\n    event.preventDefault();\n  }\n};\n\n/**\n * @param {KeyboardEvent} event\n */\nconst handleTab = event => {\n  const targetElement = event.target;\n  const focusableElements = getFocusableElements();\n  let btnIndex = -1;\n  for (let i = 0; i < focusableElements.length; i++) {\n    if (targetElement === focusableElements[i]) {\n      btnIndex = i;\n      break;\n    }\n  }\n\n  // Cycle to the next button\n  if (!event.shiftKey) {\n    setFocus(btnIndex, 1);\n  }\n\n  // Cycle to the prev button\n  else {\n    setFocus(btnIndex, -1);\n  }\n  event.stopPropagation();\n  event.preventDefault();\n};\n\n/**\n * @param {string} key\n */\nconst handleArrows = key => {\n  const actions = getActions();\n  const confirmButton = getConfirmButton();\n  const denyButton = getDenyButton();\n  const cancelButton = getCancelButton();\n  if (!actions || !confirmButton || !denyButton || !cancelButton) {\n    return;\n  }\n  /** @type HTMLElement[] */\n  const buttons = [confirmButton, denyButton, cancelButton];\n  if (document.activeElement instanceof HTMLElement && !buttons.includes(document.activeElement)) {\n    return;\n  }\n  const sibling = arrowKeysNextButton.includes(key) ? 'nextElementSibling' : 'previousElementSibling';\n  let buttonToFocus = document.activeElement;\n  if (!buttonToFocus) {\n    return;\n  }\n  for (let i = 0; i < actions.children.length; i++) {\n    buttonToFocus = buttonToFocus[sibling];\n    if (!buttonToFocus) {\n      return;\n    }\n    if (buttonToFocus instanceof HTMLButtonElement && isVisible$1(buttonToFocus)) {\n      break;\n    }\n  }\n  if (buttonToFocus instanceof HTMLButtonElement) {\n    buttonToFocus.focus();\n  }\n};\n\n/**\n * @param {KeyboardEvent} event\n * @param {SweetAlertOptions} innerParams\n * @param {Function} dismissWith\n */\nconst handleEsc = (event, innerParams, dismissWith) => {\n  if (callIfFunction(innerParams.allowEscapeKey)) {\n    event.preventDefault();\n    dismissWith(DismissReason.esc);\n  }\n};\n\n/**\n * This module contains `WeakMap`s for each effectively-\"private  property\" that a `Swal` has.\n * For example, to set the private property \"foo\" of `this` to \"bar\", you can `privateProps.foo.set(this, 'bar')`\n * This is the approach that Babel will probably take to implement private methods/fields\n *   https://github.com/tc39/proposal-private-methods\n *   https://github.com/babel/babel/pull/7555\n * Once we have the changes from that PR in Babel, and our core class fits reasonable in *one module*\n *   then we can use that language feature.\n */\n\nvar privateMethods = {\n  swalPromiseResolve: new WeakMap(),\n  swalPromiseReject: new WeakMap()\n};\n\n// From https://developer.paciellogroup.com/blog/2018/06/the-current-state-of-modal-dialog-accessibility/\n// Adding aria-hidden=\"true\" to elements outside of the active modal dialog ensures that\n// elements not within the active modal dialog will not be surfaced if a user opens a screen\n// reader’s list of elements (headings, form controls, landmarks, etc.) in the document.\n\nconst setAriaHidden = () => {\n  const container = getContainer();\n  const bodyChildren = Array.from(document.body.children);\n  bodyChildren.forEach(el => {\n    if (el.contains(container)) {\n      return;\n    }\n    if (el.hasAttribute('aria-hidden')) {\n      el.setAttribute('data-previous-aria-hidden', el.getAttribute('aria-hidden') || '');\n    }\n    el.setAttribute('aria-hidden', 'true');\n  });\n};\nconst unsetAriaHidden = () => {\n  const bodyChildren = Array.from(document.body.children);\n  bodyChildren.forEach(el => {\n    if (el.hasAttribute('data-previous-aria-hidden')) {\n      el.setAttribute('aria-hidden', el.getAttribute('data-previous-aria-hidden') || '');\n      el.removeAttribute('data-previous-aria-hidden');\n    } else {\n      el.removeAttribute('aria-hidden');\n    }\n  });\n};\n\n// @ts-ignore\nconst isSafariOrIOS = typeof window !== 'undefined' && !!window.GestureEvent; // true for Safari desktop + all iOS browsers https://stackoverflow.com/a/70585394\n\n/**\n * Fix iOS scrolling\n * http://stackoverflow.com/q/39626302\n */\nconst iOSfix = () => {\n  if (isSafariOrIOS && !hasClass(document.body, swalClasses.iosfix)) {\n    const offset = document.body.scrollTop;\n    document.body.style.top = `${offset * -1}px`;\n    addClass(document.body, swalClasses.iosfix);\n    lockBodyScroll();\n  }\n};\n\n/**\n * https://github.com/sweetalert2/sweetalert2/issues/1246\n */\nconst lockBodyScroll = () => {\n  const container = getContainer();\n  if (!container) {\n    return;\n  }\n  /** @type {boolean} */\n  let preventTouchMove;\n  /**\n   * @param {TouchEvent} event\n   */\n  container.ontouchstart = event => {\n    preventTouchMove = shouldPreventTouchMove(event);\n  };\n  /**\n   * @param {TouchEvent} event\n   */\n  container.ontouchmove = event => {\n    if (preventTouchMove) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n};\n\n/**\n * @param {TouchEvent} event\n * @returns {boolean}\n */\nconst shouldPreventTouchMove = event => {\n  const target = event.target;\n  const container = getContainer();\n  const htmlContainer = getHtmlContainer();\n  if (!container || !htmlContainer) {\n    return false;\n  }\n  if (isStylus(event) || isZoom(event)) {\n    return false;\n  }\n  if (target === container) {\n    return true;\n  }\n  if (!isScrollable(container) && target instanceof HTMLElement && target.tagName !== 'INPUT' &&\n  // #1603\n  target.tagName !== 'TEXTAREA' &&\n  // #2266\n  !(isScrollable(htmlContainer) &&\n  // #1944\n  htmlContainer.contains(target))) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * https://github.com/sweetalert2/sweetalert2/issues/1786\n *\n * @param {*} event\n * @returns {boolean}\n */\nconst isStylus = event => {\n  return event.touches && event.touches.length && event.touches[0].touchType === 'stylus';\n};\n\n/**\n * https://github.com/sweetalert2/sweetalert2/issues/1891\n *\n * @param {TouchEvent} event\n * @returns {boolean}\n */\nconst isZoom = event => {\n  return event.touches && event.touches.length > 1;\n};\nconst undoIOSfix = () => {\n  if (hasClass(document.body, swalClasses.iosfix)) {\n    const offset = parseInt(document.body.style.top, 10);\n    removeClass(document.body, swalClasses.iosfix);\n    document.body.style.top = '';\n    document.body.scrollTop = offset * -1;\n  }\n};\n\n/**\n * Measure scrollbar width for padding body during modal show/hide\n * https://github.com/twbs/bootstrap/blob/master/js/src/modal.js\n *\n * @returns {number}\n */\nconst measureScrollbar = () => {\n  const scrollDiv = document.createElement('div');\n  scrollDiv.className = swalClasses['scrollbar-measure'];\n  document.body.appendChild(scrollDiv);\n  const scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  return scrollbarWidth;\n};\n\n/**\n * Remember state in cases where opening and handling a modal will fiddle with it.\n * @type {number | null}\n */\nlet previousBodyPadding = null;\n\n/**\n * @param {string} initialBodyOverflow\n */\nconst replaceScrollbarWithPadding = initialBodyOverflow => {\n  // for queues, do not do this more than once\n  if (previousBodyPadding !== null) {\n    return;\n  }\n  // if the body has overflow\n  if (document.body.scrollHeight > window.innerHeight || initialBodyOverflow === 'scroll' // https://github.com/sweetalert2/sweetalert2/issues/2663\n  ) {\n    // add padding so the content doesn't shift after removal of scrollbar\n    previousBodyPadding = parseInt(window.getComputedStyle(document.body).getPropertyValue('padding-right'));\n    document.body.style.paddingRight = `${previousBodyPadding + measureScrollbar()}px`;\n  }\n};\nconst undoReplaceScrollbarWithPadding = () => {\n  if (previousBodyPadding !== null) {\n    document.body.style.paddingRight = `${previousBodyPadding}px`;\n    previousBodyPadding = null;\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {HTMLElement} container\n * @param {boolean} returnFocus\n * @param {Function} didClose\n */\nfunction removePopupAndResetState(instance, container, returnFocus, didClose) {\n  if (isToast()) {\n    triggerDidCloseAndDispose(instance, didClose);\n  } else {\n    restoreActiveElement(returnFocus).then(() => triggerDidCloseAndDispose(instance, didClose));\n    removeKeydownHandler(globalState);\n  }\n\n  // workaround for https://github.com/sweetalert2/sweetalert2/issues/2088\n  // for some reason removing the container in Safari will scroll the document to bottom\n  if (isSafariOrIOS) {\n    container.setAttribute('style', 'display:none !important');\n    container.removeAttribute('class');\n    container.innerHTML = '';\n  } else {\n    container.remove();\n  }\n  if (isModal()) {\n    undoReplaceScrollbarWithPadding();\n    undoIOSfix();\n    unsetAriaHidden();\n  }\n  removeBodyClasses();\n}\n\n/**\n * Remove SweetAlert2 classes from body\n */\nfunction removeBodyClasses() {\n  removeClass([document.documentElement, document.body], [swalClasses.shown, swalClasses['height-auto'], swalClasses['no-backdrop'], swalClasses['toast-shown']]);\n}\n\n/**\n * Instance method to close sweetAlert\n *\n * @param {any} resolveValue\n */\nfunction close(resolveValue) {\n  resolveValue = prepareResolveValue(resolveValue);\n  const swalPromiseResolve = privateMethods.swalPromiseResolve.get(this);\n  const didClose = triggerClosePopup(this);\n  if (this.isAwaitingPromise) {\n    // A swal awaiting for a promise (after a click on Confirm or Deny) cannot be dismissed anymore #2335\n    if (!resolveValue.isDismissed) {\n      handleAwaitingPromise(this);\n      swalPromiseResolve(resolveValue);\n    }\n  } else if (didClose) {\n    // Resolve Swal promise\n    swalPromiseResolve(resolveValue);\n  }\n}\nconst triggerClosePopup = instance => {\n  const popup = getPopup();\n  if (!popup) {\n    return false;\n  }\n  const innerParams = privateProps.innerParams.get(instance);\n  if (!innerParams || hasClass(popup, innerParams.hideClass.popup)) {\n    return false;\n  }\n  removeClass(popup, innerParams.showClass.popup);\n  addClass(popup, innerParams.hideClass.popup);\n  const backdrop = getContainer();\n  removeClass(backdrop, innerParams.showClass.backdrop);\n  addClass(backdrop, innerParams.hideClass.backdrop);\n  handlePopupAnimation(instance, popup, innerParams);\n  return true;\n};\n\n/**\n * @param {any} error\n */\nfunction rejectPromise(error) {\n  const rejectPromise = privateMethods.swalPromiseReject.get(this);\n  handleAwaitingPromise(this);\n  if (rejectPromise) {\n    // Reject Swal promise\n    rejectPromise(error);\n  }\n}\n\n/**\n * @param {SweetAlert} instance\n */\nconst handleAwaitingPromise = instance => {\n  if (instance.isAwaitingPromise) {\n    delete instance.isAwaitingPromise;\n    // The instance might have been previously partly destroyed, we must resume the destroy process in this case #2335\n    if (!privateProps.innerParams.get(instance)) {\n      instance._destroy();\n    }\n  }\n};\n\n/**\n * @param {any} resolveValue\n * @returns {SweetAlertResult}\n */\nconst prepareResolveValue = resolveValue => {\n  // When user calls Swal.close()\n  if (typeof resolveValue === 'undefined') {\n    return {\n      isConfirmed: false,\n      isDenied: false,\n      isDismissed: true\n    };\n  }\n  return Object.assign({\n    isConfirmed: false,\n    isDenied: false,\n    isDismissed: false\n  }, resolveValue);\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {HTMLElement} popup\n * @param {SweetAlertOptions} innerParams\n */\nconst handlePopupAnimation = (instance, popup, innerParams) => {\n  var _globalState$eventEmi;\n  const container = getContainer();\n  // If animation is supported, animate\n  const animationIsSupported = hasCssAnimation(popup);\n  if (typeof innerParams.willClose === 'function') {\n    innerParams.willClose(popup);\n  }\n  (_globalState$eventEmi = globalState.eventEmitter) === null || _globalState$eventEmi === void 0 || _globalState$eventEmi.emit('willClose', popup);\n  if (animationIsSupported) {\n    animatePopup(instance, popup, container, innerParams.returnFocus, innerParams.didClose);\n  } else {\n    // Otherwise, remove immediately\n    removePopupAndResetState(instance, container, innerParams.returnFocus, innerParams.didClose);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {HTMLElement} popup\n * @param {HTMLElement} container\n * @param {boolean} returnFocus\n * @param {Function} didClose\n */\nconst animatePopup = (instance, popup, container, returnFocus, didClose) => {\n  globalState.swalCloseEventFinishedCallback = removePopupAndResetState.bind(null, instance, container, returnFocus, didClose);\n  /**\n   * @param {AnimationEvent | TransitionEvent} e\n   */\n  const swalCloseAnimationFinished = function (e) {\n    if (e.target === popup) {\n      var _globalState$swalClos;\n      (_globalState$swalClos = globalState.swalCloseEventFinishedCallback) === null || _globalState$swalClos === void 0 || _globalState$swalClos.call(globalState);\n      delete globalState.swalCloseEventFinishedCallback;\n      popup.removeEventListener('animationend', swalCloseAnimationFinished);\n      popup.removeEventListener('transitionend', swalCloseAnimationFinished);\n    }\n  };\n  popup.addEventListener('animationend', swalCloseAnimationFinished);\n  popup.addEventListener('transitionend', swalCloseAnimationFinished);\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {Function} didClose\n */\nconst triggerDidCloseAndDispose = (instance, didClose) => {\n  setTimeout(() => {\n    var _globalState$eventEmi2;\n    if (typeof didClose === 'function') {\n      didClose.bind(instance.params)();\n    }\n    (_globalState$eventEmi2 = globalState.eventEmitter) === null || _globalState$eventEmi2 === void 0 || _globalState$eventEmi2.emit('didClose');\n    // instance might have been destroyed already\n    if (instance._destroy) {\n      instance._destroy();\n    }\n  });\n};\n\n/**\n * Shows loader (spinner), this is useful with AJAX requests.\n * By default the loader be shown instead of the \"Confirm\" button.\n *\n * @param {HTMLButtonElement | null} [buttonToReplace]\n */\nconst showLoading = buttonToReplace => {\n  let popup = getPopup();\n  if (!popup) {\n    new Swal();\n  }\n  popup = getPopup();\n  if (!popup) {\n    return;\n  }\n  const loader = getLoader();\n  if (isToast()) {\n    hide(getIcon());\n  } else {\n    replaceButton(popup, buttonToReplace);\n  }\n  show(loader);\n  popup.setAttribute('data-loading', 'true');\n  popup.setAttribute('aria-busy', 'true');\n  popup.focus();\n};\n\n/**\n * @param {HTMLElement} popup\n * @param {HTMLButtonElement | null} [buttonToReplace]\n */\nconst replaceButton = (popup, buttonToReplace) => {\n  const actions = getActions();\n  const loader = getLoader();\n  if (!actions || !loader) {\n    return;\n  }\n  if (!buttonToReplace && isVisible$1(getConfirmButton())) {\n    buttonToReplace = getConfirmButton();\n  }\n  show(actions);\n  if (buttonToReplace) {\n    hide(buttonToReplace);\n    loader.setAttribute('data-button-to-replace', buttonToReplace.className);\n    actions.insertBefore(loader, buttonToReplace);\n  }\n  addClass([popup, actions], swalClasses.loading);\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst handleInputOptionsAndValue = (instance, params) => {\n  if (params.input === 'select' || params.input === 'radio') {\n    handleInputOptions(instance, params);\n  } else if (['text', 'email', 'number', 'tel', 'textarea'].some(i => i === params.input) && (hasToPromiseFn(params.inputValue) || isPromise(params.inputValue))) {\n    showLoading(getConfirmButton());\n    handleInputValue(instance, params);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} innerParams\n * @returns {SweetAlertInputValue}\n */\nconst getInputValue = (instance, innerParams) => {\n  const input = instance.getInput();\n  if (!input) {\n    return null;\n  }\n  switch (innerParams.input) {\n    case 'checkbox':\n      return getCheckboxValue(input);\n    case 'radio':\n      return getRadioValue(input);\n    case 'file':\n      return getFileValue(input);\n    default:\n      return innerParams.inputAutoTrim ? input.value.trim() : input.value;\n  }\n};\n\n/**\n * @param {HTMLInputElement} input\n * @returns {number}\n */\nconst getCheckboxValue = input => input.checked ? 1 : 0;\n\n/**\n * @param {HTMLInputElement} input\n * @returns {string | null}\n */\nconst getRadioValue = input => input.checked ? input.value : null;\n\n/**\n * @param {HTMLInputElement} input\n * @returns {FileList | File | null}\n */\nconst getFileValue = input => input.files && input.files.length ? input.getAttribute('multiple') !== null ? input.files : input.files[0] : null;\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst handleInputOptions = (instance, params) => {\n  const popup = getPopup();\n  if (!popup) {\n    return;\n  }\n  /**\n   * @param {Record<string, any>} inputOptions\n   */\n  const processInputOptions = inputOptions => {\n    if (params.input === 'select') {\n      populateSelectOptions(popup, formatInputOptions(inputOptions), params);\n    } else if (params.input === 'radio') {\n      populateRadioOptions(popup, formatInputOptions(inputOptions), params);\n    }\n  };\n  if (hasToPromiseFn(params.inputOptions) || isPromise(params.inputOptions)) {\n    showLoading(getConfirmButton());\n    asPromise(params.inputOptions).then(inputOptions => {\n      instance.hideLoading();\n      processInputOptions(inputOptions);\n    });\n  } else if (typeof params.inputOptions === 'object') {\n    processInputOptions(params.inputOptions);\n  } else {\n    error(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof params.inputOptions}`);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertOptions} params\n */\nconst handleInputValue = (instance, params) => {\n  const input = instance.getInput();\n  if (!input) {\n    return;\n  }\n  hide(input);\n  asPromise(params.inputValue).then(inputValue => {\n    input.value = params.input === 'number' ? `${parseFloat(inputValue) || 0}` : `${inputValue}`;\n    show(input);\n    input.focus();\n    instance.hideLoading();\n  }).catch(err => {\n    error(`Error in inputValue promise: ${err}`);\n    input.value = '';\n    show(input);\n    input.focus();\n    instance.hideLoading();\n  });\n};\n\n/**\n * @param {HTMLElement} popup\n * @param {InputOptionFlattened[]} inputOptions\n * @param {SweetAlertOptions} params\n */\nfunction populateSelectOptions(popup, inputOptions, params) {\n  const select = getDirectChildByClass(popup, swalClasses.select);\n  if (!select) {\n    return;\n  }\n  /**\n   * @param {HTMLElement} parent\n   * @param {string} optionLabel\n   * @param {string} optionValue\n   */\n  const renderOption = (parent, optionLabel, optionValue) => {\n    const option = document.createElement('option');\n    option.value = optionValue;\n    setInnerHtml(option, optionLabel);\n    option.selected = isSelected(optionValue, params.inputValue);\n    parent.appendChild(option);\n  };\n  inputOptions.forEach(inputOption => {\n    const optionValue = inputOption[0];\n    const optionLabel = inputOption[1];\n    // <optgroup> spec:\n    // https://www.w3.org/TR/html401/interact/forms.html#h-17.6\n    // \"...all OPTGROUP elements must be specified directly within a SELECT element (i.e., groups may not be nested)...\"\n    // check whether this is a <optgroup>\n    if (Array.isArray(optionLabel)) {\n      // if it is an array, then it is an <optgroup>\n      const optgroup = document.createElement('optgroup');\n      optgroup.label = optionValue;\n      optgroup.disabled = false; // not configurable for now\n      select.appendChild(optgroup);\n      optionLabel.forEach(o => renderOption(optgroup, o[1], o[0]));\n    } else {\n      // case of <option>\n      renderOption(select, optionLabel, optionValue);\n    }\n  });\n  select.focus();\n}\n\n/**\n * @param {HTMLElement} popup\n * @param {InputOptionFlattened[]} inputOptions\n * @param {SweetAlertOptions} params\n */\nfunction populateRadioOptions(popup, inputOptions, params) {\n  const radio = getDirectChildByClass(popup, swalClasses.radio);\n  if (!radio) {\n    return;\n  }\n  inputOptions.forEach(inputOption => {\n    const radioValue = inputOption[0];\n    const radioLabel = inputOption[1];\n    const radioInput = document.createElement('input');\n    const radioLabelElement = document.createElement('label');\n    radioInput.type = 'radio';\n    radioInput.name = swalClasses.radio;\n    radioInput.value = radioValue;\n    if (isSelected(radioValue, params.inputValue)) {\n      radioInput.checked = true;\n    }\n    const label = document.createElement('span');\n    setInnerHtml(label, radioLabel);\n    label.className = swalClasses.label;\n    radioLabelElement.appendChild(radioInput);\n    radioLabelElement.appendChild(label);\n    radio.appendChild(radioLabelElement);\n  });\n  const radios = radio.querySelectorAll('input');\n  if (radios.length) {\n    radios[0].focus();\n  }\n}\n\n/**\n * Converts `inputOptions` into an array of `[value, label]`s\n *\n * @param {Record<string, any>} inputOptions\n * @typedef {string[]} InputOptionFlattened\n * @returns {InputOptionFlattened[]}\n */\nconst formatInputOptions = inputOptions => {\n  /** @type {InputOptionFlattened[]} */\n  const result = [];\n  if (inputOptions instanceof Map) {\n    inputOptions.forEach((value, key) => {\n      let valueFormatted = value;\n      if (typeof valueFormatted === 'object') {\n        // case of <optgroup>\n        valueFormatted = formatInputOptions(valueFormatted);\n      }\n      result.push([key, valueFormatted]);\n    });\n  } else {\n    Object.keys(inputOptions).forEach(key => {\n      let valueFormatted = inputOptions[key];\n      if (typeof valueFormatted === 'object') {\n        // case of <optgroup>\n        valueFormatted = formatInputOptions(valueFormatted);\n      }\n      result.push([key, valueFormatted]);\n    });\n  }\n  return result;\n};\n\n/**\n * @param {string} optionValue\n * @param {SweetAlertInputValue} inputValue\n * @returns {boolean}\n */\nconst isSelected = (optionValue, inputValue) => {\n  return !!inputValue && inputValue.toString() === optionValue.toString();\n};\n\n/**\n * @param {SweetAlert} instance\n */\nconst handleConfirmButtonClick = instance => {\n  const innerParams = privateProps.innerParams.get(instance);\n  instance.disableButtons();\n  if (innerParams.input) {\n    handleConfirmOrDenyWithInput(instance, 'confirm');\n  } else {\n    confirm(instance, true);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n */\nconst handleDenyButtonClick = instance => {\n  const innerParams = privateProps.innerParams.get(instance);\n  instance.disableButtons();\n  if (innerParams.returnInputValueOnDeny) {\n    handleConfirmOrDenyWithInput(instance, 'deny');\n  } else {\n    deny(instance, false);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {Function} dismissWith\n */\nconst handleCancelButtonClick = (instance, dismissWith) => {\n  instance.disableButtons();\n  dismissWith(DismissReason.cancel);\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {'confirm' | 'deny'} type\n */\nconst handleConfirmOrDenyWithInput = (instance, type) => {\n  const innerParams = privateProps.innerParams.get(instance);\n  if (!innerParams.input) {\n    error(`The \"input\" parameter is needed to be set when using returnInputValueOn${capitalizeFirstLetter(type)}`);\n    return;\n  }\n  const input = instance.getInput();\n  const inputValue = getInputValue(instance, innerParams);\n  if (innerParams.inputValidator) {\n    handleInputValidator(instance, inputValue, type);\n  } else if (input && !input.checkValidity()) {\n    instance.enableButtons();\n    instance.showValidationMessage(innerParams.validationMessage || input.validationMessage);\n  } else if (type === 'deny') {\n    deny(instance, inputValue);\n  } else {\n    confirm(instance, inputValue);\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {SweetAlertInputValue} inputValue\n * @param {'confirm' | 'deny'} type\n */\nconst handleInputValidator = (instance, inputValue, type) => {\n  const innerParams = privateProps.innerParams.get(instance);\n  instance.disableInput();\n  const validationPromise = Promise.resolve().then(() => asPromise(innerParams.inputValidator(inputValue, innerParams.validationMessage)));\n  validationPromise.then(validationMessage => {\n    instance.enableButtons();\n    instance.enableInput();\n    if (validationMessage) {\n      instance.showValidationMessage(validationMessage);\n    } else if (type === 'deny') {\n      deny(instance, inputValue);\n    } else {\n      confirm(instance, inputValue);\n    }\n  });\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {any} value\n */\nconst deny = (instance, value) => {\n  const innerParams = privateProps.innerParams.get(instance || undefined);\n  if (innerParams.showLoaderOnDeny) {\n    showLoading(getDenyButton());\n  }\n  if (innerParams.preDeny) {\n    instance.isAwaitingPromise = true; // Flagging the instance as awaiting a promise so it's own promise's reject/resolve methods doesn't get destroyed until the result from this preDeny's promise is received\n    const preDenyPromise = Promise.resolve().then(() => asPromise(innerParams.preDeny(value, innerParams.validationMessage)));\n    preDenyPromise.then(preDenyValue => {\n      if (preDenyValue === false) {\n        instance.hideLoading();\n        handleAwaitingPromise(instance);\n      } else {\n        instance.close({\n          isDenied: true,\n          value: typeof preDenyValue === 'undefined' ? value : preDenyValue\n        });\n      }\n    }).catch(error => rejectWith(instance || undefined, error));\n  } else {\n    instance.close({\n      isDenied: true,\n      value\n    });\n  }\n};\n\n/**\n * @param {SweetAlert} instance\n * @param {any} value\n */\nconst succeedWith = (instance, value) => {\n  instance.close({\n    isConfirmed: true,\n    value\n  });\n};\n\n/**\n *\n * @param {SweetAlert} instance\n * @param {string} error\n */\nconst rejectWith = (instance, error) => {\n  instance.rejectPromise(error);\n};\n\n/**\n *\n * @param {SweetAlert} instance\n * @param {any} value\n */\nconst confirm = (instance, value) => {\n  const innerParams = privateProps.innerParams.get(instance || undefined);\n  if (innerParams.showLoaderOnConfirm) {\n    showLoading();\n  }\n  if (innerParams.preConfirm) {\n    instance.resetValidationMessage();\n    instance.isAwaitingPromise = true; // Flagging the instance as awaiting a promise so it's own promise's reject/resolve methods doesn't get destroyed until the result from this preConfirm's promise is received\n    const preConfirmPromise = Promise.resolve().then(() => asPromise(innerParams.preConfirm(value, innerParams.validationMessage)));\n    preConfirmPromise.then(preConfirmValue => {\n      if (isVisible$1(getValidationMessage()) || preConfirmValue === false) {\n        instance.hideLoading();\n        handleAwaitingPromise(instance);\n      } else {\n        succeedWith(instance, typeof preConfirmValue === 'undefined' ? value : preConfirmValue);\n      }\n    }).catch(error => rejectWith(instance || undefined, error));\n  } else {\n    succeedWith(instance, value);\n  }\n};\n\n/**\n * Hides loader and shows back the button which was hidden by .showLoading()\n */\nfunction hideLoading() {\n  // do nothing if popup is closed\n  const innerParams = privateProps.innerParams.get(this);\n  if (!innerParams) {\n    return;\n  }\n  const domCache = privateProps.domCache.get(this);\n  hide(domCache.loader);\n  if (isToast()) {\n    if (innerParams.icon) {\n      show(getIcon());\n    }\n  } else {\n    showRelatedButton(domCache);\n  }\n  removeClass([domCache.popup, domCache.actions], swalClasses.loading);\n  domCache.popup.removeAttribute('aria-busy');\n  domCache.popup.removeAttribute('data-loading');\n  domCache.confirmButton.disabled = false;\n  domCache.denyButton.disabled = false;\n  domCache.cancelButton.disabled = false;\n}\nconst showRelatedButton = domCache => {\n  const buttonToReplace = domCache.popup.getElementsByClassName(domCache.loader.getAttribute('data-button-to-replace'));\n  if (buttonToReplace.length) {\n    show(buttonToReplace[0], 'inline-block');\n  } else if (allButtonsAreHidden()) {\n    hide(domCache.actions);\n  }\n};\n\n/**\n * Gets the input DOM node, this method works with input parameter.\n *\n * @returns {HTMLInputElement | null}\n */\nfunction getInput() {\n  const innerParams = privateProps.innerParams.get(this);\n  const domCache = privateProps.domCache.get(this);\n  if (!domCache) {\n    return null;\n  }\n  return getInput$1(domCache.popup, innerParams.input);\n}\n\n/**\n * @param {SweetAlert} instance\n * @param {string[]} buttons\n * @param {boolean} disabled\n */\nfunction setButtonsDisabled(instance, buttons, disabled) {\n  const domCache = privateProps.domCache.get(instance);\n  buttons.forEach(button => {\n    domCache[button].disabled = disabled;\n  });\n}\n\n/**\n * @param {HTMLInputElement | null} input\n * @param {boolean} disabled\n */\nfunction setInputDisabled(input, disabled) {\n  const popup = getPopup();\n  if (!popup || !input) {\n    return;\n  }\n  if (input.type === 'radio') {\n    /** @type {NodeListOf<HTMLInputElement>} */\n    const radios = popup.querySelectorAll(`[name=\"${swalClasses.radio}\"]`);\n    for (let i = 0; i < radios.length; i++) {\n      radios[i].disabled = disabled;\n    }\n  } else {\n    input.disabled = disabled;\n  }\n}\n\n/**\n * Enable all the buttons\n * @this {SweetAlert}\n */\nfunction enableButtons() {\n  setButtonsDisabled(this, ['confirmButton', 'denyButton', 'cancelButton'], false);\n}\n\n/**\n * Disable all the buttons\n * @this {SweetAlert}\n */\nfunction disableButtons() {\n  setButtonsDisabled(this, ['confirmButton', 'denyButton', 'cancelButton'], true);\n}\n\n/**\n * Enable the input field\n * @this {SweetAlert}\n */\nfunction enableInput() {\n  setInputDisabled(this.getInput(), false);\n}\n\n/**\n * Disable the input field\n * @this {SweetAlert}\n */\nfunction disableInput() {\n  setInputDisabled(this.getInput(), true);\n}\n\n/**\n * Show block with validation message\n *\n * @param {string} error\n * @this {SweetAlert}\n */\nfunction showValidationMessage(error) {\n  const domCache = privateProps.domCache.get(this);\n  const params = privateProps.innerParams.get(this);\n  setInnerHtml(domCache.validationMessage, error);\n  domCache.validationMessage.className = swalClasses['validation-message'];\n  if (params.customClass && params.customClass.validationMessage) {\n    addClass(domCache.validationMessage, params.customClass.validationMessage);\n  }\n  show(domCache.validationMessage);\n  const input = this.getInput();\n  if (input) {\n    input.setAttribute('aria-invalid', 'true');\n    input.setAttribute('aria-describedby', swalClasses['validation-message']);\n    focusInput(input);\n    addClass(input, swalClasses.inputerror);\n  }\n}\n\n/**\n * Hide block with validation message\n *\n * @this {SweetAlert}\n */\nfunction resetValidationMessage() {\n  const domCache = privateProps.domCache.get(this);\n  if (domCache.validationMessage) {\n    hide(domCache.validationMessage);\n  }\n  const input = this.getInput();\n  if (input) {\n    input.removeAttribute('aria-invalid');\n    input.removeAttribute('aria-describedby');\n    removeClass(input, swalClasses.inputerror);\n  }\n}\n\nconst defaultParams = {\n  title: '',\n  titleText: '',\n  text: '',\n  html: '',\n  footer: '',\n  icon: undefined,\n  iconColor: undefined,\n  iconHtml: undefined,\n  template: undefined,\n  toast: false,\n  draggable: false,\n  animation: true,\n  theme: 'light',\n  showClass: {\n    popup: 'swal2-show',\n    backdrop: 'swal2-backdrop-show',\n    icon: 'swal2-icon-show'\n  },\n  hideClass: {\n    popup: 'swal2-hide',\n    backdrop: 'swal2-backdrop-hide',\n    icon: 'swal2-icon-hide'\n  },\n  customClass: {},\n  target: 'body',\n  color: undefined,\n  backdrop: true,\n  heightAuto: true,\n  allowOutsideClick: true,\n  allowEscapeKey: true,\n  allowEnterKey: true,\n  stopKeydownPropagation: true,\n  keydownListenerCapture: false,\n  showConfirmButton: true,\n  showDenyButton: false,\n  showCancelButton: false,\n  preConfirm: undefined,\n  preDeny: undefined,\n  confirmButtonText: 'OK',\n  confirmButtonAriaLabel: '',\n  confirmButtonColor: undefined,\n  denyButtonText: 'No',\n  denyButtonAriaLabel: '',\n  denyButtonColor: undefined,\n  cancelButtonText: 'Cancel',\n  cancelButtonAriaLabel: '',\n  cancelButtonColor: undefined,\n  buttonsStyling: true,\n  reverseButtons: false,\n  focusConfirm: true,\n  focusDeny: false,\n  focusCancel: false,\n  returnFocus: true,\n  showCloseButton: false,\n  closeButtonHtml: '&times;',\n  closeButtonAriaLabel: 'Close this dialog',\n  loaderHtml: '',\n  showLoaderOnConfirm: false,\n  showLoaderOnDeny: false,\n  imageUrl: undefined,\n  imageWidth: undefined,\n  imageHeight: undefined,\n  imageAlt: '',\n  timer: undefined,\n  timerProgressBar: false,\n  width: undefined,\n  padding: undefined,\n  background: undefined,\n  input: undefined,\n  inputPlaceholder: '',\n  inputLabel: '',\n  inputValue: '',\n  inputOptions: {},\n  inputAutoFocus: true,\n  inputAutoTrim: true,\n  inputAttributes: {},\n  inputValidator: undefined,\n  returnInputValueOnDeny: false,\n  validationMessage: undefined,\n  grow: false,\n  position: 'center',\n  progressSteps: [],\n  currentProgressStep: undefined,\n  progressStepsDistance: undefined,\n  willOpen: undefined,\n  didOpen: undefined,\n  didRender: undefined,\n  willClose: undefined,\n  didClose: undefined,\n  didDestroy: undefined,\n  scrollbarPadding: true\n};\nconst updatableParams = ['allowEscapeKey', 'allowOutsideClick', 'background', 'buttonsStyling', 'cancelButtonAriaLabel', 'cancelButtonColor', 'cancelButtonText', 'closeButtonAriaLabel', 'closeButtonHtml', 'color', 'confirmButtonAriaLabel', 'confirmButtonColor', 'confirmButtonText', 'currentProgressStep', 'customClass', 'denyButtonAriaLabel', 'denyButtonColor', 'denyButtonText', 'didClose', 'didDestroy', 'draggable', 'footer', 'hideClass', 'html', 'icon', 'iconColor', 'iconHtml', 'imageAlt', 'imageHeight', 'imageUrl', 'imageWidth', 'preConfirm', 'preDeny', 'progressSteps', 'returnFocus', 'reverseButtons', 'showCancelButton', 'showCloseButton', 'showConfirmButton', 'showDenyButton', 'text', 'title', 'titleText', 'theme', 'willClose'];\n\n/** @type {Record<string, string | undefined>} */\nconst deprecatedParams = {\n  allowEnterKey: undefined\n};\nconst toastIncompatibleParams = ['allowOutsideClick', 'allowEnterKey', 'backdrop', 'draggable', 'focusConfirm', 'focusDeny', 'focusCancel', 'returnFocus', 'heightAuto', 'keydownListenerCapture'];\n\n/**\n * Is valid parameter\n *\n * @param {string} paramName\n * @returns {boolean}\n */\nconst isValidParameter = paramName => {\n  return Object.prototype.hasOwnProperty.call(defaultParams, paramName);\n};\n\n/**\n * Is valid parameter for Swal.update() method\n *\n * @param {string} paramName\n * @returns {boolean}\n */\nconst isUpdatableParameter = paramName => {\n  return updatableParams.indexOf(paramName) !== -1;\n};\n\n/**\n * Is deprecated parameter\n *\n * @param {string} paramName\n * @returns {string | undefined}\n */\nconst isDeprecatedParameter = paramName => {\n  return deprecatedParams[paramName];\n};\n\n/**\n * @param {string} param\n */\nconst checkIfParamIsValid = param => {\n  if (!isValidParameter(param)) {\n    warn(`Unknown parameter \"${param}\"`);\n  }\n};\n\n/**\n * @param {string} param\n */\nconst checkIfToastParamIsValid = param => {\n  if (toastIncompatibleParams.includes(param)) {\n    warn(`The parameter \"${param}\" is incompatible with toasts`);\n  }\n};\n\n/**\n * @param {string} param\n */\nconst checkIfParamIsDeprecated = param => {\n  const isDeprecated = isDeprecatedParameter(param);\n  if (isDeprecated) {\n    warnAboutDeprecation(param, isDeprecated);\n  }\n};\n\n/**\n * Show relevant warnings for given params\n *\n * @param {SweetAlertOptions} params\n */\nconst showWarningsForParams = params => {\n  if (params.backdrop === false && params.allowOutsideClick) {\n    warn('\"allowOutsideClick\" parameter requires `backdrop` parameter to be set to `true`');\n  }\n  if (params.theme && !['light', 'dark', 'auto', 'borderless'].includes(params.theme)) {\n    warn(`Invalid theme \"${params.theme}\". Expected \"light\", \"dark\", \"auto\", or \"borderless\"`);\n  }\n  for (const param in params) {\n    checkIfParamIsValid(param);\n    if (params.toast) {\n      checkIfToastParamIsValid(param);\n    }\n    checkIfParamIsDeprecated(param);\n  }\n};\n\n/**\n * Updates popup parameters.\n *\n * @param {SweetAlertOptions} params\n */\nfunction update(params) {\n  const container = getContainer();\n  const popup = getPopup();\n  const innerParams = privateProps.innerParams.get(this);\n  if (!popup || hasClass(popup, innerParams.hideClass.popup)) {\n    warn(`You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.`);\n    return;\n  }\n  const validUpdatableParams = filterValidParams(params);\n  const updatedParams = Object.assign({}, innerParams, validUpdatableParams);\n  showWarningsForParams(updatedParams);\n  container.dataset['swal2Theme'] = updatedParams.theme;\n  render(this, updatedParams);\n  privateProps.innerParams.set(this, updatedParams);\n  Object.defineProperties(this, {\n    params: {\n      value: Object.assign({}, this.params, params),\n      writable: false,\n      enumerable: true\n    }\n  });\n}\n\n/**\n * @param {SweetAlertOptions} params\n * @returns {SweetAlertOptions}\n */\nconst filterValidParams = params => {\n  const validUpdatableParams = {};\n  Object.keys(params).forEach(param => {\n    if (isUpdatableParameter(param)) {\n      validUpdatableParams[param] = params[param];\n    } else {\n      warn(`Invalid parameter to update: ${param}`);\n    }\n  });\n  return validUpdatableParams;\n};\n\n/**\n * Dispose the current SweetAlert2 instance\n */\nfunction _destroy() {\n  const domCache = privateProps.domCache.get(this);\n  const innerParams = privateProps.innerParams.get(this);\n  if (!innerParams) {\n    disposeWeakMaps(this); // The WeakMaps might have been partly destroyed, we must recall it to dispose any remaining WeakMaps #2335\n    return; // This instance has already been destroyed\n  }\n\n  // Check if there is another Swal closing\n  if (domCache.popup && globalState.swalCloseEventFinishedCallback) {\n    globalState.swalCloseEventFinishedCallback();\n    delete globalState.swalCloseEventFinishedCallback;\n  }\n  if (typeof innerParams.didDestroy === 'function') {\n    innerParams.didDestroy();\n  }\n  globalState.eventEmitter.emit('didDestroy');\n  disposeSwal(this);\n}\n\n/**\n * @param {SweetAlert} instance\n */\nconst disposeSwal = instance => {\n  disposeWeakMaps(instance);\n  // Unset this.params so GC will dispose it (#1569)\n  delete instance.params;\n  // Unset globalState props so GC will dispose globalState (#1569)\n  delete globalState.keydownHandler;\n  delete globalState.keydownTarget;\n  // Unset currentInstance\n  delete globalState.currentInstance;\n};\n\n/**\n * @param {SweetAlert} instance\n */\nconst disposeWeakMaps = instance => {\n  // If the current instance is awaiting a promise result, we keep the privateMethods to call them once the promise result is retrieved #2335\n  if (instance.isAwaitingPromise) {\n    unsetWeakMaps(privateProps, instance);\n    instance.isAwaitingPromise = true;\n  } else {\n    unsetWeakMaps(privateMethods, instance);\n    unsetWeakMaps(privateProps, instance);\n    delete instance.isAwaitingPromise;\n    // Unset instance methods\n    delete instance.disableButtons;\n    delete instance.enableButtons;\n    delete instance.getInput;\n    delete instance.disableInput;\n    delete instance.enableInput;\n    delete instance.hideLoading;\n    delete instance.disableLoading;\n    delete instance.showValidationMessage;\n    delete instance.resetValidationMessage;\n    delete instance.close;\n    delete instance.closePopup;\n    delete instance.closeModal;\n    delete instance.closeToast;\n    delete instance.rejectPromise;\n    delete instance.update;\n    delete instance._destroy;\n  }\n};\n\n/**\n * @param {object} obj\n * @param {SweetAlert} instance\n */\nconst unsetWeakMaps = (obj, instance) => {\n  for (const i in obj) {\n    obj[i].delete(instance);\n  }\n};\n\nvar instanceMethods = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  _destroy: _destroy,\n  close: close,\n  closeModal: close,\n  closePopup: close,\n  closeToast: close,\n  disableButtons: disableButtons,\n  disableInput: disableInput,\n  disableLoading: hideLoading,\n  enableButtons: enableButtons,\n  enableInput: enableInput,\n  getInput: getInput,\n  handleAwaitingPromise: handleAwaitingPromise,\n  hideLoading: hideLoading,\n  rejectPromise: rejectPromise,\n  resetValidationMessage: resetValidationMessage,\n  showValidationMessage: showValidationMessage,\n  update: update\n});\n\n/**\n * @param {SweetAlertOptions} innerParams\n * @param {DomCache} domCache\n * @param {Function} dismissWith\n */\nconst handlePopupClick = (innerParams, domCache, dismissWith) => {\n  if (innerParams.toast) {\n    handleToastClick(innerParams, domCache, dismissWith);\n  } else {\n    // Ignore click events that had mousedown on the popup but mouseup on the container\n    // This can happen when the user drags a slider\n    handleModalMousedown(domCache);\n\n    // Ignore click events that had mousedown on the container but mouseup on the popup\n    handleContainerMousedown(domCache);\n    handleModalClick(innerParams, domCache, dismissWith);\n  }\n};\n\n/**\n * @param {SweetAlertOptions} innerParams\n * @param {DomCache} domCache\n * @param {Function} dismissWith\n */\nconst handleToastClick = (innerParams, domCache, dismissWith) => {\n  // Closing toast by internal click\n  domCache.popup.onclick = () => {\n    if (innerParams && (isAnyButtonShown(innerParams) || innerParams.timer || innerParams.input)) {\n      return;\n    }\n    dismissWith(DismissReason.close);\n  };\n};\n\n/**\n * @param {SweetAlertOptions} innerParams\n * @returns {boolean}\n */\nconst isAnyButtonShown = innerParams => {\n  return !!(innerParams.showConfirmButton || innerParams.showDenyButton || innerParams.showCancelButton || innerParams.showCloseButton);\n};\nlet ignoreOutsideClick = false;\n\n/**\n * @param {DomCache} domCache\n */\nconst handleModalMousedown = domCache => {\n  domCache.popup.onmousedown = () => {\n    domCache.container.onmouseup = function (e) {\n      domCache.container.onmouseup = () => {};\n      // We only check if the mouseup target is the container because usually it doesn't\n      // have any other direct children aside of the popup\n      if (e.target === domCache.container) {\n        ignoreOutsideClick = true;\n      }\n    };\n  };\n};\n\n/**\n * @param {DomCache} domCache\n */\nconst handleContainerMousedown = domCache => {\n  domCache.container.onmousedown = e => {\n    // prevent the modal text from being selected on double click on the container (allowOutsideClick: false)\n    if (e.target === domCache.container) {\n      e.preventDefault();\n    }\n    domCache.popup.onmouseup = function (e) {\n      domCache.popup.onmouseup = () => {};\n      // We also need to check if the mouseup target is a child of the popup\n      if (e.target === domCache.popup || e.target instanceof HTMLElement && domCache.popup.contains(e.target)) {\n        ignoreOutsideClick = true;\n      }\n    };\n  };\n};\n\n/**\n * @param {SweetAlertOptions} innerParams\n * @param {DomCache} domCache\n * @param {Function} dismissWith\n */\nconst handleModalClick = (innerParams, domCache, dismissWith) => {\n  domCache.container.onclick = e => {\n    if (ignoreOutsideClick) {\n      ignoreOutsideClick = false;\n      return;\n    }\n    if (e.target === domCache.container && callIfFunction(innerParams.allowOutsideClick)) {\n      dismissWith(DismissReason.backdrop);\n    }\n  };\n};\n\nconst isJqueryElement = elem => typeof elem === 'object' && elem.jquery;\nconst isElement = elem => elem instanceof Element || isJqueryElement(elem);\nconst argsToParams = args => {\n  const params = {};\n  if (typeof args[0] === 'object' && !isElement(args[0])) {\n    Object.assign(params, args[0]);\n  } else {\n    ['title', 'html', 'icon'].forEach((name, index) => {\n      const arg = args[index];\n      if (typeof arg === 'string' || isElement(arg)) {\n        params[name] = arg;\n      } else if (arg !== undefined) {\n        error(`Unexpected type of ${name}! Expected \"string\" or \"Element\", got ${typeof arg}`);\n      }\n    });\n  }\n  return params;\n};\n\n/**\n * Main method to create a new SweetAlert2 popup\n *\n * @param  {...SweetAlertOptions} args\n * @returns {Promise<SweetAlertResult>}\n */\nfunction fire() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return new this(...args);\n}\n\n/**\n * Returns an extended version of `Swal` containing `params` as defaults.\n * Useful for reusing Swal configuration.\n *\n * For example:\n *\n * Before:\n * const textPromptOptions = { input: 'text', showCancelButton: true }\n * const {value: firstName} = await Swal.fire({ ...textPromptOptions, title: 'What is your first name?' })\n * const {value: lastName} = await Swal.fire({ ...textPromptOptions, title: 'What is your last name?' })\n *\n * After:\n * const TextPrompt = Swal.mixin({ input: 'text', showCancelButton: true })\n * const {value: firstName} = await TextPrompt('What is your first name?')\n * const {value: lastName} = await TextPrompt('What is your last name?')\n *\n * @param {SweetAlertOptions} mixinParams\n * @returns {SweetAlert}\n */\nfunction mixin(mixinParams) {\n  class MixinSwal extends this {\n    _main(params, priorityMixinParams) {\n      return super._main(params, Object.assign({}, mixinParams, priorityMixinParams));\n    }\n  }\n  // @ts-ignore\n  return MixinSwal;\n}\n\n/**\n * If `timer` parameter is set, returns number of milliseconds of timer remained.\n * Otherwise, returns undefined.\n *\n * @returns {number | undefined}\n */\nconst getTimerLeft = () => {\n  return globalState.timeout && globalState.timeout.getTimerLeft();\n};\n\n/**\n * Stop timer. Returns number of milliseconds of timer remained.\n * If `timer` parameter isn't set, returns undefined.\n *\n * @returns {number | undefined}\n */\nconst stopTimer = () => {\n  if (globalState.timeout) {\n    stopTimerProgressBar();\n    return globalState.timeout.stop();\n  }\n};\n\n/**\n * Resume timer. Returns number of milliseconds of timer remained.\n * If `timer` parameter isn't set, returns undefined.\n *\n * @returns {number | undefined}\n */\nconst resumeTimer = () => {\n  if (globalState.timeout) {\n    const remaining = globalState.timeout.start();\n    animateTimerProgressBar(remaining);\n    return remaining;\n  }\n};\n\n/**\n * Resume timer. Returns number of milliseconds of timer remained.\n * If `timer` parameter isn't set, returns undefined.\n *\n * @returns {number | undefined}\n */\nconst toggleTimer = () => {\n  const timer = globalState.timeout;\n  return timer && (timer.running ? stopTimer() : resumeTimer());\n};\n\n/**\n * Increase timer. Returns number of milliseconds of an updated timer.\n * If `timer` parameter isn't set, returns undefined.\n *\n * @param {number} ms\n * @returns {number | undefined}\n */\nconst increaseTimer = ms => {\n  if (globalState.timeout) {\n    const remaining = globalState.timeout.increase(ms);\n    animateTimerProgressBar(remaining, true);\n    return remaining;\n  }\n};\n\n/**\n * Check if timer is running. Returns true if timer is running\n * or false if timer is paused or stopped.\n * If `timer` parameter isn't set, returns undefined\n *\n * @returns {boolean}\n */\nconst isTimerRunning = () => {\n  return !!(globalState.timeout && globalState.timeout.isRunning());\n};\n\nlet bodyClickListenerAdded = false;\nconst clickHandlers = {};\n\n/**\n * @param {string} attr\n */\nfunction bindClickHandler() {\n  let attr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'data-swal-template';\n  clickHandlers[attr] = this;\n  if (!bodyClickListenerAdded) {\n    document.body.addEventListener('click', bodyClickListener);\n    bodyClickListenerAdded = true;\n  }\n}\nconst bodyClickListener = event => {\n  for (let el = event.target; el && el !== document; el = el.parentNode) {\n    for (const attr in clickHandlers) {\n      const template = el.getAttribute(attr);\n      if (template) {\n        clickHandlers[attr].fire({\n          template\n        });\n        return;\n      }\n    }\n  }\n};\n\n// Source: https://gist.github.com/mudge/5830382?permalink_comment_id=2691957#gistcomment-2691957\n\nclass EventEmitter {\n  constructor() {\n    /** @type {Events} */\n    this.events = {};\n  }\n\n  /**\n   * @param {string} eventName\n   * @returns {EventHandlers}\n   */\n  _getHandlersByEventName(eventName) {\n    if (typeof this.events[eventName] === 'undefined') {\n      // not Set because we need to keep the FIFO order\n      // https://github.com/sweetalert2/sweetalert2/pull/2763#discussion_r1748990334\n      this.events[eventName] = [];\n    }\n    return this.events[eventName];\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {EventHandler} eventHandler\n   */\n  on(eventName, eventHandler) {\n    const currentHandlers = this._getHandlersByEventName(eventName);\n    if (!currentHandlers.includes(eventHandler)) {\n      currentHandlers.push(eventHandler);\n    }\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {EventHandler} eventHandler\n   */\n  once(eventName, eventHandler) {\n    var _this = this;\n    /**\n     * @param {Array} args\n     */\n    const onceFn = function () {\n      _this.removeListener(eventName, onceFn);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      eventHandler.apply(_this, args);\n    };\n    this.on(eventName, onceFn);\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {Array} args\n   */\n  emit(eventName) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    this._getHandlersByEventName(eventName).forEach(\n    /**\n     * @param {EventHandler} eventHandler\n     */\n    eventHandler => {\n      try {\n        eventHandler.apply(this, args);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {EventHandler} eventHandler\n   */\n  removeListener(eventName, eventHandler) {\n    const currentHandlers = this._getHandlersByEventName(eventName);\n    const index = currentHandlers.indexOf(eventHandler);\n    if (index > -1) {\n      currentHandlers.splice(index, 1);\n    }\n  }\n\n  /**\n   * @param {string} eventName\n   */\n  removeAllListeners(eventName) {\n    if (this.events[eventName] !== undefined) {\n      // https://github.com/sweetalert2/sweetalert2/pull/2763#discussion_r1749239222\n      this.events[eventName].length = 0;\n    }\n  }\n  reset() {\n    this.events = {};\n  }\n}\n\nglobalState.eventEmitter = new EventEmitter();\n\n/**\n * @param {string} eventName\n * @param {EventHandler} eventHandler\n */\nconst on = (eventName, eventHandler) => {\n  globalState.eventEmitter.on(eventName, eventHandler);\n};\n\n/**\n * @param {string} eventName\n * @param {EventHandler} eventHandler\n */\nconst once = (eventName, eventHandler) => {\n  globalState.eventEmitter.once(eventName, eventHandler);\n};\n\n/**\n * @param {string} [eventName]\n * @param {EventHandler} [eventHandler]\n */\nconst off = (eventName, eventHandler) => {\n  // Remove all handlers for all events\n  if (!eventName) {\n    globalState.eventEmitter.reset();\n    return;\n  }\n  if (eventHandler) {\n    // Remove a specific handler\n    globalState.eventEmitter.removeListener(eventName, eventHandler);\n  } else {\n    // Remove all handlers for a specific event\n    globalState.eventEmitter.removeAllListeners(eventName);\n  }\n};\n\nvar staticMethods = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  argsToParams: argsToParams,\n  bindClickHandler: bindClickHandler,\n  clickCancel: clickCancel,\n  clickConfirm: clickConfirm,\n  clickDeny: clickDeny,\n  enableLoading: showLoading,\n  fire: fire,\n  getActions: getActions,\n  getCancelButton: getCancelButton,\n  getCloseButton: getCloseButton,\n  getConfirmButton: getConfirmButton,\n  getContainer: getContainer,\n  getDenyButton: getDenyButton,\n  getFocusableElements: getFocusableElements,\n  getFooter: getFooter,\n  getHtmlContainer: getHtmlContainer,\n  getIcon: getIcon,\n  getIconContent: getIconContent,\n  getImage: getImage,\n  getInputLabel: getInputLabel,\n  getLoader: getLoader,\n  getPopup: getPopup,\n  getProgressSteps: getProgressSteps,\n  getTimerLeft: getTimerLeft,\n  getTimerProgressBar: getTimerProgressBar,\n  getTitle: getTitle,\n  getValidationMessage: getValidationMessage,\n  increaseTimer: increaseTimer,\n  isDeprecatedParameter: isDeprecatedParameter,\n  isLoading: isLoading,\n  isTimerRunning: isTimerRunning,\n  isUpdatableParameter: isUpdatableParameter,\n  isValidParameter: isValidParameter,\n  isVisible: isVisible,\n  mixin: mixin,\n  off: off,\n  on: on,\n  once: once,\n  resumeTimer: resumeTimer,\n  showLoading: showLoading,\n  stopTimer: stopTimer,\n  toggleTimer: toggleTimer\n});\n\nclass Timer {\n  /**\n   * @param {Function} callback\n   * @param {number} delay\n   */\n  constructor(callback, delay) {\n    this.callback = callback;\n    this.remaining = delay;\n    this.running = false;\n    this.start();\n  }\n\n  /**\n   * @returns {number}\n   */\n  start() {\n    if (!this.running) {\n      this.running = true;\n      this.started = new Date();\n      this.id = setTimeout(this.callback, this.remaining);\n    }\n    return this.remaining;\n  }\n\n  /**\n   * @returns {number}\n   */\n  stop() {\n    if (this.started && this.running) {\n      this.running = false;\n      clearTimeout(this.id);\n      this.remaining -= new Date().getTime() - this.started.getTime();\n    }\n    return this.remaining;\n  }\n\n  /**\n   * @param {number} n\n   * @returns {number}\n   */\n  increase(n) {\n    const running = this.running;\n    if (running) {\n      this.stop();\n    }\n    this.remaining += n;\n    if (running) {\n      this.start();\n    }\n    return this.remaining;\n  }\n\n  /**\n   * @returns {number}\n   */\n  getTimerLeft() {\n    if (this.running) {\n      this.stop();\n      this.start();\n    }\n    return this.remaining;\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isRunning() {\n    return this.running;\n  }\n}\n\nconst swalStringParams = ['swal-title', 'swal-html', 'swal-footer'];\n\n/**\n * @param {SweetAlertOptions} params\n * @returns {SweetAlertOptions}\n */\nconst getTemplateParams = params => {\n  const template = typeof params.template === 'string' ? (/** @type {HTMLTemplateElement} */document.querySelector(params.template)) : params.template;\n  if (!template) {\n    return {};\n  }\n  /** @type {DocumentFragment} */\n  const templateContent = template.content;\n  showWarningsForElements(templateContent);\n  const result = Object.assign(getSwalParams(templateContent), getSwalFunctionParams(templateContent), getSwalButtons(templateContent), getSwalImage(templateContent), getSwalIcon(templateContent), getSwalInput(templateContent), getSwalStringParams(templateContent, swalStringParams));\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @returns {Record<string, any>}\n */\nconst getSwalParams = templateContent => {\n  /** @type {Record<string, any>} */\n  const result = {};\n  /** @type {HTMLElement[]} */\n  const swalParams = Array.from(templateContent.querySelectorAll('swal-param'));\n  swalParams.forEach(param => {\n    showWarningsForAttributes(param, ['name', 'value']);\n    const paramName = /** @type {keyof SweetAlertOptions} */param.getAttribute('name');\n    const value = param.getAttribute('value');\n    if (!paramName || !value) {\n      return;\n    }\n    if (typeof defaultParams[paramName] === 'boolean') {\n      result[paramName] = value !== 'false';\n    } else if (typeof defaultParams[paramName] === 'object') {\n      result[paramName] = JSON.parse(value);\n    } else {\n      result[paramName] = value;\n    }\n  });\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @returns {Record<string, any>}\n */\nconst getSwalFunctionParams = templateContent => {\n  /** @type {Record<string, any>} */\n  const result = {};\n  /** @type {HTMLElement[]} */\n  const swalFunctions = Array.from(templateContent.querySelectorAll('swal-function-param'));\n  swalFunctions.forEach(param => {\n    const paramName = /** @type {keyof SweetAlertOptions} */param.getAttribute('name');\n    const value = param.getAttribute('value');\n    if (!paramName || !value) {\n      return;\n    }\n    result[paramName] = new Function(`return ${value}`)();\n  });\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @returns {Record<string, any>}\n */\nconst getSwalButtons = templateContent => {\n  /** @type {Record<string, any>} */\n  const result = {};\n  /** @type {HTMLElement[]} */\n  const swalButtons = Array.from(templateContent.querySelectorAll('swal-button'));\n  swalButtons.forEach(button => {\n    showWarningsForAttributes(button, ['type', 'color', 'aria-label']);\n    const type = button.getAttribute('type');\n    if (!type || !['confirm', 'cancel', 'deny'].includes(type)) {\n      return;\n    }\n    result[`${type}ButtonText`] = button.innerHTML;\n    result[`show${capitalizeFirstLetter(type)}Button`] = true;\n    if (button.hasAttribute('color')) {\n      result[`${type}ButtonColor`] = button.getAttribute('color');\n    }\n    if (button.hasAttribute('aria-label')) {\n      result[`${type}ButtonAriaLabel`] = button.getAttribute('aria-label');\n    }\n  });\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @returns {Pick<SweetAlertOptions, 'imageUrl' | 'imageWidth' | 'imageHeight' | 'imageAlt'>}\n */\nconst getSwalImage = templateContent => {\n  const result = {};\n  /** @type {HTMLElement | null} */\n  const image = templateContent.querySelector('swal-image');\n  if (image) {\n    showWarningsForAttributes(image, ['src', 'width', 'height', 'alt']);\n    if (image.hasAttribute('src')) {\n      result.imageUrl = image.getAttribute('src') || undefined;\n    }\n    if (image.hasAttribute('width')) {\n      result.imageWidth = image.getAttribute('width') || undefined;\n    }\n    if (image.hasAttribute('height')) {\n      result.imageHeight = image.getAttribute('height') || undefined;\n    }\n    if (image.hasAttribute('alt')) {\n      result.imageAlt = image.getAttribute('alt') || undefined;\n    }\n  }\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @returns {Record<string, any>}\n */\nconst getSwalIcon = templateContent => {\n  const result = {};\n  /** @type {HTMLElement | null} */\n  const icon = templateContent.querySelector('swal-icon');\n  if (icon) {\n    showWarningsForAttributes(icon, ['type', 'color']);\n    if (icon.hasAttribute('type')) {\n      result.icon = icon.getAttribute('type');\n    }\n    if (icon.hasAttribute('color')) {\n      result.iconColor = icon.getAttribute('color');\n    }\n    result.iconHtml = icon.innerHTML;\n  }\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @returns {Record<string, any>}\n */\nconst getSwalInput = templateContent => {\n  /** @type {Record<string, any>} */\n  const result = {};\n  /** @type {HTMLElement | null} */\n  const input = templateContent.querySelector('swal-input');\n  if (input) {\n    showWarningsForAttributes(input, ['type', 'label', 'placeholder', 'value']);\n    result.input = input.getAttribute('type') || 'text';\n    if (input.hasAttribute('label')) {\n      result.inputLabel = input.getAttribute('label');\n    }\n    if (input.hasAttribute('placeholder')) {\n      result.inputPlaceholder = input.getAttribute('placeholder');\n    }\n    if (input.hasAttribute('value')) {\n      result.inputValue = input.getAttribute('value');\n    }\n  }\n  /** @type {HTMLElement[]} */\n  const inputOptions = Array.from(templateContent.querySelectorAll('swal-input-option'));\n  if (inputOptions.length) {\n    result.inputOptions = {};\n    inputOptions.forEach(option => {\n      showWarningsForAttributes(option, ['value']);\n      const optionValue = option.getAttribute('value');\n      if (!optionValue) {\n        return;\n      }\n      const optionName = option.innerHTML;\n      result.inputOptions[optionValue] = optionName;\n    });\n  }\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n * @param {string[]} paramNames\n * @returns {Record<string, any>}\n */\nconst getSwalStringParams = (templateContent, paramNames) => {\n  /** @type {Record<string, any>} */\n  const result = {};\n  for (const i in paramNames) {\n    const paramName = paramNames[i];\n    /** @type {HTMLElement | null} */\n    const tag = templateContent.querySelector(paramName);\n    if (tag) {\n      showWarningsForAttributes(tag, []);\n      result[paramName.replace(/^swal-/, '')] = tag.innerHTML.trim();\n    }\n  }\n  return result;\n};\n\n/**\n * @param {DocumentFragment} templateContent\n */\nconst showWarningsForElements = templateContent => {\n  const allowedElements = swalStringParams.concat(['swal-param', 'swal-function-param', 'swal-button', 'swal-image', 'swal-icon', 'swal-input', 'swal-input-option']);\n  Array.from(templateContent.children).forEach(el => {\n    const tagName = el.tagName.toLowerCase();\n    if (!allowedElements.includes(tagName)) {\n      warn(`Unrecognized element <${tagName}>`);\n    }\n  });\n};\n\n/**\n * @param {HTMLElement} el\n * @param {string[]} allowedAttributes\n */\nconst showWarningsForAttributes = (el, allowedAttributes) => {\n  Array.from(el.attributes).forEach(attribute => {\n    if (allowedAttributes.indexOf(attribute.name) === -1) {\n      warn([`Unrecognized attribute \"${attribute.name}\" on <${el.tagName.toLowerCase()}>.`, `${allowedAttributes.length ? `Allowed attributes are: ${allowedAttributes.join(', ')}` : 'To set the value, use HTML within the element.'}`]);\n    }\n  });\n};\n\nconst SHOW_CLASS_TIMEOUT = 10;\n\n/**\n * Open popup, add necessary classes and styles, fix scrollbar\n *\n * @param {SweetAlertOptions} params\n */\nconst openPopup = params => {\n  const container = getContainer();\n  const popup = getPopup();\n  if (typeof params.willOpen === 'function') {\n    params.willOpen(popup);\n  }\n  globalState.eventEmitter.emit('willOpen', popup);\n  const bodyStyles = window.getComputedStyle(document.body);\n  const initialBodyOverflow = bodyStyles.overflowY;\n  addClasses(container, popup, params);\n\n  // scrolling is 'hidden' until animation is done, after that 'auto'\n  setTimeout(() => {\n    setScrollingVisibility(container, popup);\n  }, SHOW_CLASS_TIMEOUT);\n  if (isModal()) {\n    fixScrollContainer(container, params.scrollbarPadding, initialBodyOverflow);\n    setAriaHidden();\n  }\n  if (!isToast() && !globalState.previousActiveElement) {\n    globalState.previousActiveElement = document.activeElement;\n  }\n  if (typeof params.didOpen === 'function') {\n    setTimeout(() => params.didOpen(popup));\n  }\n  globalState.eventEmitter.emit('didOpen', popup);\n  removeClass(container, swalClasses['no-transition']);\n};\n\n/**\n * @param {AnimationEvent} event\n */\nconst swalOpenAnimationFinished = event => {\n  const popup = getPopup();\n  if (event.target !== popup) {\n    return;\n  }\n  const container = getContainer();\n  popup.removeEventListener('animationend', swalOpenAnimationFinished);\n  popup.removeEventListener('transitionend', swalOpenAnimationFinished);\n  container.style.overflowY = 'auto';\n};\n\n/**\n * @param {HTMLElement} container\n * @param {HTMLElement} popup\n */\nconst setScrollingVisibility = (container, popup) => {\n  if (hasCssAnimation(popup)) {\n    container.style.overflowY = 'hidden';\n    popup.addEventListener('animationend', swalOpenAnimationFinished);\n    popup.addEventListener('transitionend', swalOpenAnimationFinished);\n  } else {\n    container.style.overflowY = 'auto';\n  }\n};\n\n/**\n * @param {HTMLElement} container\n * @param {boolean} scrollbarPadding\n * @param {string} initialBodyOverflow\n */\nconst fixScrollContainer = (container, scrollbarPadding, initialBodyOverflow) => {\n  iOSfix();\n  if (scrollbarPadding && initialBodyOverflow !== 'hidden') {\n    replaceScrollbarWithPadding(initialBodyOverflow);\n  }\n\n  // sweetalert2/issues/1247\n  setTimeout(() => {\n    container.scrollTop = 0;\n  });\n};\n\n/**\n * @param {HTMLElement} container\n * @param {HTMLElement} popup\n * @param {SweetAlertOptions} params\n */\nconst addClasses = (container, popup, params) => {\n  addClass(container, params.showClass.backdrop);\n  if (params.animation) {\n    // this workaround with opacity is needed for https://github.com/sweetalert2/sweetalert2/issues/2059\n    popup.style.setProperty('opacity', '0', 'important');\n    show(popup, 'grid');\n    setTimeout(() => {\n      // Animate popup right after showing it\n      addClass(popup, params.showClass.popup);\n      // and remove the opacity workaround\n      popup.style.removeProperty('opacity');\n    }, SHOW_CLASS_TIMEOUT); // 10ms in order to fix #2062\n  } else {\n    show(popup, 'grid');\n  }\n  addClass([document.documentElement, document.body], swalClasses.shown);\n  if (params.heightAuto && params.backdrop && !params.toast) {\n    addClass([document.documentElement, document.body], swalClasses['height-auto']);\n  }\n};\n\nvar defaultInputValidators = {\n  /**\n   * @param {string} string\n   * @param {string} [validationMessage]\n   * @returns {Promise<string | void>}\n   */\n  email: (string, validationMessage) => {\n    return /^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z0-9-]+$/.test(string) ? Promise.resolve() : Promise.resolve(validationMessage || 'Invalid email address');\n  },\n  /**\n   * @param {string} string\n   * @param {string} [validationMessage]\n   * @returns {Promise<string | void>}\n   */\n  url: (string, validationMessage) => {\n    // taken from https://stackoverflow.com/a/3809435 with a small change from #1306 and #2013\n    return /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-z]{2,63}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(string) ? Promise.resolve() : Promise.resolve(validationMessage || 'Invalid URL');\n  }\n};\n\n/**\n * @param {SweetAlertOptions} params\n */\nfunction setDefaultInputValidators(params) {\n  // Use default `inputValidator` for supported input types if not provided\n  if (params.inputValidator) {\n    return;\n  }\n  if (params.input === 'email') {\n    params.inputValidator = defaultInputValidators['email'];\n  }\n  if (params.input === 'url') {\n    params.inputValidator = defaultInputValidators['url'];\n  }\n}\n\n/**\n * @param {SweetAlertOptions} params\n */\nfunction validateCustomTargetElement(params) {\n  // Determine if the custom target element is valid\n  if (!params.target || typeof params.target === 'string' && !document.querySelector(params.target) || typeof params.target !== 'string' && !params.target.appendChild) {\n    warn('Target parameter is not valid, defaulting to \"body\"');\n    params.target = 'body';\n  }\n}\n\n/**\n * Set type, text and actions on popup\n *\n * @param {SweetAlertOptions} params\n */\nfunction setParameters(params) {\n  setDefaultInputValidators(params);\n\n  // showLoaderOnConfirm && preConfirm\n  if (params.showLoaderOnConfirm && !params.preConfirm) {\n    warn('showLoaderOnConfirm is set to true, but preConfirm is not defined.\\n' + 'showLoaderOnConfirm should be used together with preConfirm, see usage example:\\n' + 'https://sweetalert2.github.io/#ajax-request');\n  }\n  validateCustomTargetElement(params);\n\n  // Replace newlines with <br> in title\n  if (typeof params.title === 'string') {\n    params.title = params.title.split('\\n').join('<br />');\n  }\n  init(params);\n}\n\n/** @type {SweetAlert} */\nlet currentInstance;\nvar _promise = /*#__PURE__*/new WeakMap();\nclass SweetAlert {\n  /**\n   * @param {...any} args\n   * @this {SweetAlert}\n   */\n  constructor() {\n    /**\n     * @type {Promise<SweetAlertResult>}\n     */\n    _classPrivateFieldInitSpec(this, _promise, void 0);\n    // Prevent run in Node env\n    if (typeof window === 'undefined') {\n      return;\n    }\n    currentInstance = this;\n\n    // @ts-ignore\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const outerParams = Object.freeze(this.constructor.argsToParams(args));\n\n    /** @type {Readonly<SweetAlertOptions>} */\n    this.params = outerParams;\n\n    /** @type {boolean} */\n    this.isAwaitingPromise = false;\n    _classPrivateFieldSet2(_promise, this, this._main(currentInstance.params));\n  }\n  _main(userParams) {\n    let mixinParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    showWarningsForParams(Object.assign({}, mixinParams, userParams));\n    if (globalState.currentInstance) {\n      const swalPromiseResolve = privateMethods.swalPromiseResolve.get(globalState.currentInstance);\n      const {\n        isAwaitingPromise\n      } = globalState.currentInstance;\n      globalState.currentInstance._destroy();\n      if (!isAwaitingPromise) {\n        swalPromiseResolve({\n          isDismissed: true\n        });\n      }\n      if (isModal()) {\n        unsetAriaHidden();\n      }\n    }\n    globalState.currentInstance = currentInstance;\n    const innerParams = prepareParams(userParams, mixinParams);\n    setParameters(innerParams);\n    Object.freeze(innerParams);\n\n    // clear the previous timer\n    if (globalState.timeout) {\n      globalState.timeout.stop();\n      delete globalState.timeout;\n    }\n\n    // clear the restore focus timeout\n    clearTimeout(globalState.restoreFocusTimeout);\n    const domCache = populateDomCache(currentInstance);\n    render(currentInstance, innerParams);\n    privateProps.innerParams.set(currentInstance, innerParams);\n    return swalPromise(currentInstance, domCache, innerParams);\n  }\n\n  // `catch` cannot be the name of a module export, so we define our thenable methods here instead\n  then(onFulfilled) {\n    return _classPrivateFieldGet2(_promise, this).then(onFulfilled);\n  }\n  finally(onFinally) {\n    return _classPrivateFieldGet2(_promise, this).finally(onFinally);\n  }\n}\n\n/**\n * @param {SweetAlert} instance\n * @param {DomCache} domCache\n * @param {SweetAlertOptions} innerParams\n * @returns {Promise}\n */\nconst swalPromise = (instance, domCache, innerParams) => {\n  return new Promise((resolve, reject) => {\n    // functions to handle all closings/dismissals\n    /**\n     * @param {DismissReason} dismiss\n     */\n    const dismissWith = dismiss => {\n      instance.close({\n        isDismissed: true,\n        dismiss\n      });\n    };\n    privateMethods.swalPromiseResolve.set(instance, resolve);\n    privateMethods.swalPromiseReject.set(instance, reject);\n    domCache.confirmButton.onclick = () => {\n      handleConfirmButtonClick(instance);\n    };\n    domCache.denyButton.onclick = () => {\n      handleDenyButtonClick(instance);\n    };\n    domCache.cancelButton.onclick = () => {\n      handleCancelButtonClick(instance, dismissWith);\n    };\n    domCache.closeButton.onclick = () => {\n      dismissWith(DismissReason.close);\n    };\n    handlePopupClick(innerParams, domCache, dismissWith);\n    addKeydownHandler(globalState, innerParams, dismissWith);\n    handleInputOptionsAndValue(instance, innerParams);\n    openPopup(innerParams);\n    setupTimer(globalState, innerParams, dismissWith);\n    initFocus(domCache, innerParams);\n\n    // Scroll container to top on open (#1247, #1946)\n    setTimeout(() => {\n      domCache.container.scrollTop = 0;\n    });\n  });\n};\n\n/**\n * @param {SweetAlertOptions} userParams\n * @param {SweetAlertOptions} mixinParams\n * @returns {SweetAlertOptions}\n */\nconst prepareParams = (userParams, mixinParams) => {\n  const templateParams = getTemplateParams(userParams);\n  const params = Object.assign({}, defaultParams, mixinParams, templateParams, userParams); // precedence is described in #2131\n  params.showClass = Object.assign({}, defaultParams.showClass, params.showClass);\n  params.hideClass = Object.assign({}, defaultParams.hideClass, params.hideClass);\n  if (params.animation === false) {\n    params.showClass = {\n      backdrop: 'swal2-noanimation'\n    };\n    params.hideClass = {};\n  }\n  return params;\n};\n\n/**\n * @param {SweetAlert} instance\n * @returns {DomCache}\n */\nconst populateDomCache = instance => {\n  const domCache = {\n    popup: getPopup(),\n    container: getContainer(),\n    actions: getActions(),\n    confirmButton: getConfirmButton(),\n    denyButton: getDenyButton(),\n    cancelButton: getCancelButton(),\n    loader: getLoader(),\n    closeButton: getCloseButton(),\n    validationMessage: getValidationMessage(),\n    progressSteps: getProgressSteps()\n  };\n  privateProps.domCache.set(instance, domCache);\n  return domCache;\n};\n\n/**\n * @param {GlobalState} globalState\n * @param {SweetAlertOptions} innerParams\n * @param {Function} dismissWith\n */\nconst setupTimer = (globalState, innerParams, dismissWith) => {\n  const timerProgressBar = getTimerProgressBar();\n  hide(timerProgressBar);\n  if (innerParams.timer) {\n    globalState.timeout = new Timer(() => {\n      dismissWith('timer');\n      delete globalState.timeout;\n    }, innerParams.timer);\n    if (innerParams.timerProgressBar) {\n      show(timerProgressBar);\n      applyCustomClass(timerProgressBar, innerParams, 'timerProgressBar');\n      setTimeout(() => {\n        if (globalState.timeout && globalState.timeout.running) {\n          // timer can be already stopped or unset at this point\n          animateTimerProgressBar(innerParams.timer);\n        }\n      });\n    }\n  }\n};\n\n/**\n * Initialize focus in the popup:\n *\n * 1. If `toast` is `true`, don't steal focus from the document.\n * 2. Else if there is an [autofocus] element, focus it.\n * 3. Else if `focusConfirm` is `true` and confirm button is visible, focus it.\n * 4. Else if `focusDeny` is `true` and deny button is visible, focus it.\n * 5. Else if `focusCancel` is `true` and cancel button is visible, focus it.\n * 6. Else focus the first focusable element in a popup (if any).\n *\n * @param {DomCache} domCache\n * @param {SweetAlertOptions} innerParams\n */\nconst initFocus = (domCache, innerParams) => {\n  if (innerParams.toast) {\n    return;\n  }\n  // TODO: this is dumb, remove `allowEnterKey` param in the next major version\n  if (!callIfFunction(innerParams.allowEnterKey)) {\n    warnAboutDeprecation('allowEnterKey');\n    blurActiveElement();\n    return;\n  }\n  if (focusAutofocus(domCache)) {\n    return;\n  }\n  if (focusButton(domCache, innerParams)) {\n    return;\n  }\n  setFocus(-1, 1);\n};\n\n/**\n * @param {DomCache} domCache\n * @returns {boolean}\n */\nconst focusAutofocus = domCache => {\n  const autofocusElements = Array.from(domCache.popup.querySelectorAll('[autofocus]'));\n  for (const autofocusElement of autofocusElements) {\n    if (autofocusElement instanceof HTMLElement && isVisible$1(autofocusElement)) {\n      autofocusElement.focus();\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * @param {DomCache} domCache\n * @param {SweetAlertOptions} innerParams\n * @returns {boolean}\n */\nconst focusButton = (domCache, innerParams) => {\n  if (innerParams.focusDeny && isVisible$1(domCache.denyButton)) {\n    domCache.denyButton.focus();\n    return true;\n  }\n  if (innerParams.focusCancel && isVisible$1(domCache.cancelButton)) {\n    domCache.cancelButton.focus();\n    return true;\n  }\n  if (innerParams.focusConfirm && isVisible$1(domCache.confirmButton)) {\n    domCache.confirmButton.focus();\n    return true;\n  }\n  return false;\n};\nconst blurActiveElement = () => {\n  if (document.activeElement instanceof HTMLElement && typeof document.activeElement.blur === 'function') {\n    document.activeElement.blur();\n  }\n};\n\n// Dear russian users visiting russian sites. Let's have fun.\nif (typeof window !== 'undefined' && /^ru\\b/.test(navigator.language) && location.host.match(/\\.(ru|su|by|xn--p1ai)$/)) {\n  const now = new Date();\n  const initiationDate = localStorage.getItem('swal-initiation');\n  if (!initiationDate) {\n    localStorage.setItem('swal-initiation', `${now}`);\n  } else if ((now.getTime() - Date.parse(initiationDate)) / (1000 * 60 * 60 * 24) > 3) {\n    setTimeout(() => {\n      document.body.style.pointerEvents = 'none';\n      const ukrainianAnthem = document.createElement('audio');\n      ukrainianAnthem.src = 'https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3';\n      ukrainianAnthem.loop = true;\n      document.body.appendChild(ukrainianAnthem);\n      setTimeout(() => {\n        ukrainianAnthem.play().catch(() => {\n          // ignore\n        });\n      }, 2500);\n    }, 500);\n  }\n}\n\n// Assign instance methods from src/instanceMethods/*.js to prototype\nSweetAlert.prototype.disableButtons = disableButtons;\nSweetAlert.prototype.enableButtons = enableButtons;\nSweetAlert.prototype.getInput = getInput;\nSweetAlert.prototype.disableInput = disableInput;\nSweetAlert.prototype.enableInput = enableInput;\nSweetAlert.prototype.hideLoading = hideLoading;\nSweetAlert.prototype.disableLoading = hideLoading;\nSweetAlert.prototype.showValidationMessage = showValidationMessage;\nSweetAlert.prototype.resetValidationMessage = resetValidationMessage;\nSweetAlert.prototype.close = close;\nSweetAlert.prototype.closePopup = close;\nSweetAlert.prototype.closeModal = close;\nSweetAlert.prototype.closeToast = close;\nSweetAlert.prototype.rejectPromise = rejectPromise;\nSweetAlert.prototype.update = update;\nSweetAlert.prototype._destroy = _destroy;\n\n// Assign static methods from src/staticMethods/*.js to constructor\nObject.assign(SweetAlert, staticMethods);\n\n// Proxy to instance methods to constructor, for now, for backwards compatibility\nObject.keys(instanceMethods).forEach(key => {\n  /**\n   * @param {...any} args\n   * @returns {any | undefined}\n   */\n  SweetAlert[key] = function () {\n    if (currentInstance && currentInstance[key]) {\n      return currentInstance[key](...arguments);\n    }\n    return null;\n  };\n});\nSweetAlert.DismissReason = DismissReason;\nSweetAlert.version = '11.17.2';\n\nconst Swal = SweetAlert;\n// @ts-ignore\nSwal.default = Swal;\n\nexport { Swal as default };\n\"undefined\"!=typeof document&&function(e,t){var n=e.createElement(\"style\");if(e.getElementsByTagName(\"head\")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,\":root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:\\\"top-start     top            top-end\\\" \\\"center-start  center         center-end\\\" \\\"bottom-start  bottom-center  bottom-end\\\";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:\\\"!\\\";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}\");","// sweetalert2-react-content v5.1.0\n\nimport React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nconst mounts = [{\n  key: 'title',\n  getter: swal => swal.getTitle()\n}, {\n  key: 'html',\n  getter: swal => swal.getHtmlContainer()\n}, {\n  key: 'confirmButtonText',\n  getter: swal => swal.getConfirmButton()\n}, {\n  key: 'denyButtonText',\n  getter: swal => swal.getDenyButton()\n}, {\n  key: 'cancelButtonText',\n  getter: swal => swal.getCancelButton()\n}, {\n  key: 'footer',\n  getter: swal => swal.getFooter()\n}, {\n  key: 'closeButtonHtml',\n  getter: swal => swal.getCloseButton()\n}, {\n  key: 'iconHtml',\n  getter: swal => swal.getIconContent()\n}, {\n  key: 'loaderHtml',\n  getter: swal => swal.getLoader()\n}];\n\nconst noop = () => {};\nfunction withReactContent(ParentSwal) {\n  /* Returns `params` separated into a tuple of `reactParams` (the React params that need to be rendered)\n  and`otherParams` (all the other parameters, with any React params replaced with a space ' ') */\n  function extractReactParams(params) {\n    const reactParams = {};\n    const otherParams = {};\n    const mountKeys = mounts.map(mount => mount.key);\n    Object.entries(params).forEach(_ref => {\n      let [key, value] = _ref;\n      if (mountKeys.includes(key) && /*#__PURE__*/React.isValidElement(value)) {\n        reactParams[key] = value;\n        otherParams[key] = ' ';\n      } else {\n        otherParams[key] = value;\n      }\n    });\n    return [reactParams, otherParams];\n  }\n  function render(swal, reactParams) {\n    Object.entries(reactParams).forEach(_ref2 => {\n      let [key, value] = _ref2;\n      const mount = mounts.find(mount => mount.key === key);\n      const domElement = mount.getter(ParentSwal);\n      const root = createRoot(domElement);\n      root.render(value);\n      swal.__roots.push(root);\n    });\n  }\n  function unrender(swal) {\n    swal.__roots.forEach(root => {\n      root.unmount();\n    });\n    swal.__roots = [];\n  }\n  return class extends ParentSwal {\n    static argsToParams(args) {\n      if (/*#__PURE__*/React.isValidElement(args[0]) || /*#__PURE__*/React.isValidElement(args[1])) {\n        const params = {};\n        ['title', 'html', 'icon'].forEach((name, index) => {\n          if (args[index] !== undefined) {\n            params[name] = args[index];\n          }\n        });\n        return params;\n      } else {\n        return ParentSwal.argsToParams(args);\n      }\n    }\n    _main(params, mixinParams) {\n      this.__roots = [];\n      this.__params = Object.assign({}, mixinParams, params);\n      const [reactParams, otherParams] = extractReactParams(this.__params);\n      const superWillOpen = otherParams.willOpen || noop;\n      const superDidOpen = otherParams.didOpen || noop;\n      const superDidDestroy = otherParams.didDestroy || noop;\n      return super._main(Object.assign({}, otherParams, {\n        willOpen: popup => {\n          render(this, reactParams);\n          superWillOpen(popup);\n        },\n        didOpen: popup => {\n          // read more about why this setTimeout is needed here:\n          // https://github.com/reactwg/react-18/discussions/5 (What about the render callback?)\n          setTimeout(() => {\n            superDidOpen(popup);\n          });\n        },\n        didDestroy: popup => {\n          superDidDestroy(popup);\n          unrender(this);\n        }\n      }));\n    }\n    update(params) {\n      Object.assign(this.__params, params);\n      unrender(this);\n      const [reactParams, otherParams] = extractReactParams(this.__params);\n      super.update(otherParams);\n      render(this, reactParams);\n    }\n  };\n}\n\nexport { withReactContent as default };\n//# sourceMappingURL=sweetalert2-react-content.es.js.map\n","import Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\n\n// Initialize SweetAlert with React content\nconst MySwal = withReactContent(Swal);\n\n// Base alert configuration\nconst baseConfig = {\n  customClass: {\n    container: 'font-body',\n    popup: 'rounded-lg shadow-xl border border-earth-700',\n    title: 'text-xl font-display font-bold',\n    htmlContainer: 'text-gray-700',\n    confirmButton: 'px-6 py-2 rounded-lg text-white transition-colors duration-300',\n    cancelButton: 'px-6 py-2 rounded-lg transition-colors duration-300'\n  },\n  buttonsStyling: false,\n  backdrop: 'rgba(0, 0, 0, 0.7)',\n  showClass: {\n    popup: 'animate__animated animate__fadeIn animate__faster'\n  },\n  hideClass: {\n    popup: 'animate__animated animate__fadeOut animate__faster'\n  }\n};\n\n// Create a safe alert function that checks DOM readiness\nconst createSafeAlert = () => {\n  return (options: any): Promise<any> => {\n    return new Promise((resolve) => {\n      // Function to show the alert\n      const showAlert = () => {\n        try {\n          resolve(MySwal.fire({\n            ...baseConfig,\n            ...options\n          }));\n        } catch (error) {\n          console.error('Error showing alert:', error);\n          resolve(undefined);\n        }\n      };\n\n      // Check if document is ready\n      if (document.readyState === 'complete' || document.readyState === 'interactive') {\n        showAlert();\n      } else {\n        document.addEventListener('DOMContentLoaded', showAlert);\n      }\n    });\n  };\n};\n\n// Export the safe alert function\nexport const showAlert = createSafeAlert();\n\n// Success alert\nexport const showSuccess = (title: string, text?: string) => {\n  return showAlert({\n    title,\n    text,\n    icon: 'success',\n    confirmButtonText: 'OK',\n    customClass: {\n      ...baseConfig.customClass,\n      confirmButton: `${baseConfig.customClass.confirmButton} bg-accent-sage hover:bg-accent-moss`,\n      title: `${baseConfig.customClass.title} text-accent-sage`\n    }\n  });\n};\n\n// Error alert\nexport const showError = (title: string, text?: string) => {\n  return showAlert({\n    title,\n    text,\n    icon: 'error',\n    confirmButtonText: 'OK',\n    customClass: {\n      ...baseConfig.customClass,\n      confirmButton: `${baseConfig.customClass.confirmButton} bg-accent-rust hover:bg-red-700`,\n      title: `${baseConfig.customClass.title} text-accent-rust`\n    }\n  });\n};\n\n// Confirmation alert\nexport const showConfirm = (title: string, text: string) => {\n  return showAlert({\n    title,\n    text,\n    icon: 'warning',\n    showCancelButton: true,\n    confirmButtonText: 'Yes',\n    cancelButtonText: 'Cancel',\n    customClass: {\n      ...baseConfig.customClass,\n      confirmButton: `${baseConfig.customClass.confirmButton} bg-accent-clay hover:bg-accent-rust`,\n      cancelButton: `${baseConfig.customClass.cancelButton} bg-earth-700 hover:bg-earth-600 text-gray-900`,\n      title: `${baseConfig.customClass.title} text-accent-clay`\n    }\n  });\n};","import { initializeApp } from 'firebase/app';\nimport { \n  getFirestore, \n  initializeFirestore,\n  persistentLocalCache,\n  persistentMultipleTabManager,\n  collection,\n  addDoc,\n  getDoc,\n  doc,\n  updateDoc,\n  getDocs,\n  query,\n  QueryConstraint,\n  DocumentData,\n  FirestoreError,\n  Timestamp,\n  WriteBatch,\n  serverTimestamp\n} from 'firebase/firestore';\nimport { \n  getAuth, \n  Auth\n} from 'firebase/auth';\nimport { getStorage } from 'firebase/storage';\nimport { getAnalytics } from 'firebase/analytics';\nimport { showError } from './alerts';\n\n// Firebase configuration\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID,\n  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID\n};\n\n// Validate Firebase config\nObject.entries(firebaseConfig).forEach(([key, value]) => {\n  if (!value) {\n    console.error(`Missing Firebase config: ${key}`);\n  }\n});\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Firestore with multi-tab persistence\nconst db = initializeFirestore(app, {\n  localCache: persistentLocalCache({\n    tabManager: persistentMultipleTabManager()\n  })\n});\n\n// Initialize Auth\nconst auth = getAuth(app);\n\n// Initialize Storage\nconst storage = getStorage(app);\n\n// Initialize Analytics in production\nconst analytics = typeof window !== 'undefined' ? getAnalytics(app) : null;\n\n// Enhanced retry utility with exponential backoff\nconst withRetry = async <T>(\n  operation: () => Promise<T>,\n  maxRetries = 3,\n  baseDelay = 1000,\n  onRetry?: (attempt: number, error: Error) => void\n): Promise<T> => {\n  let lastError: Error | null = null;\n  \n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\n    try {\n      return await operation();\n    } catch (error) {\n      lastError = error instanceof Error ? error : new Error(String(error));\n      \n      console.error(`Operation failed (attempt ${attempt}/${maxRetries}):`, {\n        error: lastError,\n        stack: lastError.stack,\n        timestamp: new Date().toISOString(),\n        code: (error as FirestoreError)?.code\n      });\n      \n      if (attempt === maxRetries) {\n        console.error('All retry attempts failed:', {\n          totalAttempts: attempt,\n          finalError: lastError,\n          code: (error as FirestoreError)?.code\n        });\n        break;\n      }\n      \n      onRetry?.(attempt, lastError);\n      \n      const delay = baseDelay * Math.pow(2, attempt - 1) * (0.5 + Math.random() * 0.5);\n      console.log(`Retrying in ${Math.round(delay)}ms...`);\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  \n  throw lastError || new Error('Operation failed after retries');\n};\n\n// Initialize collections\nconst collections = {\n  challenges: collection(db, 'challenges'),\n  users: collection(db, 'users'),\n  trades: collection(db, 'trades'),\n  conversations: collection(db, 'conversations'),\n  messages: collection(db, 'messages'),\n  collaborations: collection(db, 'collaborations')\n};\n\n// Helper to check if a collection exists\nconst checkCollection = async (collectionName: string) => {\n  try {\n    // Just check collection reference existence\n    const colRef = collection(db, collectionName);\n    return true;\n  } catch (error) {\n    console.error(`Error checking collection ${collectionName}:`, error);\n    return false;\n  }\n};\n\n// Initialize required collections\nconst initializeCollections = async () => {\n  console.log('Initializing Firebase collections...');\n  \n  try {\n    // Check and initialize challenges collection\n    const hasExistingChallenges = await checkCollection('challenges');\n    if (!hasExistingChallenges) {\n      console.log('Initializing challenges collection...');\n      const { initializeChallenges } = await import('./ai-challenges');\n      await initializeChallenges();\n    }\n    \n    console.log('Firebase collections initialized successfully');\n  } catch (error) {\n    console.error('Failed to initialize collections:', error);\n    await showError(\n      'Database Initialization Error',\n      'Failed to initialize the database collections. Please refresh the page or contact support if the problem persists.'\n    );\n  }\n};\n\n// Export all necessary Firebase instances and utilities\nexport {\n  app as default,\n  db,\n  auth,\n  storage,\n  analytics,\n  withRetry,\n  collections,\n  checkCollection,\n  initializeCollections,\n  serverTimestamp\n};\n","import { db } from '../lib/firebase';\nimport { collection, query, where, getDocs, runTransaction, doc } from 'firebase/firestore';\n\n/**\n * Converts a display name to a username format\n * - Converts to lowercase\n * - Replaces special characters and spaces with hyphens\n * - Ensures starts with @ symbol\n */\nexport function generateUsername(displayName: string, suffix = ''): string {\n  const username = displayName\n    .toLowerCase()\n    .trim()\n    .replace(/[^a-z0-9-]/g, '-') // Replace special chars with hyphens\n    .replace(/-+/g, '-')         // Collapse multiple hyphens\n    .replace(/^-|-$/g, '');      // Remove leading/trailing hyphens\n\n  return '@' + username + suffix;\n}\n\n/**\n * Validates username format\n * Returns true if username is valid, false otherwise\n */\nexport function isValidUsername(username: string): boolean {\n  // Must start with @, then 3-30 alphanumeric/hyphen chars\n  const usernameRegex = /^@[a-z0-9-]{3,30}$/;\n  return usernameRegex.test(username);\n}\n\n/**\n * Checks if a username is available\n * Returns true if username is available, false if taken\n */\nexport async function isUsernameAvailable(username: string): Promise<boolean> {\n  const usersRef = collection(db, 'users');\n  const q = query(usersRef, where('username', '==', username));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.empty;\n}\n\n/**\n * Generates a unique username based on display name\n * Adds numeric suffix if base username is taken\n */\nexport async function generateUniqueUsername(displayName: string): Promise<string> {\n  const baseUsername = generateUsername(displayName);\n  \n  if (await isUsernameAvailable(baseUsername)) {\n    return baseUsername;\n  }\n\n  let suffix = 1;\n  let username: string;\n  \n  do {\n    username = generateUsername(displayName, `-${suffix}`);\n    suffix++;\n  } while (!(await isUsernameAvailable(username)));\n\n  return username;\n}\n\nexport class UsernameError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UsernameError';\n  }\n}\n\n/**\n * Updates a user's username and makes their old username available\n * Performs the update in a transaction to ensure consistency\n */\nexport async function updateUsername(userId: string, newUsername: string): Promise<void> {\n  if (!isValidUsername(newUsername)) {\n    throw new UsernameError('Invalid username format');\n  }\n\n  const isAvailable = await isUsernameAvailable(newUsername);\n  if (!isAvailable) {\n    throw new UsernameError('Username is already taken');\n  }\n\n  const userRef = doc(db, 'users', userId);\n\n  await runTransaction(db, async (transaction) => {\n    const userDoc = await transaction.get(userRef);\n    if (!userDoc.exists()) {\n      throw new UsernameError('User not found');\n    }\n\n    const userData = userDoc.data();\n    const oldUsername = userData.username;\n\n    // Update user document with new username\n    transaction.update(userRef, {\n      username: newUsername\n    });\n  });\n}\n","import { createContext, useContext, useEffect, useState } from 'react';\nimport { generateUniqueUsername, updateUsername as updateUsernameUtil } from '../utils/username';\nimport { \n  User, \n  onAuthStateChanged, \n  signOut, \n  createUserWithEmailAndPassword, \n  signInWithEmailAndPassword,\n  GoogleAuthProvider,\n  signInWithPopup,\n  signInWithRedirect,\n  getRedirectResult,\n  updateProfile\n} from 'firebase/auth';\nimport { auth, db, withRetry } from '../lib/firebase';\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  signUp: (email: string, password: string, displayName: string) => Promise<void>;\n  signIn: (email: string, password: string) => Promise<void>;\n  signInWithGoogle: () => Promise<void>;\n  logout: () => Promise<void>;\n  updateUsername: (newUsername: string) => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      setUser(user);\n      setLoading(false);\n\n      // Check for redirect result\n      if (!user) {\n        try {\n          const result = await getRedirectResult(auth);\n          if (result?.user) {\n            await handleGoogleSignIn(result.user);\n          }\n        } catch (error: any) {\n          console.error('Redirect sign-in error:', error);\n          if (error.code === 'auth/unauthorized-domain') {\n            setError('This domain is not authorized for authentication. Please contact support.');\n          }\n        }\n      }\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const handleGoogleSignIn = async (user: User) => {\n    try {\n      await withRetry(async () => {\n        // Check if user profile exists\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\n        \n        // If not, create one\n        if (!userDoc.exists()) {\n          await setDoc(doc(db, 'users', user.uid), {\n            email: user.email,\n            displayName: user.displayName || '',\n            displayNameLower: (user.displayName || '').toLowerCase(),\n            username: await generateUniqueUsername(user.displayName || user.email?.split('@')[0] || 'user'),\n            bio: '',\n            skills: [],\n            portfolio: '',\n            createdAt: new Date(),\n            updatedAt: new Date(),\n          });\n        }\n      });\n    } catch (error) {\n      console.error('Error creating user profile:', error);\n      throw error;\n    }\n  };\n\n  const signUp = async (email: string, password: string, displayName: string) => {\n    try {\n      // Create user in Firebase Auth\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      \n      // Update display name in Firebase Auth\n      await updateProfile(userCredential.user, { displayName });\n      \n      // Create user profile in Firestore\n      await setDoc(doc(db, 'users', userCredential.user.uid), {\n        email,\n        displayName,\n        displayNameLower: displayName.toLowerCase(),\n        username: await generateUniqueUsername(displayName),\n        bio: '',\n        skills: [],\n        portfolio: '',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      });\n    } catch (error: any) {\n      console.error('Error in signUp:', error);\n      if (error.code === 'auth/email-already-in-use') {\n        throw new Error('An account with this email already exists');\n      } else if (error.code === 'auth/invalid-email') {\n        throw new Error('Invalid email address');\n      } else if (error.code === 'auth/operation-not-allowed') {\n        throw new Error('Email/password accounts are not enabled. Please contact support.');\n      } else if (error.code === 'auth/weak-password') {\n        throw new Error('Password is too weak. It must be at least 6 characters long.');\n      } else if (error.code === 'auth/unauthorized-domain') {\n        throw new Error('This domain is not authorized for authentication. Please contact support.');\n      } else {\n        throw new Error('Failed to create account. Please try again.');\n      }\n    }\n  };\n\n  const signIn = async (email: string, password: string) => {\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n    } catch (error: any) {\n      console.error('Error in signIn:', error);\n      if (error.code === 'auth/unauthorized-domain') {\n        throw new Error('This domain is not authorized for authentication. Please contact support.');\n      }\n      throw error;\n    }\n  };\n\n  const signInWithGoogle = async () => {\n    try {\n      const provider = new GoogleAuthProvider();\n      \n      // Try popup first\n      try {\n        const result = await signInWithPopup(auth, provider);\n        await handleGoogleSignIn(result.user);\n      } catch (popupError: any) {\n        console.error('Popup error:', popupError);\n        \n        // If popup is blocked or domain is unauthorized, handle appropriately\n        if (popupError.code === 'auth/popup-blocked') {\n          // Fall back to redirect\n          await signInWithRedirect(auth, provider);\n        } else if (popupError.code === 'auth/unauthorized-domain') {\n          throw new Error('This domain is not authorized for authentication. Please contact support.');\n        } else {\n          throw popupError;\n        }\n      }\n    } catch (error: any) {\n      console.error('Error in signInWithGoogle:', error);\n      throw error;\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error('Error in logout:', error);\n      throw error;\n    }\n  };\n\n  const updateUsername = async (newUsername: string) => {\n    if (!user) throw new Error('No user logged in');\n    \n    try {\n      await updateUsernameUtil(user.uid, newUsername);\n    } catch (error: any) {\n      console.error('Error updating username:', error);\n      throw error;\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ \n      user, \n      loading, \n      signUp, \n      signIn, \n      signInWithGoogle, \n      logout,\n      updateUsername \n    }}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","import { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './authcontext';\nimport { getIdTokenResult } from 'firebase/auth';\n\ninterface AdminContextType {\n  isAdmin: boolean;\n  loading: boolean;\n}\n\nconst AdminContext = createContext<AdminContextType | null>(null);\n\nexport function AdminProvider({ children }: { children: React.ReactNode }) {\n  const { user } = useAuth();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user) {\n      setIsAdmin(false);\n      setLoading(false);\n      return;\n    }\n\n    const checkAdminStatus = async () => {\n      try {\n        const tokenResult = await getIdTokenResult(user, true);\n        setIsAdmin(!!tokenResult.claims.admin);\n      } catch (error) {\n        console.error('Error checking admin status:', error);\n        setIsAdmin(false);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAdminStatus();\n  }, [user]);\n\n  return (\n    <AdminContext.Provider value={{ isAdmin, loading }}>\n      {children}\n    </AdminContext.Provider>\n  );\n}\n\nexport function useAdmin() {\n  const context = useContext(AdminContext);\n  if (!context) {\n    throw new Error('useAdmin must be used within an AdminProvider');\n  }\n  return context;\n}\n","import { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Shield, Loader } from 'lucide-react';\n\nexport function ProtectedRoute({ children }: { children: React.ReactNode }) {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-[60vh] flex flex-col items-center justify-center\">\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink rounded-full animate-spin opacity-75 blur-lg\"></div>\n          <div className=\"relative bg-cyber-gray-900 p-8 rounded-lg border border-cyber-gray-800\">\n            <Loader className=\"h-8 w-8 text-neon-blue animate-spin\" />\n          </div>\n        </div>\n        <p className=\"mt-4 text-cyber-gray-400 animate-pulse\">Authenticating...</p>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-[60vh] flex flex-col items-center justify-center p-4\">\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 bg-red-500/20 rounded-lg blur-lg\"></div>\n          <div className=\"relative bg-cyber-gray-900 p-8 rounded-lg border border-red-500/50 max-w-md\">\n            <div className=\"flex items-center gap-4 mb-4\">\n              <Shield className=\"h-8 w-8 text-red-500\" />\n              <h2 className=\"text-xl font-display font-bold text-red-500\">Access Denied</h2>\n            </div>\n            <p className=\"text-cyber-gray-300 mb-6\">\n              This area requires authentication. Please log in to continue.\n            </p>\n            <Navigate to=\"/login\" replace />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}","import { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useAdmin } from '../contexts/AdminContext';\nimport { Shield, Loader } from 'lucide-react';\n\nexport function AdminRoute({ children }: { children: React.ReactNode }) {\n  const { user } = useAuth();\n  const { isAdmin, loading } = useAdmin();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-[60vh] flex flex-col items-center justify-center\">\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink rounded-full animate-spin opacity-75 blur-lg\"></div>\n          <div className=\"relative bg-cyber-gray-900 p-8 rounded-lg border border-cyber-gray-800\">\n            <Loader className=\"h-8 w-8 text-neon-blue animate-spin\" />\n          </div>\n        </div>\n        <p className=\"mt-4 text-cyber-gray-400 animate-pulse\">Checking permissions...</p>\n      </div>\n    );\n  }\n\n  if (!user || !isAdmin) {\n    return (\n      <div className=\"min-h-[60vh] flex flex-col items-center justify-center p-4\">\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 bg-red-500/20 rounded-lg blur-lg\"></div>\n          <div className=\"relative bg-cyber-gray-900 p-8 rounded-lg border border-red-500/50 max-w-md\">\n            <div className=\"flex items-center gap-4 mb-4\">\n              <Shield className=\"h-8 w-8 text-red-500\" />\n              <h2 className=\"text-xl font-display font-bold text-red-500\">Access Denied</h2>\n            </div>\n            <p className=\"text-cyber-gray-300 mb-6\">\n              This area requires administrator privileges.\n            </p>\n            <Navigate to=\"/\" replace />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { LogIn, Mail, AlertCircle, HelpCircle } from 'lucide-react';\nimport { FirebaseError } from 'firebase/app';\n\nexport function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | JSX.Element>('');\n  const [loading, setLoading] = useState(false);\n  const { signIn, signInWithGoogle } = useAuth();\n  const navigate = useNavigate();\n\n  const handleEmailSignIn = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    \n    try {\n      await signIn(email, password);\n      navigate('/discover');\n    } catch (err) {\n      if (err instanceof FirebaseError) {\n        switch (err.code) {\n          case 'auth/invalid-email':\n            setError('Invalid email address');\n            break;\n          case 'auth/user-disabled':\n            setError('This account has been disabled');\n            break;\n          case 'auth/user-not-found':\n            setError('No account found with this email');\n            break;\n          case 'auth/wrong-password':\n          case 'auth/invalid-credential':\n            setError(\n              <div className=\"flex items-start gap-2\">\n                <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"font-medium\">Invalid Credentials</p>\n                  <p className=\"text-sm mt-1\">\n                    The email or password you entered is incorrect. Please check your credentials and try again.\n                  </p>\n                </div>\n              </div>\n            );\n            break;\n          default:\n            setError('Failed to sign in');\n        }\n      } else {\n        setError('An unexpected error occurred');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      await signInWithGoogle();\n      navigate('/discover');\n    } catch (err) {\n      if (err instanceof FirebaseError) {\n        switch (err.code) {\n          case 'auth/popup-blocked':\n            setError(\n              <div className=\"flex items-center gap-2\">\n                <AlertCircle className=\"h-5 w-5 text-red-600\" />\n                <div>\n                  <p className=\"font-medium\">Popup Blocked</p>\n                  <p className=\"text-sm\">\n                    Please allow popups for this site and try again. Look for the popup blocker icon in your browser's address bar.\n                  </p>\n                </div>\n              </div>\n            );\n            break;\n          case 'auth/unauthorized-domain':\n            setError(\n              <div className=\"flex items-start gap-2 bg-yellow-50 p-4 rounded-lg\">\n                <HelpCircle className=\"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"font-medium text-yellow-800\">Domain Authorization Pending</p>\n                  <p className=\"text-sm text-yellow-700 mt-1\">\n                    This domain is not yet authorized for authentication. This can happen when:\n                  </p>\n                  <ul className=\"list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1\">\n                    <li>The domain was recently added to Firebase</li>\n                    <li>Changes are still propagating (can take up to 15 minutes)</li>\n                    <li>The domain wasn't added to Firebase's authorized domains</li>\n                  </ul>\n                  <p className=\"text-sm text-yellow-700 mt-2\">\n                    Please try again in a few minutes. If the issue persists, contact support.\n                  </p>\n                </div>\n              </div>\n            );\n            break;\n          case 'auth/popup-closed-by-user':\n            setError('Sign in was cancelled');\n            break;\n          default:\n            setError('Failed to sign in with Google');\n        }\n      } else if (err instanceof Error) {\n        setError(err.message);\n      } else {\n        setError('An unexpected error occurred');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-earth-900 flex items-center justify-center\"> {/* Updated background color */}\n      <div className=\"bg-earth-800 p-8 rounded-lg shadow-md w-96 border border-earth-700\">\n        <h2 className=\"text-2xl font-bold mb-6 text-center text-text-primary font-display\">\n          Sign In\n        </h2>\n        \n        {error && (\n          <div className=\"mb-6\">\n            {typeof error === 'string' ? (\n              <div className=\"bg-red-100 text-red-700 p-3 rounded\">\n                {error}\n              </div>\n            ) : error}\n          </div>\n        )}\n\n        {/* Google Sign In Button */}\n        <button\n          onClick={handleGoogleSignIn}\n          disabled={loading}\n          className=\"w-full bg-earth-800 border-2 border-earth-700 text-text-primary py-2 px-4 rounded-lg hover:border-accent-clay hover:text-accent-clay mb-6 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300\"\n        >\n          <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\n            <path\n              fill=\"#4285F4\"\n              d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n            />\n            <path\n              fill=\"#34A853\"\n              d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n            />\n            <path\n              fill=\"#FBBC05\"\n              d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n            />\n            <path\n              fill=\"#EA4335\"\n              d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n            />\n          </svg>\n          Continue with Google\n        </button>\n\n        <div className=\"relative mb-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-earth-700\"></div>\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-earth-800 text-text-muted\">Or continue with email</span>\n          </div>\n        </div>\n\n        <form onSubmit={handleEmailSignIn}>\n          <div className=\"mb-4\">\n            <label className=\"block text-text-muted mb-2\" htmlFor=\"email\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full p-2 bg-earth-800 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n              required\n            />\n          </div>\n          <div className=\"mb-6\">\n            <label className=\"block text-text-muted mb-2\" htmlFor=\"password\">\n              Password\n            </label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full p-2 bg-earth-800 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n              required\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-gradient-to-r from-accent-clay to-accent-ochre text-text-light py-2 px-4 rounded-lg hover:shadow-lg hover:shadow-accent-clay/20 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Sign in with Email\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { LogIn, Mail, AlertCircle, HelpCircle } from 'lucide-react';\n\nexport function Register() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [error, setError] = useState<string | JSX.Element>('');\n  const [loading, setLoading] = useState(false);\n  const { signUp, signInWithGoogle } = useAuth();\n  const navigate = useNavigate();\n\n  const handleEmailSignUp = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    // Basic validation\n    if (password.length < 6) {\n      setError(\n        <div className=\"flex items-start gap-2\">\n          <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"font-medium\">Password Too Short</p>\n            <p className=\"text-sm mt-1\">\n              Password must be at least 6 characters long for security.\n            </p>\n          </div>\n        </div>\n      );\n      setLoading(false);\n      return;\n    }\n\n    if (!displayName.trim()) {\n      setError(\n        <div className=\"flex items-start gap-2\">\n          <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"font-medium\">Display Name Required</p>\n            <p className=\"text-sm mt-1\">\n              Please enter a display name to create your account.\n            </p>\n          </div>\n        </div>\n      );\n      setLoading(false);\n      return;\n    }\n    \n    try {\n      await signUp(email, password, displayName);\n      navigate('/discover');\n    } catch (err) {\n      if (err instanceof Error) {\n        if (err.message.includes('unauthorized-domain')) {\n          setError(\n            <div className=\"flex items-start gap-2 bg-yellow-50 p-4 rounded-lg\">\n              <HelpCircle className=\"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"font-medium text-yellow-800\">Domain Authorization Pending</p>\n                <p className=\"text-sm text-yellow-700 mt-1\">\n                  This domain is not yet authorized for authentication. This can happen when:\n                </p>\n                <ul className=\"list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1\">\n                  <li>The domain was recently added to Firebase</li>\n                  <li>Changes are still propagating (can take up to 15 minutes)</li>\n                  <li>The domain wasn't added to Firebase's authorized domains</li>\n                </ul>\n                <p className=\"text-sm text-yellow-700 mt-2\">\n                  Please try again in a few minutes. If the issue persists, contact support.\n                </p>\n              </div>\n            </div>\n          );\n        } else {\n          setError(\n            <div className=\"flex items-start gap-2\">\n              <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"font-medium\">Registration Failed</p>\n                <p className=\"text-sm mt-1\">{err.message}</p>\n              </div>\n            </div>\n          );\n        }\n      } else {\n        setError('An unexpected error occurred');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignUp = async () => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      await signInWithGoogle();\n      navigate('/discover');\n    } catch (err) {\n      if (err instanceof Error) {\n        setError(err.message);\n      } else {\n        setError('Failed to sign up with Google');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-earth-900 flex items-center justify-center\"> {/* Updated background color */}\n      <div className=\"bg-earth-800 p-8 rounded-lg shadow-md w-96 border border-earth-700\">\n        <h2 className=\"text-2xl font-bold mb-6 text-center text-text-primary font-display\">\n          Create Account\n        </h2>\n        \n        {error && (\n          <div className=\"mb-6\">\n            {typeof error === 'string' ? (\n              <div className=\"bg-red-100 text-red-700 p-3 rounded\">\n                {error}\n              </div>\n            ) : error}\n          </div>\n        )}\n\n        {/* Google Sign Up Button */}\n        <button\n          onClick={handleGoogleSignUp}\n          disabled={loading}\n          className=\"w-full bg-earth-800 border-2 border-earth-700 text-text-primary py-2 px-4 rounded-lg hover:border-accent-clay hover:text-accent-clay mb-6 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300\"\n        >\n          <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\n            <path\n              fill=\"#4285F4\"\n              d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n            />\n            <path\n              fill=\"#34A853\"\n              d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n            />\n            <path\n              fill=\"#FBBC05\"\n              d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n            />\n            <path\n              fill=\"#EA4335\"\n              d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n            />\n          </svg>\n          Continue with Google\n        </button>\n\n        <div className=\"relative mb-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-earth-700\"></div>\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-earth-800 text-text-muted\">Or sign up with email</span>\n          </div>\n        </div>\n\n        <form onSubmit={handleEmailSignUp}>\n          <div className=\"mb-4\">\n            <label className=\"block text-text-muted mb-2\" htmlFor=\"displayName\">\n              Display Name\n            </label>\n            <input\n              type=\"text\"\n              id=\"displayName\"\n              value={displayName}\n              onChange={(e) => setDisplayName(e.target.value)}\n              className=\"w-full p-2 bg-earth-800 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n              required\n              minLength={2}\n              maxLength={50}\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label className=\"block text-text-muted mb-2\" htmlFor=\"email\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full p-2 bg-earth-800 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n              required\n            />\n          </div>\n          <div className=\"mb-6\">\n            <label className=\"block text-text-muted mb-2\" htmlFor=\"password\">\n              Password\n            </label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full p-2 bg-earth-800 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n              required\n              minLength={6}\n            />\n            <p className=\"mt-1 text-sm text-text-muted\">\n              Must be at least 6 characters long\n            </p>\n          </div>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-gradient-to-r from-accent-clay to-accent-ochre text-text-light py-2 px-4 rounded-lg hover:shadow-lg hover:shadow-accent-clay/20 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Create Account\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  addDoc,\n  updateDoc,\n  query,\n  where,\n  orderBy,\n  limit,\n  DocumentData,\n  QueryConstraint\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\n\nexport function useFirestore<T extends DocumentData>(\n  collectionName: string,\n  constraints?: QueryConstraint[]\n) {\n  const [data, setData] = useState<T[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const q = constraints\n          ? query(collection(db, collectionName), ...constraints)\n          : collection(db, collectionName);\n        \n        const querySnapshot = await getDocs(q);\n        const documents = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })) as T[];\n        \n        setData(documents);\n        setLoading(false);\n      } catch (err) {\n        setError(err instanceof Error ? err : new Error('An error occurred'));\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [collectionName, constraints]);\n\n  const add = async (data: Omit<T, 'id'>) => {\n    try {\n      const docRef = await addDoc(collection(db, collectionName), {\n        ...data,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      });\n      return docRef.id;\n    } catch (err) {\n      throw err instanceof Error ? err : new Error('Failed to add document');\n    }\n  };\n\n  const update = async (id: string, data: Partial<T>) => {\n    try {\n      const docRef = doc(db, collectionName, id);\n      await updateDoc(docRef, {\n        ...data,\n        updatedAt: new Date()\n      });\n    } catch (err) {\n      throw err instanceof Error ? err : new Error('Failed to update document');\n    }\n  };\n\n  const getById = async (id: string): Promise<T> => {\n    try {\n      const docRef = doc(db, collectionName, id);\n      const docSnap = await getDoc(docRef);\n      \n      if (docSnap.exists()) {\n        return { id: docSnap.id, ...docSnap.data() } as T;\n      } else {\n        throw new Error('Document not found');\n      }\n    } catch (err) {\n      throw err instanceof Error ? err : new Error('Failed to get document');\n    }\n  };\n\n  return {\n    data,\n    loading,\n    error,\n    add,\n    update,\n    getById\n  };\n}","import { User } from 'lucide-react';\n\ninterface ProfilePictureProps {\n  url?: string;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n}\n\nexport function ProfilePicture({ url, size = 'md', className = '' }: ProfilePictureProps) {\n  const sizeClasses = {\n    sm: 'h-8 w-8',\n    md: 'h-12 w-12',\n    lg: 'h-16 w-16',\n    xl: 'h-24 w-24'\n  };\n\n  if (!url) {\n    return (\n      <div \n        className={`\n          ${sizeClasses[size]} \n          rounded-full bg-cyber-gray-800 border border-cyber-gray-700\n          flex items-center justify-center\n          relative overflow-hidden\n          ${className}\n        `}\n      >\n        <div className=\"absolute inset-0 bg-mesh opacity-30\"></div>\n        <div className=\"absolute inset-0 bg-noise opacity-50\"></div>\n        <User className={`\n          ${size === 'sm' ? 'h-4 w-4' : size === 'md' ? 'h-6 w-6' : 'h-8 w-8'} \n          text-cyber-gray-400 relative z-10\n        `} />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`${sizeClasses[size]} relative group ${className}`}>\n      <img\n        src={url}\n        alt=\"Profile\"\n        className={`\n          w-full h-full object-cover rounded-full\n          border-2 border-cyber-gray-900\n          transition-all duration-300\n        `}\n        onError={(e) => {\n          e.currentTarget.onerror = null;\n          e.currentTarget.src = `https://ui-avatars.com/api/?name=${encodeURIComponent('User')}&background=1A1A1A&color=5BC0EB`;\n        }}\n      />\n      <div className=\"absolute inset-0 bg-noise opacity-10 rounded-full pointer-events-none\"></div>\n    </div>\n  );\n}","import { useState, useRef, useEffect } from 'react';\nimport { UserProfile } from '../types';\nimport { ProfilePicture } from './ProfilePicture';\nimport { Star, Award, Link as LinkIcon, MessageSquare, Calendar } from 'lucide-react';\n\ninterface ProfileHoverCardProps {\n  profile: UserProfile;\n  children: React.ReactNode;\n  onMessageClick?: () => void;\n}\n\nexport function ProfileHoverCard({ profile, children, onMessageClick }: ProfileHoverCardProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const triggerRef = useRef<HTMLDivElement>(null);\n  const cardRef = useRef<HTMLDivElement>(null);\n  const timeoutRef = useRef<NodeJS.Timeout>();\n\n  // Get top skills (by endorsements)\n  const topSkills = Object.entries(profile.endorsements || {})\n    .sort(([, a], [, b]) => b.length - a.length)\n    .slice(0, 3)\n    .map(([skill]) => ({\n      name: skill,\n      level: profile.skillLevels?.[skill]?.level || 1,\n      endorsements: profile.endorsements?.[skill]?.length || 0\n    }));\n\n  const updatePosition = () => {\n    if (!triggerRef.current || !cardRef.current || !isVisible) return;\n\n    const triggerRect = triggerRef.current.getBoundingClientRect();\n    const cardRect = cardRef.current.getBoundingClientRect();\n    const viewportHeight = window.innerHeight;\n    const scrollY = window.scrollY;\n    \n    // Calculate initial position\n    let x = triggerRect.left;\n    let y = scrollY + triggerRect.bottom + 8; // 8px offset from trigger\n\n    // Check horizontal overflow\n    if (x + cardRect.width > window.innerWidth) {\n      x = window.innerWidth - cardRect.width - 16; // 16px margin from viewport edge\n    }\n    x = Math.max(16, x); // Ensure minimum 16px from left edge\n\n    // Check vertical overflow and flip if needed\n    const spaceBelow = viewportHeight - (triggerRect.bottom + 8);\n    const spaceAbove = triggerRect.top - 8;\n    \n    if (cardRect.height > spaceBelow && spaceAbove > spaceBelow) {\n      // Place above if there's more space there\n      y = scrollY + triggerRect.top - cardRect.height - 8;\n    }\n\n    // Ensure the card stays within viewport vertically\n    y = Math.max(scrollY + 16, Math.min(y, scrollY + viewportHeight - cardRect.height - 16));\n\n    setPosition({ x, y });\n  };\n\n  useEffect(() => {\n    if (isVisible) {\n      // Initial position\n      requestAnimationFrame(updatePosition);\n\n      // Update position on scroll or resize\n      const handleUpdate = () => {\n        requestAnimationFrame(updatePosition);\n      };\n\n      window.addEventListener('scroll', handleUpdate, { passive: true });\n      window.addEventListener('resize', handleUpdate, { passive: true });\n\n      return () => {\n        window.removeEventListener('scroll', handleUpdate);\n        window.removeEventListener('resize', handleUpdate);\n      };\n    }\n  }, [isVisible]);\n\n  const handleMouseEnter = () => {\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    setIsVisible(true);\n  };\n\n  const handleMouseLeave = () => {\n    timeoutRef.current = setTimeout(() => {\n      setIsVisible(false);\n    }, 300);\n  };\n\n  return (\n    <div \n      ref={triggerRef}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      className=\"inline-block\"\n    >\n      {children}\n\n      {isVisible && (\n        <div\n          ref={cardRef}\n          style={{\n            position: 'absolute',\n            left: position.x,\n            top: position.y,\n            zIndex: 50,\n          }}\n          onMouseEnter={() => {\n            if (timeoutRef.current) clearTimeout(timeoutRef.current);\n          }}\n          onMouseLeave={handleMouseLeave}\n          className=\"w-80 animate-in fade-in zoom-in duration-200 origin-top\"\n        >\n          {/* Card */}\n          <div className=\"relative\">\n            {/* Animated gradient border */}\n            <div className=\"absolute -inset-0.5 bg-gradient-to-r from-accent-clay to-accent-ochre \n                          opacity-75 rounded-lg blur\"></div>\n            \n            {/* Main content */}\n            <div className=\"relative bg-earth-800 rounded-lg shadow-xl\">\n              {/* Header */}\n              <div className=\"p-4\">\n                <div className=\"flex items-start gap-4\">\n                  {/* Profile Picture with Level */}\n                  <div className=\"relative\">\n                    <ProfilePicture url={profile.profilePicture} size=\"lg\" />\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-earth-800 \n                                  border-2 border-earth-700 flex items-center justify-center\">\n                      <span className=\"text-xs font-bold text-accent-clay\">\n                        {profile.level}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-display font-semibold text-gray-900 truncate\">\n                      {profile.displayName}\n                    </h3>\n                    \n                    {/* Join date */}\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 mt-1\">\n                      <Calendar className=\"h-3 w-3\" />\n                      <span>Joined {new Date(profile.createdAt).toLocaleDateString()}</span>\n                    </div>\n\n                    {/* Portfolio link */}\n                    {profile.portfolio && (\n                      <a\n                        href={profile.portfolio}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"mt-2 text-sm text-accent-clay hover:text-accent-ochre \n                                 flex items-center gap-1 transition-colors\"\n                      >\n                        <LinkIcon className=\"h-3 w-3\" />\n                        Portfolio\n                      </a>\n                    )}\n                  </div>\n                </div>\n\n                {/* Bio */}\n                {profile.bio && (\n                  <p className=\"mt-3 text-sm text-gray-700 line-clamp-2\">\n                    {profile.bio}\n                  </p>\n                )}\n              </div>\n\n              {/* Skills */}\n              <div className=\"px-4 pb-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {topSkills.map(skill => (\n                    <div\n                      key={skill.name}\n                      className=\"flex items-center gap-1 px-2 py-1 bg-accent-sage/20 \n                               text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n                    >\n                      <Star className=\"h-3 w-3 text-accent-sage\" />\n                      <span>{skill.name}</span>\n                      <span className=\"text-xs px-1.5 py-0.5 bg-accent-sage/20 rounded-full\">\n                        Lvl {skill.level}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Footer */}\n              {onMessageClick && (\n                <div className=\"px-4 py-3 border-t border-earth-700\">\n                  <button\n                    onClick={onMessageClick}\n                    className=\"w-full flex items-center justify-center gap-2 py-2 \n                             bg-accent-clay text-white rounded-lg hover:bg-accent-ochre \n                             transition-colors\"\n                  >\n                    <MessageSquare className=\"h-4 w-4\" />\n                    Send Message\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Search, Filter, Tag, Clock, User } from 'lucide-react';\nimport { useFirestore } from '../hooks/useFirestore';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport type { Trade, UserProfile } from '../types';\nimport { ProfilePicture } from '../components/ProfilePicture';\nimport { ProfileHoverCard } from '../components/ProfileHoverCard';\n\nexport function Discover() {\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedSkills, setSelectedSkills] = useState<string[]>([]);\n  const { data: trades, loading, error } = useFirestore<Trade>('trades');\n  const [creators, setCreators] = useState<{ [key: string]: UserProfile }>({});\n\n  // Fetch creators' profiles\n  useEffect(() => {\n    const fetchCreators = async () => {\n      const creatorIds = new Set(trades.map(trade => trade.creatorId));\n      const creatorsData: { [key: string]: UserProfile } = {};\n      \n      for (const creatorId of creatorIds) {\n        try {\n          const creatorDoc = await getDoc(doc(db, 'users', creatorId));\n          if (creatorDoc.exists()) {\n            creatorsData[creatorId] = {\n              id: creatorDoc.id,\n              ...creatorDoc.data()\n            } as UserProfile;\n          }\n        } catch (err) {\n          console.error('Error fetching creator:', err);\n        }\n      }\n      \n      setCreators(creatorsData);\n    };\n\n    if (trades.length > 0) {\n      fetchCreators();\n    }\n  }, [trades]);\n\n  const filteredTrades = trades.filter(trade => {\n    const matchesSearch = trade.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      trade.description.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesSkills = selectedSkills.length === 0 || \n      trade.requestedSkills.some(skill => selectedSkills.includes(skill));\n    \n    return matchesSearch && matchesSkills;\n  });\n\n  // Get all unique skills for filtering\n  const allSkills = Array.from(new Set(\n    trades.flatMap(trade => [...trade.offeredSkills, ...trade.requestedSkills])\n  )).sort();\n\n  const handleSkillToggle = (skill: string) => {\n    setSelectedSkills(prev => \n      prev.includes(skill)\n        ? prev.filter(s => s !== skill)\n        : [...prev, skill]\n    );\n  };\n\n  const handleStartChat = async (creatorId: string) => {\n    navigate(`/messages/${creatorId}`);\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-display font-bold text-white mb-2\">\n          Discover Trades\n        </h1>\n        <p className=\"text-gray-200\">\n          Find skill trading opportunities or share your expertise\n        </p>\n      </div>\n\n      {/* Search and Filter Section */}\n      <div className=\"mb-8 space-y-4\">\n        <div className=\"flex gap-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search trades...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 bg-earth-800 border border-earth-700 rounded-lg \n                         text-gray-900 placeholder-gray-500\n                          focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 \n                         transition-all duration-300\"\n            />\n          </div>\n          <button className=\"btn-secondary flex items-center gap-2\">\n            <Filter className=\"h-5 w-5\" />\n            Filter\n          </button>\n        </div>\n\n        {/* Skills Filter */}\n        <div className=\"bg-earth-800 border border-earth-700 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2\">\n            <Tag className=\"h-4 w-4\" />\n            Filter by Skills\n          </h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {allSkills.map((skill) => (\n              <button\n                key={skill}\n                onClick={() => handleSkillToggle(skill)}\n                className={`px-3 py-1 rounded-full text-sm transition-all duration-300 ${\n                  selectedSkills.includes(skill)\n                    ? 'bg-accent-clay text-white'\n                    : 'bg-earth-700 text-gray-900 hover:bg-earth-600'\n                }`}\n              >\n                {skill}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Trades Grid */}\n      {loading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[1, 2, 3].map((n) => (\n            <div key={n} className=\"animate-pulse card p-6\">\n              <div className=\"h-6 bg-earth-700 rounded w-3/4 mb-4\"></div>\n              <div className=\"space-y-2 mb-4\">\n                <div className=\"h-4 bg-earth-700 rounded w-full\"></div>\n                <div className=\"h-4 bg-earth-700 rounded w-5/6\"></div>\n              </div>\n              <div className=\"h-10 bg-earth-700 rounded\"></div>\n            </div>\n          ))}\n        </div>\n      ) : error ? (\n        <div className=\"text-center py-8 text-red-500\">Error loading trades</div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredTrades.map((trade) => {\n            const creator = creators[trade.creatorId];\n            \n            return (\n              <div\n                key={trade.id}\n                onClick={() => navigate(`/trades/${trade.id}`)}\n                className=\"card p-6 card-hover cursor-pointer\"\n              >\n                <div className=\"flex items-start justify-between mb-4\">\n                  <h3 className=\"text-xl font-display font-semibold text-gray-900\">\n                    {trade.title}\n                  </h3>\n                  <span className={`\n                    status-badge\n                    ${trade.status === 'open' ? 'status-badge-active' : \n                      trade.status === 'in-progress' ? 'status-badge-pending' : \n                      'status-badge-completed'}\n                  `}>\n                    {trade.status.charAt(0).toUpperCase() + trade.status.slice(1)}\n                  </span>\n                </div>\n                \n                <p className=\"text-gray-700 mb-6 line-clamp-2\">\n                  {trade.description}\n                </p>\n\n                <div className=\"space-y-4\">\n                  {/* Offered Skills */}\n                  <div>\n                    <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">Offering</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {trade.offeredSkills.map((skill) => (\n                        <span\n                          key={skill}\n                          className=\"px-2 py-1 bg-accent-sage/20 text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n                        >\n                          {skill}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Requested Skills */}\n                  <div>\n                    <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">Looking for</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {trade.requestedSkills.map((skill) => (\n                        <span\n                          key={skill}\n                          className=\"px-2 py-1 bg-accent-clay/20 text-gray-900 text-sm rounded-full border border-accent-clay/30\"\n                        >\n                          {skill}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Footer */}\n                <div className=\"flex justify-between items-center mt-6 pt-4 border-t border-earth-700\">\n                  <div className=\"flex items-center gap-2 text-gray-900\">\n                    {creator ? (\n                      <ProfileHoverCard \n                        profile={creator}\n                        onMessageClick={() => handleStartChat(creator.id)}\n                      >\n                        <div className=\"flex items-center gap-2 cursor-pointer\">\n                          <ProfilePicture url={creator.profilePicture} size=\"sm\" />\n                          <span className=\"text-sm font-medium\">{creator.displayName}</span>\n                        </div>\n                      </ProfileHoverCard>\n                    ) : (\n                      <>\n                        <User className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">Loading...</span>\n                      </>\n                    )}\n                  </div>\n                  <div className=\"flex items-center text-gray-900\">\n                    <Clock className=\"h-4 w-4 mr-1\" />\n                    <span className=\"text-sm font-medium\">\n                      {new Date(trade.createdAt).toLocaleDateString()}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n\n          {filteredTrades.length === 0 && (\n            <div className=\"col-span-full text-center py-12\">\n              <div className=\"bg-earth-800 border border-earth-700 rounded-lg p-8\">\n                <Search className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-xl font-display font-semibold text-gray-900 mb-2\">\n                  No trades found\n                </h3>\n                <p className=\"text-gray-700\">\n                  Try adjusting your search or filters\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}","import { Badge, UserProfile } from '../types';\nimport { doc, updateDoc, increment, arrayUnion } from 'firebase/firestore';\nimport { db } from './firebase';\n\n// Experience points configuration\nexport const XP_CONFIG = {\n  TRADE_COMPLETION: 100,\n  COLLABORATION_COMPLETION: 150,\n  ENDORSEMENT_RECEIVED: 10,\n  GOOD_RATING: 50,\n  BADGE_EARNED: 25,\n};\n\n// Level thresholds (Fibonacci sequence for increasing difficulty)\nexport const LEVEL_THRESHOLDS = [0, 100, 200, 300, 500, 800, 1300, 2100, 3400, 5500];\n\n// Available badges\nexport const BADGES: { [key: string]: Omit<Badge, 'earnedAt'> } = {\n  FIRST_TRADE: {\n    id: 'first_trade',\n    name: 'Trade Pioneer',\n    description: 'Completed your first trade',\n    icon: 'rocket',\n  },\n  SKILLED_TRADER: {\n    id: 'skilled_trader',\n    name: 'Skilled Trader',\n    description: 'Completed 10 successful trades',\n    icon: 'award',\n  },\n  MASTER_COLLABORATOR: {\n    id: 'master_collaborator',\n    name: 'Master Collaborator',\n    description: 'Participated in 5 successful collaborations',\n    icon: 'users',\n  },\n  SKILL_MASTER: {\n    id: 'skill_master',\n    name: 'Skill Master',\n    description: 'Reached level 5 in any skill',\n    icon: 'star',\n  },\n  ENDORSED_EXPERT: {\n    id: 'endorsed_expert',\n    name: 'Endorsed Expert',\n    description: 'Received 10 endorsements in a single skill',\n    icon: 'thumbs-up',\n  },\n};\n\n// Calculate level from experience\nexport function calculateLevel(experience: number): number {\n  // Handle undefined or negative experience\n  if (!experience || experience < 0) {\n    return 1;\n  }\n\n  const level = LEVEL_THRESHOLDS.findIndex(\n    (threshold, index) =>\n      experience >= threshold &&\n      (index === LEVEL_THRESHOLDS.length - 1 || experience < LEVEL_THRESHOLDS[index + 1])\n  );\n\n  // Return level 1 if no threshold was found\n  return level === -1 ? 1 : level;\n}\n\n// Award experience points\nexport async function awardExperience(userId: string, amount: number, skills?: string[]) {\n  const userRef = doc(db, 'users', userId);\n  \n  await updateDoc(userRef, {\n    experience: increment(amount),\n    level: calculateLevel(amount), // This will be calculated on the client as well\n    ...(skills\n      ? skills.reduce(\n          (acc, skill) => ({\n            ...acc,\n            [`skillLevels.${skill}.experience`]: increment(amount / skills.length),\n          }),\n          {}\n        )\n      : {}),\n  });\n}\n\n// Add endorsement\nexport async function addEndorsement(userId: string, endorserId: string, skill: string) {\n  const userRef = doc(db, 'users', userId);\n  \n  await updateDoc(userRef, {\n    [`endorsements.${skill}`]: arrayUnion(endorserId),\n    experience: increment(XP_CONFIG.ENDORSEMENT_RECEIVED),\n  });\n}\n\n// Award badge\nexport async function awardBadge(userId: string, badgeId: keyof typeof BADGES) {\n  const badge: Badge = {\n    ...BADGES[badgeId],\n    earnedAt: new Date(),\n  };\n\n  const userRef = doc(db, 'users', userId);\n  \n  await updateDoc(userRef, {\n    badges: arrayUnion(badge),\n    experience: increment(XP_CONFIG.BADGE_EARNED),\n  });\n}\n\n// Check and award badges based on user's stats\nexport async function checkAndAwardBadges(userId: string, profile: UserProfile) {\n  // First Trade Badge\n  if (profile.experience >= XP_CONFIG.TRADE_COMPLETION && \n      !profile.badges?.some(b => b.id === 'first_trade')) {\n    await awardBadge(userId, 'FIRST_TRADE');\n  }\n\n  // Skilled Trader Badge (requires trade count from separate query)\n  // Implementation would go here...\n\n  // Skill Master Badge\n  const hasSkillMaster = Object.values(profile.skillLevels || {}).some(\n    skill => skill.level >= 5\n  );\n  if (hasSkillMaster && !profile.badges?.some(b => b.id === 'skill_master')) {\n    await awardBadge(userId, 'SKILL_MASTER');\n  }\n\n  // Endorsed Expert Badge\n  const hasEndorsedExpert = Object.values(profile.endorsements || {}).some(\n    endorsers => endorsers.length >= 10\n  );\n  if (hasEndorsedExpert && !profile.badges?.some(b => b.id === 'endorsed_expert')) {\n    await awardBadge(userId, 'ENDORSED_EXPERT');\n  }\n}","import { UserProfile } from '../types';\nimport { calculateLevel, LEVEL_THRESHOLDS } from '../lib/reputation';\nimport { Award, Star, ThumbsUp, Trophy, Zap, Target } from 'lucide-react';\n\ninterface ReputationCardProps {\n  profile: UserProfile;\n  showEndorsements?: boolean;\n}\n\nexport function ReputationCard({ profile, showEndorsements = true }: ReputationCardProps) {\n  // Ensure experience is a non-negative number or default to 0\n  const experience = typeof profile.experience === 'number' && profile.experience >= 0 \n    ? profile.experience \n    : 0;\n  \n  const level = calculateLevel(experience);\n  const nextLevelXP = LEVEL_THRESHOLDS[level + 1] || LEVEL_THRESHOLDS[level];\n  const currentLevelXP = LEVEL_THRESHOLDS[level];\n  const progress = ((experience - currentLevelXP) / (nextLevelXP - currentLevelXP)) * 100;\n\n  return (\n    <div className=\"card\">\n      {/* Level and XP */}\n      <div className=\"p-6 border-b border-cyber-gray-800\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"relative group\" role=\"presentation\">\n              {/* Animated glow effect */}\n              <div className=\"absolute -inset-1 bg-gradient-to-r from-accent-clay via-accent-ochre to-accent-sage \n                            opacity-75 blur transition-all duration-300 group-hover:opacity-100 rounded-xl\">\n              </div>\n              \n              {/* Badge container with glass effect */}\n              <div className=\"relative w-14 h-14 rounded-xl bg-gradient-to-br from-earth-800/95 to-earth-700/95 \n                            flex items-center justify-center border border-earth-600/80 shadow-lg \n                            backdrop-blur-sm\">\n                <Trophy className=\"h-6 w-6 text-accent-clay\" aria-hidden=\"true\" />\n                <div className=\"absolute inset-0 bg-noise opacity-10\"></div>\n              </div>\n              \n              {/* Level indicator with dynamic shadow */}\n              <div className=\"absolute -top-2 -right-2 w-7 h-7 rounded-full \n                            bg-gradient-to-br from-accent-rust to-accent-clay \n                            flex items-center justify-center\n                            shadow-[0_0_15px_rgba(198,125,99,0.3)]\n                            border-2 border-earth-800\"\n                 role=\"status\"\n                 aria-label={`Current level: ${level}`}>\n                <span className=\"text-sm font-bold text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.5)]\">\n                  {level}\n                </span>\n              </div>\n            </div>\n            <div>\n              <h3 className=\"text-lg font-display font-semibold text-accent-rust\">\n                Level {level}\n              </h3>\n              <p className=\"text-sm text-gray-700\" aria-label={`Experience points: ${profile.experience} out of ${nextLevelXP}`}>\n                {profile.experience} / {nextLevelXP} XP\n              </p>\n            </div>\n          </div>\n          <Zap className=\"h-5 w-5 text-accent-rust animate-pulse\" aria-hidden=\"true\" />\n        </div>\n        \n        {/* XP Progress Bar */}\n        <div className=\"relative h-3 bg-earth-700/50 rounded-full overflow-hidden shadow-inner\"\n             role=\"progressbar\"\n             aria-valuenow={progress}\n             aria-valuemin={0}\n             aria-valuemax={100}\n             aria-label=\"Level progress\">\n          <div\n            className=\"absolute inset-y-0 left-0 bg-gradient-to-r from-accent-rust via-accent-clay to-accent-ochre \n                     transition-all duration-500 animate-shimmer bg-[length:200%_auto]\"\n            style={{ width: `${progress}%` }}\n          />\n          <div className=\"absolute inset-0 bg-noise opacity-10\" />\n        </div>\n      </div>\n\n      {/* Skill Levels */}\n      <div className=\"p-6 border-b border-cyber-gray-800\">\n        <h3 className=\"text-lg font-display font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n          <Star className=\"h-5 w-5 text-accent-rust\" aria-hidden=\"true\" />\n          Skill Levels\n        </h3>\n        <div className=\"space-y-3\">\n          {Object.entries(profile.skillLevels || {}).map(([skill, { level, experience }]) => (\n            <div key={skill} className=\"group\">\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-gray-800 group-hover:text-accent-rust transition-colors\">\n                  {skill}\n                </span>\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-sm font-medium px-2.5 py-1 rounded-full \n                                bg-gradient-to-r from-accent-rust to-accent-clay text-white \n                                shadow-[0_2px_8px_rgba(198,125,99,0.25)]\"\n                         role=\"status\"\n                         aria-label={`${skill} level ${level}`}>\n                    Lvl {level}\n                  </span>\n                  {showEndorsements && profile.endorsements?.[skill] && (\n                    <div className=\"flex items-center gap-1 px-2 py-0.5 rounded-full bg-accent-rust/10 text-accent-rust\"\n                         role=\"status\"\n                         aria-label={`${profile.endorsements[skill].length} endorsements`}>\n                      <ThumbsUp className=\"h-3 w-3\" aria-hidden=\"true\" />\n                      <span className=\"text-xs font-medium\" aria-hidden=\"true\">\n                        {profile.endorsements[skill].length}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n              <div className=\"h-1.5 bg-earth-700/50 rounded-full overflow-hidden\"\n                   role=\"progressbar\"\n                   aria-valuenow={(experience / 1000) * 100}\n                   aria-valuemin={0}\n                   aria-valuemax={100}\n                   aria-label={`${skill} progress`}>\n                <div \n                  className=\"h-full bg-gradient-to-r from-accent-rust to-accent-clay transition-all duration-300\"\n                  style={{ width: `${(experience / 1000) * 100}%` }}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Badges */}\n      {profile.badges && profile.badges.length > 0 && (\n        <div className=\"p-6\">\n          <h3 className=\"text-lg font-display font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n            <Award className=\"h-5 w-5 text-accent-rust\" aria-hidden=\"true\" />\n            Achievements\n          </h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {profile.badges.map((badge) => (\n              <div\n                key={badge.id}\n                className=\"group relative focus-within:ring-2 focus-within:ring-accent-clay rounded-lg\"\n                role=\"listitem\"\n                aria-label={`${badge.name} achievement: ${badge.description}`}\n              >\n                {/* Badge glow effect */}\n                <div className=\"absolute -inset-0.5 bg-gradient-to-r from-accent-clay to-accent-ochre \n                              opacity-0 group-hover:opacity-75 rounded-lg blur transition-all duration-300\">\n                </div>\n                \n                {/* Badge content */}\n                <div className=\"relative p-4 bg-earth-800/95 rounded-lg border border-earth-700/50 \n                              backdrop-blur-sm group-hover:border-accent-clay \n                              transition-all duration-300\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"p-2.5 rounded-lg bg-gradient-to-br from-accent-rust to-accent-clay \n                                  shadow-[0_4px_12px_rgba(198,125,99,0.25)]\n                                  group-hover:shadow-[0_4px_12px_rgba(198,125,99,0.4)]\n                                  transition-all duration-300\">\n                      <Award className=\"h-5 w-5 text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.5)]\" aria-hidden=\"true\" />\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-900 group-hover:text-accent-rust transition-colors\">\n                        {badge.name}\n                      </p>\n                      <p className=\"text-sm text-gray-600 mt-1\">\n                        {badge.description}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport { X } from 'lucide-react';\n\ninterface BannerUnlockNotificationProps {\n  bannerId: string;\n  onClose: () => void;\n  onClick: () => void;\n}\n\nconst getBannerName = (bannerId: string) => {\n  switch (bannerId) {\n    case 'banner-masculine':\n      return 'Earth Force';\n    case 'banner-feminine':\n      return 'Gentle Dawn';\n    case 'banner-neutral':\n      return 'Golden Balance';\n    default:\n      return 'New Banner';\n  }\n};\n\nexport function BannerUnlockNotification({ \n  bannerId,\n  onClose,\n  onClick\n}: BannerUnlockNotificationProps) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    // Animate in\n    setIsVisible(true);\n\n    // Auto dismiss after 5 seconds\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setTimeout(onClose, 500); // Remove after animation\n    }, 5000);\n\n    return () => clearTimeout(timer);\n  }, [onClose]);\n\n  return (\n    <div\n      className={`fixed bottom-4 right-4 flex items-center gap-4 p-4\n                bg-earth-800 border border-earth-700 rounded-lg shadow-lg \n                transform transition-all duration-500 ${\n                  isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'\n                }`}\n    >\n      {/* Preview */}\n      <div className={`w-16 h-16 rounded-lg overflow-hidden ${bannerId}`} />\n      \n      {/* Content */}\n      <div className=\"flex-1\">\n        <h4 className=\"font-display font-semibold text-gray-900\">\n          New Banner Unlocked!\n        </h4>\n        <p className=\"text-sm text-gray-600\">\n          {getBannerName(bannerId)}\n        </p>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex items-center gap-2\">\n        <button\n          onClick={onClick}\n          className=\"btn-primary text-sm\"\n        >\n          Try it\n        </button>\n        <button\n          onClick={() => {\n            setIsVisible(false);\n            setTimeout(onClose, 500);\n          }}\n          className=\"p-1 text-gray-600 hover:text-gray-900 transition-colors\"\n        >\n          <X className=\"h-4 w-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","export const COMMON_MIME_TYPES = new Map([\n    // https://github.com/guzzle/psr7/blob/2d9260799e713f1c475d3c5fdc3d6561ff7441b2/src/MimeType.php\n    ['1km', 'application/vnd.1000minds.decision-model+xml'],\n    ['3dml', 'text/vnd.in3d.3dml'],\n    ['3ds', 'image/x-3ds'],\n    ['3g2', 'video/3gpp2'],\n    ['3gp', 'video/3gp'],\n    ['3gpp', 'video/3gpp'],\n    ['3mf', 'model/3mf'],\n    ['7z', 'application/x-7z-compressed'],\n    ['7zip', 'application/x-7z-compressed'],\n    ['123', 'application/vnd.lotus-1-2-3'],\n    ['aab', 'application/x-authorware-bin'],\n    ['aac', 'audio/x-acc'],\n    ['aam', 'application/x-authorware-map'],\n    ['aas', 'application/x-authorware-seg'],\n    ['abw', 'application/x-abiword'],\n    ['ac', 'application/vnd.nokia.n-gage.ac+xml'],\n    ['ac3', 'audio/ac3'],\n    ['acc', 'application/vnd.americandynamics.acc'],\n    ['ace', 'application/x-ace-compressed'],\n    ['acu', 'application/vnd.acucobol'],\n    ['acutc', 'application/vnd.acucorp'],\n    ['adp', 'audio/adpcm'],\n    ['aep', 'application/vnd.audiograph'],\n    ['afm', 'application/x-font-type1'],\n    ['afp', 'application/vnd.ibm.modcap'],\n    ['ahead', 'application/vnd.ahead.space'],\n    ['ai', 'application/pdf'],\n    ['aif', 'audio/x-aiff'],\n    ['aifc', 'audio/x-aiff'],\n    ['aiff', 'audio/x-aiff'],\n    ['air', 'application/vnd.adobe.air-application-installer-package+zip'],\n    ['ait', 'application/vnd.dvb.ait'],\n    ['ami', 'application/vnd.amiga.ami'],\n    ['amr', 'audio/amr'],\n    ['apk', 'application/vnd.android.package-archive'],\n    ['apng', 'image/apng'],\n    ['appcache', 'text/cache-manifest'],\n    ['application', 'application/x-ms-application'],\n    ['apr', 'application/vnd.lotus-approach'],\n    ['arc', 'application/x-freearc'],\n    ['arj', 'application/x-arj'],\n    ['asc', 'application/pgp-signature'],\n    ['asf', 'video/x-ms-asf'],\n    ['asm', 'text/x-asm'],\n    ['aso', 'application/vnd.accpac.simply.aso'],\n    ['asx', 'video/x-ms-asf'],\n    ['atc', 'application/vnd.acucorp'],\n    ['atom', 'application/atom+xml'],\n    ['atomcat', 'application/atomcat+xml'],\n    ['atomdeleted', 'application/atomdeleted+xml'],\n    ['atomsvc', 'application/atomsvc+xml'],\n    ['atx', 'application/vnd.antix.game-component'],\n    ['au', 'audio/x-au'],\n    ['avi', 'video/x-msvideo'],\n    ['avif', 'image/avif'],\n    ['aw', 'application/applixware'],\n    ['azf', 'application/vnd.airzip.filesecure.azf'],\n    ['azs', 'application/vnd.airzip.filesecure.azs'],\n    ['azv', 'image/vnd.airzip.accelerator.azv'],\n    ['azw', 'application/vnd.amazon.ebook'],\n    ['b16', 'image/vnd.pco.b16'],\n    ['bat', 'application/x-msdownload'],\n    ['bcpio', 'application/x-bcpio'],\n    ['bdf', 'application/x-font-bdf'],\n    ['bdm', 'application/vnd.syncml.dm+wbxml'],\n    ['bdoc', 'application/x-bdoc'],\n    ['bed', 'application/vnd.realvnc.bed'],\n    ['bh2', 'application/vnd.fujitsu.oasysprs'],\n    ['bin', 'application/octet-stream'],\n    ['blb', 'application/x-blorb'],\n    ['blorb', 'application/x-blorb'],\n    ['bmi', 'application/vnd.bmi'],\n    ['bmml', 'application/vnd.balsamiq.bmml+xml'],\n    ['bmp', 'image/bmp'],\n    ['book', 'application/vnd.framemaker'],\n    ['box', 'application/vnd.previewsystems.box'],\n    ['boz', 'application/x-bzip2'],\n    ['bpk', 'application/octet-stream'],\n    ['bpmn', 'application/octet-stream'],\n    ['bsp', 'model/vnd.valve.source.compiled-map'],\n    ['btif', 'image/prs.btif'],\n    ['buffer', 'application/octet-stream'],\n    ['bz', 'application/x-bzip'],\n    ['bz2', 'application/x-bzip2'],\n    ['c', 'text/x-c'],\n    ['c4d', 'application/vnd.clonk.c4group'],\n    ['c4f', 'application/vnd.clonk.c4group'],\n    ['c4g', 'application/vnd.clonk.c4group'],\n    ['c4p', 'application/vnd.clonk.c4group'],\n    ['c4u', 'application/vnd.clonk.c4group'],\n    ['c11amc', 'application/vnd.cluetrust.cartomobile-config'],\n    ['c11amz', 'application/vnd.cluetrust.cartomobile-config-pkg'],\n    ['cab', 'application/vnd.ms-cab-compressed'],\n    ['caf', 'audio/x-caf'],\n    ['cap', 'application/vnd.tcpdump.pcap'],\n    ['car', 'application/vnd.curl.car'],\n    ['cat', 'application/vnd.ms-pki.seccat'],\n    ['cb7', 'application/x-cbr'],\n    ['cba', 'application/x-cbr'],\n    ['cbr', 'application/x-cbr'],\n    ['cbt', 'application/x-cbr'],\n    ['cbz', 'application/x-cbr'],\n    ['cc', 'text/x-c'],\n    ['cco', 'application/x-cocoa'],\n    ['cct', 'application/x-director'],\n    ['ccxml', 'application/ccxml+xml'],\n    ['cdbcmsg', 'application/vnd.contact.cmsg'],\n    ['cda', 'application/x-cdf'],\n    ['cdf', 'application/x-netcdf'],\n    ['cdfx', 'application/cdfx+xml'],\n    ['cdkey', 'application/vnd.mediastation.cdkey'],\n    ['cdmia', 'application/cdmi-capability'],\n    ['cdmic', 'application/cdmi-container'],\n    ['cdmid', 'application/cdmi-domain'],\n    ['cdmio', 'application/cdmi-object'],\n    ['cdmiq', 'application/cdmi-queue'],\n    ['cdr', 'application/cdr'],\n    ['cdx', 'chemical/x-cdx'],\n    ['cdxml', 'application/vnd.chemdraw+xml'],\n    ['cdy', 'application/vnd.cinderella'],\n    ['cer', 'application/pkix-cert'],\n    ['cfs', 'application/x-cfs-compressed'],\n    ['cgm', 'image/cgm'],\n    ['chat', 'application/x-chat'],\n    ['chm', 'application/vnd.ms-htmlhelp'],\n    ['chrt', 'application/vnd.kde.kchart'],\n    ['cif', 'chemical/x-cif'],\n    ['cii', 'application/vnd.anser-web-certificate-issue-initiation'],\n    ['cil', 'application/vnd.ms-artgalry'],\n    ['cjs', 'application/node'],\n    ['cla', 'application/vnd.claymore'],\n    ['class', 'application/octet-stream'],\n    ['clkk', 'application/vnd.crick.clicker.keyboard'],\n    ['clkp', 'application/vnd.crick.clicker.palette'],\n    ['clkt', 'application/vnd.crick.clicker.template'],\n    ['clkw', 'application/vnd.crick.clicker.wordbank'],\n    ['clkx', 'application/vnd.crick.clicker'],\n    ['clp', 'application/x-msclip'],\n    ['cmc', 'application/vnd.cosmocaller'],\n    ['cmdf', 'chemical/x-cmdf'],\n    ['cml', 'chemical/x-cml'],\n    ['cmp', 'application/vnd.yellowriver-custom-menu'],\n    ['cmx', 'image/x-cmx'],\n    ['cod', 'application/vnd.rim.cod'],\n    ['coffee', 'text/coffeescript'],\n    ['com', 'application/x-msdownload'],\n    ['conf', 'text/plain'],\n    ['cpio', 'application/x-cpio'],\n    ['cpp', 'text/x-c'],\n    ['cpt', 'application/mac-compactpro'],\n    ['crd', 'application/x-mscardfile'],\n    ['crl', 'application/pkix-crl'],\n    ['crt', 'application/x-x509-ca-cert'],\n    ['crx', 'application/x-chrome-extension'],\n    ['cryptonote', 'application/vnd.rig.cryptonote'],\n    ['csh', 'application/x-csh'],\n    ['csl', 'application/vnd.citationstyles.style+xml'],\n    ['csml', 'chemical/x-csml'],\n    ['csp', 'application/vnd.commonspace'],\n    ['csr', 'application/octet-stream'],\n    ['css', 'text/css'],\n    ['cst', 'application/x-director'],\n    ['csv', 'text/csv'],\n    ['cu', 'application/cu-seeme'],\n    ['curl', 'text/vnd.curl'],\n    ['cww', 'application/prs.cww'],\n    ['cxt', 'application/x-director'],\n    ['cxx', 'text/x-c'],\n    ['dae', 'model/vnd.collada+xml'],\n    ['daf', 'application/vnd.mobius.daf'],\n    ['dart', 'application/vnd.dart'],\n    ['dataless', 'application/vnd.fdsn.seed'],\n    ['davmount', 'application/davmount+xml'],\n    ['dbf', 'application/vnd.dbf'],\n    ['dbk', 'application/docbook+xml'],\n    ['dcr', 'application/x-director'],\n    ['dcurl', 'text/vnd.curl.dcurl'],\n    ['dd2', 'application/vnd.oma.dd2+xml'],\n    ['ddd', 'application/vnd.fujixerox.ddd'],\n    ['ddf', 'application/vnd.syncml.dmddf+xml'],\n    ['dds', 'image/vnd.ms-dds'],\n    ['deb', 'application/x-debian-package'],\n    ['def', 'text/plain'],\n    ['deploy', 'application/octet-stream'],\n    ['der', 'application/x-x509-ca-cert'],\n    ['dfac', 'application/vnd.dreamfactory'],\n    ['dgc', 'application/x-dgc-compressed'],\n    ['dic', 'text/x-c'],\n    ['dir', 'application/x-director'],\n    ['dis', 'application/vnd.mobius.dis'],\n    ['disposition-notification', 'message/disposition-notification'],\n    ['dist', 'application/octet-stream'],\n    ['distz', 'application/octet-stream'],\n    ['djv', 'image/vnd.djvu'],\n    ['djvu', 'image/vnd.djvu'],\n    ['dll', 'application/octet-stream'],\n    ['dmg', 'application/x-apple-diskimage'],\n    ['dmn', 'application/octet-stream'],\n    ['dmp', 'application/vnd.tcpdump.pcap'],\n    ['dms', 'application/octet-stream'],\n    ['dna', 'application/vnd.dna'],\n    ['doc', 'application/msword'],\n    ['docm', 'application/vnd.ms-word.template.macroEnabled.12'],\n    ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n    ['dot', 'application/msword'],\n    ['dotm', 'application/vnd.ms-word.template.macroEnabled.12'],\n    ['dotx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.template'],\n    ['dp', 'application/vnd.osgi.dp'],\n    ['dpg', 'application/vnd.dpgraph'],\n    ['dra', 'audio/vnd.dra'],\n    ['drle', 'image/dicom-rle'],\n    ['dsc', 'text/prs.lines.tag'],\n    ['dssc', 'application/dssc+der'],\n    ['dtb', 'application/x-dtbook+xml'],\n    ['dtd', 'application/xml-dtd'],\n    ['dts', 'audio/vnd.dts'],\n    ['dtshd', 'audio/vnd.dts.hd'],\n    ['dump', 'application/octet-stream'],\n    ['dvb', 'video/vnd.dvb.file'],\n    ['dvi', 'application/x-dvi'],\n    ['dwd', 'application/atsc-dwd+xml'],\n    ['dwf', 'model/vnd.dwf'],\n    ['dwg', 'image/vnd.dwg'],\n    ['dxf', 'image/vnd.dxf'],\n    ['dxp', 'application/vnd.spotfire.dxp'],\n    ['dxr', 'application/x-director'],\n    ['ear', 'application/java-archive'],\n    ['ecelp4800', 'audio/vnd.nuera.ecelp4800'],\n    ['ecelp7470', 'audio/vnd.nuera.ecelp7470'],\n    ['ecelp9600', 'audio/vnd.nuera.ecelp9600'],\n    ['ecma', 'application/ecmascript'],\n    ['edm', 'application/vnd.novadigm.edm'],\n    ['edx', 'application/vnd.novadigm.edx'],\n    ['efif', 'application/vnd.picsel'],\n    ['ei6', 'application/vnd.pg.osasli'],\n    ['elc', 'application/octet-stream'],\n    ['emf', 'image/emf'],\n    ['eml', 'message/rfc822'],\n    ['emma', 'application/emma+xml'],\n    ['emotionml', 'application/emotionml+xml'],\n    ['emz', 'application/x-msmetafile'],\n    ['eol', 'audio/vnd.digital-winds'],\n    ['eot', 'application/vnd.ms-fontobject'],\n    ['eps', 'application/postscript'],\n    ['epub', 'application/epub+zip'],\n    ['es', 'application/ecmascript'],\n    ['es3', 'application/vnd.eszigno3+xml'],\n    ['esa', 'application/vnd.osgi.subsystem'],\n    ['esf', 'application/vnd.epson.esf'],\n    ['et3', 'application/vnd.eszigno3+xml'],\n    ['etx', 'text/x-setext'],\n    ['eva', 'application/x-eva'],\n    ['evy', 'application/x-envoy'],\n    ['exe', 'application/octet-stream'],\n    ['exi', 'application/exi'],\n    ['exp', 'application/express'],\n    ['exr', 'image/aces'],\n    ['ext', 'application/vnd.novadigm.ext'],\n    ['ez', 'application/andrew-inset'],\n    ['ez2', 'application/vnd.ezpix-album'],\n    ['ez3', 'application/vnd.ezpix-package'],\n    ['f', 'text/x-fortran'],\n    ['f4v', 'video/mp4'],\n    ['f77', 'text/x-fortran'],\n    ['f90', 'text/x-fortran'],\n    ['fbs', 'image/vnd.fastbidsheet'],\n    ['fcdt', 'application/vnd.adobe.formscentral.fcdt'],\n    ['fcs', 'application/vnd.isac.fcs'],\n    ['fdf', 'application/vnd.fdf'],\n    ['fdt', 'application/fdt+xml'],\n    ['fe_launch', 'application/vnd.denovo.fcselayout-link'],\n    ['fg5', 'application/vnd.fujitsu.oasysgp'],\n    ['fgd', 'application/x-director'],\n    ['fh', 'image/x-freehand'],\n    ['fh4', 'image/x-freehand'],\n    ['fh5', 'image/x-freehand'],\n    ['fh7', 'image/x-freehand'],\n    ['fhc', 'image/x-freehand'],\n    ['fig', 'application/x-xfig'],\n    ['fits', 'image/fits'],\n    ['flac', 'audio/x-flac'],\n    ['fli', 'video/x-fli'],\n    ['flo', 'application/vnd.micrografx.flo'],\n    ['flv', 'video/x-flv'],\n    ['flw', 'application/vnd.kde.kivio'],\n    ['flx', 'text/vnd.fmi.flexstor'],\n    ['fly', 'text/vnd.fly'],\n    ['fm', 'application/vnd.framemaker'],\n    ['fnc', 'application/vnd.frogans.fnc'],\n    ['fo', 'application/vnd.software602.filler.form+xml'],\n    ['for', 'text/x-fortran'],\n    ['fpx', 'image/vnd.fpx'],\n    ['frame', 'application/vnd.framemaker'],\n    ['fsc', 'application/vnd.fsc.weblaunch'],\n    ['fst', 'image/vnd.fst'],\n    ['ftc', 'application/vnd.fluxtime.clip'],\n    ['fti', 'application/vnd.anser-web-funds-transfer-initiation'],\n    ['fvt', 'video/vnd.fvt'],\n    ['fxp', 'application/vnd.adobe.fxp'],\n    ['fxpl', 'application/vnd.adobe.fxp'],\n    ['fzs', 'application/vnd.fuzzysheet'],\n    ['g2w', 'application/vnd.geoplan'],\n    ['g3', 'image/g3fax'],\n    ['g3w', 'application/vnd.geospace'],\n    ['gac', 'application/vnd.groove-account'],\n    ['gam', 'application/x-tads'],\n    ['gbr', 'application/rpki-ghostbusters'],\n    ['gca', 'application/x-gca-compressed'],\n    ['gdl', 'model/vnd.gdl'],\n    ['gdoc', 'application/vnd.google-apps.document'],\n    ['geo', 'application/vnd.dynageo'],\n    ['geojson', 'application/geo+json'],\n    ['gex', 'application/vnd.geometry-explorer'],\n    ['ggb', 'application/vnd.geogebra.file'],\n    ['ggt', 'application/vnd.geogebra.tool'],\n    ['ghf', 'application/vnd.groove-help'],\n    ['gif', 'image/gif'],\n    ['gim', 'application/vnd.groove-identity-message'],\n    ['glb', 'model/gltf-binary'],\n    ['gltf', 'model/gltf+json'],\n    ['gml', 'application/gml+xml'],\n    ['gmx', 'application/vnd.gmx'],\n    ['gnumeric', 'application/x-gnumeric'],\n    ['gpg', 'application/gpg-keys'],\n    ['gph', 'application/vnd.flographit'],\n    ['gpx', 'application/gpx+xml'],\n    ['gqf', 'application/vnd.grafeq'],\n    ['gqs', 'application/vnd.grafeq'],\n    ['gram', 'application/srgs'],\n    ['gramps', 'application/x-gramps-xml'],\n    ['gre', 'application/vnd.geometry-explorer'],\n    ['grv', 'application/vnd.groove-injector'],\n    ['grxml', 'application/srgs+xml'],\n    ['gsf', 'application/x-font-ghostscript'],\n    ['gsheet', 'application/vnd.google-apps.spreadsheet'],\n    ['gslides', 'application/vnd.google-apps.presentation'],\n    ['gtar', 'application/x-gtar'],\n    ['gtm', 'application/vnd.groove-tool-message'],\n    ['gtw', 'model/vnd.gtw'],\n    ['gv', 'text/vnd.graphviz'],\n    ['gxf', 'application/gxf'],\n    ['gxt', 'application/vnd.geonext'],\n    ['gz', 'application/gzip'],\n    ['gzip', 'application/gzip'],\n    ['h', 'text/x-c'],\n    ['h261', 'video/h261'],\n    ['h263', 'video/h263'],\n    ['h264', 'video/h264'],\n    ['hal', 'application/vnd.hal+xml'],\n    ['hbci', 'application/vnd.hbci'],\n    ['hbs', 'text/x-handlebars-template'],\n    ['hdd', 'application/x-virtualbox-hdd'],\n    ['hdf', 'application/x-hdf'],\n    ['heic', 'image/heic'],\n    ['heics', 'image/heic-sequence'],\n    ['heif', 'image/heif'],\n    ['heifs', 'image/heif-sequence'],\n    ['hej2', 'image/hej2k'],\n    ['held', 'application/atsc-held+xml'],\n    ['hh', 'text/x-c'],\n    ['hjson', 'application/hjson'],\n    ['hlp', 'application/winhlp'],\n    ['hpgl', 'application/vnd.hp-hpgl'],\n    ['hpid', 'application/vnd.hp-hpid'],\n    ['hps', 'application/vnd.hp-hps'],\n    ['hqx', 'application/mac-binhex40'],\n    ['hsj2', 'image/hsj2'],\n    ['htc', 'text/x-component'],\n    ['htke', 'application/vnd.kenameaapp'],\n    ['htm', 'text/html'],\n    ['html', 'text/html'],\n    ['hvd', 'application/vnd.yamaha.hv-dic'],\n    ['hvp', 'application/vnd.yamaha.hv-voice'],\n    ['hvs', 'application/vnd.yamaha.hv-script'],\n    ['i2g', 'application/vnd.intergeo'],\n    ['icc', 'application/vnd.iccprofile'],\n    ['ice', 'x-conference/x-cooltalk'],\n    ['icm', 'application/vnd.iccprofile'],\n    ['ico', 'image/x-icon'],\n    ['ics', 'text/calendar'],\n    ['ief', 'image/ief'],\n    ['ifb', 'text/calendar'],\n    ['ifm', 'application/vnd.shana.informed.formdata'],\n    ['iges', 'model/iges'],\n    ['igl', 'application/vnd.igloader'],\n    ['igm', 'application/vnd.insors.igm'],\n    ['igs', 'model/iges'],\n    ['igx', 'application/vnd.micrografx.igx'],\n    ['iif', 'application/vnd.shana.informed.interchange'],\n    ['img', 'application/octet-stream'],\n    ['imp', 'application/vnd.accpac.simply.imp'],\n    ['ims', 'application/vnd.ms-ims'],\n    ['in', 'text/plain'],\n    ['ini', 'text/plain'],\n    ['ink', 'application/inkml+xml'],\n    ['inkml', 'application/inkml+xml'],\n    ['install', 'application/x-install-instructions'],\n    ['iota', 'application/vnd.astraea-software.iota'],\n    ['ipfix', 'application/ipfix'],\n    ['ipk', 'application/vnd.shana.informed.package'],\n    ['irm', 'application/vnd.ibm.rights-management'],\n    ['irp', 'application/vnd.irepository.package+xml'],\n    ['iso', 'application/x-iso9660-image'],\n    ['itp', 'application/vnd.shana.informed.formtemplate'],\n    ['its', 'application/its+xml'],\n    ['ivp', 'application/vnd.immervision-ivp'],\n    ['ivu', 'application/vnd.immervision-ivu'],\n    ['jad', 'text/vnd.sun.j2me.app-descriptor'],\n    ['jade', 'text/jade'],\n    ['jam', 'application/vnd.jam'],\n    ['jar', 'application/java-archive'],\n    ['jardiff', 'application/x-java-archive-diff'],\n    ['java', 'text/x-java-source'],\n    ['jhc', 'image/jphc'],\n    ['jisp', 'application/vnd.jisp'],\n    ['jls', 'image/jls'],\n    ['jlt', 'application/vnd.hp-jlyt'],\n    ['jng', 'image/x-jng'],\n    ['jnlp', 'application/x-java-jnlp-file'],\n    ['joda', 'application/vnd.joost.joda-archive'],\n    ['jp2', 'image/jp2'],\n    ['jpe', 'image/jpeg'],\n    ['jpeg', 'image/jpeg'],\n    ['jpf', 'image/jpx'],\n    ['jpg', 'image/jpeg'],\n    ['jpg2', 'image/jp2'],\n    ['jpgm', 'video/jpm'],\n    ['jpgv', 'video/jpeg'],\n    ['jph', 'image/jph'],\n    ['jpm', 'video/jpm'],\n    ['jpx', 'image/jpx'],\n    ['js', 'application/javascript'],\n    ['json', 'application/json'],\n    ['json5', 'application/json5'],\n    ['jsonld', 'application/ld+json'],\n    // https://jsonlines.org/\n    ['jsonl', 'application/jsonl'],\n    ['jsonml', 'application/jsonml+json'],\n    ['jsx', 'text/jsx'],\n    ['jxr', 'image/jxr'],\n    ['jxra', 'image/jxra'],\n    ['jxrs', 'image/jxrs'],\n    ['jxs', 'image/jxs'],\n    ['jxsc', 'image/jxsc'],\n    ['jxsi', 'image/jxsi'],\n    ['jxss', 'image/jxss'],\n    ['kar', 'audio/midi'],\n    ['karbon', 'application/vnd.kde.karbon'],\n    ['kdb', 'application/octet-stream'],\n    ['kdbx', 'application/x-keepass2'],\n    ['key', 'application/x-iwork-keynote-sffkey'],\n    ['kfo', 'application/vnd.kde.kformula'],\n    ['kia', 'application/vnd.kidspiration'],\n    ['kml', 'application/vnd.google-earth.kml+xml'],\n    ['kmz', 'application/vnd.google-earth.kmz'],\n    ['kne', 'application/vnd.kinar'],\n    ['knp', 'application/vnd.kinar'],\n    ['kon', 'application/vnd.kde.kontour'],\n    ['kpr', 'application/vnd.kde.kpresenter'],\n    ['kpt', 'application/vnd.kde.kpresenter'],\n    ['kpxx', 'application/vnd.ds-keypoint'],\n    ['ksp', 'application/vnd.kde.kspread'],\n    ['ktr', 'application/vnd.kahootz'],\n    ['ktx', 'image/ktx'],\n    ['ktx2', 'image/ktx2'],\n    ['ktz', 'application/vnd.kahootz'],\n    ['kwd', 'application/vnd.kde.kword'],\n    ['kwt', 'application/vnd.kde.kword'],\n    ['lasxml', 'application/vnd.las.las+xml'],\n    ['latex', 'application/x-latex'],\n    ['lbd', 'application/vnd.llamagraphics.life-balance.desktop'],\n    ['lbe', 'application/vnd.llamagraphics.life-balance.exchange+xml'],\n    ['les', 'application/vnd.hhe.lesson-player'],\n    ['less', 'text/less'],\n    ['lgr', 'application/lgr+xml'],\n    ['lha', 'application/octet-stream'],\n    ['link66', 'application/vnd.route66.link66+xml'],\n    ['list', 'text/plain'],\n    ['list3820', 'application/vnd.ibm.modcap'],\n    ['listafp', 'application/vnd.ibm.modcap'],\n    ['litcoffee', 'text/coffeescript'],\n    ['lnk', 'application/x-ms-shortcut'],\n    ['log', 'text/plain'],\n    ['lostxml', 'application/lost+xml'],\n    ['lrf', 'application/octet-stream'],\n    ['lrm', 'application/vnd.ms-lrm'],\n    ['ltf', 'application/vnd.frogans.ltf'],\n    ['lua', 'text/x-lua'],\n    ['luac', 'application/x-lua-bytecode'],\n    ['lvp', 'audio/vnd.lucent.voice'],\n    ['lwp', 'application/vnd.lotus-wordpro'],\n    ['lzh', 'application/octet-stream'],\n    ['m1v', 'video/mpeg'],\n    ['m2a', 'audio/mpeg'],\n    ['m2v', 'video/mpeg'],\n    ['m3a', 'audio/mpeg'],\n    ['m3u', 'text/plain'],\n    ['m3u8', 'application/vnd.apple.mpegurl'],\n    ['m4a', 'audio/x-m4a'],\n    ['m4p', 'application/mp4'],\n    ['m4s', 'video/iso.segment'],\n    ['m4u', 'application/vnd.mpegurl'],\n    ['m4v', 'video/x-m4v'],\n    ['m13', 'application/x-msmediaview'],\n    ['m14', 'application/x-msmediaview'],\n    ['m21', 'application/mp21'],\n    ['ma', 'application/mathematica'],\n    ['mads', 'application/mads+xml'],\n    ['maei', 'application/mmt-aei+xml'],\n    ['mag', 'application/vnd.ecowin.chart'],\n    ['maker', 'application/vnd.framemaker'],\n    ['man', 'text/troff'],\n    ['manifest', 'text/cache-manifest'],\n    ['map', 'application/json'],\n    ['mar', 'application/octet-stream'],\n    ['markdown', 'text/markdown'],\n    ['mathml', 'application/mathml+xml'],\n    ['mb', 'application/mathematica'],\n    ['mbk', 'application/vnd.mobius.mbk'],\n    ['mbox', 'application/mbox'],\n    ['mc1', 'application/vnd.medcalcdata'],\n    ['mcd', 'application/vnd.mcd'],\n    ['mcurl', 'text/vnd.curl.mcurl'],\n    ['md', 'text/markdown'],\n    ['mdb', 'application/x-msaccess'],\n    ['mdi', 'image/vnd.ms-modi'],\n    ['mdx', 'text/mdx'],\n    ['me', 'text/troff'],\n    ['mesh', 'model/mesh'],\n    ['meta4', 'application/metalink4+xml'],\n    ['metalink', 'application/metalink+xml'],\n    ['mets', 'application/mets+xml'],\n    ['mfm', 'application/vnd.mfmp'],\n    ['mft', 'application/rpki-manifest'],\n    ['mgp', 'application/vnd.osgeo.mapguide.package'],\n    ['mgz', 'application/vnd.proteus.magazine'],\n    ['mid', 'audio/midi'],\n    ['midi', 'audio/midi'],\n    ['mie', 'application/x-mie'],\n    ['mif', 'application/vnd.mif'],\n    ['mime', 'message/rfc822'],\n    ['mj2', 'video/mj2'],\n    ['mjp2', 'video/mj2'],\n    ['mjs', 'application/javascript'],\n    ['mk3d', 'video/x-matroska'],\n    ['mka', 'audio/x-matroska'],\n    ['mkd', 'text/x-markdown'],\n    ['mks', 'video/x-matroska'],\n    ['mkv', 'video/x-matroska'],\n    ['mlp', 'application/vnd.dolby.mlp'],\n    ['mmd', 'application/vnd.chipnuts.karaoke-mmd'],\n    ['mmf', 'application/vnd.smaf'],\n    ['mml', 'text/mathml'],\n    ['mmr', 'image/vnd.fujixerox.edmics-mmr'],\n    ['mng', 'video/x-mng'],\n    ['mny', 'application/x-msmoney'],\n    ['mobi', 'application/x-mobipocket-ebook'],\n    ['mods', 'application/mods+xml'],\n    ['mov', 'video/quicktime'],\n    ['movie', 'video/x-sgi-movie'],\n    ['mp2', 'audio/mpeg'],\n    ['mp2a', 'audio/mpeg'],\n    ['mp3', 'audio/mpeg'],\n    ['mp4', 'video/mp4'],\n    ['mp4a', 'audio/mp4'],\n    ['mp4s', 'application/mp4'],\n    ['mp4v', 'video/mp4'],\n    ['mp21', 'application/mp21'],\n    ['mpc', 'application/vnd.mophun.certificate'],\n    ['mpd', 'application/dash+xml'],\n    ['mpe', 'video/mpeg'],\n    ['mpeg', 'video/mpeg'],\n    ['mpg', 'video/mpeg'],\n    ['mpg4', 'video/mp4'],\n    ['mpga', 'audio/mpeg'],\n    ['mpkg', 'application/vnd.apple.installer+xml'],\n    ['mpm', 'application/vnd.blueice.multipass'],\n    ['mpn', 'application/vnd.mophun.application'],\n    ['mpp', 'application/vnd.ms-project'],\n    ['mpt', 'application/vnd.ms-project'],\n    ['mpy', 'application/vnd.ibm.minipay'],\n    ['mqy', 'application/vnd.mobius.mqy'],\n    ['mrc', 'application/marc'],\n    ['mrcx', 'application/marcxml+xml'],\n    ['ms', 'text/troff'],\n    ['mscml', 'application/mediaservercontrol+xml'],\n    ['mseed', 'application/vnd.fdsn.mseed'],\n    ['mseq', 'application/vnd.mseq'],\n    ['msf', 'application/vnd.epson.msf'],\n    ['msg', 'application/vnd.ms-outlook'],\n    ['msh', 'model/mesh'],\n    ['msi', 'application/x-msdownload'],\n    ['msl', 'application/vnd.mobius.msl'],\n    ['msm', 'application/octet-stream'],\n    ['msp', 'application/octet-stream'],\n    ['msty', 'application/vnd.muvee.style'],\n    ['mtl', 'model/mtl'],\n    ['mts', 'model/vnd.mts'],\n    ['mus', 'application/vnd.musician'],\n    ['musd', 'application/mmt-usd+xml'],\n    ['musicxml', 'application/vnd.recordare.musicxml+xml'],\n    ['mvb', 'application/x-msmediaview'],\n    ['mvt', 'application/vnd.mapbox-vector-tile'],\n    ['mwf', 'application/vnd.mfer'],\n    ['mxf', 'application/mxf'],\n    ['mxl', 'application/vnd.recordare.musicxml'],\n    ['mxmf', 'audio/mobile-xmf'],\n    ['mxml', 'application/xv+xml'],\n    ['mxs', 'application/vnd.triscape.mxs'],\n    ['mxu', 'video/vnd.mpegurl'],\n    ['n-gage', 'application/vnd.nokia.n-gage.symbian.install'],\n    ['n3', 'text/n3'],\n    ['nb', 'application/mathematica'],\n    ['nbp', 'application/vnd.wolfram.player'],\n    ['nc', 'application/x-netcdf'],\n    ['ncx', 'application/x-dtbncx+xml'],\n    ['nfo', 'text/x-nfo'],\n    ['ngdat', 'application/vnd.nokia.n-gage.data'],\n    ['nitf', 'application/vnd.nitf'],\n    ['nlu', 'application/vnd.neurolanguage.nlu'],\n    ['nml', 'application/vnd.enliven'],\n    ['nnd', 'application/vnd.noblenet-directory'],\n    ['nns', 'application/vnd.noblenet-sealer'],\n    ['nnw', 'application/vnd.noblenet-web'],\n    ['npx', 'image/vnd.net-fpx'],\n    ['nq', 'application/n-quads'],\n    ['nsc', 'application/x-conference'],\n    ['nsf', 'application/vnd.lotus-notes'],\n    ['nt', 'application/n-triples'],\n    ['ntf', 'application/vnd.nitf'],\n    ['numbers', 'application/x-iwork-numbers-sffnumbers'],\n    ['nzb', 'application/x-nzb'],\n    ['oa2', 'application/vnd.fujitsu.oasys2'],\n    ['oa3', 'application/vnd.fujitsu.oasys3'],\n    ['oas', 'application/vnd.fujitsu.oasys'],\n    ['obd', 'application/x-msbinder'],\n    ['obgx', 'application/vnd.openblox.game+xml'],\n    ['obj', 'model/obj'],\n    ['oda', 'application/oda'],\n    ['odb', 'application/vnd.oasis.opendocument.database'],\n    ['odc', 'application/vnd.oasis.opendocument.chart'],\n    ['odf', 'application/vnd.oasis.opendocument.formula'],\n    ['odft', 'application/vnd.oasis.opendocument.formula-template'],\n    ['odg', 'application/vnd.oasis.opendocument.graphics'],\n    ['odi', 'application/vnd.oasis.opendocument.image'],\n    ['odm', 'application/vnd.oasis.opendocument.text-master'],\n    ['odp', 'application/vnd.oasis.opendocument.presentation'],\n    ['ods', 'application/vnd.oasis.opendocument.spreadsheet'],\n    ['odt', 'application/vnd.oasis.opendocument.text'],\n    ['oga', 'audio/ogg'],\n    ['ogex', 'model/vnd.opengex'],\n    ['ogg', 'audio/ogg'],\n    ['ogv', 'video/ogg'],\n    ['ogx', 'application/ogg'],\n    ['omdoc', 'application/omdoc+xml'],\n    ['onepkg', 'application/onenote'],\n    ['onetmp', 'application/onenote'],\n    ['onetoc', 'application/onenote'],\n    ['onetoc2', 'application/onenote'],\n    ['opf', 'application/oebps-package+xml'],\n    ['opml', 'text/x-opml'],\n    ['oprc', 'application/vnd.palm'],\n    ['opus', 'audio/ogg'],\n    ['org', 'text/x-org'],\n    ['osf', 'application/vnd.yamaha.openscoreformat'],\n    ['osfpvg', 'application/vnd.yamaha.openscoreformat.osfpvg+xml'],\n    ['osm', 'application/vnd.openstreetmap.data+xml'],\n    ['otc', 'application/vnd.oasis.opendocument.chart-template'],\n    ['otf', 'font/otf'],\n    ['otg', 'application/vnd.oasis.opendocument.graphics-template'],\n    ['oth', 'application/vnd.oasis.opendocument.text-web'],\n    ['oti', 'application/vnd.oasis.opendocument.image-template'],\n    ['otp', 'application/vnd.oasis.opendocument.presentation-template'],\n    ['ots', 'application/vnd.oasis.opendocument.spreadsheet-template'],\n    ['ott', 'application/vnd.oasis.opendocument.text-template'],\n    ['ova', 'application/x-virtualbox-ova'],\n    ['ovf', 'application/x-virtualbox-ovf'],\n    ['owl', 'application/rdf+xml'],\n    ['oxps', 'application/oxps'],\n    ['oxt', 'application/vnd.openofficeorg.extension'],\n    ['p', 'text/x-pascal'],\n    ['p7a', 'application/x-pkcs7-signature'],\n    ['p7b', 'application/x-pkcs7-certificates'],\n    ['p7c', 'application/pkcs7-mime'],\n    ['p7m', 'application/pkcs7-mime'],\n    ['p7r', 'application/x-pkcs7-certreqresp'],\n    ['p7s', 'application/pkcs7-signature'],\n    ['p8', 'application/pkcs8'],\n    ['p10', 'application/x-pkcs10'],\n    ['p12', 'application/x-pkcs12'],\n    ['pac', 'application/x-ns-proxy-autoconfig'],\n    ['pages', 'application/x-iwork-pages-sffpages'],\n    ['pas', 'text/x-pascal'],\n    ['paw', 'application/vnd.pawaafile'],\n    ['pbd', 'application/vnd.powerbuilder6'],\n    ['pbm', 'image/x-portable-bitmap'],\n    ['pcap', 'application/vnd.tcpdump.pcap'],\n    ['pcf', 'application/x-font-pcf'],\n    ['pcl', 'application/vnd.hp-pcl'],\n    ['pclxl', 'application/vnd.hp-pclxl'],\n    ['pct', 'image/x-pict'],\n    ['pcurl', 'application/vnd.curl.pcurl'],\n    ['pcx', 'image/x-pcx'],\n    ['pdb', 'application/x-pilot'],\n    ['pde', 'text/x-processing'],\n    ['pdf', 'application/pdf'],\n    ['pem', 'application/x-x509-user-cert'],\n    ['pfa', 'application/x-font-type1'],\n    ['pfb', 'application/x-font-type1'],\n    ['pfm', 'application/x-font-type1'],\n    ['pfr', 'application/font-tdpfr'],\n    ['pfx', 'application/x-pkcs12'],\n    ['pgm', 'image/x-portable-graymap'],\n    ['pgn', 'application/x-chess-pgn'],\n    ['pgp', 'application/pgp'],\n    ['php', 'application/x-httpd-php'],\n    ['php3', 'application/x-httpd-php'],\n    ['php4', 'application/x-httpd-php'],\n    ['phps', 'application/x-httpd-php-source'],\n    ['phtml', 'application/x-httpd-php'],\n    ['pic', 'image/x-pict'],\n    ['pkg', 'application/octet-stream'],\n    ['pki', 'application/pkixcmp'],\n    ['pkipath', 'application/pkix-pkipath'],\n    ['pkpass', 'application/vnd.apple.pkpass'],\n    ['pl', 'application/x-perl'],\n    ['plb', 'application/vnd.3gpp.pic-bw-large'],\n    ['plc', 'application/vnd.mobius.plc'],\n    ['plf', 'application/vnd.pocketlearn'],\n    ['pls', 'application/pls+xml'],\n    ['pm', 'application/x-perl'],\n    ['pml', 'application/vnd.ctc-posml'],\n    ['png', 'image/png'],\n    ['pnm', 'image/x-portable-anymap'],\n    ['portpkg', 'application/vnd.macports.portpkg'],\n    ['pot', 'application/vnd.ms-powerpoint'],\n    ['potm', 'application/vnd.ms-powerpoint.presentation.macroEnabled.12'],\n    ['potx', 'application/vnd.openxmlformats-officedocument.presentationml.template'],\n    ['ppa', 'application/vnd.ms-powerpoint'],\n    ['ppam', 'application/vnd.ms-powerpoint.addin.macroEnabled.12'],\n    ['ppd', 'application/vnd.cups-ppd'],\n    ['ppm', 'image/x-portable-pixmap'],\n    ['pps', 'application/vnd.ms-powerpoint'],\n    ['ppsm', 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12'],\n    ['ppsx', 'application/vnd.openxmlformats-officedocument.presentationml.slideshow'],\n    ['ppt', 'application/powerpoint'],\n    ['pptm', 'application/vnd.ms-powerpoint.presentation.macroEnabled.12'],\n    ['pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation'],\n    ['pqa', 'application/vnd.palm'],\n    ['prc', 'application/x-pilot'],\n    ['pre', 'application/vnd.lotus-freelance'],\n    ['prf', 'application/pics-rules'],\n    ['provx', 'application/provenance+xml'],\n    ['ps', 'application/postscript'],\n    ['psb', 'application/vnd.3gpp.pic-bw-small'],\n    ['psd', 'application/x-photoshop'],\n    ['psf', 'application/x-font-linux-psf'],\n    ['pskcxml', 'application/pskc+xml'],\n    ['pti', 'image/prs.pti'],\n    ['ptid', 'application/vnd.pvi.ptid1'],\n    ['pub', 'application/x-mspublisher'],\n    ['pvb', 'application/vnd.3gpp.pic-bw-var'],\n    ['pwn', 'application/vnd.3m.post-it-notes'],\n    ['pya', 'audio/vnd.ms-playready.media.pya'],\n    ['pyv', 'video/vnd.ms-playready.media.pyv'],\n    ['qam', 'application/vnd.epson.quickanime'],\n    ['qbo', 'application/vnd.intu.qbo'],\n    ['qfx', 'application/vnd.intu.qfx'],\n    ['qps', 'application/vnd.publishare-delta-tree'],\n    ['qt', 'video/quicktime'],\n    ['qwd', 'application/vnd.quark.quarkxpress'],\n    ['qwt', 'application/vnd.quark.quarkxpress'],\n    ['qxb', 'application/vnd.quark.quarkxpress'],\n    ['qxd', 'application/vnd.quark.quarkxpress'],\n    ['qxl', 'application/vnd.quark.quarkxpress'],\n    ['qxt', 'application/vnd.quark.quarkxpress'],\n    ['ra', 'audio/x-realaudio'],\n    ['ram', 'audio/x-pn-realaudio'],\n    ['raml', 'application/raml+yaml'],\n    ['rapd', 'application/route-apd+xml'],\n    ['rar', 'application/x-rar'],\n    ['ras', 'image/x-cmu-raster'],\n    ['rcprofile', 'application/vnd.ipunplugged.rcprofile'],\n    ['rdf', 'application/rdf+xml'],\n    ['rdz', 'application/vnd.data-vision.rdz'],\n    ['relo', 'application/p2p-overlay+xml'],\n    ['rep', 'application/vnd.businessobjects'],\n    ['res', 'application/x-dtbresource+xml'],\n    ['rgb', 'image/x-rgb'],\n    ['rif', 'application/reginfo+xml'],\n    ['rip', 'audio/vnd.rip'],\n    ['ris', 'application/x-research-info-systems'],\n    ['rl', 'application/resource-lists+xml'],\n    ['rlc', 'image/vnd.fujixerox.edmics-rlc'],\n    ['rld', 'application/resource-lists-diff+xml'],\n    ['rm', 'audio/x-pn-realaudio'],\n    ['rmi', 'audio/midi'],\n    ['rmp', 'audio/x-pn-realaudio-plugin'],\n    ['rms', 'application/vnd.jcp.javame.midlet-rms'],\n    ['rmvb', 'application/vnd.rn-realmedia-vbr'],\n    ['rnc', 'application/relax-ng-compact-syntax'],\n    ['rng', 'application/xml'],\n    ['roa', 'application/rpki-roa'],\n    ['roff', 'text/troff'],\n    ['rp9', 'application/vnd.cloanto.rp9'],\n    ['rpm', 'audio/x-pn-realaudio-plugin'],\n    ['rpss', 'application/vnd.nokia.radio-presets'],\n    ['rpst', 'application/vnd.nokia.radio-preset'],\n    ['rq', 'application/sparql-query'],\n    ['rs', 'application/rls-services+xml'],\n    ['rsa', 'application/x-pkcs7'],\n    ['rsat', 'application/atsc-rsat+xml'],\n    ['rsd', 'application/rsd+xml'],\n    ['rsheet', 'application/urc-ressheet+xml'],\n    ['rss', 'application/rss+xml'],\n    ['rtf', 'text/rtf'],\n    ['rtx', 'text/richtext'],\n    ['run', 'application/x-makeself'],\n    ['rusd', 'application/route-usd+xml'],\n    ['rv', 'video/vnd.rn-realvideo'],\n    ['s', 'text/x-asm'],\n    ['s3m', 'audio/s3m'],\n    ['saf', 'application/vnd.yamaha.smaf-audio'],\n    ['sass', 'text/x-sass'],\n    ['sbml', 'application/sbml+xml'],\n    ['sc', 'application/vnd.ibm.secure-container'],\n    ['scd', 'application/x-msschedule'],\n    ['scm', 'application/vnd.lotus-screencam'],\n    ['scq', 'application/scvp-cv-request'],\n    ['scs', 'application/scvp-cv-response'],\n    ['scss', 'text/x-scss'],\n    ['scurl', 'text/vnd.curl.scurl'],\n    ['sda', 'application/vnd.stardivision.draw'],\n    ['sdc', 'application/vnd.stardivision.calc'],\n    ['sdd', 'application/vnd.stardivision.impress'],\n    ['sdkd', 'application/vnd.solent.sdkm+xml'],\n    ['sdkm', 'application/vnd.solent.sdkm+xml'],\n    ['sdp', 'application/sdp'],\n    ['sdw', 'application/vnd.stardivision.writer'],\n    ['sea', 'application/octet-stream'],\n    ['see', 'application/vnd.seemail'],\n    ['seed', 'application/vnd.fdsn.seed'],\n    ['sema', 'application/vnd.sema'],\n    ['semd', 'application/vnd.semd'],\n    ['semf', 'application/vnd.semf'],\n    ['senmlx', 'application/senml+xml'],\n    ['sensmlx', 'application/sensml+xml'],\n    ['ser', 'application/java-serialized-object'],\n    ['setpay', 'application/set-payment-initiation'],\n    ['setreg', 'application/set-registration-initiation'],\n    ['sfd-hdstx', 'application/vnd.hydrostatix.sof-data'],\n    ['sfs', 'application/vnd.spotfire.sfs'],\n    ['sfv', 'text/x-sfv'],\n    ['sgi', 'image/sgi'],\n    ['sgl', 'application/vnd.stardivision.writer-global'],\n    ['sgm', 'text/sgml'],\n    ['sgml', 'text/sgml'],\n    ['sh', 'application/x-sh'],\n    ['shar', 'application/x-shar'],\n    ['shex', 'text/shex'],\n    ['shf', 'application/shf+xml'],\n    ['shtml', 'text/html'],\n    ['sid', 'image/x-mrsid-image'],\n    ['sieve', 'application/sieve'],\n    ['sig', 'application/pgp-signature'],\n    ['sil', 'audio/silk'],\n    ['silo', 'model/mesh'],\n    ['sis', 'application/vnd.symbian.install'],\n    ['sisx', 'application/vnd.symbian.install'],\n    ['sit', 'application/x-stuffit'],\n    ['sitx', 'application/x-stuffitx'],\n    ['siv', 'application/sieve'],\n    ['skd', 'application/vnd.koan'],\n    ['skm', 'application/vnd.koan'],\n    ['skp', 'application/vnd.koan'],\n    ['skt', 'application/vnd.koan'],\n    ['sldm', 'application/vnd.ms-powerpoint.slide.macroenabled.12'],\n    ['sldx', 'application/vnd.openxmlformats-officedocument.presentationml.slide'],\n    ['slim', 'text/slim'],\n    ['slm', 'text/slim'],\n    ['sls', 'application/route-s-tsid+xml'],\n    ['slt', 'application/vnd.epson.salt'],\n    ['sm', 'application/vnd.stepmania.stepchart'],\n    ['smf', 'application/vnd.stardivision.math'],\n    ['smi', 'application/smil'],\n    ['smil', 'application/smil'],\n    ['smv', 'video/x-smv'],\n    ['smzip', 'application/vnd.stepmania.package'],\n    ['snd', 'audio/basic'],\n    ['snf', 'application/x-font-snf'],\n    ['so', 'application/octet-stream'],\n    ['spc', 'application/x-pkcs7-certificates'],\n    ['spdx', 'text/spdx'],\n    ['spf', 'application/vnd.yamaha.smaf-phrase'],\n    ['spl', 'application/x-futuresplash'],\n    ['spot', 'text/vnd.in3d.spot'],\n    ['spp', 'application/scvp-vp-response'],\n    ['spq', 'application/scvp-vp-request'],\n    ['spx', 'audio/ogg'],\n    ['sql', 'application/x-sql'],\n    ['src', 'application/x-wais-source'],\n    ['srt', 'application/x-subrip'],\n    ['sru', 'application/sru+xml'],\n    ['srx', 'application/sparql-results+xml'],\n    ['ssdl', 'application/ssdl+xml'],\n    ['sse', 'application/vnd.kodak-descriptor'],\n    ['ssf', 'application/vnd.epson.ssf'],\n    ['ssml', 'application/ssml+xml'],\n    ['sst', 'application/octet-stream'],\n    ['st', 'application/vnd.sailingtracker.track'],\n    ['stc', 'application/vnd.sun.xml.calc.template'],\n    ['std', 'application/vnd.sun.xml.draw.template'],\n    ['stf', 'application/vnd.wt.stf'],\n    ['sti', 'application/vnd.sun.xml.impress.template'],\n    ['stk', 'application/hyperstudio'],\n    ['stl', 'model/stl'],\n    ['stpx', 'model/step+xml'],\n    ['stpxz', 'model/step-xml+zip'],\n    ['stpz', 'model/step+zip'],\n    ['str', 'application/vnd.pg.format'],\n    ['stw', 'application/vnd.sun.xml.writer.template'],\n    ['styl', 'text/stylus'],\n    ['stylus', 'text/stylus'],\n    ['sub', 'text/vnd.dvb.subtitle'],\n    ['sus', 'application/vnd.sus-calendar'],\n    ['susp', 'application/vnd.sus-calendar'],\n    ['sv4cpio', 'application/x-sv4cpio'],\n    ['sv4crc', 'application/x-sv4crc'],\n    ['svc', 'application/vnd.dvb.service'],\n    ['svd', 'application/vnd.svd'],\n    ['svg', 'image/svg+xml'],\n    ['svgz', 'image/svg+xml'],\n    ['swa', 'application/x-director'],\n    ['swf', 'application/x-shockwave-flash'],\n    ['swi', 'application/vnd.aristanetworks.swi'],\n    ['swidtag', 'application/swid+xml'],\n    ['sxc', 'application/vnd.sun.xml.calc'],\n    ['sxd', 'application/vnd.sun.xml.draw'],\n    ['sxg', 'application/vnd.sun.xml.writer.global'],\n    ['sxi', 'application/vnd.sun.xml.impress'],\n    ['sxm', 'application/vnd.sun.xml.math'],\n    ['sxw', 'application/vnd.sun.xml.writer'],\n    ['t', 'text/troff'],\n    ['t3', 'application/x-t3vm-image'],\n    ['t38', 'image/t38'],\n    ['taglet', 'application/vnd.mynfc'],\n    ['tao', 'application/vnd.tao.intent-module-archive'],\n    ['tap', 'image/vnd.tencent.tap'],\n    ['tar', 'application/x-tar'],\n    ['tcap', 'application/vnd.3gpp2.tcap'],\n    ['tcl', 'application/x-tcl'],\n    ['td', 'application/urc-targetdesc+xml'],\n    ['teacher', 'application/vnd.smart.teacher'],\n    ['tei', 'application/tei+xml'],\n    ['teicorpus', 'application/tei+xml'],\n    ['tex', 'application/x-tex'],\n    ['texi', 'application/x-texinfo'],\n    ['texinfo', 'application/x-texinfo'],\n    ['text', 'text/plain'],\n    ['tfi', 'application/thraud+xml'],\n    ['tfm', 'application/x-tex-tfm'],\n    ['tfx', 'image/tiff-fx'],\n    ['tga', 'image/x-tga'],\n    ['tgz', 'application/x-tar'],\n    ['thmx', 'application/vnd.ms-officetheme'],\n    ['tif', 'image/tiff'],\n    ['tiff', 'image/tiff'],\n    ['tk', 'application/x-tcl'],\n    ['tmo', 'application/vnd.tmobile-livetv'],\n    ['toml', 'application/toml'],\n    ['torrent', 'application/x-bittorrent'],\n    ['tpl', 'application/vnd.groove-tool-template'],\n    ['tpt', 'application/vnd.trid.tpt'],\n    ['tr', 'text/troff'],\n    ['tra', 'application/vnd.trueapp'],\n    ['trig', 'application/trig'],\n    ['trm', 'application/x-msterminal'],\n    ['ts', 'video/mp2t'],\n    ['tsd', 'application/timestamped-data'],\n    ['tsv', 'text/tab-separated-values'],\n    ['ttc', 'font/collection'],\n    ['ttf', 'font/ttf'],\n    ['ttl', 'text/turtle'],\n    ['ttml', 'application/ttml+xml'],\n    ['twd', 'application/vnd.simtech-mindmapper'],\n    ['twds', 'application/vnd.simtech-mindmapper'],\n    ['txd', 'application/vnd.genomatix.tuxedo'],\n    ['txf', 'application/vnd.mobius.txf'],\n    ['txt', 'text/plain'],\n    ['u8dsn', 'message/global-delivery-status'],\n    ['u8hdr', 'message/global-headers'],\n    ['u8mdn', 'message/global-disposition-notification'],\n    ['u8msg', 'message/global'],\n    ['u32', 'application/x-authorware-bin'],\n    ['ubj', 'application/ubjson'],\n    ['udeb', 'application/x-debian-package'],\n    ['ufd', 'application/vnd.ufdl'],\n    ['ufdl', 'application/vnd.ufdl'],\n    ['ulx', 'application/x-glulx'],\n    ['umj', 'application/vnd.umajin'],\n    ['unityweb', 'application/vnd.unity'],\n    ['uoml', 'application/vnd.uoml+xml'],\n    ['uri', 'text/uri-list'],\n    ['uris', 'text/uri-list'],\n    ['urls', 'text/uri-list'],\n    ['usdz', 'model/vnd.usdz+zip'],\n    ['ustar', 'application/x-ustar'],\n    ['utz', 'application/vnd.uiq.theme'],\n    ['uu', 'text/x-uuencode'],\n    ['uva', 'audio/vnd.dece.audio'],\n    ['uvd', 'application/vnd.dece.data'],\n    ['uvf', 'application/vnd.dece.data'],\n    ['uvg', 'image/vnd.dece.graphic'],\n    ['uvh', 'video/vnd.dece.hd'],\n    ['uvi', 'image/vnd.dece.graphic'],\n    ['uvm', 'video/vnd.dece.mobile'],\n    ['uvp', 'video/vnd.dece.pd'],\n    ['uvs', 'video/vnd.dece.sd'],\n    ['uvt', 'application/vnd.dece.ttml+xml'],\n    ['uvu', 'video/vnd.uvvu.mp4'],\n    ['uvv', 'video/vnd.dece.video'],\n    ['uvva', 'audio/vnd.dece.audio'],\n    ['uvvd', 'application/vnd.dece.data'],\n    ['uvvf', 'application/vnd.dece.data'],\n    ['uvvg', 'image/vnd.dece.graphic'],\n    ['uvvh', 'video/vnd.dece.hd'],\n    ['uvvi', 'image/vnd.dece.graphic'],\n    ['uvvm', 'video/vnd.dece.mobile'],\n    ['uvvp', 'video/vnd.dece.pd'],\n    ['uvvs', 'video/vnd.dece.sd'],\n    ['uvvt', 'application/vnd.dece.ttml+xml'],\n    ['uvvu', 'video/vnd.uvvu.mp4'],\n    ['uvvv', 'video/vnd.dece.video'],\n    ['uvvx', 'application/vnd.dece.unspecified'],\n    ['uvvz', 'application/vnd.dece.zip'],\n    ['uvx', 'application/vnd.dece.unspecified'],\n    ['uvz', 'application/vnd.dece.zip'],\n    ['vbox', 'application/x-virtualbox-vbox'],\n    ['vbox-extpack', 'application/x-virtualbox-vbox-extpack'],\n    ['vcard', 'text/vcard'],\n    ['vcd', 'application/x-cdlink'],\n    ['vcf', 'text/x-vcard'],\n    ['vcg', 'application/vnd.groove-vcard'],\n    ['vcs', 'text/x-vcalendar'],\n    ['vcx', 'application/vnd.vcx'],\n    ['vdi', 'application/x-virtualbox-vdi'],\n    ['vds', 'model/vnd.sap.vds'],\n    ['vhd', 'application/x-virtualbox-vhd'],\n    ['vis', 'application/vnd.visionary'],\n    ['viv', 'video/vnd.vivo'],\n    ['vlc', 'application/videolan'],\n    ['vmdk', 'application/x-virtualbox-vmdk'],\n    ['vob', 'video/x-ms-vob'],\n    ['vor', 'application/vnd.stardivision.writer'],\n    ['vox', 'application/x-authorware-bin'],\n    ['vrml', 'model/vrml'],\n    ['vsd', 'application/vnd.visio'],\n    ['vsf', 'application/vnd.vsf'],\n    ['vss', 'application/vnd.visio'],\n    ['vst', 'application/vnd.visio'],\n    ['vsw', 'application/vnd.visio'],\n    ['vtf', 'image/vnd.valve.source.texture'],\n    ['vtt', 'text/vtt'],\n    ['vtu', 'model/vnd.vtu'],\n    ['vxml', 'application/voicexml+xml'],\n    ['w3d', 'application/x-director'],\n    ['wad', 'application/x-doom'],\n    ['wadl', 'application/vnd.sun.wadl+xml'],\n    ['war', 'application/java-archive'],\n    ['wasm', 'application/wasm'],\n    ['wav', 'audio/x-wav'],\n    ['wax', 'audio/x-ms-wax'],\n    ['wbmp', 'image/vnd.wap.wbmp'],\n    ['wbs', 'application/vnd.criticaltools.wbs+xml'],\n    ['wbxml', 'application/wbxml'],\n    ['wcm', 'application/vnd.ms-works'],\n    ['wdb', 'application/vnd.ms-works'],\n    ['wdp', 'image/vnd.ms-photo'],\n    ['weba', 'audio/webm'],\n    ['webapp', 'application/x-web-app-manifest+json'],\n    ['webm', 'video/webm'],\n    ['webmanifest', 'application/manifest+json'],\n    ['webp', 'image/webp'],\n    ['wg', 'application/vnd.pmi.widget'],\n    ['wgt', 'application/widget'],\n    ['wks', 'application/vnd.ms-works'],\n    ['wm', 'video/x-ms-wm'],\n    ['wma', 'audio/x-ms-wma'],\n    ['wmd', 'application/x-ms-wmd'],\n    ['wmf', 'image/wmf'],\n    ['wml', 'text/vnd.wap.wml'],\n    ['wmlc', 'application/wmlc'],\n    ['wmls', 'text/vnd.wap.wmlscript'],\n    ['wmlsc', 'application/vnd.wap.wmlscriptc'],\n    ['wmv', 'video/x-ms-wmv'],\n    ['wmx', 'video/x-ms-wmx'],\n    ['wmz', 'application/x-msmetafile'],\n    ['woff', 'font/woff'],\n    ['woff2', 'font/woff2'],\n    ['word', 'application/msword'],\n    ['wpd', 'application/vnd.wordperfect'],\n    ['wpl', 'application/vnd.ms-wpl'],\n    ['wps', 'application/vnd.ms-works'],\n    ['wqd', 'application/vnd.wqd'],\n    ['wri', 'application/x-mswrite'],\n    ['wrl', 'model/vrml'],\n    ['wsc', 'message/vnd.wfa.wsc'],\n    ['wsdl', 'application/wsdl+xml'],\n    ['wspolicy', 'application/wspolicy+xml'],\n    ['wtb', 'application/vnd.webturbo'],\n    ['wvx', 'video/x-ms-wvx'],\n    ['x3d', 'model/x3d+xml'],\n    ['x3db', 'model/x3d+fastinfoset'],\n    ['x3dbz', 'model/x3d+binary'],\n    ['x3dv', 'model/x3d-vrml'],\n    ['x3dvz', 'model/x3d+vrml'],\n    ['x3dz', 'model/x3d+xml'],\n    ['x32', 'application/x-authorware-bin'],\n    ['x_b', 'model/vnd.parasolid.transmit.binary'],\n    ['x_t', 'model/vnd.parasolid.transmit.text'],\n    ['xaml', 'application/xaml+xml'],\n    ['xap', 'application/x-silverlight-app'],\n    ['xar', 'application/vnd.xara'],\n    ['xav', 'application/xcap-att+xml'],\n    ['xbap', 'application/x-ms-xbap'],\n    ['xbd', 'application/vnd.fujixerox.docuworks.binder'],\n    ['xbm', 'image/x-xbitmap'],\n    ['xca', 'application/xcap-caps+xml'],\n    ['xcs', 'application/calendar+xml'],\n    ['xdf', 'application/xcap-diff+xml'],\n    ['xdm', 'application/vnd.syncml.dm+xml'],\n    ['xdp', 'application/vnd.adobe.xdp+xml'],\n    ['xdssc', 'application/dssc+xml'],\n    ['xdw', 'application/vnd.fujixerox.docuworks'],\n    ['xel', 'application/xcap-el+xml'],\n    ['xenc', 'application/xenc+xml'],\n    ['xer', 'application/patch-ops-error+xml'],\n    ['xfdf', 'application/vnd.adobe.xfdf'],\n    ['xfdl', 'application/vnd.xfdl'],\n    ['xht', 'application/xhtml+xml'],\n    ['xhtml', 'application/xhtml+xml'],\n    ['xhvml', 'application/xv+xml'],\n    ['xif', 'image/vnd.xiff'],\n    ['xl', 'application/excel'],\n    ['xla', 'application/vnd.ms-excel'],\n    ['xlam', 'application/vnd.ms-excel.addin.macroEnabled.12'],\n    ['xlc', 'application/vnd.ms-excel'],\n    ['xlf', 'application/xliff+xml'],\n    ['xlm', 'application/vnd.ms-excel'],\n    ['xls', 'application/vnd.ms-excel'],\n    ['xlsb', 'application/vnd.ms-excel.sheet.binary.macroEnabled.12'],\n    ['xlsm', 'application/vnd.ms-excel.sheet.macroEnabled.12'],\n    ['xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n    ['xlt', 'application/vnd.ms-excel'],\n    ['xltm', 'application/vnd.ms-excel.template.macroEnabled.12'],\n    ['xltx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.template'],\n    ['xlw', 'application/vnd.ms-excel'],\n    ['xm', 'audio/xm'],\n    ['xml', 'application/xml'],\n    ['xns', 'application/xcap-ns+xml'],\n    ['xo', 'application/vnd.olpc-sugar'],\n    ['xop', 'application/xop+xml'],\n    ['xpi', 'application/x-xpinstall'],\n    ['xpl', 'application/xproc+xml'],\n    ['xpm', 'image/x-xpixmap'],\n    ['xpr', 'application/vnd.is-xpr'],\n    ['xps', 'application/vnd.ms-xpsdocument'],\n    ['xpw', 'application/vnd.intercon.formnet'],\n    ['xpx', 'application/vnd.intercon.formnet'],\n    ['xsd', 'application/xml'],\n    ['xsl', 'application/xml'],\n    ['xslt', 'application/xslt+xml'],\n    ['xsm', 'application/vnd.syncml+xml'],\n    ['xspf', 'application/xspf+xml'],\n    ['xul', 'application/vnd.mozilla.xul+xml'],\n    ['xvm', 'application/xv+xml'],\n    ['xvml', 'application/xv+xml'],\n    ['xwd', 'image/x-xwindowdump'],\n    ['xyz', 'chemical/x-xyz'],\n    ['xz', 'application/x-xz'],\n    ['yaml', 'text/yaml'],\n    ['yang', 'application/yang'],\n    ['yin', 'application/yin+xml'],\n    ['yml', 'text/yaml'],\n    ['ymp', 'text/x-suse-ymp'],\n    ['z', 'application/x-compress'],\n    ['z1', 'application/x-zmachine'],\n    ['z2', 'application/x-zmachine'],\n    ['z3', 'application/x-zmachine'],\n    ['z4', 'application/x-zmachine'],\n    ['z5', 'application/x-zmachine'],\n    ['z6', 'application/x-zmachine'],\n    ['z7', 'application/x-zmachine'],\n    ['z8', 'application/x-zmachine'],\n    ['zaz', 'application/vnd.zzazz.deck+xml'],\n    ['zip', 'application/zip'],\n    ['zir', 'application/vnd.zul'],\n    ['zirz', 'application/vnd.zul'],\n    ['zmm', 'application/vnd.handheld-entertainment+xml'],\n    ['zsh', 'text/x-scriptzsh']\n]);\nexport function toFileWithPath(file, path, h) {\n    const f = withMimeType(file);\n    const { webkitRelativePath } = file;\n    const p = typeof path === 'string'\n        ? path\n        // If <input webkitdirectory> is set,\n        // the File will have a {webkitRelativePath} property\n        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory\n        : typeof webkitRelativePath === 'string' && webkitRelativePath.length > 0\n            ? webkitRelativePath\n            : `./${file.name}`;\n    if (typeof f.path !== 'string') { // on electron, path is already set to the absolute path\n        setObjProp(f, 'path', p);\n    }\n    if (h !== undefined) {\n        Object.defineProperty(f, 'handle', {\n            value: h,\n            writable: false,\n            configurable: false,\n            enumerable: true\n        });\n    }\n    // Always populate a relative path so that even electron apps have access to a relativePath value\n    setObjProp(f, 'relativePath', p);\n    return f;\n}\nfunction withMimeType(file) {\n    const { name } = file;\n    const hasExtension = name && name.lastIndexOf('.') !== -1;\n    if (hasExtension && !file.type) {\n        const ext = name.split('.')\n            .pop().toLowerCase();\n        const type = COMMON_MIME_TYPES.get(ext);\n        if (type) {\n            Object.defineProperty(file, 'type', {\n                value: type,\n                writable: false,\n                configurable: false,\n                enumerable: true\n            });\n        }\n    }\n    return file;\n}\nfunction setObjProp(f, key, value) {\n    Object.defineProperty(f, key, {\n        value,\n        writable: false,\n        configurable: false,\n        enumerable: true\n    });\n}\n//# sourceMappingURL=file.js.map","import { __awaiter } from \"tslib\";\nimport { toFileWithPath } from './file';\nconst FILES_TO_IGNORE = [\n    // Thumbnail cache files for macOS and Windows\n    '.DS_Store', // macOs\n    'Thumbs.db' // Windows\n];\n/**\n * Convert a DragEvent's DataTrasfer object to a list of File objects\n * NOTE: If some of the items are folders,\n * everything will be flattened and placed in the same list but the paths will be kept as a {path} property.\n *\n * EXPERIMENTAL: A list of https://developer.mozilla.org/en-US/docs/Web/API/FileSystemHandle objects can also be passed as an arg\n * and a list of File objects will be returned.\n *\n * @param evt\n */\nexport function fromEvent(evt) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (isObject(evt) && isDataTransfer(evt.dataTransfer)) {\n            return getDataTransferFiles(evt.dataTransfer, evt.type);\n        }\n        else if (isChangeEvt(evt)) {\n            return getInputFiles(evt);\n        }\n        else if (Array.isArray(evt) && evt.every(item => 'getFile' in item && typeof item.getFile === 'function')) {\n            return getFsHandleFiles(evt);\n        }\n        return [];\n    });\n}\nfunction isDataTransfer(value) {\n    return isObject(value);\n}\nfunction isChangeEvt(value) {\n    return isObject(value) && isObject(value.target);\n}\nfunction isObject(v) {\n    return typeof v === 'object' && v !== null;\n}\nfunction getInputFiles(evt) {\n    return fromList(evt.target.files).map(file => toFileWithPath(file));\n}\n// Ee expect each handle to be https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileHandle\nfunction getFsHandleFiles(handles) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const files = yield Promise.all(handles.map(h => h.getFile()));\n        return files.map(file => toFileWithPath(file));\n    });\n}\nfunction getDataTransferFiles(dt, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // IE11 does not support dataTransfer.items\n        // See https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/items#Browser_compatibility\n        if (dt.items) {\n            const items = fromList(dt.items)\n                .filter(item => item.kind === 'file');\n            // According to https://html.spec.whatwg.org/multipage/dnd.html#dndevents,\n            // only 'dragstart' and 'drop' has access to the data (source node)\n            if (type !== 'drop') {\n                return items;\n            }\n            const files = yield Promise.all(items.map(toFilePromises));\n            return noIgnoredFiles(flatten(files));\n        }\n        return noIgnoredFiles(fromList(dt.files)\n            .map(file => toFileWithPath(file)));\n    });\n}\nfunction noIgnoredFiles(files) {\n    return files.filter(file => FILES_TO_IGNORE.indexOf(file.name) === -1);\n}\n// IE11 does not support Array.from()\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Browser_compatibility\n// https://developer.mozilla.org/en-US/docs/Web/API/FileList\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItemList\nfunction fromList(items) {\n    if (items === null) {\n        return [];\n    }\n    const files = [];\n    // tslint:disable: prefer-for-of\n    for (let i = 0; i < items.length; i++) {\n        const file = items[i];\n        files.push(file);\n    }\n    return files;\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem\nfunction toFilePromises(item) {\n    if (typeof item.webkitGetAsEntry !== 'function') {\n        return fromDataTransferItem(item);\n    }\n    const entry = item.webkitGetAsEntry();\n    // Safari supports dropping an image node from a different window and can be retrieved using\n    // the DataTransferItem.getAsFile() API\n    // NOTE: FileSystemEntry.file() throws if trying to get the file\n    if (entry && entry.isDirectory) {\n        return fromDirEntry(entry);\n    }\n    return fromDataTransferItem(item, entry);\n}\nfunction flatten(items) {\n    return items.reduce((acc, files) => [\n        ...acc,\n        ...(Array.isArray(files) ? flatten(files) : [files])\n    ], []);\n}\nfunction fromDataTransferItem(item, entry) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        // Check if we're in a secure context; due to a bug in Chrome (as far as we know)\n        // the browser crashes when calling this API (yet to be confirmed as a consistent behaviour).\n        //\n        // See:\n        // - https://issues.chromium.org/issues/40186242\n        // - https://github.com/react-dropzone/react-dropzone/issues/1397\n        if (globalThis.isSecureContext && typeof item.getAsFileSystemHandle === 'function') {\n            const h = yield item.getAsFileSystemHandle();\n            if (h === null) {\n                throw new Error(`${item} is not a File`);\n            }\n            // It seems that the handle can be `undefined` (see https://github.com/react-dropzone/file-selector/issues/120),\n            // so we check if it isn't; if it is, the code path continues to the next API (`getAsFile`).\n            if (h !== undefined) {\n                const file = yield h.getFile();\n                file.handle = h;\n                return toFileWithPath(file);\n            }\n        }\n        const file = item.getAsFile();\n        if (!file) {\n            throw new Error(`${item} is not a File`);\n        }\n        const fwp = toFileWithPath(file, (_a = entry === null || entry === void 0 ? void 0 : entry.fullPath) !== null && _a !== void 0 ? _a : undefined);\n        return fwp;\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemEntry\nfunction fromEntry(entry) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return entry.isDirectory ? fromDirEntry(entry) : fromFileEntry(entry);\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry\nfunction fromDirEntry(entry) {\n    const reader = entry.createReader();\n    return new Promise((resolve, reject) => {\n        const entries = [];\n        function readEntries() {\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry/createReader\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryReader/readEntries\n            reader.readEntries((batch) => __awaiter(this, void 0, void 0, function* () {\n                if (!batch.length) {\n                    // Done reading directory\n                    try {\n                        const files = yield Promise.all(entries);\n                        resolve(files);\n                    }\n                    catch (err) {\n                        reject(err);\n                    }\n                }\n                else {\n                    const items = Promise.all(batch.map(fromEntry));\n                    entries.push(items);\n                    // Continue reading\n                    readEntries();\n                }\n            }), (err) => {\n                reject(err);\n            });\n        }\n        readEntries();\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileEntry\nfunction fromFileEntry(entry) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            entry.file((file) => {\n                const fwp = toFileWithPath(file, entry.fullPath);\n                resolve(fwp);\n            }, (err) => {\n                reject(err);\n            });\n        });\n    });\n}\n//# sourceMappingURL=file-selector.js.map","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (file, acceptedFiles) {\n  if (file && acceptedFiles) {\n    var acceptedFilesArray = Array.isArray(acceptedFiles) ? acceptedFiles : acceptedFiles.split(',');\n\n    if (acceptedFilesArray.length === 0) {\n      return true;\n    }\n\n    var fileName = file.name || '';\n    var mimeType = (file.type || '').toLowerCase();\n    var baseMimeType = mimeType.replace(/\\/.*$/, '');\n    return acceptedFilesArray.some(function (type) {\n      var validType = type.trim().toLowerCase();\n\n      if (validType.charAt(0) === '.') {\n        return fileName.toLowerCase().endsWith(validType);\n      } else if (validType.endsWith('/*')) {\n        // This is something like a image/* mime type\n        return baseMimeType === validType.replace(/\\/.*$/, '');\n      }\n\n      return mimeType === validType;\n    });\n  }\n\n  return true;\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport _accepts from \"attr-accept\";\nvar accepts = typeof _accepts === \"function\" ? _accepts : _accepts.default; // Error codes\n\nexport var FILE_INVALID_TYPE = \"file-invalid-type\";\nexport var FILE_TOO_LARGE = \"file-too-large\";\nexport var FILE_TOO_SMALL = \"file-too-small\";\nexport var TOO_MANY_FILES = \"too-many-files\";\nexport var ErrorCode = {\n  FileInvalidType: FILE_INVALID_TYPE,\n  FileTooLarge: FILE_TOO_LARGE,\n  FileTooSmall: FILE_TOO_SMALL,\n  TooManyFiles: TOO_MANY_FILES\n};\n/**\n *\n * @param {string} accept\n */\n\nexport var getInvalidTypeRejectionErr = function getInvalidTypeRejectionErr() {\n  var accept = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var acceptArr = accept.split(\",\");\n  var msg = acceptArr.length > 1 ? \"one of \".concat(acceptArr.join(\", \")) : acceptArr[0];\n  return {\n    code: FILE_INVALID_TYPE,\n    message: \"File type must be \".concat(msg)\n  };\n};\nexport var getTooLargeRejectionErr = function getTooLargeRejectionErr(maxSize) {\n  return {\n    code: FILE_TOO_LARGE,\n    message: \"File is larger than \".concat(maxSize, \" \").concat(maxSize === 1 ? \"byte\" : \"bytes\")\n  };\n};\nexport var getTooSmallRejectionErr = function getTooSmallRejectionErr(minSize) {\n  return {\n    code: FILE_TOO_SMALL,\n    message: \"File is smaller than \".concat(minSize, \" \").concat(minSize === 1 ? \"byte\" : \"bytes\")\n  };\n};\nexport var TOO_MANY_FILES_REJECTION = {\n  code: TOO_MANY_FILES,\n  message: \"Too many files\"\n};\n/**\n * Check if file is accepted.\n *\n * Firefox versions prior to 53 return a bogus MIME type for every file drag,\n * so dragovers with that MIME type will always be accepted.\n *\n * @param {File} file\n * @param {string} accept\n * @returns\n */\n\nexport function fileAccepted(file, accept) {\n  var isAcceptable = file.type === \"application/x-moz-file\" || accepts(file, accept);\n  return [isAcceptable, isAcceptable ? null : getInvalidTypeRejectionErr(accept)];\n}\nexport function fileMatchSize(file, minSize, maxSize) {\n  if (isDefined(file.size)) {\n    if (isDefined(minSize) && isDefined(maxSize)) {\n      if (file.size > maxSize) return [false, getTooLargeRejectionErr(maxSize)];\n      if (file.size < minSize) return [false, getTooSmallRejectionErr(minSize)];\n    } else if (isDefined(minSize) && file.size < minSize) return [false, getTooSmallRejectionErr(minSize)];else if (isDefined(maxSize) && file.size > maxSize) return [false, getTooLargeRejectionErr(maxSize)];\n  }\n\n  return [true, null];\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null;\n}\n/**\n *\n * @param {object} options\n * @param {File[]} options.files\n * @param {string} [options.accept]\n * @param {number} [options.minSize]\n * @param {number} [options.maxSize]\n * @param {boolean} [options.multiple]\n * @param {number} [options.maxFiles]\n * @param {(f: File) => FileError|FileError[]|null} [options.validator]\n * @returns\n */\n\n\nexport function allFilesAccepted(_ref) {\n  var files = _ref.files,\n      accept = _ref.accept,\n      minSize = _ref.minSize,\n      maxSize = _ref.maxSize,\n      multiple = _ref.multiple,\n      maxFiles = _ref.maxFiles,\n      validator = _ref.validator;\n\n  if (!multiple && files.length > 1 || multiple && maxFiles >= 1 && files.length > maxFiles) {\n    return false;\n  }\n\n  return files.every(function (file) {\n    var _fileAccepted = fileAccepted(file, accept),\n        _fileAccepted2 = _slicedToArray(_fileAccepted, 1),\n        accepted = _fileAccepted2[0];\n\n    var _fileMatchSize = fileMatchSize(file, minSize, maxSize),\n        _fileMatchSize2 = _slicedToArray(_fileMatchSize, 1),\n        sizeMatch = _fileMatchSize2[0];\n\n    var customErrors = validator ? validator(file) : null;\n    return accepted && sizeMatch && !customErrors;\n  });\n} // React's synthetic events has event.isPropagationStopped,\n// but to remain compatibility with other libs (Preact) fall back\n// to check event.cancelBubble\n\nexport function isPropagationStopped(event) {\n  if (typeof event.isPropagationStopped === \"function\") {\n    return event.isPropagationStopped();\n  } else if (typeof event.cancelBubble !== \"undefined\") {\n    return event.cancelBubble;\n  }\n\n  return false;\n}\nexport function isEvtWithFiles(event) {\n  if (!event.dataTransfer) {\n    return !!event.target && !!event.target.files;\n  } // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/types\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#file\n\n\n  return Array.prototype.some.call(event.dataTransfer.types, function (type) {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nexport function isKindFile(item) {\n  return _typeof(item) === \"object\" && item !== null && item.kind === \"file\";\n} // allow the entire document to be a drag target\n\nexport function onDocumentDragOver(event) {\n  event.preventDefault();\n}\n\nfunction isIe(userAgent) {\n  return userAgent.indexOf(\"MSIE\") !== -1 || userAgent.indexOf(\"Trident/\") !== -1;\n}\n\nfunction isEdge(userAgent) {\n  return userAgent.indexOf(\"Edge/\") !== -1;\n}\n\nexport function isIeOrEdge() {\n  var userAgent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;\n  return isIe(userAgent) || isEdge(userAgent);\n}\n/**\n * This is intended to be used to compose event handlers\n * They are executed in order until one of them calls `event.isPropagationStopped()`.\n * Note that the check is done on the first invoke too,\n * meaning that if propagation was stopped before invoking the fns,\n * no handlers will be executed.\n *\n * @param {Function} fns the event hanlder functions\n * @return {Function} the event handler to add to an element\n */\n\nexport function composeEventHandlers() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (event) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return fns.some(function (fn) {\n      if (!isPropagationStopped(event) && fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return isPropagationStopped(event);\n    });\n  };\n}\n/**\n * canUseFileSystemAccessAPI checks if the [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API)\n * is supported by the browser.\n * @returns {boolean}\n */\n\nexport function canUseFileSystemAccessAPI() {\n  return \"showOpenFilePicker\" in window;\n}\n/**\n * Convert the `{accept}` dropzone prop to the\n * `{types}` option for https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n *\n * @param {AcceptProp} accept\n * @returns {{accept: string[]}[]}\n */\n\nexport function pickerOptionsFromAccept(accept) {\n  if (isDefined(accept)) {\n    var acceptForPicker = Object.entries(accept).filter(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          mimeType = _ref3[0],\n          ext = _ref3[1];\n\n      var ok = true;\n\n      if (!isMIMEType(mimeType)) {\n        console.warn(\"Skipped \\\"\".concat(mimeType, \"\\\" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.\"));\n        ok = false;\n      }\n\n      if (!Array.isArray(ext) || !ext.every(isExt)) {\n        console.warn(\"Skipped \\\"\".concat(mimeType, \"\\\" because an invalid file extension was provided.\"));\n        ok = false;\n      }\n\n      return ok;\n    }).reduce(function (agg, _ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          mimeType = _ref5[0],\n          ext = _ref5[1];\n\n      return _objectSpread(_objectSpread({}, agg), {}, _defineProperty({}, mimeType, ext));\n    }, {});\n    return [{\n      // description is required due to https://crbug.com/1264708\n      description: \"Files\",\n      accept: acceptForPicker\n    }];\n  }\n\n  return accept;\n}\n/**\n * Convert the `{accept}` dropzone prop to an array of MIME types/extensions.\n * @param {AcceptProp} accept\n * @returns {string}\n */\n\nexport function acceptPropAsAcceptAttr(accept) {\n  if (isDefined(accept)) {\n    return Object.entries(accept).reduce(function (a, _ref6) {\n      var _ref7 = _slicedToArray(_ref6, 2),\n          mimeType = _ref7[0],\n          ext = _ref7[1];\n\n      return [].concat(_toConsumableArray(a), [mimeType], _toConsumableArray(ext));\n    }, []) // Silently discard invalid entries as pickerOptionsFromAccept warns about these\n    .filter(function (v) {\n      return isMIMEType(v) || isExt(v);\n    }).join(\",\");\n  }\n\n  return undefined;\n}\n/**\n * Check if v is an exception caused by aborting a request (e.g window.showOpenFilePicker()).\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/DOMException.\n * @param {any} v\n * @returns {boolean} True if v is an abort exception.\n */\n\nexport function isAbort(v) {\n  return v instanceof DOMException && (v.name === \"AbortError\" || v.code === v.ABORT_ERR);\n}\n/**\n * Check if v is a security error.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/DOMException.\n * @param {any} v\n * @returns {boolean} True if v is a security error.\n */\n\nexport function isSecurityError(v) {\n  return v instanceof DOMException && (v.name === \"SecurityError\" || v.code === v.SECURITY_ERR);\n}\n/**\n * Check if v is a MIME type string.\n *\n * See accepted format: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers.\n *\n * @param {string} v\n */\n\nexport function isMIMEType(v) {\n  return v === \"audio/*\" || v === \"video/*\" || v === \"image/*\" || v === \"text/*\" || v === \"application/*\" || /\\w+\\/[-+.\\w]+/g.test(v);\n}\n/**\n * Check if v is a file extension.\n * @param {string} v\n */\n\nexport function isExt(v) {\n  return /^.*\\.[\\w]+$/.test(v);\n}\n/**\n * @typedef {Object.<string, string[]>} AcceptProp\n */\n\n/**\n * @typedef {object} FileError\n * @property {string} message\n * @property {ErrorCode|string} code\n */\n\n/**\n * @typedef {\"file-invalid-type\"|\"file-too-large\"|\"file-too-small\"|\"too-many-files\"} ErrorCode\n */","var _excluded = [\"children\"],\n    _excluded2 = [\"open\"],\n    _excluded3 = [\"refKey\", \"role\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"onClick\", \"onDragEnter\", \"onDragOver\", \"onDragLeave\", \"onDrop\"],\n    _excluded4 = [\"refKey\", \"onChange\", \"onClick\"];\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* eslint prefer-template: 0 */\nimport React, { forwardRef, Fragment, useCallback, useEffect, useImperativeHandle, useMemo, useReducer, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { fromEvent } from \"file-selector\";\nimport { acceptPropAsAcceptAttr, allFilesAccepted, composeEventHandlers, fileAccepted, fileMatchSize, canUseFileSystemAccessAPI, isAbort, isEvtWithFiles, isIeOrEdge, isPropagationStopped, isSecurityError, onDocumentDragOver, pickerOptionsFromAccept, TOO_MANY_FILES_REJECTION } from \"./utils/index\";\n/**\n * Convenience wrapper component for the `useDropzone` hook\n *\n * ```jsx\n * <Dropzone>\n *   {({getRootProps, getInputProps}) => (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag 'n' drop some files here, or click to select files</p>\n *     </div>\n *   )}\n * </Dropzone>\n * ```\n */\n\nvar Dropzone = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      params = _objectWithoutProperties(_ref, _excluded);\n\n  var _useDropzone = useDropzone(params),\n      open = _useDropzone.open,\n      props = _objectWithoutProperties(_useDropzone, _excluded2);\n\n  useImperativeHandle(ref, function () {\n    return {\n      open: open\n    };\n  }, [open]); // TODO: Figure out why react-styleguidist cannot create docs if we don't return a jsx element\n\n  return /*#__PURE__*/React.createElement(Fragment, null, children(_objectSpread(_objectSpread({}, props), {}, {\n    open: open\n  })));\n});\nDropzone.displayName = \"Dropzone\"; // Add default props for react-docgen\n\nvar defaultProps = {\n  disabled: false,\n  getFilesFromEvent: fromEvent,\n  maxSize: Infinity,\n  minSize: 0,\n  multiple: true,\n  maxFiles: 0,\n  preventDropOnDocument: true,\n  noClick: false,\n  noKeyboard: false,\n  noDrag: false,\n  noDragEventsBubbling: false,\n  validator: null,\n  useFsAccessApi: false,\n  autoFocus: false\n};\nDropzone.defaultProps = defaultProps;\nDropzone.propTypes = {\n  /**\n   * Render function that exposes the dropzone state and prop getter fns\n   *\n   * @param {object} params\n   * @param {Function} params.getRootProps Returns the props you should apply to the root drop container you render\n   * @param {Function} params.getInputProps Returns the props you should apply to hidden file input you render\n   * @param {Function} params.open Open the native file selection dialog\n   * @param {boolean} params.isFocused Dropzone area is in focus\n   * @param {boolean} params.isFileDialogActive File dialog is opened\n   * @param {boolean} params.isDragActive Active drag is in progress\n   * @param {boolean} params.isDragAccept Dragged files are accepted\n   * @param {boolean} params.isDragReject Some dragged files are rejected\n   * @param {File[]} params.acceptedFiles Accepted files\n   * @param {FileRejection[]} params.fileRejections Rejected files and why they were rejected\n   */\n  children: PropTypes.func,\n\n  /**\n   * Set accepted file types.\n   * Checkout https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker types option for more information.\n   * Keep in mind that mime type determination is not reliable across platforms. CSV files,\n   * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under\n   * Windows. In some cases there might not be a mime type set at all (https://github.com/react-dropzone/react-dropzone/issues/276).\n   */\n  accept: PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),\n\n  /**\n   * Allow drag 'n' drop (or selection from the file dialog) of multiple files\n   */\n  multiple: PropTypes.bool,\n\n  /**\n   * If false, allow dropped items to take over the current browser window\n   */\n  preventDropOnDocument: PropTypes.bool,\n\n  /**\n   * If true, disables click to open the native file selection dialog\n   */\n  noClick: PropTypes.bool,\n\n  /**\n   * If true, disables SPACE/ENTER to open the native file selection dialog.\n   * Note that it also stops tracking the focus state.\n   */\n  noKeyboard: PropTypes.bool,\n\n  /**\n   * If true, disables drag 'n' drop\n   */\n  noDrag: PropTypes.bool,\n\n  /**\n   * If true, stops drag event propagation to parents\n   */\n  noDragEventsBubbling: PropTypes.bool,\n\n  /**\n   * Minimum file size (in bytes)\n   */\n  minSize: PropTypes.number,\n\n  /**\n   * Maximum file size (in bytes)\n   */\n  maxSize: PropTypes.number,\n\n  /**\n   * Maximum accepted number of files\n   * The default value is 0 which means there is no limitation to how many files are accepted.\n   */\n  maxFiles: PropTypes.number,\n\n  /**\n   * Enable/disable the dropzone\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Use this to provide a custom file aggregator\n   *\n   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n   */\n  getFilesFromEvent: PropTypes.func,\n\n  /**\n   * Cb for when closing the file dialog with no selection\n   */\n  onFileDialogCancel: PropTypes.func,\n\n  /**\n   * Cb for when opening the file dialog\n   */\n  onFileDialogOpen: PropTypes.func,\n\n  /**\n   * Set to true to use the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API\n   * to open the file picker instead of using an `<input type=\"file\">` click event.\n   */\n  useFsAccessApi: PropTypes.bool,\n\n  /**\n   * Set to true to focus the root element on render\n   */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * Cb for when the `dragenter` event occurs.\n   *\n   * @param {DragEvent} event\n   */\n  onDragEnter: PropTypes.func,\n\n  /**\n   * Cb for when the `dragleave` event occurs\n   *\n   * @param {DragEvent} event\n   */\n  onDragLeave: PropTypes.func,\n\n  /**\n   * Cb for when the `dragover` event occurs\n   *\n   * @param {DragEvent} event\n   */\n  onDragOver: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that this callback is invoked after the `getFilesFromEvent` callback is done.\n   *\n   * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.\n   * `accept` must be a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) or a valid file extension.\n   * If `multiple` is set to false and additional files are dropped,\n   * all files besides the first will be rejected.\n   * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.\n   *\n   * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.\n   * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.\n   *\n   * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.\n   * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:\n   *\n   * ```js\n   * function onDrop(acceptedFiles) {\n   *   const req = request.post('/upload')\n   *   acceptedFiles.forEach(file => {\n   *     req.attach(file.name, file)\n   *   })\n   *   req.end(callback)\n   * }\n   * ```\n   *\n   * @param {File[]} acceptedFiles\n   * @param {FileRejection[]} fileRejections\n   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n   */\n  onDrop: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that if no files are accepted, this callback is not invoked.\n   *\n   * @param {File[]} files\n   * @param {(DragEvent|Event)} event\n   */\n  onDropAccepted: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that if no files are rejected, this callback is not invoked.\n   *\n   * @param {FileRejection[]} fileRejections\n   * @param {(DragEvent|Event)} event\n   */\n  onDropRejected: PropTypes.func,\n\n  /**\n   * Cb for when there's some error from any of the promises.\n   *\n   * @param {Error} error\n   */\n  onError: PropTypes.func,\n\n  /**\n   * Custom validation function. It must return null if there's no errors.\n   * @param {File} file\n   * @returns {FileError|FileError[]|null}\n   */\n  validator: PropTypes.func\n};\nexport default Dropzone;\n/**\n * A function that is invoked for the `dragenter`,\n * `dragover` and `dragleave` events.\n * It is not invoked if the items are not files (such as link, text, etc.).\n *\n * @callback dragCb\n * @param {DragEvent} event\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n * It is not invoked if the items are not files (such as link, text, etc.).\n *\n * @callback dropCb\n * @param {File[]} acceptedFiles List of accepted files\n * @param {FileRejection[]} fileRejections List of rejected files and why they were rejected\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n * It is not invoked if the items are files (such as link, text, etc.).\n *\n * @callback dropAcceptedCb\n * @param {File[]} files List of accepted files that meet the given criteria\n * (`accept`, `multiple`, `minSize`, `maxSize`)\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n *\n * @callback dropRejectedCb\n * @param {File[]} files List of rejected files that do not meet the given criteria\n * (`accept`, `multiple`, `minSize`, `maxSize`)\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is used aggregate files,\n * in a asynchronous fashion, from drag or input change events.\n *\n * @callback getFilesFromEvent\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n * @returns {(File[]|Promise<File[]>)}\n */\n\n/**\n * An object with the current dropzone state.\n *\n * @typedef {object} DropzoneState\n * @property {boolean} isFocused Dropzone area is in focus\n * @property {boolean} isFileDialogActive File dialog is opened\n * @property {boolean} isDragActive Active drag is in progress\n * @property {boolean} isDragAccept Dragged files are accepted\n * @property {boolean} isDragReject Some dragged files are rejected\n * @property {File[]} acceptedFiles Accepted files\n * @property {FileRejection[]} fileRejections Rejected files and why they were rejected\n */\n\n/**\n * An object with the dropzone methods.\n *\n * @typedef {object} DropzoneMethods\n * @property {Function} getRootProps Returns the props you should apply to the root drop container you render\n * @property {Function} getInputProps Returns the props you should apply to hidden file input you render\n * @property {Function} open Open the native file selection dialog\n */\n\nvar initialState = {\n  isFocused: false,\n  isFileDialogActive: false,\n  isDragActive: false,\n  isDragAccept: false,\n  isDragReject: false,\n  acceptedFiles: [],\n  fileRejections: []\n};\n/**\n * A React hook that creates a drag 'n' drop area.\n *\n * ```jsx\n * function MyDropzone(props) {\n *   const {getRootProps, getInputProps} = useDropzone({\n *     onDrop: acceptedFiles => {\n *       // do something with the File objects, e.g. upload to some server\n *     }\n *   });\n *   return (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag and drop some files here, or click to select files</p>\n *     </div>\n *   )\n * }\n * ```\n *\n * @function useDropzone\n *\n * @param {object} props\n * @param {import(\"./utils\").AcceptProp} [props.accept] Set accepted file types.\n * Checkout https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker types option for more information.\n * Keep in mind that mime type determination is not reliable across platforms. CSV files,\n * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under\n * Windows. In some cases there might not be a mime type set at all (https://github.com/react-dropzone/react-dropzone/issues/276).\n * @param {boolean} [props.multiple=true] Allow drag 'n' drop (or selection from the file dialog) of multiple files\n * @param {boolean} [props.preventDropOnDocument=true] If false, allow dropped items to take over the current browser window\n * @param {boolean} [props.noClick=false] If true, disables click to open the native file selection dialog\n * @param {boolean} [props.noKeyboard=false] If true, disables SPACE/ENTER to open the native file selection dialog.\n * Note that it also stops tracking the focus state.\n * @param {boolean} [props.noDrag=false] If true, disables drag 'n' drop\n * @param {boolean} [props.noDragEventsBubbling=false] If true, stops drag event propagation to parents\n * @param {number} [props.minSize=0] Minimum file size (in bytes)\n * @param {number} [props.maxSize=Infinity] Maximum file size (in bytes)\n * @param {boolean} [props.disabled=false] Enable/disable the dropzone\n * @param {getFilesFromEvent} [props.getFilesFromEvent] Use this to provide a custom file aggregator\n * @param {Function} [props.onFileDialogCancel] Cb for when closing the file dialog with no selection\n * @param {boolean} [props.useFsAccessApi] Set to true to use the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API\n * to open the file picker instead of using an `<input type=\"file\">` click event.\n * @param {boolean} autoFocus Set to true to auto focus the root element.\n * @param {Function} [props.onFileDialogOpen] Cb for when opening the file dialog\n * @param {dragCb} [props.onDragEnter] Cb for when the `dragenter` event occurs.\n * @param {dragCb} [props.onDragLeave] Cb for when the `dragleave` event occurs\n * @param {dragCb} [props.onDragOver] Cb for when the `dragover` event occurs\n * @param {dropCb} [props.onDrop] Cb for when the `drop` event occurs.\n * Note that this callback is invoked after the `getFilesFromEvent` callback is done.\n *\n * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.\n * `accept` must be an object with keys as a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) and the value an array of file extensions (optional).\n * If `multiple` is set to false and additional files are dropped,\n * all files besides the first will be rejected.\n * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.\n *\n * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.\n * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.\n *\n * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.\n * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:\n *\n * ```js\n * function onDrop(acceptedFiles) {\n *   const req = request.post('/upload')\n *   acceptedFiles.forEach(file => {\n *     req.attach(file.name, file)\n *   })\n *   req.end(callback)\n * }\n * ```\n * @param {dropAcceptedCb} [props.onDropAccepted]\n * @param {dropRejectedCb} [props.onDropRejected]\n * @param {(error: Error) => void} [props.onError]\n *\n * @returns {DropzoneState & DropzoneMethods}\n */\n\nexport function useDropzone() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _defaultProps$props = _objectSpread(_objectSpread({}, defaultProps), props),\n      accept = _defaultProps$props.accept,\n      disabled = _defaultProps$props.disabled,\n      getFilesFromEvent = _defaultProps$props.getFilesFromEvent,\n      maxSize = _defaultProps$props.maxSize,\n      minSize = _defaultProps$props.minSize,\n      multiple = _defaultProps$props.multiple,\n      maxFiles = _defaultProps$props.maxFiles,\n      onDragEnter = _defaultProps$props.onDragEnter,\n      onDragLeave = _defaultProps$props.onDragLeave,\n      onDragOver = _defaultProps$props.onDragOver,\n      onDrop = _defaultProps$props.onDrop,\n      onDropAccepted = _defaultProps$props.onDropAccepted,\n      onDropRejected = _defaultProps$props.onDropRejected,\n      onFileDialogCancel = _defaultProps$props.onFileDialogCancel,\n      onFileDialogOpen = _defaultProps$props.onFileDialogOpen,\n      useFsAccessApi = _defaultProps$props.useFsAccessApi,\n      autoFocus = _defaultProps$props.autoFocus,\n      preventDropOnDocument = _defaultProps$props.preventDropOnDocument,\n      noClick = _defaultProps$props.noClick,\n      noKeyboard = _defaultProps$props.noKeyboard,\n      noDrag = _defaultProps$props.noDrag,\n      noDragEventsBubbling = _defaultProps$props.noDragEventsBubbling,\n      onError = _defaultProps$props.onError,\n      validator = _defaultProps$props.validator;\n\n  var acceptAttr = useMemo(function () {\n    return acceptPropAsAcceptAttr(accept);\n  }, [accept]);\n  var pickerTypes = useMemo(function () {\n    return pickerOptionsFromAccept(accept);\n  }, [accept]);\n  var onFileDialogOpenCb = useMemo(function () {\n    return typeof onFileDialogOpen === \"function\" ? onFileDialogOpen : noop;\n  }, [onFileDialogOpen]);\n  var onFileDialogCancelCb = useMemo(function () {\n    return typeof onFileDialogCancel === \"function\" ? onFileDialogCancel : noop;\n  }, [onFileDialogCancel]);\n  /**\n   * @constant\n   * @type {React.MutableRefObject<HTMLElement>}\n   */\n\n  var rootRef = useRef(null);\n  var inputRef = useRef(null);\n\n  var _useReducer = useReducer(reducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var isFocused = state.isFocused,\n      isFileDialogActive = state.isFileDialogActive;\n  var fsAccessApiWorksRef = useRef(typeof window !== \"undefined\" && window.isSecureContext && useFsAccessApi && canUseFileSystemAccessAPI()); // Update file dialog active state when the window is focused on\n\n  var onWindowFocus = function onWindowFocus() {\n    // Execute the timeout only if the file dialog is opened in the browser\n    if (!fsAccessApiWorksRef.current && isFileDialogActive) {\n      setTimeout(function () {\n        if (inputRef.current) {\n          var files = inputRef.current.files;\n\n          if (!files.length) {\n            dispatch({\n              type: \"closeDialog\"\n            });\n            onFileDialogCancelCb();\n          }\n        }\n      }, 300);\n    }\n  };\n\n  useEffect(function () {\n    window.addEventListener(\"focus\", onWindowFocus, false);\n    return function () {\n      window.removeEventListener(\"focus\", onWindowFocus, false);\n    };\n  }, [inputRef, isFileDialogActive, onFileDialogCancelCb, fsAccessApiWorksRef]);\n  var dragTargetsRef = useRef([]);\n\n  var onDocumentDrop = function onDocumentDrop(event) {\n    if (rootRef.current && rootRef.current.contains(event.target)) {\n      // If we intercepted an event for our instance, let it propagate down to the instance's onDrop handler\n      return;\n    }\n\n    event.preventDefault();\n    dragTargetsRef.current = [];\n  };\n\n  useEffect(function () {\n    if (preventDropOnDocument) {\n      document.addEventListener(\"dragover\", onDocumentDragOver, false);\n      document.addEventListener(\"drop\", onDocumentDrop, false);\n    }\n\n    return function () {\n      if (preventDropOnDocument) {\n        document.removeEventListener(\"dragover\", onDocumentDragOver);\n        document.removeEventListener(\"drop\", onDocumentDrop);\n      }\n    };\n  }, [rootRef, preventDropOnDocument]); // Auto focus the root when autoFocus is true\n\n  useEffect(function () {\n    if (!disabled && autoFocus && rootRef.current) {\n      rootRef.current.focus();\n    }\n\n    return function () {};\n  }, [rootRef, autoFocus, disabled]);\n  var onErrCb = useCallback(function (e) {\n    if (onError) {\n      onError(e);\n    } else {\n      // Let the user know something's gone wrong if they haven't provided the onError cb.\n      console.error(e);\n    }\n  }, [onError]);\n  var onDragEnterCb = useCallback(function (event) {\n    event.preventDefault(); // Persist here because we need the event later after getFilesFromEvent() is done\n\n    event.persist();\n    stopPropagation(event);\n    dragTargetsRef.current = [].concat(_toConsumableArray(dragTargetsRef.current), [event.target]);\n\n    if (isEvtWithFiles(event)) {\n      Promise.resolve(getFilesFromEvent(event)).then(function (files) {\n        if (isPropagationStopped(event) && !noDragEventsBubbling) {\n          return;\n        }\n\n        var fileCount = files.length;\n        var isDragAccept = fileCount > 0 && allFilesAccepted({\n          files: files,\n          accept: acceptAttr,\n          minSize: minSize,\n          maxSize: maxSize,\n          multiple: multiple,\n          maxFiles: maxFiles,\n          validator: validator\n        });\n        var isDragReject = fileCount > 0 && !isDragAccept;\n        dispatch({\n          isDragAccept: isDragAccept,\n          isDragReject: isDragReject,\n          isDragActive: true,\n          type: \"setDraggedFiles\"\n        });\n\n        if (onDragEnter) {\n          onDragEnter(event);\n        }\n      }).catch(function (e) {\n        return onErrCb(e);\n      });\n    }\n  }, [getFilesFromEvent, onDragEnter, onErrCb, noDragEventsBubbling, acceptAttr, minSize, maxSize, multiple, maxFiles, validator]);\n  var onDragOverCb = useCallback(function (event) {\n    event.preventDefault();\n    event.persist();\n    stopPropagation(event);\n    var hasFiles = isEvtWithFiles(event);\n\n    if (hasFiles && event.dataTransfer) {\n      try {\n        event.dataTransfer.dropEffect = \"copy\";\n      } catch (_unused) {}\n      /* eslint-disable-line no-empty */\n\n    }\n\n    if (hasFiles && onDragOver) {\n      onDragOver(event);\n    }\n\n    return false;\n  }, [onDragOver, noDragEventsBubbling]);\n  var onDragLeaveCb = useCallback(function (event) {\n    event.preventDefault();\n    event.persist();\n    stopPropagation(event); // Only deactivate once the dropzone and all children have been left\n\n    var targets = dragTargetsRef.current.filter(function (target) {\n      return rootRef.current && rootRef.current.contains(target);\n    }); // Make sure to remove a target present multiple times only once\n    // (Firefox may fire dragenter/dragleave multiple times on the same element)\n\n    var targetIdx = targets.indexOf(event.target);\n\n    if (targetIdx !== -1) {\n      targets.splice(targetIdx, 1);\n    }\n\n    dragTargetsRef.current = targets;\n\n    if (targets.length > 0) {\n      return;\n    }\n\n    dispatch({\n      type: \"setDraggedFiles\",\n      isDragActive: false,\n      isDragAccept: false,\n      isDragReject: false\n    });\n\n    if (isEvtWithFiles(event) && onDragLeave) {\n      onDragLeave(event);\n    }\n  }, [rootRef, onDragLeave, noDragEventsBubbling]);\n  var setFiles = useCallback(function (files, event) {\n    var acceptedFiles = [];\n    var fileRejections = [];\n    files.forEach(function (file) {\n      var _fileAccepted = fileAccepted(file, acceptAttr),\n          _fileAccepted2 = _slicedToArray(_fileAccepted, 2),\n          accepted = _fileAccepted2[0],\n          acceptError = _fileAccepted2[1];\n\n      var _fileMatchSize = fileMatchSize(file, minSize, maxSize),\n          _fileMatchSize2 = _slicedToArray(_fileMatchSize, 2),\n          sizeMatch = _fileMatchSize2[0],\n          sizeError = _fileMatchSize2[1];\n\n      var customErrors = validator ? validator(file) : null;\n\n      if (accepted && sizeMatch && !customErrors) {\n        acceptedFiles.push(file);\n      } else {\n        var errors = [acceptError, sizeError];\n\n        if (customErrors) {\n          errors = errors.concat(customErrors);\n        }\n\n        fileRejections.push({\n          file: file,\n          errors: errors.filter(function (e) {\n            return e;\n          })\n        });\n      }\n    });\n\n    if (!multiple && acceptedFiles.length > 1 || multiple && maxFiles >= 1 && acceptedFiles.length > maxFiles) {\n      // Reject everything and empty accepted files\n      acceptedFiles.forEach(function (file) {\n        fileRejections.push({\n          file: file,\n          errors: [TOO_MANY_FILES_REJECTION]\n        });\n      });\n      acceptedFiles.splice(0);\n    }\n\n    dispatch({\n      acceptedFiles: acceptedFiles,\n      fileRejections: fileRejections,\n      isDragReject: fileRejections.length > 0,\n      type: \"setFiles\"\n    });\n\n    if (onDrop) {\n      onDrop(acceptedFiles, fileRejections, event);\n    }\n\n    if (fileRejections.length > 0 && onDropRejected) {\n      onDropRejected(fileRejections, event);\n    }\n\n    if (acceptedFiles.length > 0 && onDropAccepted) {\n      onDropAccepted(acceptedFiles, event);\n    }\n  }, [dispatch, multiple, acceptAttr, minSize, maxSize, maxFiles, onDrop, onDropAccepted, onDropRejected, validator]);\n  var onDropCb = useCallback(function (event) {\n    event.preventDefault(); // Persist here because we need the event later after getFilesFromEvent() is done\n\n    event.persist();\n    stopPropagation(event);\n    dragTargetsRef.current = [];\n\n    if (isEvtWithFiles(event)) {\n      Promise.resolve(getFilesFromEvent(event)).then(function (files) {\n        if (isPropagationStopped(event) && !noDragEventsBubbling) {\n          return;\n        }\n\n        setFiles(files, event);\n      }).catch(function (e) {\n        return onErrCb(e);\n      });\n    }\n\n    dispatch({\n      type: \"reset\"\n    });\n  }, [getFilesFromEvent, setFiles, onErrCb, noDragEventsBubbling]); // Fn for opening the file dialog programmatically\n\n  var openFileDialog = useCallback(function () {\n    // No point to use FS access APIs if context is not secure\n    // https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#feature_detection\n    if (fsAccessApiWorksRef.current) {\n      dispatch({\n        type: \"openDialog\"\n      });\n      onFileDialogOpenCb(); // https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n\n      var opts = {\n        multiple: multiple,\n        types: pickerTypes\n      };\n      window.showOpenFilePicker(opts).then(function (handles) {\n        return getFilesFromEvent(handles);\n      }).then(function (files) {\n        setFiles(files, null);\n        dispatch({\n          type: \"closeDialog\"\n        });\n      }).catch(function (e) {\n        // AbortError means the user canceled\n        if (isAbort(e)) {\n          onFileDialogCancelCb(e);\n          dispatch({\n            type: \"closeDialog\"\n          });\n        } else if (isSecurityError(e)) {\n          fsAccessApiWorksRef.current = false; // CORS, so cannot use this API\n          // Try using the input\n\n          if (inputRef.current) {\n            inputRef.current.value = null;\n            inputRef.current.click();\n          } else {\n            onErrCb(new Error(\"Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.\"));\n          }\n        } else {\n          onErrCb(e);\n        }\n      });\n      return;\n    }\n\n    if (inputRef.current) {\n      dispatch({\n        type: \"openDialog\"\n      });\n      onFileDialogOpenCb();\n      inputRef.current.value = null;\n      inputRef.current.click();\n    }\n  }, [dispatch, onFileDialogOpenCb, onFileDialogCancelCb, useFsAccessApi, setFiles, onErrCb, pickerTypes, multiple]); // Cb to open the file dialog when SPACE/ENTER occurs on the dropzone\n\n  var onKeyDownCb = useCallback(function (event) {\n    // Ignore keyboard events bubbling up the DOM tree\n    if (!rootRef.current || !rootRef.current.isEqualNode(event.target)) {\n      return;\n    }\n\n    if (event.key === \" \" || event.key === \"Enter\" || event.keyCode === 32 || event.keyCode === 13) {\n      event.preventDefault();\n      openFileDialog();\n    }\n  }, [rootRef, openFileDialog]); // Update focus state for the dropzone\n\n  var onFocusCb = useCallback(function () {\n    dispatch({\n      type: \"focus\"\n    });\n  }, []);\n  var onBlurCb = useCallback(function () {\n    dispatch({\n      type: \"blur\"\n    });\n  }, []); // Cb to open the file dialog when click occurs on the dropzone\n\n  var onClickCb = useCallback(function () {\n    if (noClick) {\n      return;\n    } // In IE11/Edge the file-browser dialog is blocking, therefore, use setTimeout()\n    // to ensure React can handle state changes\n    // See: https://github.com/react-dropzone/react-dropzone/issues/450\n\n\n    if (isIeOrEdge()) {\n      setTimeout(openFileDialog, 0);\n    } else {\n      openFileDialog();\n    }\n  }, [noClick, openFileDialog]);\n\n  var composeHandler = function composeHandler(fn) {\n    return disabled ? null : fn;\n  };\n\n  var composeKeyboardHandler = function composeKeyboardHandler(fn) {\n    return noKeyboard ? null : composeHandler(fn);\n  };\n\n  var composeDragHandler = function composeDragHandler(fn) {\n    return noDrag ? null : composeHandler(fn);\n  };\n\n  var stopPropagation = function stopPropagation(event) {\n    if (noDragEventsBubbling) {\n      event.stopPropagation();\n    }\n  };\n\n  var getRootProps = useMemo(function () {\n    return function () {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? \"ref\" : _ref2$refKey,\n          role = _ref2.role,\n          onKeyDown = _ref2.onKeyDown,\n          onFocus = _ref2.onFocus,\n          onBlur = _ref2.onBlur,\n          onClick = _ref2.onClick,\n          onDragEnter = _ref2.onDragEnter,\n          onDragOver = _ref2.onDragOver,\n          onDragLeave = _ref2.onDragLeave,\n          onDrop = _ref2.onDrop,\n          rest = _objectWithoutProperties(_ref2, _excluded3);\n\n      return _objectSpread(_objectSpread(_defineProperty({\n        onKeyDown: composeKeyboardHandler(composeEventHandlers(onKeyDown, onKeyDownCb)),\n        onFocus: composeKeyboardHandler(composeEventHandlers(onFocus, onFocusCb)),\n        onBlur: composeKeyboardHandler(composeEventHandlers(onBlur, onBlurCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onClickCb)),\n        onDragEnter: composeDragHandler(composeEventHandlers(onDragEnter, onDragEnterCb)),\n        onDragOver: composeDragHandler(composeEventHandlers(onDragOver, onDragOverCb)),\n        onDragLeave: composeDragHandler(composeEventHandlers(onDragLeave, onDragLeaveCb)),\n        onDrop: composeDragHandler(composeEventHandlers(onDrop, onDropCb)),\n        role: typeof role === \"string\" && role !== \"\" ? role : \"presentation\"\n      }, refKey, rootRef), !disabled && !noKeyboard ? {\n        tabIndex: 0\n      } : {}), rest);\n    };\n  }, [rootRef, onKeyDownCb, onFocusCb, onBlurCb, onClickCb, onDragEnterCb, onDragOverCb, onDragLeaveCb, onDropCb, noKeyboard, noDrag, disabled]);\n  var onInputElementClick = useCallback(function (event) {\n    event.stopPropagation();\n  }, []);\n  var getInputProps = useMemo(function () {\n    return function () {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$refKey = _ref3.refKey,\n          refKey = _ref3$refKey === void 0 ? \"ref\" : _ref3$refKey,\n          onChange = _ref3.onChange,\n          onClick = _ref3.onClick,\n          rest = _objectWithoutProperties(_ref3, _excluded4);\n\n      var inputProps = _defineProperty({\n        accept: acceptAttr,\n        multiple: multiple,\n        type: \"file\",\n        style: {\n          border: 0,\n          clip: \"rect(0, 0, 0, 0)\",\n          clipPath: \"inset(50%)\",\n          height: \"1px\",\n          margin: \"0 -1px -1px 0\",\n          overflow: \"hidden\",\n          padding: 0,\n          position: \"absolute\",\n          width: \"1px\",\n          whiteSpace: \"nowrap\"\n        },\n        onChange: composeHandler(composeEventHandlers(onChange, onDropCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onInputElementClick)),\n        tabIndex: -1\n      }, refKey, inputRef);\n\n      return _objectSpread(_objectSpread({}, inputProps), rest);\n    };\n  }, [inputRef, accept, multiple, onDropCb, disabled]);\n  return _objectSpread(_objectSpread({}, state), {}, {\n    isFocused: isFocused && !disabled,\n    getRootProps: getRootProps,\n    getInputProps: getInputProps,\n    rootRef: rootRef,\n    inputRef: inputRef,\n    open: composeHandler(openFileDialog)\n  });\n}\n/**\n * @param {DropzoneState} state\n * @param {{type: string} & DropzoneState} action\n * @returns {DropzoneState}\n */\n\nfunction reducer(state, action) {\n  /* istanbul ignore next */\n  switch (action.type) {\n    case \"focus\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFocused: true\n      });\n\n    case \"blur\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFocused: false\n      });\n\n    case \"openDialog\":\n      return _objectSpread(_objectSpread({}, initialState), {}, {\n        isFileDialogActive: true\n      });\n\n    case \"closeDialog\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFileDialogActive: false\n      });\n\n    case \"setDraggedFiles\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isDragActive: action.isDragActive,\n        isDragAccept: action.isDragAccept,\n        isDragReject: action.isDragReject\n      });\n\n    case \"setFiles\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        acceptedFiles: action.acceptedFiles,\n        fileRejections: action.fileRejections,\n        isDragReject: action.isDragReject\n      });\n\n    case \"reset\":\n      return _objectSpread({}, initialState);\n\n    default:\n      return state;\n  }\n}\n\nfunction noop() {}\n\nexport { ErrorCode } from \"./utils\";","/**\n * Copyright 2004-present Facebook. All Rights Reserved.\n *\n * @providesModule UserAgent_DEPRECATED\n */\n\n/**\n *  Provides entirely client-side User Agent and OS detection. You should prefer\n *  the non-deprecated UserAgent module when possible, which exposes our\n *  authoritative server-side PHP-based detection to the client.\n *\n *  Usage is straightforward:\n *\n *    if (UserAgent_DEPRECATED.ie()) {\n *      //  IE\n *    }\n *\n *  You can also do version checks:\n *\n *    if (UserAgent_DEPRECATED.ie() >= 7) {\n *      //  IE7 or better\n *    }\n *\n *  The browser functions will return NaN if the browser does not match, so\n *  you can also do version compares the other way:\n *\n *    if (UserAgent_DEPRECATED.ie() < 7) {\n *      //  IE6 or worse\n *    }\n *\n *  Note that the version is a float and may include a minor version number,\n *  so you should always use range operators to perform comparisons, not\n *  strict equality.\n *\n *  **Note:** You should **strongly** prefer capability detection to browser\n *  version detection where it's reasonable:\n *\n *    http://www.quirksmode.org/js/support.html\n *\n *  Further, we have a large number of mature wrapper functions and classes\n *  which abstract away many browser irregularities. Check the documentation,\n *  grep for things, or ask on javascript@lists.facebook.com before writing yet\n *  another copy of \"event || window.event\".\n *\n */\n\nvar _populated = false;\n\n// Browsers\nvar _ie, _firefox, _opera, _webkit, _chrome;\n\n// Actual IE browser for compatibility mode\nvar _ie_real_version;\n\n// Platforms\nvar _osx, _windows, _linux, _android;\n\n// Architectures\nvar _win64;\n\n// Devices\nvar _iphone, _ipad, _native;\n\nvar _mobile;\n\nfunction _populate() {\n  if (_populated) {\n    return;\n  }\n\n  _populated = true;\n\n  // To work around buggy JS libraries that can't handle multi-digit\n  // version numbers, Opera 10's user agent string claims it's Opera\n  // 9, then later includes a Version/X.Y field:\n  //\n  // Opera/9.80 (foo) Presto/2.2.15 Version/10.10\n  var uas = navigator.userAgent;\n  var agent = /(?:MSIE.(\\d+\\.\\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\\d+\\.\\d+))|(?:Opera(?:.+Version.|.)(\\d+\\.\\d+))|(?:AppleWebKit.(\\d+(?:\\.\\d+)?))|(?:Trident\\/\\d+\\.\\d+.*rv:(\\d+\\.\\d+))/.exec(uas);\n  var os    = /(Mac OS X)|(Windows)|(Linux)/.exec(uas);\n\n  _iphone = /\\b(iPhone|iP[ao]d)/.exec(uas);\n  _ipad = /\\b(iP[ao]d)/.exec(uas);\n  _android = /Android/i.exec(uas);\n  _native = /FBAN\\/\\w+;/i.exec(uas);\n  _mobile = /Mobile/i.exec(uas);\n\n  // Note that the IE team blog would have you believe you should be checking\n  // for 'Win64; x64'.  But MSDN then reveals that you can actually be coming\n  // from either x64 or ia64;  so ultimately, you should just check for Win64\n  // as in indicator of whether you're in 64-bit IE.  32-bit IE on 64-bit\n  // Windows will send 'WOW64' instead.\n  _win64 = !!(/Win64/.exec(uas));\n\n  if (agent) {\n    _ie = agent[1] ? parseFloat(agent[1]) : (\n          agent[5] ? parseFloat(agent[5]) : NaN);\n    // IE compatibility mode\n    if (_ie && document && document.documentMode) {\n      _ie = document.documentMode;\n    }\n    // grab the \"true\" ie version from the trident token if available\n    var trident = /(?:Trident\\/(\\d+.\\d+))/.exec(uas);\n    _ie_real_version = trident ? parseFloat(trident[1]) + 4 : _ie;\n\n    _firefox = agent[2] ? parseFloat(agent[2]) : NaN;\n    _opera   = agent[3] ? parseFloat(agent[3]) : NaN;\n    _webkit  = agent[4] ? parseFloat(agent[4]) : NaN;\n    if (_webkit) {\n      // We do not add the regexp to the above test, because it will always\n      // match 'safari' only since 'AppleWebKit' appears before 'Chrome' in\n      // the userAgent string.\n      agent = /(?:Chrome\\/(\\d+\\.\\d+))/.exec(uas);\n      _chrome = agent && agent[1] ? parseFloat(agent[1]) : NaN;\n    } else {\n      _chrome = NaN;\n    }\n  } else {\n    _ie = _firefox = _opera = _chrome = _webkit = NaN;\n  }\n\n  if (os) {\n    if (os[1]) {\n      // Detect OS X version.  If no version number matches, set _osx to true.\n      // Version examples:  10, 10_6_1, 10.7\n      // Parses version number as a float, taking only first two sets of\n      // digits.  If only one set of digits is found, returns just the major\n      // version number.\n      var ver = /(?:Mac OS X (\\d+(?:[._]\\d+)?))/.exec(uas);\n\n      _osx = ver ? parseFloat(ver[1].replace('_', '.')) : true;\n    } else {\n      _osx = false;\n    }\n    _windows = !!os[2];\n    _linux   = !!os[3];\n  } else {\n    _osx = _windows = _linux = false;\n  }\n}\n\nvar UserAgent_DEPRECATED = {\n\n  /**\n   *  Check if the UA is Internet Explorer.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  ie: function() {\n    return _populate() || _ie;\n  },\n\n  /**\n   * Check if we're in Internet Explorer compatibility mode.\n   *\n   * @return bool true if in compatibility mode, false if\n   * not compatibility mode or not ie\n   */\n  ieCompatibilityMode: function() {\n    return _populate() || (_ie_real_version > _ie);\n  },\n\n\n  /**\n   * Whether the browser is 64-bit IE.  Really, this is kind of weak sauce;  we\n   * only need this because Skype can't handle 64-bit IE yet.  We need to remove\n   * this when we don't need it -- tracked by #601957.\n   */\n  ie64: function() {\n    return UserAgent_DEPRECATED.ie() && _win64;\n  },\n\n  /**\n   *  Check if the UA is Firefox.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  firefox: function() {\n    return _populate() || _firefox;\n  },\n\n\n  /**\n   *  Check if the UA is Opera.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  opera: function() {\n    return _populate() || _opera;\n  },\n\n\n  /**\n   *  Check if the UA is WebKit.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  webkit: function() {\n    return _populate() || _webkit;\n  },\n\n  /**\n   *  For Push\n   *  WILL BE REMOVED VERY SOON. Use UserAgent_DEPRECATED.webkit\n   */\n  safari: function() {\n    return UserAgent_DEPRECATED.webkit();\n  },\n\n  /**\n   *  Check if the UA is a Chrome browser.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  chrome : function() {\n    return _populate() || _chrome;\n  },\n\n\n  /**\n   *  Check if the user is running Windows.\n   *\n   *  @return bool `true' if the user's OS is Windows.\n   */\n  windows: function() {\n    return _populate() || _windows;\n  },\n\n\n  /**\n   *  Check if the user is running Mac OS X.\n   *\n   *  @return float|bool   Returns a float if a version number is detected,\n   *                       otherwise true/false.\n   */\n  osx: function() {\n    return _populate() || _osx;\n  },\n\n  /**\n   * Check if the user is running Linux.\n   *\n   * @return bool `true' if the user's OS is some flavor of Linux.\n   */\n  linux: function() {\n    return _populate() || _linux;\n  },\n\n  /**\n   * Check if the user is running on an iPhone or iPod platform.\n   *\n   * @return bool `true' if the user is running some flavor of the\n   *    iPhone OS.\n   */\n  iphone: function() {\n    return _populate() || _iphone;\n  },\n\n  mobile: function() {\n    return _populate() || (_iphone || _ipad || _android || _mobile);\n  },\n\n  nativeApp: function() {\n    // webviews inside of the native apps\n    return _populate() || _native;\n  },\n\n  android: function() {\n    return _populate() || _android;\n  },\n\n  ipad: function() {\n    return _populate() || _ipad;\n  }\n};\n\nmodule.exports = UserAgent_DEPRECATED;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ExecutionEnvironment\n */\n\n/*jslint evil: true */\n\n'use strict';\n\nvar canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners:\n    canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule isEventSupported\n */\n\n'use strict';\n\nvar ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar useHasFeature;\nif (ExecutionEnvironment.canUseDOM) {\n  useHasFeature =\n    document.implementation &&\n    document.implementation.hasFeature &&\n    // always returns true in newer browsers as per the standard.\n    // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature\n    document.implementation.hasFeature('', '') !== true;\n}\n\n/**\n * Checks if an event is supported in the current execution environment.\n *\n * NOTE: This will not work correctly for non-generic events such as `change`,\n * `reset`, `load`, `error`, and `select`.\n *\n * Borrows from Modernizr.\n *\n * @param {string} eventNameSuffix Event name, e.g. \"click\".\n * @param {?boolean} capture Check if the capture phase is supported.\n * @return {boolean} True if the event is supported.\n * @internal\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nfunction isEventSupported(eventNameSuffix, capture) {\n  if (!ExecutionEnvironment.canUseDOM ||\n      capture && !('addEventListener' in document)) {\n    return false;\n  }\n\n  var eventName = 'on' + eventNameSuffix;\n  var isSupported = eventName in document;\n\n  if (!isSupported) {\n    var element = document.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof element[eventName] === 'function';\n  }\n\n  if (!isSupported && useHasFeature && eventNameSuffix === 'wheel') {\n    // This is the only way to test support for the `wheel` event in IE9+.\n    isSupported = document.implementation.hasFeature('Events.wheel', '3.0');\n  }\n\n  return isSupported;\n}\n\nmodule.exports = isEventSupported;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule normalizeWheel\n * @typechecks\n */\n\n'use strict';\n\nvar UserAgent_DEPRECATED = require('./UserAgent_DEPRECATED');\n\nvar isEventSupported = require('./isEventSupported');\n\n\n// Reasonable defaults\nvar PIXEL_STEP  = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\n/**\n * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n * complicated, thus this doc is long and (hopefully) detailed enough to answer\n * your questions.\n *\n * If you need to react to the mouse wheel in a predictable way, this code is\n * like your bestest friend. * hugs *\n *\n * As of today, there are 4 DOM event types you can listen to:\n *\n *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n *\n * So what to do?  The is the best:\n *\n *   normalizeWheel.getEventType();\n *\n * In your event callback, use this code to get sane interpretation of the\n * deltas.  This code will return an object with properties:\n *\n *   spinX   -- normalized spin speed (use for zoom) - x plane\n *   spinY   -- \" - y plane\n *   pixelX  -- normalized distance (to pixels) - x plane\n *   pixelY  -- \" - y plane\n *\n * Wheel values are provided by the browser assuming you are using the wheel to\n * scroll a web page by a number of lines or pixels (or pages).  Values can vary\n * significantly on different platforms and browsers, forgetting that you can\n * scroll at different speeds.  Some devices (like trackpads) emit more events\n * at smaller increments with fine granularity, and some emit massive jumps with\n * linear speed or acceleration.\n *\n * This code does its best to normalize the deltas for you:\n *\n *   - spin is trying to normalize how far the wheel was spun (or trackpad\n *     dragged).  This is super useful for zoom support where you want to\n *     throw away the chunky scroll steps on the PC and make those equal to\n *     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n *     resolve a single slow step on a wheel to 1.\n *\n *   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n *     get the crazy differences between browsers, but at least it'll be in\n *     pixels!\n *\n *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n *     should translate to positive value zooming IN, negative zooming OUT.\n *     This matches the newer 'wheel' event.\n *\n * Why are there spinX, spinY (or pixels)?\n *\n *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n *     with a mouse.  It results in side-scrolling in the browser by default.\n *\n *   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n *\n *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n *     probably is by browsers in conjunction with fancy 3D controllers .. but\n *     you know.\n *\n * Implementation info:\n *\n * Examples of 'wheel' event if you scroll slowly (down) by one step with an\n * average mouse:\n *\n *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n *\n * On the trackpad:\n *\n *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n *\n * On other/older browsers.. it's more complicated as there can be multiple and\n * also missing delta values.\n *\n * The 'wheel' event is more standard:\n *\n * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n *\n * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n * backward compatibility with older events.  Those other values help us\n * better normalize spin speed.  Example of what the browsers provide:\n *\n *                          | event.wheelDelta | event.detail\n *        ------------------+------------------+--------------\n *          Safari v5/OS X  |       -120       |       0\n *          Safari v5/Win7  |       -120       |       0\n *         Chrome v17/OS X  |       -120       |       0\n *         Chrome v17/Win7  |       -120       |       0\n *                IE9/Win7  |       -120       |   undefined\n *         Firefox v4/OS X  |     undefined    |       1\n *         Firefox v4/Win7  |     undefined    |       3\n *\n */\nfunction normalizeWheel(/*object*/ event) /*object*/ {\n  var sX = 0, sY = 0,       // spinX, spinY\n      pX = 0, pY = 0;       // pixelX, pixelY\n\n  // Legacy\n  if ('detail'      in event) { sY = event.detail; }\n  if ('wheelDelta'  in event) { sY = -event.wheelDelta / 120; }\n  if ('wheelDeltaY' in event) { sY = -event.wheelDeltaY / 120; }\n  if ('wheelDeltaX' in event) { sX = -event.wheelDeltaX / 120; }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) { pY = event.deltaY; }\n  if ('deltaX' in event) { pX = event.deltaX; }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode == 1) {          // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {                             // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }\n  if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }\n\n  return { spinX  : sX,\n           spinY  : sY,\n           pixelX : pX,\n           pixelY : pY };\n}\n\n\n/**\n * The best combination if you prefer spinX + spinY normalization.  It favors\n * the older DOMMouseScroll for Firefox, as FF does not include wheelDelta with\n * 'wheel' event, making spin speed determination impossible.\n */\nnormalizeWheel.getEventType = function() /*string*/ {\n  return (UserAgent_DEPRECATED.firefox())\n           ? 'DOMMouseScroll'\n           : (isEventSupported('wheel'))\n               ? 'wheel'\n               : 'mousewheel';\n};\n\nmodule.exports = normalizeWheel;\n","module.exports = require('./src/normalizeWheel.js');\n","import { __assign, __extends } from 'tslib';\nimport * as React from 'react';\nimport normalizeWheel from 'normalize-wheel';\n\n/**\r\n * Compute the dimension of the crop area based on media size,\r\n * aspect ratio and optionally rotation\r\n */\nfunction getCropSize(mediaWidth, mediaHeight, containerWidth, containerHeight, aspect, rotation) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var _a = rotateSize(mediaWidth, mediaHeight, rotation),\n    width = _a.width,\n    height = _a.height;\n  var fittingWidth = Math.min(width, containerWidth);\n  var fittingHeight = Math.min(height, containerHeight);\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight\n    };\n  }\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect\n  };\n}\n/**\r\n * Compute media zoom.\r\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\r\n */\nfunction getMediaZoom(mediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height ? mediaSize.width / mediaSize.naturalWidth : mediaSize.height / mediaSize.naturalHeight;\n}\n/**\r\n * Ensure a new media position stays in the crop area.\r\n */\nfunction restrictPosition(position, mediaSize, cropSize, zoom, rotation) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var _a = rotateSize(mediaSize.width, mediaSize.height, rotation),\n    width = _a.width,\n    height = _a.height;\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom)\n  };\n}\nfunction restrictPositionCoord(position, mediaSize, cropSize, zoom) {\n  var maxPosition = mediaSize * zoom / 2 - cropSize / 2;\n  return clamp(position, -maxPosition, maxPosition);\n}\nfunction getDistanceBetweenPoints(pointA, pointB) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2));\n}\nfunction getRotationBetweenPoints(pointA, pointB) {\n  return Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180 / Math.PI;\n}\n/**\r\n * Compute the output cropped area of the media in percentages and pixels.\r\n * x/y are the top-left coordinates on the src media\r\n */\nfunction computeCroppedArea(crop, mediaSize, cropSize, aspect, zoom, rotation, restrictPosition) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  if (restrictPosition === void 0) {\n    restrictPosition = true;\n  }\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  var limitAreaFn = restrictPosition ? limitArea : noOp;\n  var mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation);\n  var mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation);\n  // calculate the crop area in percentages\n  // in the rotated space\n  var croppedAreaPercentages = {\n    x: limitAreaFn(100, ((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width * 100),\n    y: limitAreaFn(100, ((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) / mediaBBoxSize.height * 100),\n    width: limitAreaFn(100, cropSize.width / mediaBBoxSize.width * 100 / zoom),\n    height: limitAreaFn(100, cropSize.height / mediaBBoxSize.height * 100 / zoom)\n  };\n  // we compute the pixels size naively\n  var widthInPixels = Math.round(limitAreaFn(mediaNaturalBBoxSize.width, croppedAreaPercentages.width * mediaNaturalBBoxSize.width / 100));\n  var heightInPixels = Math.round(limitAreaFn(mediaNaturalBBoxSize.height, croppedAreaPercentages.height * mediaNaturalBBoxSize.height / 100));\n  var isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect;\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  var sizePixels = isImgWiderThanHigh ? {\n    width: Math.round(heightInPixels * aspect),\n    height: heightInPixels\n  } : {\n    width: widthInPixels,\n    height: Math.round(widthInPixels / aspect)\n  };\n  var croppedAreaPixels = __assign(__assign({}, sizePixels), {\n    x: Math.round(limitAreaFn(mediaNaturalBBoxSize.width - sizePixels.width, croppedAreaPercentages.x * mediaNaturalBBoxSize.width / 100)),\n    y: Math.round(limitAreaFn(mediaNaturalBBoxSize.height - sizePixels.height, croppedAreaPercentages.y * mediaNaturalBBoxSize.height / 100))\n  });\n  return {\n    croppedAreaPercentages: croppedAreaPercentages,\n    croppedAreaPixels: croppedAreaPixels\n  };\n}\n/**\r\n * Ensure the returned value is between 0 and max\r\n */\nfunction limitArea(max, value) {\n  return Math.min(max, Math.max(0, value));\n}\nfunction noOp(_max, value) {\n  return value;\n}\n/**\r\n * Compute crop and zoom from the croppedAreaPercentages.\r\n */\nfunction getInitialCropFromCroppedAreaPercentages(croppedAreaPercentages, mediaSize, rotation, cropSize, minZoom, maxZoom) {\n  var mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation);\n  // This is the inverse process of computeCroppedArea\n  var zoom = clamp(cropSize.width / mediaBBoxSize.width * (100 / croppedAreaPercentages.width), minZoom, maxZoom);\n  var crop = {\n    x: zoom * mediaBBoxSize.width / 2 - cropSize.width / 2 - mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y: zoom * mediaBBoxSize.height / 2 - cropSize.height / 2 - mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100)\n  };\n  return {\n    crop: crop,\n    zoom: zoom\n  };\n}\n/**\r\n * Compute zoom from the croppedAreaPixels\r\n */\nfunction getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize) {\n  var mediaZoom = getMediaZoom(mediaSize);\n  return cropSize.height > cropSize.width ? cropSize.height / (croppedAreaPixels.height * mediaZoom) : cropSize.width / (croppedAreaPixels.width * mediaZoom);\n}\n/**\r\n * Compute crop and zoom from the croppedAreaPixels\r\n */\nfunction getInitialCropFromCroppedAreaPixels(croppedAreaPixels, mediaSize, rotation, cropSize, minZoom, maxZoom) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation);\n  var zoom = clamp(getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize), minZoom, maxZoom);\n  var cropZoom = cropSize.height > cropSize.width ? cropSize.height / croppedAreaPixels.height : cropSize.width / croppedAreaPixels.width;\n  var crop = {\n    x: ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y: ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) * cropZoom\n  };\n  return {\n    crop: crop,\n    zoom: zoom\n  };\n}\n/**\r\n * Return the point that is the center of point a and b\r\n */\nfunction getCenter(a, b) {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2\n  };\n}\nfunction getRadianAngle(degreeValue) {\n  return degreeValue * Math.PI / 180;\n}\n/**\r\n * Returns the new bounding area of a rotated rectangle.\r\n */\nfunction rotateSize(width, height, rotation) {\n  var rotRad = getRadianAngle(rotation);\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height)\n  };\n}\n/**\r\n * Clamp value between min and max\r\n */\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n/**\r\n * Combine multiple class names into a single string.\r\n */\nfunction classNames() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  return args.filter(function (value) {\n    if (typeof value === 'string' && value.length > 0) {\n      return true;\n    }\n    return false;\n  }).join(' ').trim();\n}\n\nvar css_248z = \".reactEasyCrop_Container {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  overflow: hidden;\\n  user-select: none;\\n  touch-action: none;\\n  cursor: move;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.reactEasyCrop_Image,\\n.reactEasyCrop_Video {\\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\\n}\\n\\n.reactEasyCrop_Contain {\\n  max-width: 100%;\\n  max-height: 100%;\\n  margin: auto;\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.reactEasyCrop_Cover_Horizontal {\\n  width: 100%;\\n  height: auto;\\n}\\n.reactEasyCrop_Cover_Vertical {\\n  width: auto;\\n  height: 100%;\\n}\\n\\n.reactEasyCrop_CropArea {\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  box-sizing: border-box;\\n  box-shadow: 0 0 0 9999em;\\n  color: rgba(0, 0, 0, 0.5);\\n  overflow: hidden;\\n}\\n\\n.reactEasyCrop_CropAreaRound {\\n  border-radius: 50%;\\n}\\n\\n.reactEasyCrop_CropAreaGrid::before {\\n  content: ' ';\\n  box-sizing: border-box;\\n  position: absolute;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  top: 0;\\n  bottom: 0;\\n  left: 33.33%;\\n  right: 33.33%;\\n  border-top: 0;\\n  border-bottom: 0;\\n}\\n\\n.reactEasyCrop_CropAreaGrid::after {\\n  content: ' ';\\n  box-sizing: border-box;\\n  position: absolute;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  top: 33.33%;\\n  bottom: 33.33%;\\n  left: 0;\\n  right: 0;\\n  border-left: 0;\\n  border-right: 0;\\n}\\n\";\n\nvar MIN_ZOOM = 1;\nvar MAX_ZOOM = 3;\nvar KEYBOARD_STEP = 1;\nvar Cropper = /** @class */function (_super) {\n  __extends(Cropper, _super);\n  function Cropper() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.imageRef = React.createRef();\n    _this.videoRef = React.createRef();\n    _this.containerPosition = {\n      x: 0,\n      y: 0\n    };\n    _this.containerRef = null;\n    _this.styleRef = null;\n    _this.containerRect = null;\n    _this.mediaSize = {\n      width: 0,\n      height: 0,\n      naturalWidth: 0,\n      naturalHeight: 0\n    };\n    _this.dragStartPosition = {\n      x: 0,\n      y: 0\n    };\n    _this.dragStartCrop = {\n      x: 0,\n      y: 0\n    };\n    _this.gestureZoomStart = 0;\n    _this.gestureRotationStart = 0;\n    _this.isTouching = false;\n    _this.lastPinchDistance = 0;\n    _this.lastPinchRotation = 0;\n    _this.rafDragTimeout = null;\n    _this.rafPinchTimeout = null;\n    _this.wheelTimer = null;\n    _this.currentDoc = typeof document !== 'undefined' ? document : null;\n    _this.currentWindow = typeof window !== 'undefined' ? window : null;\n    _this.resizeObserver = null;\n    _this.state = {\n      cropSize: null,\n      hasWheelJustStarted: false,\n      mediaObjectFit: undefined\n    };\n    _this.initResizeObserver = function () {\n      if (typeof window.ResizeObserver === 'undefined' || !_this.containerRef) {\n        return;\n      }\n      var isFirstResize = true;\n      _this.resizeObserver = new window.ResizeObserver(function (entries) {\n        if (isFirstResize) {\n          isFirstResize = false; // observe() is called on mount, we don't want to trigger a recompute on mount\n          return;\n        }\n        _this.computeSizes();\n      });\n      _this.resizeObserver.observe(_this.containerRef);\n    };\n    // this is to prevent Safari on iOS >= 10 to zoom the page\n    _this.preventZoomSafari = function (e) {\n      return e.preventDefault();\n    };\n    _this.cleanEvents = function () {\n      if (!_this.currentDoc) return;\n      _this.currentDoc.removeEventListener('mousemove', _this.onMouseMove);\n      _this.currentDoc.removeEventListener('mouseup', _this.onDragStopped);\n      _this.currentDoc.removeEventListener('touchmove', _this.onTouchMove);\n      _this.currentDoc.removeEventListener('touchend', _this.onDragStopped);\n      _this.currentDoc.removeEventListener('gesturemove', _this.onGestureMove);\n      _this.currentDoc.removeEventListener('gestureend', _this.onGestureEnd);\n      _this.currentDoc.removeEventListener('scroll', _this.onScroll);\n    };\n    _this.clearScrollEvent = function () {\n      if (_this.containerRef) _this.containerRef.removeEventListener('wheel', _this.onWheel);\n      if (_this.wheelTimer) {\n        clearTimeout(_this.wheelTimer);\n      }\n    };\n    _this.onMediaLoad = function () {\n      var cropSize = _this.computeSizes();\n      if (cropSize) {\n        _this.emitCropData();\n        _this.setInitialCrop(cropSize);\n      }\n      if (_this.props.onMediaLoaded) {\n        _this.props.onMediaLoaded(_this.mediaSize);\n      }\n    };\n    _this.setInitialCrop = function (cropSize) {\n      if (_this.props.initialCroppedAreaPercentages) {\n        var _a = getInitialCropFromCroppedAreaPercentages(_this.props.initialCroppedAreaPercentages, _this.mediaSize, _this.props.rotation, cropSize, _this.props.minZoom, _this.props.maxZoom),\n          crop = _a.crop,\n          zoom = _a.zoom;\n        _this.props.onCropChange(crop);\n        _this.props.onZoomChange && _this.props.onZoomChange(zoom);\n      } else if (_this.props.initialCroppedAreaPixels) {\n        var _b = getInitialCropFromCroppedAreaPixels(_this.props.initialCroppedAreaPixels, _this.mediaSize, _this.props.rotation, cropSize, _this.props.minZoom, _this.props.maxZoom),\n          crop = _b.crop,\n          zoom = _b.zoom;\n        _this.props.onCropChange(crop);\n        _this.props.onZoomChange && _this.props.onZoomChange(zoom);\n      }\n    };\n    _this.computeSizes = function () {\n      var _a, _b, _c, _d, _e, _f;\n      var mediaRef = _this.imageRef.current || _this.videoRef.current;\n      if (mediaRef && _this.containerRef) {\n        _this.containerRect = _this.containerRef.getBoundingClientRect();\n        _this.saveContainerPosition();\n        var containerAspect = _this.containerRect.width / _this.containerRect.height;\n        var naturalWidth = ((_a = _this.imageRef.current) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = _this.videoRef.current) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0;\n        var naturalHeight = ((_c = _this.imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = _this.videoRef.current) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0;\n        var isMediaScaledDown = mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight;\n        var mediaAspect = naturalWidth / naturalHeight;\n        // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n        // as the values they report are rounded. That will result in precision losses\n        // when calculating zoom. We use the fact that the media is positionned relative\n        // to the container. That allows us to use the container's dimensions\n        // and natural aspect ratio of the media to calculate accurate media size.\n        // However, for this to work, the container should not be rotated\n        var renderedMediaSize = void 0;\n        if (isMediaScaledDown) {\n          switch (_this.state.mediaObjectFit) {\n            default:\n            case 'contain':\n              renderedMediaSize = containerAspect > mediaAspect ? {\n                width: _this.containerRect.height * mediaAspect,\n                height: _this.containerRect.height\n              } : {\n                width: _this.containerRect.width,\n                height: _this.containerRect.width / mediaAspect\n              };\n              break;\n            case 'horizontal-cover':\n              renderedMediaSize = {\n                width: _this.containerRect.width,\n                height: _this.containerRect.width / mediaAspect\n              };\n              break;\n            case 'vertical-cover':\n              renderedMediaSize = {\n                width: _this.containerRect.height * mediaAspect,\n                height: _this.containerRect.height\n              };\n              break;\n          }\n        } else {\n          renderedMediaSize = {\n            width: mediaRef.offsetWidth,\n            height: mediaRef.offsetHeight\n          };\n        }\n        _this.mediaSize = __assign(__assign({}, renderedMediaSize), {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        });\n        // set media size in the parent\n        if (_this.props.setMediaSize) {\n          _this.props.setMediaSize(_this.mediaSize);\n        }\n        var cropSize = _this.props.cropSize ? _this.props.cropSize : getCropSize(_this.mediaSize.width, _this.mediaSize.height, _this.containerRect.width, _this.containerRect.height, _this.props.aspect, _this.props.rotation);\n        if (((_e = _this.state.cropSize) === null || _e === void 0 ? void 0 : _e.height) !== cropSize.height || ((_f = _this.state.cropSize) === null || _f === void 0 ? void 0 : _f.width) !== cropSize.width) {\n          _this.props.onCropSizeChange && _this.props.onCropSizeChange(cropSize);\n        }\n        _this.setState({\n          cropSize: cropSize\n        }, _this.recomputeCropPosition);\n        // pass crop size to parent\n        if (_this.props.setCropSize) {\n          _this.props.setCropSize(cropSize);\n        }\n        return cropSize;\n      }\n    };\n    _this.saveContainerPosition = function () {\n      if (_this.containerRef) {\n        var bounds = _this.containerRef.getBoundingClientRect();\n        _this.containerPosition = {\n          x: bounds.left,\n          y: bounds.top\n        };\n      }\n    };\n    _this.onMouseDown = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.currentDoc.addEventListener('mousemove', _this.onMouseMove);\n      _this.currentDoc.addEventListener('mouseup', _this.onDragStopped);\n      _this.saveContainerPosition();\n      _this.onDragStart(Cropper.getMousePoint(e));\n    };\n    _this.onMouseMove = function (e) {\n      return _this.onDrag(Cropper.getMousePoint(e));\n    };\n    _this.onScroll = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.saveContainerPosition();\n    };\n    _this.onTouchStart = function (e) {\n      if (!_this.currentDoc) return;\n      _this.isTouching = true;\n      if (_this.props.onTouchRequest && !_this.props.onTouchRequest(e)) {\n        return;\n      }\n      _this.currentDoc.addEventListener('touchmove', _this.onTouchMove, {\n        passive: false\n      }); // iOS 11 now defaults to passive: true\n      _this.currentDoc.addEventListener('touchend', _this.onDragStopped);\n      _this.saveContainerPosition();\n      if (e.touches.length === 2) {\n        _this.onPinchStart(e);\n      } else if (e.touches.length === 1) {\n        _this.onDragStart(Cropper.getTouchPoint(e.touches[0]));\n      }\n    };\n    _this.onTouchMove = function (e) {\n      // Prevent whole page from scrolling on iOS.\n      e.preventDefault();\n      if (e.touches.length === 2) {\n        _this.onPinchMove(e);\n      } else if (e.touches.length === 1) {\n        _this.onDrag(Cropper.getTouchPoint(e.touches[0]));\n      }\n    };\n    _this.onGestureStart = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.currentDoc.addEventListener('gesturechange', _this.onGestureMove);\n      _this.currentDoc.addEventListener('gestureend', _this.onGestureEnd);\n      _this.gestureZoomStart = _this.props.zoom;\n      _this.gestureRotationStart = _this.props.rotation;\n    };\n    _this.onGestureMove = function (e) {\n      e.preventDefault();\n      if (_this.isTouching) {\n        // this is to avoid conflict between gesture and touch events\n        return;\n      }\n      var point = Cropper.getMousePoint(e);\n      var newZoom = _this.gestureZoomStart - 1 + e.scale;\n      _this.setNewZoom(newZoom, point, {\n        shouldUpdatePosition: true\n      });\n      if (_this.props.onRotationChange) {\n        var newRotation = _this.gestureRotationStart + e.rotation;\n        _this.props.onRotationChange(newRotation);\n      }\n    };\n    _this.onGestureEnd = function (e) {\n      _this.cleanEvents();\n    };\n    _this.onDragStart = function (_a) {\n      var _b, _c;\n      var x = _a.x,\n        y = _a.y;\n      _this.dragStartPosition = {\n        x: x,\n        y: y\n      };\n      _this.dragStartCrop = __assign({}, _this.props.crop);\n      (_c = (_b = _this.props).onInteractionStart) === null || _c === void 0 ? void 0 : _c.call(_b);\n    };\n    _this.onDrag = function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      if (!_this.currentWindow) return;\n      if (_this.rafDragTimeout) _this.currentWindow.cancelAnimationFrame(_this.rafDragTimeout);\n      _this.rafDragTimeout = _this.currentWindow.requestAnimationFrame(function () {\n        if (!_this.state.cropSize) return;\n        if (x === undefined || y === undefined) return;\n        var offsetX = x - _this.dragStartPosition.x;\n        var offsetY = y - _this.dragStartPosition.y;\n        var requestedPosition = {\n          x: _this.dragStartCrop.x + offsetX,\n          y: _this.dragStartCrop.y + offsetY\n        };\n        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : requestedPosition;\n        _this.props.onCropChange(newPosition);\n      });\n    };\n    _this.onDragStopped = function () {\n      var _a, _b;\n      _this.isTouching = false;\n      _this.cleanEvents();\n      _this.emitCropData();\n      (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    _this.onWheel = function (e) {\n      if (!_this.currentWindow) return;\n      if (_this.props.onWheelRequest && !_this.props.onWheelRequest(e)) {\n        return;\n      }\n      e.preventDefault();\n      var point = Cropper.getMousePoint(e);\n      var pixelY = normalizeWheel(e).pixelY;\n      var newZoom = _this.props.zoom - pixelY * _this.props.zoomSpeed / 200;\n      _this.setNewZoom(newZoom, point, {\n        shouldUpdatePosition: true\n      });\n      if (!_this.state.hasWheelJustStarted) {\n        _this.setState({\n          hasWheelJustStarted: true\n        }, function () {\n          var _a, _b;\n          return (_b = (_a = _this.props).onInteractionStart) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }\n      if (_this.wheelTimer) {\n        clearTimeout(_this.wheelTimer);\n      }\n      _this.wheelTimer = _this.currentWindow.setTimeout(function () {\n        return _this.setState({\n          hasWheelJustStarted: false\n        }, function () {\n          var _a, _b;\n          return (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }, 250);\n    };\n    _this.getPointOnContainer = function (_a, containerTopLeft) {\n      var x = _a.x,\n        y = _a.y;\n      if (!_this.containerRect) {\n        throw new Error('The Cropper is not mounted');\n      }\n      return {\n        x: _this.containerRect.width / 2 - (x - containerTopLeft.x),\n        y: _this.containerRect.height / 2 - (y - containerTopLeft.y)\n      };\n    };\n    _this.getPointOnMedia = function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      var _b = _this.props,\n        crop = _b.crop,\n        zoom = _b.zoom;\n      return {\n        x: (x + crop.x) / zoom,\n        y: (y + crop.y) / zoom\n      };\n    };\n    _this.setNewZoom = function (zoom, point, _a) {\n      var _b = _a === void 0 ? {} : _a,\n        _c = _b.shouldUpdatePosition,\n        shouldUpdatePosition = _c === void 0 ? true : _c;\n      if (!_this.state.cropSize || !_this.props.onZoomChange) return;\n      var newZoom = clamp(zoom, _this.props.minZoom, _this.props.maxZoom);\n      if (shouldUpdatePosition) {\n        var zoomPoint = _this.getPointOnContainer(point, _this.containerPosition);\n        var zoomTarget = _this.getPointOnMedia(zoomPoint);\n        var requestedPosition = {\n          x: zoomTarget.x * newZoom - zoomPoint.x,\n          y: zoomTarget.y * newZoom - zoomPoint.y\n        };\n        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, newZoom, _this.props.rotation) : requestedPosition;\n        _this.props.onCropChange(newPosition);\n      }\n      _this.props.onZoomChange(newZoom);\n    };\n    _this.getCropData = function () {\n      if (!_this.state.cropSize) {\n        return null;\n      }\n      // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n      var restrictedPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;\n      return computeCroppedArea(restrictedPosition, _this.mediaSize, _this.state.cropSize, _this.getAspect(), _this.props.zoom, _this.props.rotation, _this.props.restrictPosition);\n    };\n    _this.emitCropData = function () {\n      var cropData = _this.getCropData();\n      if (!cropData) return;\n      var croppedAreaPercentages = cropData.croppedAreaPercentages,\n        croppedAreaPixels = cropData.croppedAreaPixels;\n      if (_this.props.onCropComplete) {\n        _this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels);\n      }\n      if (_this.props.onCropAreaChange) {\n        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);\n      }\n    };\n    _this.emitCropAreaChange = function () {\n      var cropData = _this.getCropData();\n      if (!cropData) return;\n      var croppedAreaPercentages = cropData.croppedAreaPercentages,\n        croppedAreaPixels = cropData.croppedAreaPixels;\n      if (_this.props.onCropAreaChange) {\n        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);\n      }\n    };\n    _this.recomputeCropPosition = function () {\n      if (!_this.state.cropSize) return;\n      var newPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;\n      _this.props.onCropChange(newPosition);\n      _this.emitCropData();\n    };\n    _this.onKeyDown = function (event) {\n      var _a = _this.props,\n        crop = _a.crop,\n        onCropChange = _a.onCropChange,\n        keyboardStep = _a.keyboardStep,\n        zoom = _a.zoom,\n        rotation = _a.rotation;\n      var step = keyboardStep;\n      if (!_this.state.cropSize) return;\n      // if the shift key is pressed, reduce the step to allow finer control\n      if (event.shiftKey) {\n        step *= 0.2;\n      }\n      var newCrop = __assign({}, crop);\n      switch (event.key) {\n        case 'ArrowUp':\n          newCrop.y -= step;\n          event.preventDefault();\n          break;\n        case 'ArrowDown':\n          newCrop.y += step;\n          event.preventDefault();\n          break;\n        case 'ArrowLeft':\n          newCrop.x -= step;\n          event.preventDefault();\n          break;\n        case 'ArrowRight':\n          newCrop.x += step;\n          event.preventDefault();\n          break;\n        default:\n          return;\n      }\n      if (_this.props.restrictPosition) {\n        newCrop = restrictPosition(newCrop, _this.mediaSize, _this.state.cropSize, zoom, rotation);\n      }\n      onCropChange(newCrop);\n    };\n    return _this;\n  }\n  Cropper.prototype.componentDidMount = function () {\n    if (!this.currentDoc || !this.currentWindow) return;\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument;\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView;\n      }\n      this.initResizeObserver();\n      // only add window resize listener if ResizeObserver is not supported. Otherwise, it would be redundant\n      if (typeof window.ResizeObserver === 'undefined') {\n        this.currentWindow.addEventListener('resize', this.computeSizes);\n      }\n      this.props.zoomWithScroll && this.containerRef.addEventListener('wheel', this.onWheel, {\n        passive: false\n      });\n      this.containerRef.addEventListener('gesturestart', this.onGestureStart);\n    }\n    this.currentDoc.addEventListener('scroll', this.onScroll);\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style');\n      this.styleRef.setAttribute('type', 'text/css');\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce);\n      }\n      this.styleRef.innerHTML = css_248z;\n      this.currentDoc.head.appendChild(this.styleRef);\n    }\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad();\n    }\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef);\n    }\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef);\n    }\n  };\n  Cropper.prototype.componentWillUnmount = function () {\n    var _a, _b;\n    if (!this.currentDoc || !this.currentWindow) return;\n    if (typeof window.ResizeObserver === 'undefined') {\n      this.currentWindow.removeEventListener('resize', this.computeSizes);\n    }\n    (_a = this.resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari);\n    }\n    if (this.styleRef) {\n      (_b = this.styleRef.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(this.styleRef);\n    }\n    this.cleanEvents();\n    this.props.zoomWithScroll && this.clearScrollEvent();\n  };\n  Cropper.prototype.componentDidUpdate = function (prevProps) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes();\n      this.recomputeCropPosition();\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes();\n    } else if (prevProps.objectFit !== this.props.objectFit) {\n      this.computeSizes();\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition();\n    } else if (((_a = prevProps.cropSize) === null || _a === void 0 ? void 0 : _a.height) !== ((_b = this.props.cropSize) === null || _b === void 0 ? void 0 : _b.height) || ((_c = prevProps.cropSize) === null || _c === void 0 ? void 0 : _c.width) !== ((_d = this.props.cropSize) === null || _d === void 0 ? void 0 : _d.width)) {\n      this.computeSizes();\n    } else if (((_e = prevProps.crop) === null || _e === void 0 ? void 0 : _e.x) !== ((_f = this.props.crop) === null || _f === void 0 ? void 0 : _f.x) || ((_g = prevProps.crop) === null || _g === void 0 ? void 0 : _g.y) !== ((_h = this.props.crop) === null || _h === void 0 ? void 0 : _h.y)) {\n      this.emitCropAreaChange();\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll ? this.containerRef.addEventListener('wheel', this.onWheel, {\n        passive: false\n      }) : this.clearScrollEvent();\n    }\n    if (prevProps.video !== this.props.video) {\n      (_j = this.videoRef.current) === null || _j === void 0 ? void 0 : _j.load();\n    }\n    var objectFit = this.getObjectFit();\n    if (objectFit !== this.state.mediaObjectFit) {\n      this.setState({\n        mediaObjectFit: objectFit\n      }, this.computeSizes);\n    }\n  };\n  Cropper.prototype.getAspect = function () {\n    var _a = this.props,\n      cropSize = _a.cropSize,\n      aspect = _a.aspect;\n    if (cropSize) {\n      return cropSize.width / cropSize.height;\n    }\n    return aspect;\n  };\n  Cropper.prototype.getObjectFit = function () {\n    var _a, _b, _c, _d;\n    if (this.props.objectFit === 'cover') {\n      var mediaRef = this.imageRef.current || this.videoRef.current;\n      if (mediaRef && this.containerRef) {\n        this.containerRect = this.containerRef.getBoundingClientRect();\n        var containerAspect = this.containerRect.width / this.containerRect.height;\n        var naturalWidth = ((_a = this.imageRef.current) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = this.videoRef.current) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0;\n        var naturalHeight = ((_c = this.imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = this.videoRef.current) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0;\n        var mediaAspect = naturalWidth / naturalHeight;\n        return mediaAspect < containerAspect ? 'horizontal-cover' : 'vertical-cover';\n      }\n      return 'horizontal-cover';\n    }\n    return this.props.objectFit;\n  };\n  Cropper.prototype.onPinchStart = function (e) {\n    var pointA = Cropper.getTouchPoint(e.touches[0]);\n    var pointB = Cropper.getTouchPoint(e.touches[1]);\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB);\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB);\n    this.onDragStart(getCenter(pointA, pointB));\n  };\n  Cropper.prototype.onPinchMove = function (e) {\n    var _this = this;\n    if (!this.currentDoc || !this.currentWindow) return;\n    var pointA = Cropper.getTouchPoint(e.touches[0]);\n    var pointB = Cropper.getTouchPoint(e.touches[1]);\n    var center = getCenter(pointA, pointB);\n    this.onDrag(center);\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout);\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(function () {\n      var distance = getDistanceBetweenPoints(pointA, pointB);\n      var newZoom = _this.props.zoom * (distance / _this.lastPinchDistance);\n      _this.setNewZoom(newZoom, center, {\n        shouldUpdatePosition: false\n      });\n      _this.lastPinchDistance = distance;\n      var rotation = getRotationBetweenPoints(pointA, pointB);\n      var newRotation = _this.props.rotation + (rotation - _this.lastPinchRotation);\n      _this.props.onRotationChange && _this.props.onRotationChange(newRotation);\n      _this.lastPinchRotation = rotation;\n    });\n  };\n  Cropper.prototype.render = function () {\n    var _this = this;\n    var _a;\n    var _b = this.props,\n      image = _b.image,\n      video = _b.video,\n      mediaProps = _b.mediaProps,\n      transform = _b.transform,\n      _c = _b.crop,\n      x = _c.x,\n      y = _c.y,\n      rotation = _b.rotation,\n      zoom = _b.zoom,\n      cropShape = _b.cropShape,\n      showGrid = _b.showGrid,\n      _d = _b.style,\n      containerStyle = _d.containerStyle,\n      cropAreaStyle = _d.cropAreaStyle,\n      mediaStyle = _d.mediaStyle,\n      _e = _b.classes,\n      containerClassName = _e.containerClassName,\n      cropAreaClassName = _e.cropAreaClassName,\n      mediaClassName = _e.mediaClassName;\n    var objectFit = (_a = this.state.mediaObjectFit) !== null && _a !== void 0 ? _a : this.getObjectFit();\n    return React.createElement(\"div\", {\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart,\n      ref: function ref(el) {\n        return _this.containerRef = el;\n      },\n      \"data-testid\": \"container\",\n      style: containerStyle,\n      className: classNames('reactEasyCrop_Container', containerClassName)\n    }, image ? React.createElement(\"img\", __assign({\n      alt: \"\",\n      className: classNames('reactEasyCrop_Image', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)\n    }, mediaProps, {\n      src: image,\n      ref: this.imageRef,\n      style: __assign(__assign({}, mediaStyle), {\n        transform: transform || \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg) scale(\").concat(zoom, \")\")\n      }),\n      onLoad: this.onMediaLoad\n    })) : video && React.createElement(\"video\", __assign({\n      autoPlay: true,\n      playsInline: true,\n      loop: true,\n      muted: true,\n      className: classNames('reactEasyCrop_Video', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)\n    }, mediaProps, {\n      ref: this.videoRef,\n      onLoadedMetadata: this.onMediaLoad,\n      style: __assign(__assign({}, mediaStyle), {\n        transform: transform || \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg) scale(\").concat(zoom, \")\")\n      }),\n      controls: false\n    }), (Array.isArray(video) ? video : [{\n      src: video\n    }]).map(function (item) {\n      return React.createElement(\"source\", __assign({\n        key: item.src\n      }, item));\n    })), this.state.cropSize && React.createElement(\"div\", {\n      style: __assign(__assign({}, cropAreaStyle), {\n        width: this.state.cropSize.width,\n        height: this.state.cropSize.height\n      }),\n      tabIndex: 0,\n      onKeyDown: this.onKeyDown,\n      \"data-testid\": \"cropper\",\n      className: classNames('reactEasyCrop_CropArea', cropShape === 'round' && 'reactEasyCrop_CropAreaRound', showGrid && 'reactEasyCrop_CropAreaGrid', cropAreaClassName)\n    }));\n  };\n  Cropper.defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect',\n    objectFit: 'contain',\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n    keyboardStep: KEYBOARD_STEP\n  };\n  Cropper.getMousePoint = function (e) {\n    return {\n      x: Number(e.clientX),\n      y: Number(e.clientY)\n    };\n  };\n  Cropper.getTouchPoint = function (touch) {\n    return {\n      x: Number(touch.clientX),\n      y: Number(touch.clientY)\n    };\n  };\n  return Cropper;\n}(React.Component);\n\nexport { Cropper as default, getInitialCropFromCroppedAreaPercentages, getInitialCropFromCroppedAreaPixels };\n//# sourceMappingURL=index.module.js.map\n","import { useState, useCallback } from 'react';\nimport Cropper from 'react-easy-crop';\nimport { X, ZoomIn, Save, AlertCircle } from 'lucide-react';\n\ninterface ImageCropperProps {\n  image: string;\n  onCropComplete: (croppedImage: Blob) => void;\n  onCancel: () => void;\n  aspectRatio?: number;\n}\n\nexport function ImageCropper({ image, onCropComplete, onCancel, aspectRatio = 1 }: ImageCropperProps) {\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState<any>(null);\n  const [cropping, setCropping] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const onCropChange = (crop: { x: number; y: number }) => {\n    setCrop(crop);\n  };\n\n  const onZoomChange = (zoom: number) => {\n    setZoom(zoom);\n  };\n\n  const onCropAreaChange = useCallback((croppedArea: any, croppedAreaPixels: any) => {\n    setCroppedAreaPixels(croppedAreaPixels);\n  }, []);\n\n  const createImage = (url: string): Promise<HTMLImageElement> =>\n    new Promise((resolve, reject) => {\n      const image = new Image();\n      image.addEventListener('load', () => resolve(image));\n      image.addEventListener('error', error => reject(error));\n      image.setAttribute('crossOrigin', 'anonymous');\n      image.src = url;\n    });\n\n  const getCroppedImg = async (\n    imageSrc: string,\n    pixelCrop: any,\n    rotation = 0\n  ): Promise<Blob> => {\n    const image = await createImage(imageSrc);\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) {\n      throw new Error('No 2d context');\n    }\n\n    canvas.width = pixelCrop.width;\n    canvas.height = pixelCrop.height;\n\n    ctx.save();\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate((rotation * Math.PI) / 180);\n    ctx.translate(-canvas.width / 2, -canvas.height / 2);\n\n    ctx.drawImage(\n      image,\n      pixelCrop.x,\n      pixelCrop.y,\n      pixelCrop.width,\n      pixelCrop.height,\n      0,\n      0,\n      pixelCrop.width,\n      pixelCrop.height\n    );\n\n    ctx.restore();\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(\n        (blob) => {\n          if (blob) {\n            resolve(blob);\n          } else {\n            reject(new Error('Canvas to Blob conversion failed'));\n          }\n        },\n        'image/jpeg',\n        0.95\n      );\n    });\n  };\n\n  const handleCrop = async () => {\n    if (!croppedAreaPixels) return;\n    \n    setCropping(true);\n    setError(null);\n    \n    try {\n      const croppedImage = await getCroppedImg(image, croppedAreaPixels);\n      await onCropComplete(croppedImage);\n    } catch (e) {\n      console.error('Error cropping image:', e);\n      setError('Failed to crop image. Please try again.');\n    } finally {\n      setCropping(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-cyber-black/90 backdrop-blur-lg z-50 flex items-center justify-center p-4\">\n      <div className=\"relative w-full max-w-2xl bg-cyber-gray-900 rounded-lg\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-cyber-gray-800 flex justify-between items-center\">\n          <h3 className=\"text-lg font-display font-semibold text-cyber-gray-50\">\n            Adjust Profile Picture\n          </h3>\n          <button \n            onClick={onCancel} \n            className=\"p-2 text-cyber-gray-400 hover:text-neon-blue transition-colors\"\n            disabled={cropping}\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n        \n        {/* Cropper */}\n        <div className=\"relative h-96\">\n          <Cropper\n            image={image}\n            crop={crop}\n            zoom={zoom}\n            aspect={aspectRatio}\n            onCropChange={onCropChange}\n            onZoomChange={onZoomChange}\n            onCropComplete={onCropAreaChange}\n            cropShape=\"round\"\n            showGrid={false}\n            style={{\n              containerStyle: {\n                background: 'rgb(26, 26, 26)',\n              },\n              cropAreaStyle: {\n                border: '2px solid rgba(255, 255, 255, 0.5)',\n                borderRadius: '50%',\n                boxShadow: '0 0 0 9999px rgba(12, 12, 12, 0.85)',\n              },\n              mediaStyle: {\n                background: 'rgb(26, 26, 26)',\n              },\n            }}\n          />\n        </div>\n\n        {/* Controls */}\n        <div className=\"p-6 border-t border-cyber-gray-800\">\n          {/* Zoom slider */}\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <label className=\"text-sm font-medium text-cyber-gray-200 flex items-center gap-2\">\n                <ZoomIn className=\"h-4 w-4 text-cyber-gray-400\" />\n                Zoom Level\n              </label>\n              <span className=\"text-sm text-cyber-gray-400\">{zoom.toFixed(1)}x</span>\n            </div>\n            <input\n              type=\"range\"\n              min={1}\n              max={3}\n              step={0.1}\n              value={zoom}\n              onChange={(e) => setZoom(Number(e.target.value))}\n              className=\"w-full appearance-none bg-cyber-gray-800 h-2 rounded-full outline-none\n                       [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 \n                       [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full \n                       [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:cursor-pointer\n                       [&::-webkit-slider-thumb]:hover:ring-2 [&::-webkit-slider-thumb]:hover:ring-white/50\n                       [&::-webkit-slider-thumb]:transition-all\"\n            />\n          </div>\n\n          {/* Error message */}\n          {error && (\n            <div className=\"mb-4 p-3 bg-red-900/20 border border-red-500/50 rounded-lg\">\n              <div className=\"flex items-center gap-2 text-red-500\">\n                <AlertCircle className=\"h-5 w-5 flex-shrink-0\" />\n                <p className=\"text-sm\">{error}</p>\n              </div>\n            </div>\n          )}\n          \n          {/* Action buttons */}\n          <div className=\"flex justify-end gap-3\">\n            <button\n              onClick={onCancel}\n              disabled={cropping}\n              className=\"px-4 py-2 bg-cyber-gray-800 text-cyber-gray-50 rounded-lg \n                       hover:bg-cyber-gray-700 transition-colors disabled:opacity-50\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleCrop}\n              disabled={cropping}\n              className=\"px-4 py-2 bg-white text-cyber-gray-900 rounded-lg\n                       hover:bg-cyber-gray-100 transition-colors disabled:opacity-50\n                       flex items-center gap-2\"\n            >\n              {cropping ? (\n                <>\n                  <div className=\"h-5 w-5 border-2 border-cyber-gray-900 border-t-transparent rounded-full animate-spin\"></div>\n                  Processing...\n                </>\n              ) : (\n                <>\n                  <Save className=\"h-5 w-5\" />\n                  Save Changes\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidv4 } from 'uuid';\n\nexport async function uploadProfilePicture(userId: string, file: File | Blob): Promise<string> {\n  if (!userId) {\n    throw new Error('User ID is required');\n  }\n\n  if (!file) {\n    throw new Error('File is required');\n  }\n\n  try {\n    // Validate file type for File objects\n    if (file instanceof File && !file.type.startsWith('image/')) {\n      throw new Error('Invalid file type. Please upload an image file.');\n    }\n\n    // Validate file size (5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      throw new Error('File size must be less than 5MB');\n    }\n\n    const CLOUD_NAME = import.meta.env.VITE_CLOUDINARY_CLOUD_NAME;\n    const UPLOAD_PRESET = import.meta.env.VITE_CLOUDINARY_UPLOAD_PRESET;\n\n    if (!CLOUD_NAME || !UPLOAD_PRESET) {\n      console.error('Missing Cloudinary configuration:', { CLOUD_NAME, UPLOAD_PRESET });\n      throw new Error('Image upload is not properly configured');\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('upload_preset', UPLOAD_PRESET);\n    formData.append('folder', 'profile-pictures');\n    formData.append('public_id', `${userId}_${uuidv4()}`);\n\n    const response = await fetch(\n      `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,\n      {\n        method: 'POST',\n        body: formData\n      }\n    );\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error('Cloudinary upload failed:', errorData);\n      throw new Error(errorData.error?.message || 'Upload failed');\n    }\n\n    const data = await response.json();\n    \n    // Apply transformations via URL\n    const transformedUrl = data.secure_url.replace(\n      '/upload/',\n      '/upload/c_fill,g_face,h_400,w_400,q_auto:best,f_auto/'\n    );\n\n    return transformedUrl;\n  } catch (error) {\n    console.error('Error in uploadProfilePicture:', error);\n    \n    if (error instanceof Error) {\n      throw new Error(`Upload failed: ${error.message}`);\n    }\n    \n    throw new Error('Failed to upload profile picture. Please try again.');\n  }\n}\n\nexport async function uploadProfileBanner(userId: string, file: File | Blob): Promise<string> {\n  if (!userId) {\n    throw new Error('User ID is required');\n  }\n\n  if (!file) {\n    throw new Error('File is required');\n  }\n\n  try {\n    // Validate file type for File objects\n    if (file instanceof File && !file.type.startsWith('image/')) {\n      throw new Error('Invalid file type. Please upload an image file.');\n    }\n\n    // Validate file size (5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      throw new Error('File size must be less than 5MB');\n    }\n\n    const CLOUD_NAME = import.meta.env.VITE_CLOUDINARY_CLOUD_NAME;\n    const UPLOAD_PRESET = import.meta.env.VITE_CLOUDINARY_UPLOAD_PRESET;\n\n    if (!CLOUD_NAME || !UPLOAD_PRESET) {\n      console.error('Missing Cloudinary configuration:', { CLOUD_NAME, UPLOAD_PRESET });\n      throw new Error('Image upload is not properly configured');\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('upload_preset', UPLOAD_PRESET);\n    formData.append('folder', 'profile-banners');\n    formData.append('public_id', `${userId}_banner_${uuidv4()}`);\n\n    const response = await fetch(\n      `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,\n      {\n        method: 'POST',\n        body: formData\n      }\n    );\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error('Cloudinary upload failed:', errorData);\n      throw new Error(errorData.error?.message || 'Upload failed');\n    }\n\n    const data = await response.json();\n    \n    // Apply transformations via URL for banner optimization\n    const transformedUrl = data.secure_url.replace(\n      '/upload/',\n      '/upload/c_fill,g_auto,h_400,w_1200,q_auto:best,f_auto/'\n    );\n\n    return transformedUrl;\n  } catch (error) {\n    console.error('Error in uploadProfileBanner:', error);\n    \n    if (error instanceof Error) {\n      throw new Error(`Upload failed: ${error.message}`);\n    }\n    \n    throw new Error('Failed to upload banner image. Please try again.');\n  }\n}","import { useState, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Camera, Upload, AlertCircle } from 'lucide-react';\nimport { ProfilePicture } from './ProfilePicture';\nimport { ImageCropper } from './ImageCropper';\nimport { uploadProfilePicture } from '../lib/storage';\n\ninterface ProfilePictureUploadProps {\n  currentUrl?: string;\n  userId: string;\n  onUpload: (url: string) => void;\n}\n\nexport function ProfilePictureUpload({ currentUrl, userId, onUpload }: ProfilePictureUploadProps) {\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [cropImage, setCropImage] = useState<string | null>(null);\n\n  const handleUpload = async (file: File | Blob) => {\n    if (!userId) {\n      setError('User ID is required');\n      return;\n    }\n\n    setUploading(true);\n    setError(null);\n\n    try {\n      const url = await uploadProfilePicture(userId, file);\n      onUpload(url);\n    } catch (error) {\n      console.error('Upload error:', error);\n      setError(error instanceof Error ? error.message : 'Failed to upload profile picture');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    setError(null);\n    const file = acceptedFiles[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        setCropImage(reader.result as string);\n      };\n      reader.onerror = () => {\n        setError('Failed to read the image file');\n      };\n      reader.readAsDataURL(file);\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif']\n    },\n    maxSize: 5 * 1024 * 1024, // 5MB\n    multiple: false,\n    onDropRejected: (fileRejections) => {\n      const error = fileRejections[0]?.errors[0];\n      if (error?.code === 'file-too-large') {\n        setError('File is too large. Maximum size is 5MB');\n      } else if (error?.code === 'file-invalid-type') {\n        setError('Invalid file type. Please upload an image');\n      } else {\n        setError('Invalid file. Please try again');\n      }\n    }\n  });\n\n  const handleCropComplete = async (croppedImage: Blob) => {\n    setCropImage(null);\n    await handleUpload(croppedImage);\n  };\n\n  return (\n    <div className=\"relative group\">\n      <div\n        {...getRootProps()}\n        className={`relative cursor-pointer transition-all duration-300\n          ${isDragActive ? 'ring-2 ring-neon-blue ring-offset-2 ring-offset-cyber-black' : ''}`}\n      >\n        {/* Profile Picture with Hover Effects */}\n        <div className=\"relative\">\n          {/* Animated Border */}\n          <div className=\"absolute -inset-0.5 bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink rounded-lg opacity-75 group-hover:opacity-100 blur transition-opacity\"></div>\n          \n          {/* Profile Picture */}\n          <div className=\"relative\">\n            <ProfilePicture \n              url={currentUrl} \n              size=\"xl\" \n              className={`\n                transition-all duration-300\n                ${uploading ? 'opacity-50' : ''}\n                ${isDragActive ? 'scale-105' : ''}\n              `} \n            />\n            \n            {/* Hover Overlay */}\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-cyber-gray-900/80 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300\">\n              <Upload className=\"h-6 w-6 text-neon-blue mb-2\" />\n              <span className=\"text-sm font-medium text-cyber-gray-50\">\n                {isDragActive ? 'Drop to Upload' : 'Click or Drag'}\n              </span>\n              <span className=\"text-xs text-cyber-gray-400 mt-1\">Max 5MB</span>\n            </div>\n          </div>\n        </div>\n        \n        <input {...getInputProps()} />\n      </div>\n      \n      {/* Loading State */}\n      {uploading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-cyber-gray-900/80 backdrop-blur-sm rounded-lg\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-neon-blue to-neon-purple rounded-full animate-spin opacity-75 blur\"></div>\n            <div className=\"relative h-8 w-8 border-2 border-neon-blue border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        </div>\n      )}\n      \n      {/* Error Message */}\n      {error && (\n        <div className=\"absolute -bottom-20 left-1/2 transform -translate-x-1/2 w-64\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-red-500/20 rounded-lg blur\"></div>\n            <div className=\"relative p-3 bg-cyber-gray-900 border border-red-500/50 rounded-lg\">\n              <div className=\"flex items-start gap-2\">\n                <AlertCircle className=\"h-5 w-5 text-red-500 flex-shrink-0\" />\n                <p className=\"text-sm text-red-500\">{error}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Image Cropper Modal */}\n      {cropImage && (\n        <ImageCropper\n          image={cropImage}\n          onCropComplete={handleCropComplete}\n          onCancel={() => setCropImage(null)}\n          aspectRatio={1}\n        />\n      )}\n    </div>\n  );\n}","import type { UserProfile } from '../types';\nimport { defaultBanners } from '../components/ProfileBanner';\n\ninterface BannerPreviewOptions {\n  width?: number;\n  height?: number;\n  includeProfile?: boolean;\n}\n\nconst defaultOptions: BannerPreviewOptions = {\n  width: 1200,  // Twitter card optimal size\n  height: 630,\n  includeProfile: true\n};\n\n// Load an image and return as HTMLImageElement\nconst loadImage = (url: string): Promise<HTMLImageElement> => {\n  return new Promise((resolve, reject) => {\n    const img = new HTMLImageElement();\n    img.crossOrigin = 'anonymous';  // Enable CORS for external images\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = url;\n  });\n};\n\n// Draw a rounded rectangle\nconst drawRoundedRect = (\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number\n) => {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n};\n\n// Get banner gradient colors\nconst getBannerColors = (bannerId: string): [string, string] => {\n  switch (bannerId) {\n    case 'banner-masculine':\n      return ['#4A5D43', '#2F3B2F'];  // accent-moss to earth-900\n    case 'banner-feminine':\n      return ['#C67D63', '#8B9D83'];  // accent-clay to accent-sage\n    case 'banner-neutral':\n      return ['#D69F4C', '#F5F2EA'];  // accent-ochre to earth-800\n    default:\n      return ['#F5F2EA', '#E5E1D8'];  // earth-800 to earth-700 (default)\n  }\n};\n\nexport const generateBannerPreview = async (\n  profile: UserProfile,\n  bannerId: string,\n  options: BannerPreviewOptions = {}\n): Promise<string> => {\n  const { width, height, includeProfile } = { ...defaultOptions, ...options };\n  \n  // Create canvas\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d')!;\n\n  // Draw banner gradient background\n  const [color1, color2] = getBannerColors(bannerId);\n  const gradient = ctx.createLinearGradient(0, 0, width, height);\n  gradient.addColorStop(0, color1);\n  gradient.addColorStop(1, color2);\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, width, height);\n\n  // Add texture overlay\n  ctx.globalAlpha = 0.05;\n  const noisePattern = await loadImage('/noise-texture.png');\n  ctx.fillStyle = ctx.createPattern(noisePattern, 'repeat')!;\n  ctx.fillRect(0, 0, width, height);\n  ctx.globalAlpha = 1;\n\n  if (includeProfile) {\n    // Add dark overlay at bottom\n    const overlayGradient = ctx.createLinearGradient(0, height - 200, 0, height);\n    overlayGradient.addColorStop(0, 'rgba(47, 59, 47, 0)');\n    overlayGradient.addColorStop(1, 'rgba(47, 59, 47, 0.8)');\n    ctx.fillStyle = overlayGradient;\n    ctx.fillRect(0, height - 200, width, 200);\n\n    // Draw profile picture if available\n    if (profile.profilePicture) {\n      try {\n        const img = await loadImage(profile.profilePicture);\n        ctx.save();\n        \n        // Create circular clip for profile picture\n        ctx.beginPath();\n        ctx.arc(100, height - 100, 50, 0, Math.PI * 2);\n        ctx.clip();\n        \n        // Draw the image\n        ctx.drawImage(img, 50, height - 150, 100, 100);\n        ctx.restore();\n      } catch (err) {\n        console.error('Failed to load profile picture:', err);\n      }\n    }\n\n    // Add text overlay\n    ctx.fillStyle = '#F5F2EA';  // earth-800\n    ctx.font = 'bold 48px \"Space Grotesk\"';\n    ctx.fillText(profile.displayName, 180, height - 120);\n    \n    ctx.font = '24px \"Inter\"';\n    ctx.fillText(`Level ${profile.level}`, 180, height - 80);\n\n    // Add banner name\n    const banner = defaultBanners.find(b => b.id === bannerId);\n    if (banner) {\n      ctx.font = 'bold 32px \"Space Grotesk\"';\n      ctx.fillText(banner.name, 180, height - 30);\n    }\n  }\n\n  return canvas.toDataURL('image/png');\n};\n","import { useEffect, useState } from 'react';\nimport { X, CheckCircle, AlertCircle } from 'lucide-react';\n\ninterface ToastProps {\n  message: string;\n  type?: 'success' | 'error';\n  duration?: number;\n  onClose: () => void;\n}\n\nexport function Toast({ \n  message, \n  type = 'success', \n  duration = 3000, \n  onClose \n}: ToastProps) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    setIsVisible(true);\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setTimeout(onClose, 300); // Allow time for exit animation\n    }, duration);\n\n    return () => clearTimeout(timer);\n  }, [duration, onClose]);\n\n  return (\n    <div\n      className={`fixed bottom-4 right-4 flex items-center gap-3 px-4 py-3 rounded-lg\n                 shadow-lg transform transition-all duration-300\n                 ${type === 'success' ? 'bg-accent-sage/20' : 'bg-accent-rust/20'}\n                 ${type === 'success' ? 'text-accent-sage' : 'text-accent-rust'}\n                 ${isVisible ? 'translate-y-0 opacity-100' : 'translate-y-4 opacity-0'}`}\n      role=\"alert\"\n    >\n      {type === 'success' ? (\n        <CheckCircle className=\"h-5 w-5\" />\n      ) : (\n        <AlertCircle className=\"h-5 w-5\" />\n      )}\n      <p className=\"text-sm font-medium\">{message}</p>\n      <button\n        onClick={() => {\n          setIsVisible(false);\n          setTimeout(onClose, 300);\n        }}\n        className=\"p-1 hover:bg-earth-900/10 rounded-full transition-colors\"\n      >\n        <X className=\"h-4 w-4\" />\n      </button>\n    </div>\n  );\n}\n","import { createContext, useContext, useState, useCallback, ReactNode } from 'react';\nimport { Toast } from '../components/Toast';\n\ninterface ToastContextType {\n  showToast: (message: string, type?: 'success' | 'error') => void;\n}\n\nconst ToastContext = createContext<ToastContextType | null>(null);\n\ninterface Toast {\n  id: number;\n  message: string;\n  type: 'success' | 'error';\n}\n\nexport function ToastProvider({ children }: { children: ReactNode }) {\n  const [toasts, setToasts] = useState<Toast[]>([]);\n  const [counter, setCounter] = useState(0);\n\n  const showToast = useCallback((message: string, type: 'success' | 'error' = 'success') => {\n    setCounter(prev => prev + 1);\n    setToasts(prev => [...prev, { id: counter, message, type }]);\n  }, [counter]);\n\n  const removeToast = useCallback((id: number) => {\n    setToasts(prev => prev.filter(toast => toast.id !== id));\n  }, []);\n\n  return (\n    <ToastContext.Provider value={{ showToast }}>\n      {children}\n      <div className=\"fixed bottom-4 right-4 flex flex-col gap-2 z-50\">\n        {toasts.map(toast => (\n          <Toast\n            key={toast.id}\n            message={toast.message}\n            type={toast.type}\n            onClose={() => removeToast(toast.id)}\n          />\n        ))}\n      </div>\n    </ToastContext.Provider>\n  );\n}\n\nexport function useToast() {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n}\n","import { useState } from 'react';\nimport { Share, Twitter, Facebook, Linkedin, Copy, Check } from 'lucide-react';\nimport type { UserProfile } from '../types';\nimport { generateBannerPreview } from '../utils/banner-preview';\nimport { useToast } from '../contexts/ToastContext';\n\ninterface BannerShareButtonProps {\n  profile: UserProfile;\n  bannerId: string;\n}\n\ninterface SharePlatform {\n  name: string;\n  icon: typeof Twitter;\n  color: string;\n  shareUrl: (url: string, title: string) => string;\n}\n\nconst platforms: SharePlatform[] = [\n  {\n    name: 'Twitter',\n    icon: Twitter,\n    color: '#1DA1F2',\n    shareUrl: (url, title) => \n      `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`\n  },\n  {\n    name: 'Facebook',\n    icon: Facebook,\n    color: '#4267B2',\n    shareUrl: (url) => \n      `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`\n  },\n  {\n    name: 'LinkedIn',\n    icon: Linkedin,\n    color: '#0077B5',\n    shareUrl: (url, title) => \n      `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`\n  }\n];\n\nexport function BannerShareButton({ profile, bannerId }: BannerShareButtonProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const { showToast } = useToast();\n\n  const handleShare = async (platform?: SharePlatform) => {\n    setIsGenerating(true);\n    try {\n      // Generate preview image\n      const previewImage = await generateBannerPreview(profile, bannerId);\n      \n      // Get banner name\n      const bannerName = bannerId.split('-')[1].charAt(0).toUpperCase() + \n                        bannerId.split('-')[1].slice(1);\n      \n      // Create share URL with preview image\n      const shareUrl = `${window.location.origin}/banner/${bannerId}/preview`;\n      const shareTitle = `Check out my ${bannerName} banner on Trade Ya!`;\n\n      if (platform) {\n        // Share to platform\n        window.open(platform.shareUrl(shareUrl, shareTitle), '_blank');\n      } else {\n        // Copy link and show success notification\n        await navigator.clipboard.writeText(shareUrl);\n        showToast('Link copied to clipboard!', 'success');\n        setIsOpen(false);\n      }\n    } catch (err) {\n      console.error('Failed to share banner:', err);\n      showToast('Failed to share banner', 'error');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"btn-secondary flex items-center gap-2\"\n        disabled={isGenerating}\n      >\n        <Share className=\"h-4 w-4\" />\n        Share Banner\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-48 rounded-lg bg-earth-800 \n                      border border-earth-700 shadow-lg overflow-hidden z-50\">\n          <div className=\"p-1 space-y-1\">\n            {platforms.map(platform => (\n              <button\n                key={platform.name}\n                onClick={() => handleShare(platform)}\n                className=\"flex items-center gap-2 w-full p-2 hover:bg-earth-700 rounded\n                         transition-colors duration-200\"\n                disabled={isGenerating}\n              >\n                <platform.icon \n                  className=\"h-4 w-4\"\n                  style={{ color: platform.color }}\n                />\n                {platform.name}\n              </button>\n            ))}\n            <button\n              onClick={() => handleShare()}\n              className=\"flex items-center gap-2 w-full p-2 hover:bg-earth-700 rounded\n                       transition-colors duration-200\"\n              disabled={isGenerating}\n            >\n              <Copy className=\"h-4 w-4\" />\n              Copy Link\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Palette, Share } from 'lucide-react';\nimport { BannerShareButton } from './BannerShareButton';\nimport type { UserProfile } from '../types';\n\ninterface BannerStyle {\n  id: string;\n  name: string;\n  style: string;\n  levelRequired: number;\n  description: string;\n}\n\nexport const defaultBanners: BannerStyle[] = [\n  {\n    id: 'banner-masculine',\n    name: 'Earth Force',\n    style: 'banner-masculine',\n    levelRequired: 0,\n    description: 'A bold, dynamic gradient inspired by natural strength'\n  },\n  {\n    id: 'banner-feminine',\n    name: 'Gentle Dawn',\n    style: 'banner-feminine',\n    levelRequired: 0,\n    description: 'A soft, harmonious blend of warm earth tones'\n  },\n  {\n    id: 'banner-neutral',\n    name: 'Golden Balance',\n    style: 'banner-neutral',\n    levelRequired: 0,\n    description: 'A balanced composition of earthy gold and warm beige'\n  },\n  {\n    id: 'banner-advanced-masculine',\n    name: 'Mountain Force',\n    style: 'banner-masculine',\n    levelRequired: 5,\n    description: 'An advanced dynamic gradient for seasoned members'\n  },\n  {\n    id: 'banner-advanced-feminine',\n    name: 'Forest Dawn',\n    style: 'banner-feminine',\n    levelRequired: 10,\n    description: 'A premium blend of natural tones for experienced members'\n  },\n  {\n    id: 'banner-advanced-neutral',\n    name: 'Mystic Balance',\n    style: 'banner-neutral',\n    levelRequired: 15,\n    description: 'An elite composition unlocked through dedication'\n  }\n];\n\ninterface ProfileBannerProps {\n  userId: string;\n  selectedBanner?: string;\n  userLevel: number;\n  editable?: boolean;\n  profile: UserProfile;\n  onUpdate: (bannerId: string) => Promise<void>;\n}\n\n// Preload banners to ensure smooth transitions\nconst preloadBanner = (bannerId: string) => {\n  const div = document.createElement('div');\n  div.style.position = 'absolute';\n  div.style.opacity = '0';\n  div.style.pointerEvents = 'none';\n  div.className = bannerId;\n  document.body.appendChild(div);\n  requestAnimationFrame(() => {\n    document.body.removeChild(div);\n  });\n};\n\nexport function ProfileBanner({ \n  userId, \n  selectedBanner, \n  userLevel, \n  editable = false,\n  profile,\n  onUpdate \n}: ProfileBannerProps) {\n  const [isCustomizing, setIsCustomizing] = useState(false);\n  const [previewBanner, setPreviewBanner] = useState(selectedBanner);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  \n  // Preload all available banners\n  useEffect(() => {\n    defaultBanners.forEach(banner => {\n      if (banner.levelRequired <= userLevel) {\n        preloadBanner(banner.style);\n      }\n    });\n  }, [userLevel]);\n\n  // Update preview when selected banner changes\n  useEffect(() => {\n    setPreviewBanner(selectedBanner);\n  }, [selectedBanner]);\n\n  const getBannerClass = (bannerId?: string) => {\n    const baseClass = bannerId ? \n      defaultBanners.find(b => b.id === bannerId)?.style : \n      'banner-default';\n    \n    return `${baseClass} transition-all duration-500 ease-in-out ${\n      isTransitioning ? 'opacity-0 scale-105' : 'opacity-100 scale-100'\n    }`;\n  };\n\n  const handleBannerSelect = async (bannerId: string) => {\n    setIsTransitioning(true);\n    setPreviewBanner(bannerId);\n    \n    // Wait for fade out\n    await new Promise(resolve => setTimeout(resolve, 250));\n    \n    // Update banner\n    await onUpdate(bannerId);\n    \n    // Wait for fade in\n    setTimeout(() => {\n      setIsTransitioning(false);\n    }, 250);\n  };\n\n  // Filter and sort banners\n  const availableBanners = defaultBanners\n    .filter(b => b.levelRequired <= userLevel)\n    .sort((a, b) => a.levelRequired - b.levelRequired);\n  \n  const upcomingBanners = defaultBanners\n    .filter(b => b.levelRequired > userLevel)\n    .sort((a, b) => a.levelRequired - b.levelRequired);\n\n  // Debug info with sorted banners\n  console.log('ProfileBanner render:', {\n    userLevel,\n    editable,\n    selectedBanner,\n    previewBanner,\n    availableBanners,\n    upcomingBanners\n  });\n\n  if (availableBanners.length === 0) {\n    console.warn('No available banners for level:', userLevel);\n  }\n\n  return (\n    <div className=\"relative\">\n      <div className=\"profile-banner relative\">\n        <div \n          className=\"absolute inset-0\"\n          style={{\n            background: previewBanner?.includes('masculine')\n              ? 'linear-gradient(135deg, #4A5D43 0%, #2F3B2F 100%)'\n              : previewBanner?.includes('feminine')\n              ? 'linear-gradient(135deg, #C67D63 0%, #8B9D83 100%)'\n              : previewBanner?.includes('neutral')\n              ? 'linear-gradient(135deg, #D69F4C 0%, #F5F2EA 100%)'\n              : '#1F2937'\n          }}\n        />\n        {editable && (\n          <button \n            onClick={() => setIsCustomizing(true)}\n            className=\"absolute top-2 right-2 p-2 rounded-full bg-white/10 backdrop-blur-sm\n                     hover:bg-white/20 transition-all\"\n            aria-label=\"Customize Banner\"\n            title=\"Click to customize banner\"\n          >\n            <Palette className=\"h-5 w-5 text-white\" />\n          </button>\n        )}\n      </div>\n\n      {isCustomizing && (\n        <div \n          className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"banner-dialog-title\"\n        >\n          <div className=\"bg-earth-800 rounded-lg shadow-xl max-w-3xl w-full overflow-hidden\">\n            <div className=\"flex justify-between items-center border-b border-earth-700 p-4\">\n              <h3 id=\"banner-dialog-title\" className=\"text-lg font-display font-semibold text-white\">\n                Choose Your Banner\n              </h3>\n              <button\n                onClick={() => {\n                  setIsCustomizing(false);\n                  setPreviewBanner(selectedBanner);\n                }}\n                className=\"p-2 rounded-full hover:bg-earth-700 transition-colors\"\n                aria-label=\"Close dialog\"\n              >\n                <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div className=\"p-8 space-y-8\">\n              {/* Banner Preview */}\n              <div \n                className=\"profile-banner mb-6\"\n                style={{\n                  background: previewBanner?.includes('masculine')\n                    ? 'linear-gradient(135deg, #4A5D43 0%, #2F3B2F 100%)'\n                    : previewBanner?.includes('feminine')\n                    ? 'linear-gradient(135deg, #C67D63 0%, #8B9D83 100%)'\n                    : previewBanner?.includes('neutral')\n                    ? 'linear-gradient(135deg, #D69F4C 0%, #F5F2EA 100%)'\n                    : 'var(--earth-800)'\n                }}\n              />\n\n              {/* Available Banners */}\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <h4 className=\"text-sm font-medium text-gray-300\">Available Styles</h4>\n                  <span className=\"text-xs text-gray-500\">Your Level: {userLevel}</span>\n                </div>\n                <div className=\"banner-selector rounded-lg border border-earth-700\">\n                  {availableBanners.length === 0 && (\n                    <div className=\"text-center py-8\">\n                      <p className=\"text-gray-400\">No banners available yet</p>\n                      <p className=\"text-gray-500 text-sm mt-2\">Level up to unlock banners!</p>\n                    </div>\n                  )}\n                  {defaultBanners\n                    .filter(banner => {\n                      // Debug info\n                      console.group('Banner Availability Check');\n                      console.log('Banner:', banner.name);\n                      console.log('Banner Level Required:', banner.levelRequired);\n                      console.log('User Level:', userLevel);\n                      console.log('Is Available:', banner.levelRequired <= userLevel);\n                      console.groupEnd();\n                      \n                      return banner.levelRequired <= userLevel;\n                    })\n                    .map(banner => (\n                      <button\n                        key={banner.id}\n                        className={`banner-option transform transition-all duration-300 relative ${\n                          previewBanner === banner.id \n                            ? 'selected scale-95' \n                            : selectedBanner === banner.id\n                            ? 'border-accent-clay/50'\n                            : ''\n                        }`}\n                        onMouseEnter={() => {\n                          console.log('Hovering banner:', banner.name);\n                          setPreviewBanner(banner.id);\n                        }}\n                        onMouseLeave={() => setPreviewBanner(selectedBanner)}\n                        onClick={() => {\n                          console.log('Selected banner:', banner.name);\n                          handleBannerSelect(banner.id);\n                        }}\n                        style={{\n                          background: `\n                            ${banner.style === 'banner-masculine' \n                              ? 'linear-gradient(135deg, #4A5D43 0%, #2F3B2F 100%)'\n                              : banner.style === 'banner-feminine'\n                              ? 'linear-gradient(135deg, #C67D63 0%, #8B9D83 100%)'\n                              : 'linear-gradient(135deg, #D69F4C 0%, #F5F2EA 100%)'\n                            }`,\n                          backgroundSize: '200% 200%',\n                          animation: 'gradient 8s ease infinite'\n                        }}\n                        title={`${banner.name} - ${banner.description}`}\n                      >\n                        <div className=\"absolute inset-0 flex flex-col items-center justify-center p-2\">\n                          <span>{banner.name}</span>\n                          <span>{banner.description}</span>\n                        </div>\n                      </button>\n                  ))}\n                </div>\n                \n                {defaultBanners.filter(banner => banner.levelRequired <= userLevel).length === 0 ? (\n                  <div className=\"text-center p-4 bg-earth-800/50 rounded-lg\">\n                    <p className=\"text-text-secondary\">No banners available at your current level.</p>\n                    <p className=\"text-text-muted text-sm mt-2\">\n                      Level up to unlock more banner styles!\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"mt-6 bg-earth-800/30 rounded-lg p-4\">\n                    <h5 className=\"text-sm font-medium text-gray-400 mb-3\">Upcoming Banners</h5>\n                    <div className=\"space-y-3\">\n                      {defaultBanners\n                        .filter(banner => banner.levelRequired > userLevel)\n                        .map(banner => (\n                          <div key={banner.id} className=\"flex items-center justify-between p-2 rounded bg-earth-800/50 border border-earth-700\">\n                            <div className=\"flex items-center gap-3\">\n                              <div className=\"w-8 h-8 rounded\" style={{\n                                background: banner.style === 'banner-masculine'\n                                  ? 'linear-gradient(135deg, #4A5D43 0%, #2F3B2F 100%)'\n                                  : banner.style === 'banner-feminine'\n                                  ? 'linear-gradient(135deg, #C67D63 0%, #8B9D83 100%)'\n                                  : 'linear-gradient(135deg, #D69F4C 0%, #F5F2EA 100%)'\n                              }} />\n                              <span className=\"text-sm font-medium text-gray-300\">{banner.name}</span>\n                            </div>\n                            <span className=\"text-sm px-2 py-1 rounded bg-earth-900/50 text-gray-400\">Level {banner.levelRequired}</span>\n                          </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Actions */}\n              <div className=\"mt-6 flex justify-end gap-2\">\n                <BannerShareButton\n                  profile={profile}\n                  bannerId={previewBanner || selectedBanner || 'banner-default'}\n                />\n                <button\n                  className=\"btn-secondary\"\n                  onClick={() => {\n                    setIsCustomizing(false);\n                    setPreviewBanner(selectedBanner);\n                  }}\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport type { UserProfile } from '../types';\nimport { Pencil, X, Check, Plus, ThumbsUp, User, Link as LinkIcon, Shield, Palette } from 'lucide-react';\nimport { ReputationCard } from '../components/ReputationCard';\nimport { BannerUnlockNotification } from '../components/BannerUnlockNotification';\nimport { addEndorsement } from '../lib/reputation';\nimport { ProfilePicture } from '../components/ProfilePicture';\nimport { ProfilePictureUpload } from '../components/ProfilePictureUpload';\nimport { ProfileBanner } from '../components/ProfileBanner';\nimport { isValidUsername, isUsernameAvailable } from '../utils/username';\n\nexport function Profile() {\n  const { user, updateUsername } = useAuth();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  const [editedProfile, setEditedProfile] = useState<Partial<UserProfile>>({});\n  const [newSkill, setNewSkill] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [endorsing, setEndorsing] = useState(false);\n  const [usernameError, setUsernameError] = useState<string>('');\n  const [usernameAvailable, setUsernameAvailable] = useState(false);\n  const [checkingUsername, setCheckingUsername] = useState(false);\n  const [unlockedBanner, setUnlockedBanner] = useState<string | null>(null);\n  const [isCustomizingBanner, setIsCustomizingBanner] = useState(false);\n\n  useEffect(() => {\n    async function fetchProfile() {\n      if (!user) return;\n      \n      try {\n        const docRef = doc(db, 'users', user.uid);\n        const docSnap = await getDoc(docRef);\n        \n        if (docSnap.exists()) {\n          const profileData = docSnap.data();\n          const initializedProfile = {\n            id: docSnap.id,\n            ...profileData,\n            level: typeof profileData.level === 'number' ? profileData.level : 0\n          } as UserProfile;\n          \n          // Log profile data for debugging\n          console.log('Profile loaded:', initializedProfile);\n          \n          setProfile(initializedProfile);\n          setEditedProfile(initializedProfile);\n\n          // Ensure level is set in database\n          if (typeof profileData.level !== 'number') {\n            console.log('Initializing user level to 0');\n            updateDoc(docRef, {\n              level: 0,\n              updatedAt: new Date()\n            }).catch(console.error);\n          }\n        }\n      } catch (err) {\n        setError('Failed to load profile');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchProfile();\n  }, [user]);\n\n  // Check for banner unlocks when profile changes\n  useEffect(() => {\n    if (!profile) return;\n\n    // Define levels at which advanced banners are unlocked\n    const bannerUnlocks = [\n      { level: 5, bannerId: 'banner-advanced-masculine' },\n      { level: 10, bannerId: 'banner-advanced-feminine' },\n      { level: 15, bannerId: 'banner-advanced-neutral' }\n    ];\n\n    // Find the first unlocked banner that hasn't been selected\n    const newUnlock = bannerUnlocks.find(\n      unlock => profile.level >= unlock.level && \n      (!profile.selectedBanner || profile.selectedBanner !== unlock.bannerId)\n    );\n\n    if (newUnlock) {\n      setUnlockedBanner(newUnlock.bannerId);\n    }\n\n    // Ensure profile has a level property initialized\n    if (typeof profile.level !== 'number') {\n      updateDoc(doc(db, 'users', profile.id), {\n        level: 0,\n        updatedAt: new Date()\n      }).catch(console.error);\n    }\n  }, [profile?.level, profile?.selectedBanner]);\n\n  const handleUsernameChange = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newUsername = e.target.value;\n    setEditedProfile(prev => ({ ...prev, username: newUsername }));\n    \n    // Reset states\n    setUsernameError('');\n    setUsernameAvailable(false);\n    \n    if (!newUsername) return;\n    \n    if (!isValidUsername(newUsername)) {\n      setUsernameError('Username must start with @ and contain only letters, numbers, and hyphens');\n      return;\n    }\n    \n    setCheckingUsername(true);\n    try {\n      const available = await isUsernameAvailable(newUsername);\n      if (available || newUsername === profile?.username) {\n        setUsernameAvailable(true);\n      } else {\n        setUsernameError('Username is already taken');\n      }\n    } catch (err) {\n      setUsernameError('Error checking username availability');\n    } finally {\n      setCheckingUsername(false);\n    }\n  }, [profile]);\n\n  const handleProfilePictureUpload = async (url: string) => {\n    if (!user || !profile) return;\n    \n    try {\n      await updateDoc(doc(db, 'users', user.uid), {\n        profilePicture: url,\n        updatedAt: new Date()\n      });\n      \n      // Update both profile and editedProfile states\n      setProfile(prev => prev ? { ...prev, profilePicture: url } : null);\n      setEditedProfile(prev => ({ ...prev, profilePicture: url }));\n    } catch (err) {\n      setError('Failed to update profile picture');\n    }\n  };\n\n  const handleSave = async () => {\n    if (!user || !profile) return;\n    \n    setSaving(true);\n    try {\n      // Update username if changed\n      if (editedProfile.username && editedProfile.username !== profile.username) {\n        if (!isValidUsername(editedProfile.username)) {\n          throw new Error('Invalid username format');\n        }\n        await updateUsername(editedProfile.username);\n      }\n\n      // Update other profile fields\n      const docRef = doc(db, 'users', user.uid);\n      const updates = { ...editedProfile };\n      delete updates.username; // Username is handled separately\n\n      await updateDoc(docRef, {\n        ...updates,\n        updatedAt: new Date()\n      });\n      \n      setProfile({ ...profile, ...editedProfile });\n      setIsEditing(false);\n    } catch (err: any) {\n      setError(err.message || 'Failed to save profile');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleAddSkill = () => {\n    if (!newSkill.trim() || editedProfile.skills?.includes(newSkill.trim())) return;\n    \n    setEditedProfile(prev => ({\n      ...prev,\n      skills: [...(prev.skills || []), newSkill.trim()],\n      // Initialize skill level for new skill\n      skillLevels: {\n        ...prev.skillLevels,\n        [newSkill.trim()]: { level: 1, experience: 0 }\n      }\n    }));\n    setNewSkill('');\n  };\n\n  const handleRemoveSkill = (skillToRemove: string) => {\n    setEditedProfile(prev => {\n      const { [skillToRemove]: removedSkill, ...remainingSkills } = prev.skillLevels || {};\n      return {\n        ...prev,\n        skills: prev.skills?.filter(skill => skill !== skillToRemove) || [],\n        skillLevels: remainingSkills\n      };\n    });\n  };\n\n  const handleEndorse = async (skill: string) => {\n    if (!user || !profile || endorsing) return;\n    \n    setEndorsing(true);\n    try {\n      await addEndorsement(profile.id, user.uid, skill);\n      // Update local state\n      setProfile(prev => {\n        if (!prev) return null;\n        const currentEndorsers = prev.endorsements?.[skill] || [];\n        return {\n          ...prev,\n          endorsements: {\n            ...prev.endorsements,\n            [skill]: [...currentEndorsers, user.uid]\n          }\n        };\n      });\n    } catch (err) {\n      setError('Failed to endorse skill');\n    } finally {\n      setEndorsing(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-[60vh] flex flex-col items-center justify-center\">\n        <div className=\"relative\">\n          {/* Circular gradient glow */}\n          <div className=\"absolute inset-0 rounded-full bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink animate-spin opacity-75 blur-lg\"></div>\n          {/* Container */}\n          <div className=\"relative bg-cyber-gray-900 p-8 rounded-full border border-cyber-gray-800\">\n            {/* Spinner */}\n            <div className=\"h-8 w-8 border-2 border-neon-blue border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        </div>\n        <p className=\"mt-4 text-cyber-gray-400 animate-pulse\">Loading profile...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-red-900/20 border border-red-500/50 text-red-500 p-4 rounded-lg\">\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-cyber-gray-900/50 backdrop-blur-sm border border-cyber-gray-800 rounded-lg p-8 text-center\">\n          <Shield className=\"h-12 w-12 text-cyber-gray-400 mx-auto mb-4\" />\n          <p className=\"text-cyber-gray-300\">Profile not found</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Banner Unlock Notification */}\n      {unlockedBanner && (\n        <BannerUnlockNotification\n          bannerId={unlockedBanner}\n          onClose={() => setUnlockedBanner(null)}\n          onClick={() => {\n            setIsCustomizingBanner(true);\n            setUnlockedBanner(null);\n          }}\n        />\n      )}\n      <div className=\"card overflow-hidden\">\n        {/* Banner and Profile Picture */}\n        <div className=\"relative\">\n          <ProfileBanner\n            userId={user!.uid}\n            selectedBanner={profile.selectedBanner}\n            userLevel={typeof profile.level === 'number' ? profile.level : 0}\n            editable={true}\n            profile={profile}\n            onUpdate={async (bannerId) => {\n              setIsCustomizingBanner(false);\n              try {\n                await updateDoc(doc(db, 'users', user!.uid), {\n                  selectedBanner: bannerId,\n                  updatedAt: new Date()\n                });\n                setProfile(prev => prev ? { ...prev, selectedBanner: bannerId } : null);\n              } catch (err) {\n                setError('Failed to update banner');\n              }\n            }}\n          />\n          \n          {/* Profile Picture */}\n          <div className=\"absolute -bottom-12 left-8 z-10\">\n            {isEditing ? (\n              <ProfilePictureUpload\n                currentUrl={profile.profilePicture}\n                userId={user!.uid}\n                onUpload={handleProfilePictureUpload}\n              />\n            ) : (\n              <ProfilePicture url={profile.profilePicture} size=\"xl\" />\n            )}\n          </div>\n        </div>\n        \n        {/* Profile Content */}\n        <div className=\"p-6 mt-16\">\n          {/* Profile Header */}\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              {isEditing ? (\n                <input\n                  type=\"text\"\n                  value={editedProfile.displayName || ''}\n                  onChange={(e) => setEditedProfile(prev => ({ ...prev, displayName: e.target.value }))}\n                  className=\"text-2xl font-display font-bold text-gray-900 bg-transparent border-b-2 border-neon-blue focus:outline-none\"\n                  placeholder=\"Your name\"\n                />\n              ) : (\n                <h1 className=\"text-2xl font-display font-bold text-gray-900\">\n                  {profile.displayName}\n                </h1>\n              )}\n              <div className=\"flex flex-col gap-1\">\n                <p className=\"text-gray-600\">{profile.email}</p>\n                {isEditing ? (\n                  <div className=\"relative\">\n                    <input\n                      type=\"text\"\n                      value={editedProfile.username || ''}\n                      onChange={handleUsernameChange}\n                      className={`text-sm bg-transparent border-b ${\n                        usernameError\n                          ? 'border-red-500 text-red-500'\n                          : usernameAvailable\n                          ? 'border-green-500 text-green-600'\n                          : 'border-earth-700 text-gray-600'\n                      } focus:outline-none w-48`}\n                      placeholder=\"@username\"\n                    />\n                    {checkingUsername && (\n                      <span className=\"absolute text-xs text-gray-500 mt-1\">Checking availability...</span>\n                    )}\n                    {usernameError ? (\n                      <p className=\"absolute text-xs text-red-500 mt-1\">{usernameError}</p>\n                    ) : editedProfile.username && usernameAvailable && (\n                      <p className=\"absolute text-xs text-green-600 mt-1\">Username available!</p>\n                    )}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-gray-600\">{profile.username}</p>\n                )}\n              </div>\n            </div>\n            {isEditing ? (\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => {\n                    setIsEditing(false);\n                    setEditedProfile(profile);\n                    setUsernameError('');\n                    setUsernameAvailable(false);\n                  }}\n                  className=\"btn-secondary flex items-center gap-2\"\n                  disabled={saving}\n                >\n                  <X className=\"h-4 w-4\" />\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSave}\n                  className=\"btn-primary flex items-center gap-2\"\n                  disabled={saving || (editedProfile.username !== profile.username && !usernameAvailable)}\n                >\n                  {saving ? (\n                    <>\n                      <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                      Saving...\n                    </>\n                  ) : (\n                    <>\n                      <Check className=\"h-4 w-4\" />\n                      Save\n                    </>\n                  )}\n                </button>\n              </div>\n            ) : (\n              <button\n                onClick={() => setIsEditing(true)}\n                className=\"btn-secondary flex items-center gap-2\"\n              >\n                <Pencil className=\"h-4 w-4\" />\n                Edit Profile\n              </button>\n            )}\n          </div>\n\n          {/* Reputation Card */}\n          <div className=\"mb-8\">\n            <ReputationCard profile={profile} />\n          </div>\n\n          {/* Bio */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3\">About</h2>\n            {isEditing ? (\n              <textarea\n                name=\"bio\"\n                value={editedProfile.bio || ''}\n                onChange={(e) => setEditedProfile(prev => ({ ...prev, bio: e.target.value }))}\n                className=\"w-full p-3 bg-earth-800 border border-earth-700 rounded-lg \n                         text-gray-900 placeholder-gray-500\n                         focus:border-neon-blue focus:ring-1 focus:ring-neon-blue/30 \n                         transition-all duration-300\"\n                rows={4}\n                placeholder=\"Tell us about yourself...\"\n              />\n            ) : (\n              <p className=\"text-gray-700\">\n                {profile.bio || 'No bio yet. Click edit to add one!'}\n              </p>\n            )}\n          </div>\n\n          {/* Skills */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3\">Skills</h2>\n            {isEditing && (\n              <div className=\"flex gap-2 mb-4\">\n                <input\n                  type=\"text\"\n                  id=\"newSkill\"\n                  name=\"newSkill\"\n                  value={newSkill}\n                  onChange={(e) => setNewSkill(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && handleAddSkill()}\n                  placeholder=\"Add a skill...\"\n                  className=\"flex-1 p-2 bg-earth-800 border border-earth-700 rounded-lg \n                           text-gray-900 placeholder-gray-500\n                           focus:border-neon-blue focus:ring-1 focus:ring-neon-blue/30 \n                           transition-all duration-300\"\n                />\n                <button\n                  onClick={handleAddSkill}\n                  className=\"btn-primary flex items-center gap-2\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  Add\n                </button>\n              </div>\n            )}\n            <div className=\"flex flex-wrap gap-2\">\n              {(isEditing ? editedProfile.skills : profile.skills)?.map((skill) => (\n                <div\n                  key={skill}\n                  className=\"group flex items-center gap-2 px-3 py-1.5 bg-earth-800 \n                           text-gray-900 rounded-full text-sm border border-earth-700\n                           hover:border-neon-blue transition-all duration-300\"\n                >\n                  <span>{skill}</span>\n                  {isEditing ? (\n                    <button\n                      onClick={() => handleRemoveSkill(skill)}\n                      className=\"text-gray-600 hover:text-neon-pink transition-colors\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  ) : (\n                    <button\n                      onClick={() => handleEndorse(skill)}\n                      disabled={endorsing || user?.uid === profile.id}\n                      className=\"opacity-0 group-hover:opacity-100 transition-opacity text-neon-blue \n                               hover:text-neon-purple disabled:opacity-50\"\n                      title={user?.uid === profile.id ? \"You can't endorse your own skills\" : 'Endorse this skill'}\n                    >\n                      <ThumbsUp className=\"h-3 w-3\" />\n                    </button>\n                  )}\n                  {!isEditing && profile.endorsements?.[skill] && (\n                    <span className=\"px-1.5 py-0.5 bg-neon-purple/10 text-neon-purple rounded-full text-xs\">\n                      {profile.endorsements[skill].length}\n                    </span>\n                  )}\n                </div>\n              ))}\n              {(!isEditing ? profile.skills : editedProfile.skills)?.length === 0 && (\n                <p className=\"text-gray-600\">No skills added yet</p>\n              )}\n            </div>\n          </div>\n\n          {/* Portfolio */}\n          <div>\n            <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3\">Portfolio</h2>\n            {isEditing ? (\n              <div className=\"relative\">\n                <LinkIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                <input\n                  type=\"url\"\n                  name=\"portfolioUrl\"\n                  value={editedProfile.portfolio || ''}\n                  onChange={(e) => setEditedProfile(prev => ({ ...prev, portfolio: e.target.value }))}\n                  placeholder=\"https://your-portfolio.com\"\n                  className=\"w-full pl-10 pr-4 py-2 bg-earth-800 border border-earth-700 rounded-lg \n                           text-gray-900 placeholder-gray-500\n                           focus:border-neon-blue focus:ring-1 focus:ring-neon-blue/30 \n                           transition-all duration-300\"\n                />\n              </div>\n            ) : (\n              profile.portfolio ? (\n                <a\n                  href={profile.portfolio}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center gap-2 text-neon-blue hover:text-neon-purple transition-colors\"\n                >\n                  <LinkIcon className=\"h-4 w-4\" />\n                  {profile.portfolio}\n                </a>\n              ) : (\n                <p className=\"text-gray-600\">No portfolio link added</p>\n              )\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { collection, query, where, getDocs, limit, orderBy, startAt, endAt } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { X, AtSign } from 'lucide-react';\nimport type { UserProfile } from '../types/user';\n\ninterface UserSearchModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSelectUser: (user: { id: string; displayName: string }) => void;\n  excludeUserId?: string;\n}\n\nexport function UserSearchModal({ isOpen, onClose, onSelectUser, excludeUserId }: UserSearchModalProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [results, setResults] = useState<Array<UserProfile & { id: string }>>([]);\n  const [error, setError] = useState('');\n\n  const handleSearch = async () => {\n    if (!searchQuery.trim()) return;\n\n    setLoading(true);\n    setError('');\n    try {\n      const usersRef = collection(db, 'users');\n      const searchTrimmed = searchQuery.trim();\n      const searchLower = searchTrimmed.toLowerCase();\n\n      let users: Array<UserProfile & { id: string }> = [];\n\n      // Try first with displayNameLower\n      try {\n        const q = query(\n          usersRef,\n          orderBy('displayNameLower'),\n          startAt(searchLower),\n          endAt(searchLower + '\\uf8ff'),\n          limit(20)\n        );\n\n        const querySnapshot = await getDocs(q);\n        console.log('Query results:', querySnapshot.docs.map(doc => ({ \n          id: doc.id, \n          ...doc.data(),\n          searchMatch: 'displayNameLower' \n        })));\n\n        users = querySnapshot.docs\n          .map(doc => ({ id: doc.id, ...doc.data() } as UserProfile & { id: string }))\n          .filter(user => user.id !== excludeUserId);\n      } catch (err) {\n        console.warn('Error searching by displayNameLower:', err);\n        // If first query fails, fallback to displayName\n        const q = query(\n          usersRef,\n          orderBy('displayName'),\n          startAt(searchTrimmed),\n          endAt(searchTrimmed + '\\uf8ff'),\n          limit(20)\n        );\n\n        const querySnapshot = await getDocs(q);\n        users = querySnapshot.docs\n          .map(doc => ({ id: doc.id, ...doc.data() } as UserProfile & { id: string }))\n          .filter(user => user.id !== excludeUserId);\n      }\n\n      // Add email matches\n      if (users.length < 20) {\n        const emailQuery = query(\n          usersRef,\n          orderBy('email'),\n          startAt(searchLower),\n          endAt(searchLower + '\\uf8ff'),\n          limit(20)\n        );\n\n        const emailResults = await getDocs(emailQuery);\n        const emailUsers = emailResults.docs\n          .map(doc => ({ id: doc.id, ...doc.data() } as UserProfile & { id: string }))\n          .filter(user => \n            user.id !== excludeUserId && \n            !users.some(existing => existing.id === user.id)\n          );\n\n        users = [...users, ...emailUsers];\n      }\n\n      // Filter and sort all results\n      const finalUsers = users.filter(user => {\n        const displayNameMatch = user.displayName?.toLowerCase().includes(searchLower) ?? false;\n        const emailMatch = user.email?.toLowerCase().includes(searchLower) ?? false;\n        const usernameMatch = user.username?.toLowerCase().includes(searchLower) ?? false;\n        \n        return displayNameMatch || emailMatch || usernameMatch;\n      });\n\n      // Sort by relevance\n      finalUsers.sort((a, b) => {\n        const aName = a.displayName?.toLowerCase() ?? '';\n        const bName = b.displayName?.toLowerCase() ?? '';\n        \n        // Exact matches first\n        if (aName === searchLower) return -1;\n        if (bName === searchLower) return 1;\n        \n        // Starts with matches next\n        if (aName.startsWith(searchLower) && !bName.startsWith(searchLower)) return -1;\n        if (!aName.startsWith(searchLower) && bName.startsWith(searchLower)) return 1;\n        \n        // Contains matches next\n        const aContains = aName.includes(searchLower);\n        const bContains = bName.includes(searchLower);\n        if (aContains && !bContains) return -1;\n        if (!aContains && bContains) return 1;\n        \n        return aName.localeCompare(bName);\n      });\n\n      setResults(finalUsers.slice(0, 10));\n    } catch (err) {\n      const errMsg = err instanceof Error ? err.message : 'Unknown error';\n      setError(`Failed to search users: ${errMsg}`);\n      console.error('Error searching users:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-earth-900/50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-earth-800 rounded-lg shadow-xl w-full max-w-md\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-semibold text-text-primary\">Search Users</h2>\n            <button\n              onClick={onClose}\n              className=\"text-text-muted hover:text-text-secondary\"\n            >\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          <div className=\"mb-4\">\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n                placeholder=\"Search by name, email, or @username...\"\n                className=\"flex-1 p-2 border border-earth-700 rounded-lg focus:ring-2 focus:ring-accent-sage focus:border-accent-sage bg-earth-50 text-earth-900\"\n              />\n              <button\n                onClick={handleSearch}\n                disabled={loading}\n                className=\"px-4 py-2 bg-accent-moss text-earth-50 rounded-lg hover:bg-accent-sage disabled:opacity-50\"\n              >\n                {loading ? 'Searching...' : 'Search'}\n              </button>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"mb-4 p-3 bg-earth-50 text-accent-rust rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n            {results.map((user) => (\n              <button\n                key={user.id}\n                onClick={() => onSelectUser({ id: user.id, displayName: user.displayName ?? 'Unknown User' })}\n                className=\"w-full text-left p-3 hover:bg-earth-50 rounded-lg transition-colors\"\n              >\n                <div className=\"flex items-center space-x-3\">\n                  {user.photoURL ? (\n                    <img\n                      src={user.photoURL}\n                      alt={user.displayName}\n                      className=\"h-10 w-10 rounded-full\"\n                    />\n                  ) : (\n                    <div className=\"h-10 w-10 rounded-full bg-earth-700 flex items-center justify-center\">\n                      <span className=\"text-text-muted text-lg\">\n                        {(user.displayName?.[0] ?? '?').toUpperCase()}\n                      </span>\n                    </div>\n                  )}\n                  <div>\n                    <div>\n                      <div className=\"font-medium text-text-primary\">{user.displayName ?? 'Unknown User'}</div>\n                      <div className=\"text-sm text-text-muted flex items-center space-x-2\">\n                        <span className=\"flex items-center\">\n                          <AtSign className=\"h-3 w-3 mr-1\" />{user.username ?? 'no-username'}\n                        </span>\n                        <span>•</span>\n                        <span className=\"truncate\">{user.email ?? 'no-email'}</span>\n                      </div>\n                      {user.bio && (\n                        <div className=\"text-sm text-text-muted truncate mt-1\">{user.bio}</div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </button>\n            ))}\n            {results.length === 0 && searchQuery && !loading && (\n              <div className=\"text-center py-4 text-text-muted\">\n                No users found\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useFirestore } from '../hooks/useFirestore';\nimport { X, Plus, Search } from 'lucide-react';\nimport type { Trade } from '../types';\nimport { UserSearchModal } from '../components/UserSearchModal';\n\nexport function CreateTrade() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const { add } = useFirestore<Trade>('trades');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showUserSearch, setShowUserSearch] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    offeredSkill: '',\n    requestedSkill: '',\n    offeredSkills: [] as string[],\n    requestedSkills: [] as string[],\n    preferredUserId: '',\n    preferredUserName: '',\n    publiclyAvailable: true,\n  });\n\n  const handleAddSkill = (type: 'offered' | 'requested') => {\n    const skill = type === 'offered' ? formData.offeredSkill : formData.requestedSkill;\n    if (!skill.trim()) return;\n\n    const skillsArray = type === 'offered' ? 'offeredSkills' : 'requestedSkills';\n    const skillField = type === 'offered' ? 'offeredSkill' : 'requestedSkill';\n\n    if (!formData[skillsArray].includes(skill.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        [skillsArray]: [...prev[skillsArray], skill.trim()],\n        [skillField]: ''\n      }));\n    }\n  };\n\n  const handleRemoveSkill = (type: 'offered' | 'requested', skillToRemove: string) => {\n    const skillsArray = type === 'offered' ? 'offeredSkills' : 'requestedSkills';\n    setFormData(prev => ({\n      ...prev,\n      [skillsArray]: prev[skillsArray].filter(skill => skill !== skillToRemove)\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    if (!formData.title.trim() || !formData.description.trim()) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    if (formData.offeredSkills.length === 0 || formData.requestedSkills.length === 0) {\n      setError('Please add at least one skill in each category');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      await add({\n        title: formData.title,\n        description: formData.description,\n        offeredSkills: formData.offeredSkills,\n        requestedSkills: formData.requestedSkills,\n        creatorId: user.uid,\n        status: formData.preferredUserId ? 'reserved' : 'open',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        preferredUserId: formData.preferredUserId || undefined,\n        publiclyAvailable: formData.publiclyAvailable,\n      });\n      navigate('/discover');\n    } catch (err) {\n      setError('Failed to create trade');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"bg-earth-800 rounded-lg shadow-md overflow-hidden\">\n        <div className=\"p-6\">\n          <h1 className=\"text-2xl font-bold text-text-primary font-display mb-6\">Create a New Trade</h1>\n\n          {error && (\n            <div className=\"mb-4 p-3 bg-red-50 text-accent-rust rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            {/* Title */}\n            <div className=\"mb-4\">\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-text-secondary mb-1\">\n                Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                value={formData.title}\n                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n                className=\"w-full p-2 border border-earth-700 rounded-lg focus:ring-2 focus:ring-accent-sage focus:border-accent-sage bg-earth-50 text-text-primary\"\n                placeholder=\"What are you looking to trade?\"\n                required\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"mb-6\">\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-text-secondary mb-1\">\n                Description\n              </label>\n              <textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                className=\"w-full p-2 border border-earth-700 rounded-lg focus:ring-2 focus:ring-accent-sage focus:border-accent-sage bg-earth-50 text-text-primary\"\n                rows={4}\n                placeholder=\"Describe your trade offer in detail...\"\n                required\n              />\n            </div>\n\n            {/* Skills Offered */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-text-secondary mb-2\">\n                Skills You're Offering\n              </label>\n              <div className=\"flex gap-2 mb-2\">\n                <input\n                  type=\"text\"\n                  value={formData.offeredSkill}\n                  onChange={(e) => setFormData(prev => ({ ...prev, offeredSkill: e.target.value }))}\n                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddSkill('offered'))}\n                  className=\"flex-1 p-2 border border-earth-700 rounded-lg focus:ring-2 focus:ring-accent-sage focus:border-accent-sage bg-earth-50 text-text-primary\"\n                  placeholder=\"Add a skill you're offering...\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => handleAddSkill('offered')}\n                  className=\"flex items-center gap-2 px-4 py-2 bg-accent-sage text-earth-50 rounded-lg hover:bg-accent-moss transition-colors\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  Add\n                </button>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {formData.offeredSkills.map((skill) => (\n                  <span\n                    key={skill}\n                    className=\"px-3 py-1 bg-accent-sage bg-opacity-20 text-accent-moss rounded-full text-sm flex items-center\"\n                  >\n                    {skill}\n                    <button\n                      type=\"button\"\n                      onClick={() => handleRemoveSkill('offered', skill)}\n                      className=\"ml-2 text-accent-moss hover:text-accent-sage transition-colors\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                ))}\n              </div>\n            </div>\n\n            {/* Skills Requested */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-text-secondary mb-2\">\n                Skills You're Looking For\n              </label>\n              <div className=\"flex gap-2 mb-2\">\n                <input\n                  type=\"text\"\n                  value={formData.requestedSkill}\n                  onChange={(e) => setFormData(prev => ({ ...prev, requestedSkill: e.target.value }))}\n                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddSkill('requested'))}\n                  className=\"flex-1 p-2 border border-earth-700 rounded-lg focus:ring-2 focus:ring-accent-sage focus:border-accent-sage bg-earth-50 text-text-primary\"\n                  placeholder=\"Add a skill you're looking for...\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => handleAddSkill('requested')}\n                  className=\"flex items-center gap-2 px-4 py-2 bg-accent-sage text-earth-50 rounded-lg hover:bg-accent-moss transition-colors\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  Add\n                </button>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {formData.requestedSkills.map((skill) => (\n                  <span\n                    key={skill}\n                    className=\"px-3 py-1 bg-accent-clay bg-opacity-20 text-accent-rust rounded-full text-sm flex items-center\"\n                  >\n                    {skill}\n                    <button\n                      type=\"button\"\n                      onClick={() => handleRemoveSkill('requested', skill)}\n                      className=\"ml-2 text-accent-rust hover:text-accent-clay transition-colors\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                ))}\n              </div>\n            </div>\n\n            {/* Preferred User */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-text-secondary mb-2\">\n                Invite Specific User (Optional)\n              </label>\n              <div className=\"flex flex-col gap-2\">\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"text\"\n                    value={formData.preferredUserName}\n                    onChange={(e) => setFormData(prev => ({\n                      ...prev,\n                      preferredUserName: e.target.value,\n                      preferredUserId: '', // Reset ID when name changes\n                    }))}\n                    className=\"flex-1 p-2 border border-earth-700 rounded-lg focus:ring-2 focus:ring-accent-sage focus:border-accent-sage bg-earth-50 text-text-primary\"\n                    placeholder=\"Search user by name...\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowUserSearch(true)}\n                    className=\"px-4 py-2 bg-earth-700 text-text-secondary rounded-lg hover:bg-earth-600 flex items-center gap-2 transition-colors\"\n                  >\n                    <Search className=\"h-4 w-4\" />\n                    Search Users\n                  </button>\n                </div>\n                {formData.preferredUserId && (\n                  <div className=\"flex items-center justify-between p-2 bg-earth-700 rounded-lg\">\n                    <span className=\"text-sm text-text-light\">{formData.preferredUserName}</span>\n                    <button\n                      type=\"button\"\n                      onClick={() => setFormData(prev => ({\n                        ...prev,\n                        preferredUserId: '',\n                        preferredUserName: ''\n                      }))}\n                      className=\"text-accent-rust hover:text-accent-clay transition-colors\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n\n              {/* Public Availability Toggle */}\n              {formData.preferredUserId && (\n                <div className=\"mt-4\">\n                  <label className=\"flex items-center space-x-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.publiclyAvailable}\n                      onChange={(e) => setFormData(prev => ({\n                        ...prev,\n                        publiclyAvailable: e.target.checked\n                      }))}\n                      className=\"h-4 w-4 text-accent-sage focus:ring-accent-sage border-earth-700 rounded\"\n                    />\n                    <span className=\"text-sm text-text-secondary\">\n                      Keep trade visible to other users\n                    </span>\n                  </label>\n                  <p className=\"mt-1 text-xs text-text-muted\">\n                    Other users can request to join if the invited user declines\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* User Search Modal */}\n            <UserSearchModal\n              isOpen={showUserSearch}\n              onClose={() => setShowUserSearch(false)}\n              onSelectUser={(user) => {\n                setFormData(prev => ({\n                  ...prev,\n                  preferredUserId: user.id,\n                  preferredUserName: user.displayName\n                }));\n                setShowUserSearch(false);\n              }}\n              excludeUserId={user?.uid}\n            />\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-accent-sage text-earth-50 py-2 rounded-lg hover:bg-accent-moss transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? 'Creating Trade...' : 'Create Trade'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { doc, getDoc, updateDoc, addDoc, collection, query, where, getDocs, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { MessageSquare, User, Calendar, CheckCircle2, AlertCircle } from 'lucide-react';\nimport type { Trade, UserProfile } from '../types';\nimport { XP_CONFIG, awardExperience, checkAndAwardBadges } from '../lib/reputation';\n\nexport function TradeDetails() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [trade, setTrade] = useState<Trade | null>(null);\n  const [creator, setCreator] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [startingChat, setStartingChat] = useState(false);\n  const [updatingStatus, setUpdatingStatus] = useState(false);\n  const [showStatusModal, setShowStatusModal] = useState(false);\n\n  useEffect(() => {\n    async function fetchTradeAndCreator() {\n      if (!id) return;\n\n      try {\n        const tradeDoc = await getDoc(doc(db, 'trades', id));\n        if (!tradeDoc.exists()) {\n          setError('Trade not found');\n          return;\n        }\n\n        const tradeData = { id: tradeDoc.id, ...tradeDoc.data() } as Trade;\n        setTrade(tradeData);\n\n        // Fetch creator details\n        const creatorDoc = await getDoc(doc(db, 'users', tradeData.creatorId));\n        if (creatorDoc.exists()) {\n          setCreator({ id: creatorDoc.id, ...creatorDoc.data() } as UserProfile);\n        }\n      } catch (err) {\n        setError('Failed to load trade details');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchTradeAndCreator();\n  }, [id]);\n\n  const handleContact = async () => {\n    if (!user || !trade || !creator) return;\n    \n    setStartingChat(true);\n    try {\n      // Check if a conversation already exists\n      const conversationsRef = collection(db, 'conversations');\n      const q = query(\n        conversationsRef,\n        where('participants', 'array-contains', user.uid),\n        where('tradeId', '==', id)\n      );\n      \n      const querySnapshot = await getDocs(q);\n      let conversationId;\n      \n      if (querySnapshot.empty) {\n        // Create new conversation\n        const conversationDoc = await addDoc(conversationsRef, {\n          participants: [user.uid, trade.creatorId],\n          tradeId: id,\n          tradeName: trade.title,\n          lastMessage: '',\n          unreadCount: {\n            [trade.creatorId]: 0,\n            [user.uid]: 0\n          },\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp()\n        });\n        conversationId = conversationDoc.id;\n      } else {\n        // Use existing conversation\n        conversationId = querySnapshot.docs[0].id;\n      }\n      \n      navigate(`/messages/${conversationId}`);\n    } catch (err) {\n      console.error('Failed to start conversation:', err);\n      setError('Failed to start conversation');\n    } finally {\n      setStartingChat(false);\n    }\n  };\n\n  const handleUpdateStatus = async (newStatus: Trade['status']) => {\n    if (!trade || !user || updatingStatus) return;\n\n    setUpdatingStatus(true);\n    try {\n      await updateDoc(doc(db, 'trades', trade.id), {\n        status: newStatus,\n        updatedAt: serverTimestamp()\n      });\n\n      // Award XP when trade is completed\n      if (newStatus === 'completed') {\n        // Award XP to creator for their offered skills\n        await awardExperience(trade.creatorId, XP_CONFIG.TRADE_COMPLETION, trade.offeredSkills);\n        \n        // Check and award badges for creator\n        const creatorProfile = await getDoc(doc(db, 'users', trade.creatorId));\n        if (creatorProfile.exists()) {\n          await checkAndAwardBadges(trade.creatorId, creatorProfile.data() as UserProfile);\n        }\n\n        // Award XP to the other participant for their offered skills (if applicable)\n        if (user.uid !== trade.creatorId) {\n          await awardExperience(user.uid, XP_CONFIG.TRADE_COMPLETION, trade.requestedSkills);\n          \n          // Check and award badges for participant\n          const participantProfile = await getDoc(doc(db, 'users', user.uid));\n          if (participantProfile.exists()) {\n            await checkAndAwardBadges(user.uid, participantProfile.data() as UserProfile);\n          }\n        }\n      }\n\n      setTrade(prev => prev ? { ...prev, status: newStatus } : null);\n      setShowStatusModal(false);\n    } catch (err) {\n      setError('Failed to update trade status');\n    } finally {\n      setUpdatingStatus(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-3/4 mb-4\"></div>\n          <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-6\"></div>\n          <div className=\"space-y-3\">\n            <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !trade) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-red-50 text-red-700 p-4 rounded-lg\">\n          {error || 'Trade not found'}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"card card-form\">\n        <div className=\"p-6\">\n          {/* Header */}\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{trade.title}</h1>\n              <div className=\"flex items-center text-gray-600 text-sm\">\n                <Calendar className=\"h-4 w-4 mr-1\" />\n                Posted {new Date(trade.createdAt).toLocaleDateString()}\n              </div>\n            </div>\n            <div className=\"flex items-center\">\n              <span className={`badge-${trade.status}`}>\n                {trade.status.replace('_', ' ').charAt(0).toUpperCase() + trade.status.replace('_', ' ').slice(1)}\n              </span>\n            </div>\n          </div>\n\n          {/* Creator Info */}\n          {creator && (\n            <div className=\"flex items-center mb-6 p-4 bg-gray-50 rounded-lg\">\n              <User className=\"h-12 w-12 text-gray-400 mr-4\" />\n              <div>\n                <h3 className=\"font-medium text-gray-900\">{creator.displayName}</h3>\n                <p className=\"text-gray-600 text-sm\">{creator.bio || 'No bio available'}</p>\n              </div>\n            </div>\n          )}\n\n          {/* Description */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Description</h2>\n            <p className=\"text-gray-600 whitespace-pre-wrap\">{trade.description}</p>\n          </div>\n\n          {/* Skills */}\n          <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n            {/* Offered Skills */}\n            <div>\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Skills Offered</h2>\n              <div className=\"flex flex-wrap gap-2\">\n                {trade.offeredSkills.map((skill) => (\n                  <span\n                    key={skill}\n                    className=\"px-2 py-1 bg-accent-sage/20 text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n                  >\n                    {skill}\n                  </span>\n                ))}\n              </div>\n            </div>\n\n            {/* Requested Skills */}\n            <div>\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Skills Needed</h2>\n              <div className=\"flex flex-wrap gap-2\">\n                {trade.requestedSkills.map((skill) => (\n                  <span\n                    key={skill}\n                    className=\"px-2 py-1 bg-accent-clay/20 text-gray-900 text-sm rounded-full border border-accent-clay/30\"\n                  >\n                    {skill}\n                  </span>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-4\">\n            {user && user.uid !== trade.creatorId && trade.status === 'open' && (\n              <button\n                onClick={handleContact}\n                disabled={startingChat}\n                className=\"btn-primary btn-full py-2 flex-1 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <MessageSquare className=\"h-5 w-5\" />\n                {startingChat ? 'Starting Chat...' : 'Contact Creator'}\n              </button>\n            )}\n            \n            {user && (user.uid === trade.creatorId || trade.status !== 'open') && (\n              <button\n                onClick={() => setShowStatusModal(true)}\n                disabled={updatingStatus}\n                className=\"btn-primary btn-full py-2 flex-1 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <CheckCircle2 className=\"h-5 w-5\" />\n                Update Status\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Status Update Modal */}\n      {showStatusModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\">\n          <div className=\"card card-form p-6 max-w-md w-full\">\n            <h3 className=\"text-lg font-semibold mb-4\">Update Trade Status</h3>\n            <div className=\"space-y-3\">\n              {trade.status === 'open' && (\n                <>\n                  <button\n                    onClick={() => handleUpdateStatus('reserved')}\n                    disabled={updatingStatus}\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-clay/30 bg-accent-clay/20 text-gray-900 border border-accent-clay/30\"\n                  >\n                    <AlertCircle className=\"h-5 w-5\" />\n                    Mark as Reserved\n                  </button>\n                  <button\n                    onClick={() => handleUpdateStatus('in_progress')}\n                    disabled={updatingStatus}\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-clay/30 bg-accent-clay/20 text-gray-900 border border-accent-clay/30\"\n                  >\n                    <AlertCircle className=\"h-5 w-5\" />\n                    Mark as In Progress\n                  </button>\n                </>\n              )}\n              {trade.status === 'reserved' && (\n                <button\n                  onClick={() => handleUpdateStatus('in_progress')}\n                  disabled={updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-clay/30 bg-accent-clay/20 text-gray-900 border border-accent-clay/30\"\n                >\n                  <AlertCircle className=\"h-5 w-5\" />\n                  Mark as In Progress\n                </button>\n              )}\n              {trade.status === 'in_progress' && (\n                <button\n                  onClick={() => handleUpdateStatus('completed')}\n                  disabled={updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-ochre/30 bg-accent-ochre/20 text-gray-900 border border-accent-ochre/30\"\n                >\n                  <CheckCircle2 className=\"h-5 w-5\" />\n                  Mark as Completed\n                </button>\n              )}\n              {(trade.status === 'reserved' || trade.status === 'in_progress' || trade.status === 'completed') && (\n                <button\n                  onClick={() => handleUpdateStatus('cancelled')}\n                  disabled={updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-clay/30 bg-accent-clay/20 text-gray-900 border border-accent-clay/30\"\n                >\n                  Cancel Trade\n                </button>\n              )}\n              {(trade.status !== 'open' && trade.status !== 'cancelled') && (\n                <button\n                  onClick={() => handleUpdateStatus('open')}\n                  disabled={updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-sage/30 bg-accent-sage/20 text-gray-900 border border-accent-sage/30\"\n                >\n                  Reopen Trade\n                </button>\n              )}\n              <button\n                onClick={() => setShowStatusModal(false)}\n                className=\"w-full px-4 py-2 text-gray-600 hover:bg-gray-50 rounded\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useFirestore } from '../hooks/useFirestore';\nimport { collection, query, where, orderBy, onSnapshot, doc, getDoc } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { MessageSquare, User, ArrowRight, Check, CheckCheck } from 'lucide-react';\nimport type { Conversation, UserProfile } from '../types/messaging';\nimport { ProfilePicture } from '../components/ProfilePicture';\n\nexport function Messages() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const { user } = useAuth();\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [participants, setParticipants] = useState<{ [key: string]: UserProfile }>({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!user) return;\n\n    // Query using participants array\n    const q = query(\n      collection(db, 'conversations'),\n      where('participants', 'array-contains', user.uid),\n      orderBy('updatedAt', 'desc')\n    );\n\n    const unsubscribe = onSnapshot(q, async (snapshot) => {\n      try {\n        const conversationsData = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })) as Conversation[];\n        // Sort conversations by updatedAt locally\n        const sortedConversations = [...conversationsData].sort((a, b) => {\n          const timeA = a.updatedAt?.toMillis() || 0;\n          const timeB = b.updatedAt?.toMillis() || 0;\n          return timeB - timeA;\n        });\n        setConversations(sortedConversations);\n\n        const participantIds = new Set(\n          conversationsData.flatMap(conv => conv.participants.filter(id => id !== user.uid))\n        );\n        const participantsData: { [key: string]: UserProfile } = {};\n        \n        for (const participantId of participantIds) {\n          if (participantId !== user.uid) {\n            const userDocRef = doc(db, 'users', participantId);\n            const userDoc = await getDoc(userDocRef);\n            if (userDoc.exists()) {\n              participantsData[participantId] = {\n                id: userDoc.id,\n                ...userDoc.data()\n              } as UserProfile;\n            }\n          }\n        }\n        \n        setParticipants(participantsData);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to load conversations');\n        setLoading(false);\n      }\n    });\n\n    return () => unsubscribe();\n  }, [user]);\n\n  const getOtherParticipant = (conversation: Conversation) => {\n    const otherUserId = conversation.participants.find(id => id !== user?.uid);\n    return otherUserId ? participants[otherUserId] : null;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map((n) => (\n            <div key={n} className=\"card p-4\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"h-12 w-12 bg-earth-300 rounded-full\"></div>\n                <div className=\"flex-1\">\n                  <div className=\"h-4 bg-earth-300 rounded w-1/4 mb-2\"></div>\n                  <div className=\"h-3 bg-earth-300 rounded w-3/4\"></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"card p-4 border border-accent-rust/50 text-accent-rust\">\n          <div className=\"flex items-center gap-2\">\n            <MessageSquare className=\"h-5 w-5\" />\n            <span>{error}</span>\n          </div>\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"card overflow-hidden\">\n        <div className=\"p-6\">\n          <h1 className=\"text-3xl font-display font-bold gradient-text mb-6\">Messages</h1>\n\n          {conversations.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <MessageSquare className=\"h-12 w-12 mx-auto mb-4 text-earth-300\" />\n              <p className=\"text-text-muted\">No conversations yet</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {conversations.map((conversation) => {\n                const otherParticipant = getOtherParticipant(conversation);\n                const hasUnread = conversation.unreadCount?.[user.uid] > 0;\n                \n                return (\n                  <div\n                    key={conversation.id}\n                    onClick={() => navigate(`/messages/${conversation.id}`)}\n                    className={`group p-4 rounded-lg cursor-pointer transition-all duration-300\n                      ${hasUnread \n                        ? 'bg-accent-sage/10 hover:bg-accent-sage/20 border border-accent-sage/30' \n                        : 'hover:bg-earth-800/50 border border-earth-700/30'}`}\n                  >\n                    <div className=\"flex items-center\">\n                      <ProfilePicture \n                        url={otherParticipant?.profilePicture} \n                        size=\"md\"\n                        className=\"mr-4\"\n                      />\n                      \n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex justify-between items-start mb-1\">\n                          <h3 className=\"font-medium text-text-primary truncate\">\n                            {otherParticipant?.displayName || 'Unknown User'}\n                          </h3>\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"flex items-center gap-1\">\n                                {otherParticipant?.isOnline && (\n                                  <span className=\"h-2 w-2 bg-accent-sage rounded-full\" />\n                                )}\n                                <span className=\"text-sm text-text-muted\">\n                                  {conversation.lastMessageTimestamp ? (\n                                    conversation.lastMessageTimestamp.toDate().toLocaleString(undefined, {\n                                      month: 'short',\n                                      day: 'numeric',\n                                      hour: 'numeric',\n                                      minute: '2-digit'\n                                    })\n                                  ) : (\n                                    'No messages'\n                                  )}\n                                </span>\n                              </div>\n                              {conversation.lastMessage && (\n                                <span className=\"text-text-muted\">\n                                  {conversation.lastMessageStatus === 'read' ? (\n                                    <CheckCheck className=\"h-4 w-4 text-accent-sage\" />\n                                  ) : conversation.lastMessageStatus === 'delivered' ? (\n                                    <Check className=\"h-4 w-4 text-accent-sage\" />\n                                  ) : (\n                                    <Check className=\"h-4 w-4 text-text-muted\" />\n                                  )}\n                                </span>\n                              )}\n                            </div>\n                            <ArrowRight className=\"h-4 w-4 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity\" />\n                          </div>\n                        </div>\n                        \n                        {conversation.tradeName && (\n                          <p className=\"text-sm text-accent-moss mb-1 truncate font-medium\">\n                            Re: {conversation.tradeName}\n                          </p>\n                        )}\n                        \n                        <p className=\"text-sm text-text-secondary truncate flex items-center gap-2\">\n                          {otherParticipant && conversation.isTyping?.[otherParticipant.id] === true ? (\n                            <span className=\"text-accent-sage text-xs animate-pulse\">\n                              {otherParticipant.displayName} is typing...\n                            </span>\n                          ) : (\n                            conversation.lastMessage || 'No messages yet'\n                          )}\n                        </p>\n                        \n                        {hasUnread && (\n                          <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-accent-sage/20 text-accent-moss mt-2\">\n                            {conversation.unreadCount[user.uid]} new message{conversation.unreadCount[user.uid] > 1 ? 's' : ''}\n                            {otherParticipant?.isOnline && conversation.isTyping?.[otherParticipant.id] && (\n                              <span className=\"ml-2 text-accent-sage\">●</span>\n                            )}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport {\n  collection,\n  query,\n  orderBy,\n  onSnapshot,\n  addDoc,\n  updateDoc,\n  doc,\n  serverTimestamp,\n  getDoc,\n  Timestamp\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { ArrowLeft, Send, User } from 'lucide-react';\nimport type { Conversation, Message, UserProfile, MessageType, MessageStatus } from '../types/messaging';\n\nexport function Conversation() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const typingTimeoutRef = useRef<NodeJS.Timeout>();\n  const [otherUser, setOtherUser] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!id || !user) return;\n\n    // Subscribe to conversation updates\n    try {\n      const unsubConversation = onSnapshot(\n        doc(db, 'conversations', id),\n        async (snapshot) => {\n          if (!snapshot.exists()) {\n            console.error('Conversation not found:', id);\n            setError('Conversation not found');\n            setLoading(false);\n            return;\n          }\n\n          console.log('Conversation data received:', snapshot.data()); // Debug log\n\n          const conversationData = {\n            id: snapshot.id,\n            ...snapshot.data()\n          } as Conversation;\n          setConversation(conversationData);\n\n          // Fetch other participant's profile\n          const otherUserId = conversationData.participants.find(\n            (pid) => pid !== user.uid\n          );\n          if (otherUserId) {\n            try {\n              const userDoc = await getDoc(doc(db, 'users', otherUserId));\n              if (userDoc.exists()) {\n                setOtherUser({\n                  id: userDoc.id,\n                  ...userDoc.data()\n                } as UserProfile);\n              } else {\n                console.error('User profile not found:', otherUserId);\n                setError('User profile not found');\n              }\n            } catch (err) {\n              console.error('Failed to fetch other user:', err);\n              setError('Failed to load user profile');\n            }\n          }\n          setLoading(false);\n        },\n        (error) => {\n          console.error('Error fetching conversation:', error);\n          setError('Failed to load conversation');\n          setLoading(false);\n        }\n      );\n      \n      // Set up cleanup function\n      return () => {\n        unsubConversation();\n        setConversation(null);\n        setMessages([]);\n        setOtherUser(null);\n      };\n    } catch (err) {\n      console.error('Error setting up conversation listener:', err);\n      setError('Failed to load conversation');\n      setLoading(false);\n    }\n\n  }, [id, user]);\n\n  // Separate effect for messages subscription\n  useEffect(() => {\n    if (!id || !user) return;\n\n    console.log('Setting up messages listener for conversation:', id); // Debug log\n\n    const messagesRef = collection(db, 'conversations', id, 'messages');\n    const q = query(messagesRef, orderBy('createdAt', 'asc'));\n\n    const unsubMessages = onSnapshot(\n      q,\n      (snapshot) => {\n        const newMessages = snapshot.docs.map((docSnapshot) => {\n          const data = docSnapshot.data();\n          return {\n            id: docSnapshot.id,\n            conversationId: id,\n            senderId: data.senderId,\n            content: data.content,\n            createdAt: data.createdAt ? (data.createdAt as Timestamp) : null,\n            read: data.read || false,\n            type: (data.type || 'text') as MessageType,\n            status: (data.status || 'sent') as MessageStatus\n          };\n        });\n        setMessages(newMessages);\n        setLoading(false);\n\n        // Update read status\n        if (newMessages.length > 0) {\n          const unreadMessages = newMessages.filter(\n            (msg) => !msg.read && msg.senderId !== user.uid\n          );\n\n          if (unreadMessages.length > 0) {\n            updateDoc(doc(db, 'conversations', id), {\n              [`unreadCount.${user.uid}`]: 0,\n              lastRead: serverTimestamp()\n            }).catch((err) => {\n              console.error('Error updating read status:', err);\n            });\n\n            // Mark messages as read\n            unreadMessages.forEach((msg) => {\n              const messageRef = doc(messagesRef, msg.id);\n              updateDoc(messageRef, { read: true }).catch((err) => {\n                console.error('Error marking message as read:', err);\n              });\n            });\n          }\n        }\n      },\n      (error) => {\n        console.error('Error fetching messages:', error);\n        setError('Failed to load messages');\n        setLoading(false);\n      }\n    );\n\n    return () => {\n      unsubMessages();\n    };\n  }, [id, user]);\n\n  useEffect(() => {\n    // Scroll to bottom when new messages arrive\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Handle typing indicator with debounce\n  const updateTypingStatus = async (isTyping: boolean) => {\n    if (!conversation?.id || !user?.uid) return;\n    \n    const conversationRef = doc(db, 'conversations', conversation.id);\n    try {\n      const typingUpdate = {\n        [`isTyping.${user.uid}`]: isTyping\n      };\n      await updateDoc(conversationRef, typingUpdate);\n    } catch (error) {\n      console.error('Error updating typing status:', error);\n    }\n  };\n\n  useEffect(() => {\n    let timeoutId: NodeJS.Timeout;\n    \n    const handleTyping = async () => {\n      if (!conversation?.id || !user?.uid || !newMessage) return;\n      \n      await updateTypingStatus(true);\n      \n      // Clear any existing timeout\n      if (timeoutId) clearTimeout(timeoutId);\n      \n      // Set new timeout to clear typing status\n      timeoutId = setTimeout(() => {\n        updateTypingStatus(false);\n      }, 2000);\n    };\n\n    // Call handleTyping whenever newMessage changes\n    handleTyping();\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        updateTypingStatus(false);\n      }\n    };\n  }, [newMessage, conversation?.id, user?.uid]);\n\n  // Update online status\n  useEffect(() => {\n    if (!user?.uid) return;\n\n    const userStatusRef = doc(db, 'users', user.uid);\n    updateDoc(userStatusRef, {\n      isOnline: true,\n      lastSeen: serverTimestamp()\n    });\n\n    return () => {\n      if (user?.uid) {\n        updateDoc(userStatusRef, {\n          isOnline: false,\n          lastSeen: serverTimestamp()\n        });\n      }\n    };\n  }, [user]);\n\n  const handleSend = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !user?.uid || !conversation?.id || !id || !otherUser?.id) return;\n\n    const tempMessage = newMessage.trim();\n    setNewMessage(''); // Clear input immediately for better UX\n\n    try {\n      // First update conversation metadata to ensure proper ordering\n      await updateDoc(doc(db, 'conversations', id), {\n        lastMessage: tempMessage,\n        lastMessageTimestamp: serverTimestamp(),\n        [`unreadCount.${otherUser.id}`]: (conversation.unreadCount?.[otherUser.id] || 0) + 1,\n        updatedAt: serverTimestamp()\n      });\n\n      // Then add the message\n      const messageData = {\n        conversationId: id,\n        senderId: user.uid,\n        content: tempMessage,\n        createdAt: serverTimestamp(),\n        read: false,\n        type: 'text' as MessageType,\n        status: 'sent' as MessageStatus\n      };\n\n      await addDoc(collection(db, 'conversations', id, 'messages'), messageData);\n    } catch (error) {\n      console.error('Failed to send message:', error);\n      \n      // Only attempt to revert conversation metadata if we managed to update it\n      try {\n        await updateDoc(doc(db, 'conversations', id), {\n          lastMessage: conversation.lastMessage,\n          lastMessageTimestamp: conversation.lastMessageTimestamp,\n          [`unreadCount.${otherUser.id}`]: conversation.unreadCount?.[otherUser.id] || 0,\n          updatedAt: conversation.updatedAt\n        });\n      } catch (revertError) {\n        console.error('Failed to revert conversation metadata:', revertError);\n      }\n\n      setError('Failed to send message. Please try again.');\n      setNewMessage(tempMessage); // Restore the message in input for retry\n      setTimeout(() => setError(''), 3000);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"card overflow-hidden\">\n          {/* Loading Header */}\n          <div className=\"p-4 border-b border-earth-700 bg-earth-800 flex items-center\">\n            <div className=\"animate-pulse flex items-center w-full\">\n              <div className=\"h-8 w-8 bg-earth-300 rounded-full mr-3\"></div>\n              <div className=\"flex-1\">\n                <div className=\"h-4 bg-earth-300 rounded w-1/4 mb-2\"></div>\n                <div className=\"h-3 bg-earth-300 rounded w-1/3\"></div>\n              </div>\n            </div>\n          </div>\n\n          {/* Loading Messages */}\n          <div className=\"h-[500px] p-4 bg-earth-50\">\n            <div className=\"animate-pulse space-y-4\">\n              {[1, 2, 3].map((n) => (\n                <div key={n} className={`flex ${n % 2 === 0 ? 'justify-end' : 'justify-start'}`}>\n                  <div className={`w-2/3 h-16 rounded-lg ${n % 2 === 0 ? 'bg-accent-sage/20' : 'bg-earth-300'}`}></div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Loading Input */}\n          <div className=\"p-4 border-t border-earth-700 bg-earth-800\">\n            <div className=\"animate-pulse flex gap-2\">\n              <div className=\"flex-1 h-10 bg-earth-300 rounded-lg\"></div>\n              <div className=\"h-10 w-10 bg-earth-300 rounded-lg\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!conversation) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"card p-4 border border-accent-rust/50\">\n          <div className=\"flex items-center gap-2 text-accent-rust\">\n            <ArrowLeft className=\"h-5 w-5 cursor-pointer\" onClick={() => navigate('/messages')} />\n            <span>Conversation not found</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative\">\n      {error && (\n        <div className=\"absolute top-0 left-0 right-0 z-50 px-4\">\n          <div className=\"bg-accent-rust/10 border border-accent-rust text-accent-rust px-4 py-2 rounded-lg shadow-lg\">\n            {error}\n          </div>\n        </div>\n      )}\n      <div className=\"card overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-earth-700 bg-earth-800 flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate('/messages')}\n              className=\"mr-4 text-text-muted hover:text-text-secondary transition-colors\"\n            >\n              <ArrowLeft className=\"h-6 w-6\" />\n            </button>\n            <div className=\"flex items-center\">\n              <User className=\"h-8 w-8 text-text-muted mr-3\" />\n              <div>\n                <div>\n                  <h2 className=\"font-display font-bold text-text-primary\">\n                    {otherUser?.displayName || 'Unknown User'}\n                  </h2>\n                  <p className=\"text-xs text-text-muted\">\n                    {otherUser?.isOnline ? (\n                      <span className=\"text-accent-sage\">● Online</span>\n                    ) : otherUser?.lastSeen?.toDate ? (\n                      `Last seen ${otherUser.lastSeen.toDate().toLocaleString()}`\n                    ) : ''}\n                  </p>\n                </div>\n                {conversation.tradeName && (\n                  <p className=\"text-sm text-accent-moss font-medium\">\n                    Re: {conversation.tradeName}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Messages Area */}\n        <div className=\"h-[500px] overflow-y-auto p-4 bg-earth-50\">\n          <div className=\"space-y-4 pb-2\">\n            {otherUser?.id && conversation?.isTyping?.[otherUser.id] === true && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-earth-800 text-text-secondary border border-earth-700 rounded-lg px-4 py-2\">\n                  <span className=\"text-accent-sage text-sm animate-pulse\">\n                    {otherUser.displayName} is typing...\n                  </span>\n                </div>\n              </div>\n            )}\n            {messages.map((message) => {\n              const isOwnMessage = message.senderId === user?.uid;\n              return (\n                <div\n                  key={message.id}\n                  className={`flex ${isOwnMessage ? 'justify-end' : 'justify-start'}`}\n                >\n                  <div\n                    className={`max-w-[70%] rounded-lg px-4 py-2 ${\n                      isOwnMessage\n                        ? 'bg-accent-sage/10 text-text-primary border border-accent-sage/30'\n                        : 'bg-earth-800 text-text-primary border border-earth-700'\n                    }`}\n                  >\n                    <p>{message.content}</p>\n                    <span className=\"text-xs opacity-75 mt-1 block\">\n                      {message.createdAt?.toDate ? message.createdAt.toDate().toLocaleTimeString() : ''}\n                    </span>\n                  </div>\n                </div>\n              );\n            })}\n            <div ref={messagesEndRef} />\n          </div>\n        </div>\n\n        {/* Message Input */}\n        <form onSubmit={handleSend} className=\"p-4 border-t border-earth-700 bg-earth-800\">\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              name=\"message\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              placeholder=\"Type a message...\"\n              className=\"flex-1 p-2 bg-earth-50 text-text-primary border border-earth-700 rounded-lg \n                         focus:ring-2 focus:ring-accent-sage focus:border-accent-sage placeholder:text-text-muted\"\n            />\n            <button\n              type=\"submit\"\n              disabled={!newMessage.trim()}\n              className=\"px-4 py-2 bg-accent-sage hover:bg-accent-moss text-white font-medium rounded-lg \n                         disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\n            >\n              <Send className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Search, Filter, Users, Briefcase, Clock, Tag } from 'lucide-react';\nimport { useFirestore } from '../hooks/useFirestore';\nimport type { Collaboration } from '../types';\n\nexport function Projects() {\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedSkills, setSelectedSkills] = useState<string[]>([]);\n  const [statusFilter, setStatusFilter] = useState<Collaboration['status']>();\n  const { data: projects, loading, error } = useFirestore<Collaboration>('collaborations');\n\n  const filteredProjects = projects.filter(project => {\n    const matchesSearch = project.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      project.description.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = !statusFilter || project.status === statusFilter;\n    \n    const matchesSkills = selectedSkills.length === 0 || \n      project.roles.some(role => role.skills.some(skill => selectedSkills.includes(skill)));\n    \n    return matchesSearch && matchesStatus && matchesSkills;\n  });\n\n  // Get all unique skills for filtering\n  const allSkills = Array.from(new Set(\n    projects.flatMap(project => project.roles.flatMap(role => role.skills))\n  )).sort();\n\n  const handleSkillToggle = (skill: string) => {\n    setSelectedSkills(prev => \n      prev.includes(skill)\n        ? prev.filter(s => s !== skill)\n        : [...prev, skill]\n    );\n  };\n\n  const getAvailableRoles = (project: Collaboration) => {\n    return project.roles.filter(role => !role.filled).length;\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-display font-bold text-white mb-2\">\n          Collaboration Projects\n        </h1>\n        <p className=\"text-gray-200\">\n          Find projects to collaborate on or start your own\n        </p>\n      </div>\n\n      {/* Search and Filter Section */}\n      <div className=\"mb-8 space-y-4\">\n        <div className=\"flex gap-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search projects...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 bg-earth-800 border border-earth-700 rounded-lg \n                         text-gray-900 placeholder-gray-500\n                         focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 \n                         transition-all duration-300\"\n            />\n          </div>\n          <button\n            onClick={() => navigate('/projects/new')}\n            className=\"btn-primary flex items-center gap-2\"\n          >\n            <Briefcase className=\"h-5 w-5\" />\n            Create Project\n          </button>\n        </div>\n\n        {/* Skills Filter */}\n        <div className=\"bg-earth-800 border border-earth-700 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2\">\n            <Tag className=\"h-4 w-4\" />\n            Filter by Skills\n          </h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {allSkills.map((skill) => (\n              <button\n                key={skill}\n                onClick={() => handleSkillToggle(skill)}\n                className={`px-3 py-1 rounded-full text-sm transition-all duration-300 ${\n                  selectedSkills.includes(skill)\n                    ? 'bg-accent-clay text-white'\n                    : 'bg-earth-700 text-gray-900 hover:bg-earth-600'\n                }`}\n              >\n                {skill}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Projects Grid */}\n      {loading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[1, 2, 3].map((n) => (\n            <div key={n} className=\"animate-pulse card p-6\">\n              <div className=\"h-6 bg-earth-700 rounded w-3/4 mb-4\"></div>\n              <div className=\"space-y-2 mb-4\">\n                <div className=\"h-4 bg-earth-700 rounded w-full\"></div>\n                <div className=\"h-4 bg-earth-700 rounded w-5/6\"></div>\n              </div>\n              <div className=\"h-10 bg-earth-700 rounded\"></div>\n            </div>\n          ))}\n        </div>\n      ) : error ? (\n        <div className=\"text-center py-8 text-red-500\">Error loading projects</div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredProjects.map((project) => (\n            <div\n              key={project.id}\n              onClick={() => navigate(`/projects/${project.id}`)}\n              className=\"card p-6 card-hover cursor-pointer\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <h3 className=\"text-xl font-display font-semibold text-gray-900\">\n                  {project.title}\n                </h3>\n                <span className={`\n                  status-badge\n                  ${project.status === 'recruiting' ? 'status-badge-active' : \n                    project.status === 'in-progress' ? 'status-badge-pending' : \n                    'status-badge-completed'}\n                `}>\n                  {project.status.charAt(0).toUpperCase() + project.status.slice(1)}\n                </span>\n              </div>\n              \n              <p className=\"text-gray-700 mb-6 line-clamp-2\">\n                {project.description}\n              </p>\n\n              {/* Roles */}\n              <div className=\"mb-4\">\n                <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">Open Roles</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {project.roles.filter(role => !role.filled).map((role, index) => (\n                    <span\n                      key={index}\n                      className=\"px-2 py-1 bg-accent-sage/20 text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n                    >\n                      {role.title}\n                    </span>\n                  ))}\n                  {project.roles.every(role => role.filled) && (\n                    <span className=\"text-sm text-gray-700\">All roles filled</span>\n                  )}\n                </div>\n              </div>\n\n              {/* Required Skills */}\n              <div className=\"mb-4\">\n                <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">Required Skills</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {Array.from(new Set(project.roles.flatMap(role => role.skills))).map((skill) => (\n                    <span\n                      key={skill}\n                      className=\"px-2 py-1 bg-accent-clay/20 text-gray-900 text-sm rounded-full border border-accent-clay/30\"\n                    >\n                      {skill}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              {/* Footer */}\n              <div className=\"flex justify-between items-center mt-6 pt-4 border-t border-earth-700\">\n                <div className=\"flex items-center text-gray-900\">\n                  <Users className=\"h-4 w-4 mr-1\" />\n                  <span className=\"text-sm font-medium\">\n                    {project.roles.length - getAvailableRoles(project)}/{project.roles.length} filled\n                  </span>\n                </div>\n                <div className=\"flex items-center text-gray-900\">\n                  <Clock className=\"h-4 w-4 mr-1\" />\n                  <span className=\"text-sm font-medium\">\n                    {new Date(project.createdAt).toLocaleDateString()}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n\n          {filteredProjects.length === 0 && (\n            <div className=\"col-span-full text-center py-12\">\n              <div className=\"bg-earth-800 border border-earth-700 rounded-lg p-8\">\n                <Search className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-xl font-display font-semibold text-gray-900 mb-2\">\n                  No projects found\n                </h3>\n                <p className=\"text-gray-700\">\n                  Try adjusting your search or filters\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useFirestore } from '../hooks/useFirestore';\nimport { X, Plus } from 'lucide-react';\nimport type { Collaboration } from '../types';\n\ninterface ProjectRole {\n  title: string;\n  skills: string[];\n}\n\nexport function CreateProject() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const { add } = useFirestore<Collaboration>('collaborations');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    roles: [] as ProjectRole[],\n    currentRole: {\n      title: '',\n      skill: '',\n      skills: [] as string[]\n    }\n  });\n\n  const handleAddSkill = () => {\n    const { skill } = formData.currentRole;\n    if (!skill.trim()) return;\n\n    if (!formData.currentRole.skills.includes(skill.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        currentRole: {\n          ...prev.currentRole,\n          skills: [...prev.currentRole.skills, skill.trim()],\n          skill: ''\n        }\n      }));\n    }\n  };\n\n  const handleRemoveSkill = (skillToRemove: string) => {\n    setFormData(prev => ({\n      ...prev,\n      currentRole: {\n        ...prev.currentRole,\n        skills: prev.currentRole.skills.filter(skill => skill !== skillToRemove)\n      }\n    }));\n  };\n\n  const handleAddRole = () => {\n    const { title, skills } = formData.currentRole;\n    if (!title.trim() || skills.length === 0) return;\n\n    setFormData(prev => ({\n      ...prev,\n      roles: [...prev.roles, { title: title.trim(), skills }],\n      currentRole: {\n        title: '',\n        skill: '',\n        skills: []\n      }\n    }));\n  };\n\n  const handleRemoveRole = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      roles: prev.roles.filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    if (!formData.title.trim() || !formData.description.trim()) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    if (formData.roles.length === 0) {\n      setError('Please add at least one role');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      await add({\n        title: formData.title,\n        description: formData.description,\n        roles: formData.roles.map(role => ({\n          ...role,\n          filled: false\n        })),\n        creatorId: user.uid,\n        status: 'recruiting',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      });\n      navigate('/projects');\n    } catch (err) {\n      setError('Failed to create project');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"bg-earth-800 border border-earth-700 rounded-lg overflow-hidden\">\n        <div className=\"p-6\">\n          <h1 className=\"text-2xl font-display font-bold text-text-primary mb-6\">Create a New Project</h1>\n\n          {error && (\n            <div className=\"mb-4 p-3 bg-accent-rust/20 text-accent-rust rounded-lg border border-accent-rust/30\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            {/* Title */}\n            <div className=\"mb-4\">\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-text-secondary mb-1\">\n                Project Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                value={formData.title}\n                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n                className=\"w-full p-2 bg-earth-50 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted\n                          focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n                placeholder=\"Enter project title\"\n                required\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"mb-6\">\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-text-secondary mb-1\">\n                Description\n              </label>\n              <textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                className=\"w-full p-2 bg-earth-50 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted\n                          focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n                rows={4}\n                placeholder=\"Describe your project in detail...\"\n                required\n              />\n            </div>\n\n            {/* Current Role */}\n            <div className=\"mb-6 p-4 bg-earth-700/20 border border-earth-700 rounded-lg\">\n              <h3 className=\"text-lg font-display font-medium text-text-primary mb-4\">Add Role</h3>\n              \n              {/* Role Title */}\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-text-secondary mb-1\">\n                  Role Title\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.currentRole.title}\n                  onChange={(e) => setFormData(prev => ({\n                    ...prev,\n                    currentRole: { ...prev.currentRole, title: e.target.value }\n                  }))}\n                  className=\"w-full p-2 bg-earth-50 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted\n                            focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n                  placeholder=\"e.g., Frontend Developer\"\n                />\n              </div>\n\n              {/* Role Skills */}\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-text-secondary mb-1\">\n                  Required Skills\n                </label>\n                <div className=\"flex gap-2 mb-2\">\n                  <input\n                    type=\"text\"\n                    value={formData.currentRole.skill}\n                    onChange={(e) => setFormData(prev => ({\n                      ...prev,\n                      currentRole: { ...prev.currentRole, skill: e.target.value }\n                    }))}\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddSkill())}\n                    className=\"flex-1 p-2 bg-earth-50 border border-earth-700 rounded-lg text-text-primary placeholder-text-muted\n                              focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 transition-all duration-300\"\n                    placeholder=\"Add required skills...\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={handleAddSkill}\n                    className=\"flex items-center gap-2 px-4 py-2 bg-accent-moss text-earth-50 rounded-lg\n                              hover:bg-accent-moss/90 transition-colors duration-300\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Add\n                  </button>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {formData.currentRole.skills.map((skill) => (\n                    <span\n                      key={skill}\n                      className=\"px-3 py-1 bg-accent-sage/20 text-text-primary rounded-full text-sm flex items-center\n                                border border-accent-sage/30\"\n                    >\n                      {skill}\n                      <button\n                        type=\"button\"\n                        onClick={() => handleRemoveSkill(skill)}\n                        className=\"ml-2 text-accent-sage hover:text-accent-moss transition-colors duration-300\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              {/* Add Role Button */}\n              <button\n                type=\"button\"\n                onClick={handleAddRole}\n                disabled={!formData.currentRole.title || formData.currentRole.skills.length === 0}\n                className=\"w-full bg-accent-moss text-earth-50 py-2 rounded-lg hover:bg-accent-moss/90 \n                          disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300\"\n              >\n                Add Role to Project\n              </button>\n            </div>\n\n            {/* Added Roles */}\n            {formData.roles.length > 0 && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-display font-medium text-text-primary mb-4\">Project Roles</h3>\n                <div className=\"space-y-3\">\n                  {formData.roles.map((role, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-earth-700/20 \n                                              border border-earth-700 rounded-lg\">\n                      <div>\n                        <h4 className=\"font-medium text-text-primary\">{role.title}</h4>\n                        <div className=\"flex flex-wrap gap-2 mt-2\">\n                          {role.skills.map((skill) => (\n                            <span\n                              key={skill}\n                              className=\"px-2 py-1 bg-accent-sage/20 text-text-primary rounded-full text-xs\n                                        border border-accent-sage/30\"\n                            >\n                              {skill}\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={() => handleRemoveRole(index)}\n                        className=\"text-accent-rust hover:text-accent-rust/80 transition-colors duration-300\"\n                      >\n                        <X className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-accent-moss text-earth-50 py-3 rounded-lg hover:bg-accent-moss/90 \n                        disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300\"\n            >\n              {loading ? 'Creating Project...' : 'Create Project'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { doc, getDoc, updateDoc, addDoc, collection, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { Calendar, Users, CheckCircle2, AlertCircle, MessageSquare } from 'lucide-react';\nimport { ProfilePicture } from '../components/profilepicture';\nimport type { Collaboration, UserProfile } from '../types';\nimport { XP_CONFIG, awardExperience, checkAndAwardBadges } from '../lib/reputation';\n\nexport function ProjectDetails() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [project, setProject] = useState<Collaboration | null>(null);\n  const [creator, setCreator] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [joining, setJoining] = useState(false);\n  const [showStatusModal, setShowStatusModal] = useState(false);\n  const [updatingStatus, setUpdatingStatus] = useState(false);\n\n  useEffect(() => {\n    async function fetchProjectAndCreator() {\n      if (!id) return;\n\n      try {\n        const projectDoc = await getDoc(doc(db, 'collaborations', id));\n        if (!projectDoc.exists()) {\n          setError('Project not found');\n          return;\n        }\n\n        const projectData = { id: projectDoc.id, ...projectDoc.data() } as Collaboration;\n        setProject(projectData);\n\n        // Fetch creator details\n        const creatorDoc = await getDoc(doc(db, 'users', projectData.creatorId));\n        if (creatorDoc.exists()) {\n          const creatorData = { id: creatorDoc.id, ...creatorDoc.data() } as UserProfile;\n          console.log('Creator data:', creatorData);\n          setCreator(creatorData);\n        }\n      } catch (err) {\n        setError('Failed to load project details');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchProjectAndCreator();\n  }, [id]);\n\n  const handleJoinRole = async (roleIndex: number) => {\n    if (!user || !project || joining) return;\n\n    setJoining(true);\n    try {\n      const updatedRoles = [...project.roles];\n      updatedRoles[roleIndex] = {\n        ...updatedRoles[roleIndex],\n        filled: true,\n        userId: user.uid\n      };\n\n      await updateDoc(doc(db, 'collaborations', project.id), {\n        roles: updatedRoles,\n        updatedAt: serverTimestamp()\n      });\n\n      setProject(prev => prev ? { ...prev, roles: updatedRoles } : null);\n    } catch (err) {\n      setError('Failed to join role');\n    } finally {\n      setJoining(false);\n    }\n  };\n\n  const handleUpdateStatus = async (newStatus: Collaboration['status']) => {\n    if (!project || !user || updatingStatus) return;\n\n    setUpdatingStatus(true);\n    try {\n      await updateDoc(doc(db, 'collaborations', project.id), {\n        status: newStatus,\n        updatedAt: serverTimestamp()\n      });\n\n      // Award XP when project is completed\n      if (newStatus === 'completed') {\n        // Award XP to all participants\n        const participants = project.roles\n          .filter(role => role.filled && role.userId)\n          .map(role => ({\n            userId: role.userId!,\n            skills: role.skills\n          }));\n\n        for (const participant of participants) {\n          await awardExperience(\n            participant.userId,\n            XP_CONFIG.COLLABORATION_COMPLETION,\n            participant.skills\n          );\n          \n          // Check and award badges\n          const participantProfile = await getDoc(doc(db, 'users', participant.userId));\n          if (participantProfile.exists()) {\n            await checkAndAwardBadges(participant.userId, participantProfile.data() as UserProfile);\n          }\n        }\n      }\n\n      setProject(prev => prev ? { ...prev, status: newStatus } : null);\n      setShowStatusModal(false);\n    } catch (err) {\n      setError('Failed to update project status');\n    } finally {\n      setUpdatingStatus(false);\n    }\n  };\n\n  const handleContact = async () => {\n    if (!user || !project || !creator) return;\n    \n    try {\n      // Create or get conversation\n      const conversationRef = await addDoc(collection(db, 'conversations'), {\n        participants: [user.uid, project.creatorId],\n        projectId: id,\n        projectName: project.title,\n        lastMessage: '',\n        unreadCount: {\n          [project.creatorId]: 0,\n          [user.uid]: 0\n        },\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp()\n      });\n      \n      navigate(`/messages/${conversationRef.id}`);\n    } catch (err) {\n      setError('Failed to start conversation');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-3/4 mb-4\"></div>\n          <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-6\"></div>\n          <div className=\"space-y-3\">\n            <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !project) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-red-50 text-red-700 p-4 rounded-lg\">\n          {error || 'Project not found'}\n        </div>\n      </div>\n    );\n  }\n\n  const isCreator = user?.uid === project.creatorId;\n  const allRolesFilled = project.roles.every(role => role.filled);\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"card card-form\">\n        <div className=\"p-6\">\n          {/* Header */}\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{project.title}</h1>\n              <div className=\"flex items-center text-gray-600 text-sm\">\n                <Calendar className=\"h-4 w-4 mr-1\" />\n                Posted {new Date(project.createdAt).toLocaleDateString()}\n              </div>\n            </div>\n            <span className={`badge-${project.status}`}>\n              {project.status.charAt(0).toUpperCase() + project.status.slice(1)}\n            </span>\n          </div>\n\n          {/* Creator Info */}\n          {creator && (\n            <div className=\"flex items-center mb-6 p-4 bg-gray-50 rounded-lg\">\n              <div className=\"mr-4\">\n                <ProfilePicture url={creator.profilePicture} size=\"md\" />\n              </div>\n              <div>\n                <Link to={`/profile/${creator.id}`} className=\"hover:underline\">\n                  <h3 className=\"font-medium text-gray-900\">{creator.displayName}</h3>\n                </Link>\n                <p className=\"text-gray-600 text-sm\">{creator.bio || 'No bio available'}</p>\n              </div>\n              {!isCreator && (\n                <button\n                  onClick={handleContact}\n                  className=\"ml-auto flex items-center gap-2 btn-primary btn-with-icon px-4 py-2\"\n                >\n                  <MessageSquare className=\"h-4 w-4\" />\n                  Contact\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Description */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">About the Project</h2>\n            <p className=\"text-gray-600 whitespace-pre-wrap\">{project.description}</p>\n          </div>\n\n          {/* Roles */}\n          <div className=\"mb-8\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Team Roles</h2>\n              <div className=\"flex items-center text-gray-600\">\n                <Users className=\"h-5 w-5 mr-2\" />\n                <span>\n                  {project.roles.filter(role => role.filled).length}/{project.roles.length} filled\n                </span>\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              {project.roles.map((role, index) => (\n                <div\n                  key={index}\n                  className=\"p-4 border rounded-lg bg-gray-50\"\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <h3 className=\"font-medium text-gray-900\">{role.title}</h3>\n                    {role.filled ? (\n                      <span className=\"px-2 py-1 bg-accent-ochre/20 text-gray-900 text-sm rounded-full border border-accent-ochre/30\">\n                        Filled\n                      </span>\n                    ) : (\n                      <button\n                        onClick={() => handleJoinRole(index)}\n                        disabled={joining || !user || isCreator}\n                        className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-sage/30 bg-accent-sage/20 text-gray-900 border border-accent-sage/30 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {joining ? 'Joining...' : 'Join Role'}\n                      </button>\n                    )}\n                  </div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {role.skills.map((skill) => (\n                      <span\n                        key={skill}\n                        className=\"px-2 py-1 bg-accent-sage/20 text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n                      >\n                        {skill}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          {isCreator && (\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => setShowStatusModal(true)}\n                disabled={updatingStatus}\n                className=\"btn-primary btn-full py-2 flex-1 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <CheckCircle2 className=\"h-5 w-5\" />\n                Update Status\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Status Update Modal */}\n      {showStatusModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\">\n          <div className=\"card card-form p-6 max-w-md w-full\">\n            <h3 className=\"text-lg font-semibold mb-4\">Update Project Status</h3>\n            <div className=\"space-y-3\">\n              {project.status === 'recruiting' && (\n                <button\n                  onClick={() => handleUpdateStatus('in-progress')}\n                  disabled={!allRolesFilled || updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-clay/30 bg-accent-clay/20 text-gray-900 border border-accent-clay/30 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <AlertCircle className=\"h-5 w-5\" />\n                  Start Project\n                </button>\n              )}\n              {project.status !== 'completed' && (\n                <button\n                  onClick={() => handleUpdateStatus('completed')}\n                  disabled={updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-ochre/30 bg-accent-ochre/20 text-gray-900 border border-accent-ochre/30\"\n                >\n                  <CheckCircle2 className=\"h-5 w-5\" />\n                  Mark as Completed\n                </button>\n              )}\n              {project.status !== 'recruiting' && (\n                <button\n                  onClick={() => handleUpdateStatus('recruiting')}\n                  disabled={updatingStatus}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 rounded hover:bg-accent-sage/30 bg-accent-sage/20 text-gray-900 border border-accent-sage/30\"\n                >\n                  Reopen Recruitment\n                </button>\n              )}\n              <button\n                onClick={() => setShowStatusModal(false)}\n                className=\"w-full px-4 py-2 text-gray-600 hover:bg-gray-50 rounded\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { \n  collection, \n  doc, \n  setDoc, \n  getDoc, \n  getDocs, \n  query, \n  where, \n  updateDoc,\n  deleteDoc,\n  serverTimestamp,\n  Timestamp,\n  writeBatch\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { Connection, UserProfile } from '../types';\nimport { showError, showSuccess } from './alerts';\n\n// Send a connection request\nexport async function sendConnectionRequest(fromUserId: string, toUserId: string): Promise<void> {\n  try {\n    // Validate users\n    if (!fromUserId || !toUserId) {\n      throw new Error('Both user IDs are required');\n    }\n\n    if (fromUserId === toUserId) {\n      throw new Error('Cannot connect with yourself');\n    }\n\n    // Check if users exist\n    const [fromUser, toUser] = await Promise.all([\n      getDoc(doc(db, 'users', fromUserId)),\n      getDoc(doc(db, 'users', toUserId))\n    ]);\n\n    if (!fromUser.exists() || !toUser.exists()) {\n      throw new Error('One or both users not found');\n    }\n\n    // Check for existing connections in both collections\n    const [receivedRequest, sentRequest] = await Promise.all([\n      getDocs(query(\n        collection(db, `users/${toUserId}/connections`),\n        where('userId', '==', fromUserId)\n      )),\n      getDocs(query(\n        collection(db, `users/${fromUserId}/sent_requests`),\n        where('userId', '==', toUserId)\n      ))\n    ]);\n\n    if (!receivedRequest.empty || !sentRequest.empty) {\n      throw new Error('Connection request already exists');\n    }\n\n    // Create connection request in both collections\n    const batch = writeBatch(db);\n    const timestamp = serverTimestamp();\n\n    // Add to recipient's connections\n    batch.set(doc(db, `users/${toUserId}/connections`, `${fromUserId}_${toUserId}`), {\n      userId: fromUserId,\n      status: 'pending',\n      timestamp\n    });\n\n    // Add to sender's sent_requests\n    batch.set(doc(db, `users/${fromUserId}/sent_requests`, `${fromUserId}_${toUserId}`), {\n      userId: toUserId,\n      status: 'pending',\n      timestamp\n    });\n\n    await batch.commit();\n    await showSuccess('Request Sent', 'Your connection request has been sent successfully');\n  } catch (error) {\n    console.error('Error sending connection request:', error);\n    await showError(\n      'Failed to Send Request',\n      error instanceof Error ? error.message : 'An unexpected error occurred'\n    );\n    throw error;\n  }\n}\n\n// Get connection status between two users\nexport async function getConnectionStatus(userId: string, otherUserId: string): Promise<'none' | 'pending' | 'accepted'> {\n  try {\n    if (!userId || !otherUserId) {\n      throw new Error('Both user IDs are required');\n    }\n\n    // Check both received and sent requests\n    const [receivedRequest, sentRequest] = await Promise.all([\n      getDocs(query(\n        collection(db, `users/${userId}/connections`),\n        where('userId', '==', otherUserId)\n      )),\n      getDocs(query(\n        collection(db, `users/${userId}/sent_requests`),\n        where('userId', '==', otherUserId)\n      ))\n    ]);\n\n    // Check received requests first\n    if (!receivedRequest.empty) {\n      return receivedRequest.docs[0].data().status as 'pending' | 'accepted';\n    }\n\n    // Then check sent requests\n    if (!sentRequest.empty) {\n      return sentRequest.docs[0].data().status as 'pending' | 'accepted';\n    }\n\n    return 'none';\n  } catch (error) {\n    console.error('Error checking connection status:', error);\n    throw error;\n  }\n}","import { \n  collection, \n  query, \n  where, \n  getDocs, \n  addDoc, \n  serverTimestamp, \n  runTransaction, \n  doc, \n  orderBy, \n  writeBatch,\n  Timestamp,\n  updateDoc,\n  deleteDoc,\n  CollectionReference,\n  and\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { UserProfile, Conversation, Message, ConversationType } from '../types/messaging';\n\ninterface ConversationOptions {\n  type: ConversationType;\n  contextId?: string;\n  tradeName?: string;\n}\n\n/**\n * Creates or retrieves an existing conversation between users\n * @param currentUserId - The ID of the current user\n * @param otherParticipants - Array of other participant IDs\n * @param options - Conversation options including type and context\n * @returns The conversation ID\n */\nexport async function getOrCreateConversation(\n  currentUserId: string,\n  otherParticipants: string[],\n  options: ConversationOptions = { type: 'direct' }\n): Promise<string> {\n  try {\n    if (!currentUserId || !otherParticipants.length) {\n      throw new Error('Current user ID and at least one other participant are required');\n    }\n\n    const allParticipants = [currentUserId, ...otherParticipants];\n    const participantIds = allParticipants.sort();\n\n    // For direct or group conversations without context, check for existing conversation\n    if (options.type === 'direct' || (options.type === 'group' && !options.contextId)) {\n      const conversationsRef = collection(db, 'conversations');\n      const q = query(\n        conversationsRef,\n        and(\n          where('participantIds', '==', participantIds),\n          where('conversationType', '==', options.type)\n        )\n      );\n      \n      const existingConversations = await getDocs(q);\n      if (!existingConversations.empty) {\n        return existingConversations.docs[0].id;\n      }\n    }\n\n    // Create conversation data\n    const conversationData: any = {\n      participants: allParticipants,\n      participantIds,\n      lastMessage: null,\n      lastMessageTimestamp: null,\n      unreadCount: Object.fromEntries(allParticipants.map(id => [id, 0])),\n      conversationType: options.type,\n      updatedAt: serverTimestamp(),\n      isTyping: Object.fromEntries(allParticipants.map(id => [id, false]))\n    };\n\n    // Only add contextId and tradeName if they are provided\n    if (options.contextId) {\n      conversationData.contextId = options.contextId;\n    }\n    if (options.tradeName) {\n      conversationData.tradeName = options.tradeName;\n    }\n\n    // Create new conversation\n    const newConversationRef = await addDoc(collection(db, 'conversations'), conversationData);\n    return newConversationRef.id;\n  } catch (error) {\n    console.error('Error in getOrCreateConversation:', error);\n    throw error;\n  }\n}\n\n/**\n * Starts a direct conversation with another user\n * @param currentUserId - The ID of the current user\n * @param otherUser - The profile of the user to start a conversation with\n * @returns The conversation ID\n */\nexport async function startConversation(currentUserId: string, otherUser: UserProfile): Promise<string> {\n  try {\n    if (!currentUserId || !otherUser?.id) {\n      throw new Error('Invalid user IDs for conversation');\n    }\n    \n    const conversationId = await getOrCreateConversation(currentUserId, [otherUser.id]);\n    return conversationId;\n  } catch (error) {\n    console.error('Failed to start conversation:', error);\n    throw error;\n  }\n}\n\n/**\n * Creates a new context-specific conversation (trade or project)\n * @param currentUserId - The ID of the current user\n * @param otherParticipants - Array of other participant IDs\n * @param contextType - Type of context ('trade' or 'project')\n * @param contextId - ID of the trade or project\n * @param contextName - Name of the trade or project\n * @returns The conversation ID\n */\nexport async function createContextConversation(\n  currentUserId: string,\n  otherParticipants: string[],\n  contextType: 'trade' | 'project',\n  contextId: string,\n  contextName?: string\n): Promise<string> {\n  return getOrCreateConversation(currentUserId, otherParticipants, {\n    type: contextType,\n    contextId,\n    tradeName: contextName\n  });\n}\n","import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { UserPlus, MessageSquare, ExternalLink, Clock } from 'lucide-react';\nimport { ProfilePicture } from './ProfilePicture';\nimport { sendConnectionRequest } from '../lib/networking';\nimport { startConversation } from '../lib/messaging';\nimport type { UserProfile } from '../types';\n\ninterface UserProfileCardProps {\n  profile: UserProfile;\n  currentUserId?: string;\n  connectionStatus: 'none' | 'pending' | 'accepted';\n  onConnect?: (success: boolean) => void;\n  onMessage?: (profile: UserProfile) => void;\n}\n\nexport function UserProfileCard({ \n  profile, \n  currentUserId,\n  connectionStatus: initialStatus,\n  onConnect,\n  onMessage \n}: UserProfileCardProps) {\n  const [connectionStatus, setConnectionStatus] = useState<'none' | 'pending' | 'accepted'>(initialStatus);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [isStartingChat, setIsStartingChat] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n\n  // Update connection status when prop changes\n  useEffect(() => {\n    if (initialStatus !== connectionStatus) {\n      setConnectionStatus(initialStatus);\n    }\n  }, [initialStatus]);\n\n  const handleMessage = async () => {\n    if (!currentUserId || isStartingChat || !profile.id) {\n      console.warn('Invalid state for starting conversation:', { currentUserId, isStartingChat, profileId: profile.id });\n      return;\n    }\n    \n    setIsStartingChat(true);\n    setError(null);\n    \n    try {\n      const conversationId = await startConversation(currentUserId, profile);\n      if (!conversationId) {\n        throw new Error('Failed to get conversation ID');\n      }\n      navigate(`/messages/${conversationId}`);\n      onMessage?.(profile);\n    } catch (err) {\n      console.error('Failed to start conversation:', err);\n      setError('Failed to start conversation');\n    } finally {\n      setIsStartingChat(false);\n    }\n  };\n\n  const handleConnect = async () => {\n    if (!currentUserId || isConnecting || !profile.id) {\n      console.warn('Invalid state for connection:', { currentUserId, isConnecting, profileId: profile.id });\n      return;\n    }\n    \n    setIsConnecting(true);\n    setError(null);\n    \n    try {\n      await sendConnectionRequest(currentUserId, profile.id);\n      setConnectionStatus('pending');\n      onConnect?.(true);\n    } catch (err) {\n      console.error('Failed to send connection request:', err);\n      setConnectionStatus('none');\n      setError('Failed to send connection request');\n      onConnect?.(false);\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  return (\n    <div className=\"card p-6\">\n      <div className=\"flex items-start gap-4\">\n        <Link to={`/users/${profile.id}`}>\n          <ProfilePicture url={profile.profilePicture} size=\"lg\" />\n        </Link>\n        <div className=\"flex-1 min-w-0\">\n          <Link \n            to={`/users/${profile.id}`}\n            className=\"text-lg font-medium text-gray-900 truncate hover:text-accent-clay transition-colors\"\n          >\n            {profile.displayName}\n          </Link>\n          {profile.portfolio && (\n            <a\n              href={profile.portfolio}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-sm text-accent-clay hover:text-accent-ochre flex items-center gap-1\"\n            >\n              Portfolio <ExternalLink className=\"h-3 w-3\" />\n            </a>\n          )}\n          <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\n            {profile.bio || 'No bio available'}\n          </p>\n          {error && (\n            <p className=\"text-sm text-accent-rust mt-2\">\n              {error}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Skills */}\n      <div className=\"mt-4\">\n        <h4 className=\"text-sm font-medium text-gray-900 mb-2\">\n          Top Skills\n        </h4>\n        <div className=\"flex flex-wrap gap-2\">\n          {(profile.skills || []).slice(0, 3).map((skill) => (\n            <span\n              key={skill}\n              className=\"px-2 py-1 bg-accent-sage/20 text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n            >\n              {skill}\n            </span>\n          ))}\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div \n        className=\"mt-4 pt-4 border-t border-earth-700 flex gap-2\" \n        key={`${profile.id}-${connectionStatus}`}\n      >\n        {connectionStatus === 'accepted' ? (\n          <button\n            onClick={handleMessage}\n            disabled={isStartingChat || !currentUserId || !profile.id}\n            className=\"flex-1 btn-primary flex items-center justify-center gap-2\"\n          >\n            {isStartingChat ? (\n              <>\n                <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                Starting chat...\n              </>\n            ) : (\n              <>\n                <MessageSquare className=\"h-4 w-4\" />\n                Message\n              </>\n            )}\n          </button>\n        ) : connectionStatus === 'pending' ? (\n          <button\n            disabled\n            className=\"flex-1 btn-secondary flex items-center justify-center gap-2 opacity-75 cursor-not-allowed\"\n          >\n            <Clock className=\"h-4 w-4\" />\n            Request Pending\n          </button>\n        ) : (\n          <button\n            onClick={handleConnect}\n            disabled={isConnecting || !currentUserId || !profile.id}\n            className=\"flex-1 btn-primary flex items-center justify-center gap-2\"\n          >\n            {isConnecting ? (\n              <>\n                <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                Connecting...\n              </>\n            ) : (\n              <>\n                <UserPlus className=\"h-4 w-4\" />\n                Connect\n              </>\n            )}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useFirestore } from '../hooks/useFirestore';\nimport { addDoc, collection, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { Search, Tag } from 'lucide-react';\nimport type { UserProfile } from '../types';\nimport { UserProfileCard } from '../components/UserProfileCard';\nimport { getConnectionStatus, sendConnectionRequest } from '../lib/networking';\n\nexport function UserDirectory() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedSkills, setSelectedSkills] = useState<string[]>([]);\n  const [connectionStatuses, setConnectionStatuses] = useState<{ [key: string]: 'none' | 'pending' | 'accepted' }>({});\n  const [connectingUsers, setConnectingUsers] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(true);\n  const { data: users, loading: usersLoading, error } = useFirestore<UserProfile>('users');\n\n  // Fetch connection statuses for all users\n  useEffect(() => {\n    if (!user || usersLoading) return;\n\n    const fetchConnectionStatuses = async () => {\n      const statuses: { [key: string]: 'none' | 'pending' | 'accepted' } = {};\n      \n      for (const profile of users) {\n        if (profile.id !== user.uid) {\n          try {\n            const status = await getConnectionStatus(user.uid, profile.id);\n            statuses[profile.id] = status;\n          } catch (err) {\n            console.error(`Failed to get connection status for ${profile.id}:`, err);\n            statuses[profile.id] = 'none';\n          }\n        }\n      }\n      \n      setConnectionStatuses(statuses);\n      setLoading(false);\n    };\n\n    fetchConnectionStatuses();\n  }, [user, users, usersLoading]);\n\n  const filteredUsers = users.filter(profile => {\n    if (profile.id === user?.uid) return false; // Don't show current user\n\n    const matchesSearch = \n      profile.displayName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      profile.bio?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      profile.skills.some(skill => skill.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesSkills = selectedSkills.length === 0 || \n      profile.skills.some(skill => selectedSkills.includes(skill));\n    \n    return matchesSearch && matchesSkills;\n  });\n\n  const allSkills = Array.from(new Set(\n    users.flatMap(profile => profile.skills)\n  )).sort();\n\n  const handleSkillToggle = (skill: string) => {\n    setSelectedSkills(prev => \n      prev.includes(skill)\n        ? prev.filter(s => s !== skill)\n        : [...prev, skill]\n    );\n  };\n\n  const handleConnect = async (otherUserId: string) => {\n    if (!user) return;\n    \n    // Prevent duplicate requests\n    if (connectingUsers.has(otherUserId)) return;\n    \n    setConnectingUsers(prev => new Set(prev).add(otherUserId));\n    \n    try {\n      await sendConnectionRequest(user.uid, otherUserId);\n      \n      // Update local state\n      setConnectionStatuses(prev => ({\n        ...prev,\n        [otherUserId]: 'pending'\n      }));\n    } catch (err) {\n      console.error('Failed to send connection request:', err);\n      \n      // Revert local state on error\n      setConnectionStatuses(prev => ({\n        ...prev,\n        [otherUserId]: 'none'\n      }));\n    } finally {\n      setConnectingUsers(prev => {\n        const next = new Set(prev);\n        next.delete(otherUserId);\n        return next;\n      });\n    }\n  };\n\n\n  if (loading || usersLoading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map((n) => (\n            <div key={n} className=\"card p-4\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"h-12 w-12 bg-earth-700 rounded-full\"></div>\n                <div className=\"flex-1\">\n                  <div className=\"h-4 bg-earth-700 rounded w-1/4 mb-2\"></div>\n                  <div className=\"h-3 bg-earth-700 rounded w-3/4\"></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-display font-bold text-white mb-2\">\n          User Directory\n        </h1>\n        <p className=\"text-gray-200\">\n          Find skilled professionals to collaborate with\n        </p>\n      </div>\n\n      {/* Search and Filter */}\n      <div className=\"mb-8 space-y-4\">\n        <div className=\"flex gap-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search by name, bio, or skills...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 bg-earth-800 border border-earth-700 rounded-lg \n                         text-gray-900 placeholder-gray-500\n                         focus:border-accent-clay focus:ring-1 focus:ring-accent-clay/30 \n                         transition-all duration-300\"\n            />\n          </div>\n        </div>\n\n        {/* Skills Filter */}\n        <div className=\"bg-earth-800 border border-earth-700 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2\">\n            <Tag className=\"h-4 w-4\" />\n            Filter by Skills\n          </h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {allSkills.map((skill) => (\n              <button\n                key={skill}\n                onClick={() => handleSkillToggle(skill)}\n                className={`px-3 py-1 rounded-full text-sm transition-all duration-300 ${\n                  selectedSkills.includes(skill)\n                    ? 'bg-accent-clay text-white'\n                    : 'bg-earth-700 text-gray-900 hover:bg-earth-600'\n                }`}\n              >\n                {skill}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Users Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredUsers.map((profile) => (\n          <UserProfileCard\n            key={profile.id}\n            profile={profile}\n            currentUserId={user?.uid}\n            connectionStatus={connectionStatuses[profile.id]}\n            onConnect={(success) => {\n              if (success) {\n                setConnectionStatuses(prev => ({\n                  ...prev,\n                  [profile.id]: 'pending'\n                }));\n              }\n            }}\n          />\n        ))}\n\n        {filteredUsers.length === 0 && (\n          <div className=\"col-span-full text-center py-12\">\n            <div className=\"bg-earth-800 border border-earth-700 rounded-lg p-8\">\n              <Search className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-display font-semibold text-gray-900 mb-2\">\n                No users found\n              </h3>\n              <p className=\"text-gray-700\">\n                Try adjusting your search or filters\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { Challenge, Quest, UserProfile } from '../types';\nimport { doc, collection, addDoc, updateDoc, increment, arrayUnion, Timestamp, query, where, getDocs } from 'firebase/firestore';\nimport { db } from './firebase';\nimport { awardExperience, awardBadge } from './reputation';\n\n// Challenge Templates\nexport const WEEKLY_CHALLENGES: Omit<Challenge, 'id' | 'startDate' | 'endDate' | 'participants' | 'completions'>[] = [\n  {\n    title: 'Skill Exchange Master',\n    description: 'Complete 3 trades within a week',\n    type: 'weekly',\n    requirements: [{ type: 'trades', count: 3 }],\n    rewards: { xp: 300 }\n  },\n  {\n    title: 'Community Builder',\n    description: 'Join or create 2 collaboration projects',\n    type: 'weekly',\n    requirements: [{ type: 'collaborations', count: 2 }],\n    rewards: { xp: 250 }\n  },\n  {\n    title: 'Skill Endorser',\n    description: 'Endorse 5 different users\\' skills',\n    type: 'weekly',\n    requirements: [{ type: 'endorsements', count: 5 }],\n    rewards: { xp: 200 }\n  }\n];\n\nexport const MONTHLY_CHALLENGES: Omit<Challenge, 'id' | 'startDate' | 'endDate' | 'participants' | 'completions'>[] = [\n  {\n    title: 'Full Stack Developer',\n    description: 'Complete trades involving both frontend and backend skills',\n    type: 'monthly',\n    requirements: [\n      { type: 'skills', count: 2, skillCategory: 'frontend' },\n      { type: 'skills', count: 2, skillCategory: 'backend' }\n    ],\n    rewards: {\n      xp: 1000,\n      badge: 'full_stack_master'\n    }\n  },\n  {\n    title: 'Project Leader',\n    description: 'Successfully complete 3 collaboration projects as leader',\n    type: 'monthly',\n    requirements: [{ type: 'collaborations', count: 3 }],\n    rewards: {\n      xp: 800,\n      badge: 'project_leader'\n    }\n  }\n];\n\n// Quest Templates\nexport const QUEST_CHAINS: Omit<Quest, 'id' | 'userId' | 'startedAt' | 'completedAt' | 'expiresAt'>[] = [\n  {\n    title: 'Web Development Journey',\n    description: 'Master the art of web development through a series of trades and collaborations',\n    steps: [\n      {\n        id: 'html_css',\n        description: 'Complete a trade involving HTML/CSS skills',\n        type: 'trade',\n        requirement: { count: 1, skillCategory: 'frontend' },\n        completed: false\n      },\n      {\n        id: 'javascript',\n        description: 'Complete a trade involving JavaScript',\n        type: 'trade',\n        requirement: { count: 1, skillCategory: 'javascript' },\n        completed: false\n      },\n      {\n        id: 'framework',\n        description: 'Join a collaboration project using a modern framework',\n        type: 'collaboration',\n        requirement: { count: 1, skillCategory: 'framework' },\n        completed: false\n      }\n    ],\n    rewards: {\n      xp: 500,\n      badge: 'web_developer'\n    }\n  }\n];\n\n// Create a new weekly challenge\nexport async function createWeeklyChallenge() {\n  const template = WEEKLY_CHALLENGES[Math.floor(Math.random() * WEEKLY_CHALLENGES.length)];\n  const now = new Date();\n  const endDate = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000); // 1 week from now\n\n  await addDoc(collection(db, 'challenges'), {\n    ...template,\n    startDate: now,\n    endDate,\n    participants: [],\n    completions: []\n  });\n}\n\n// Create a new monthly challenge\nexport async function createMonthlyChallenge() {\n  const template = MONTHLY_CHALLENGES[Math.floor(Math.random() * MONTHLY_CHALLENGES.length)];\n  const now = new Date();\n  const endDate = new Date(now.getFullYear(), now.getMonth() + 1, 1); // End of current month\n\n  await addDoc(collection(db, 'challenges'), {\n    ...template,\n    startDate: now,\n    endDate,\n    participants: [],\n    completions: []\n  });\n}\n\n// Start a quest chain for a user\nexport async function startQuestChain(userId: string, questTemplate: typeof QUEST_CHAINS[0]) {\n  const now = new Date();\n  const expiresAt = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days to complete\n\n  const questRef = await addDoc(collection(db, 'quests'), {\n    ...questTemplate,\n    userId,\n    startedAt: now,\n    expiresAt\n  });\n\n  // Add quest to user's active quests\n  await updateDoc(doc(db, 'users', userId), {\n    activeQuests: arrayUnion(questRef.id)\n  });\n\n  return questRef.id;\n}\n\n// Join a challenge\nexport async function joinChallenge(userId: string, challengeId: string) {\n  const challengeRef = doc(db, 'challenges', challengeId);\n  await updateDoc(challengeRef, {\n    participants: arrayUnion(userId)\n  });\n\n  // Initialize challenge progress for user\n  await updateDoc(doc(db, 'users', userId), {\n    [`challengeProgress.${challengeId}`]: {\n      progress: 0,\n      completed: false,\n      claimedRewards: false\n    }\n  });\n}\n\n// Update challenge progress\nexport async function updateChallengeProgress(\n  userId: string,\n  challengeId: string,\n  progress: number\n) {\n  await updateDoc(doc(db, 'users', userId), {\n    [`challengeProgress.${challengeId}.progress`]: progress\n  });\n}\n\n// Complete a challenge\nexport async function completeChallenge(userId: string, challengeId: string) {\n  const challengeRef = doc(db, 'challenges', challengeId);\n  await updateDoc(challengeRef, {\n    completions: arrayUnion(userId)\n  });\n\n  await updateDoc(doc(db, 'users', userId), {\n    [`challengeProgress.${challengeId}.completed`]: true\n  });\n}\n\n// Claim challenge rewards\nexport async function claimChallengeRewards(userId: string, challenge: Challenge) {\n  // Award XP\n  await awardExperience(userId, challenge.rewards.xp);\n\n  // Award badge if any\n  if (challenge.rewards.badge) {\n    await awardBadge(userId, challenge.rewards.badge as any);\n  }\n\n  // Mark rewards as claimed\n  await updateDoc(doc(db, 'users', userId), {\n    [`challengeProgress.${challenge.id}.claimedRewards`]: true\n  });\n}\n\n// Update quest progress\nexport async function updateQuestProgress(\n  userId: string,\n  questId: string,\n  stepId: string\n) {\n  const questRef = doc(db, 'quests', questId);\n  await updateDoc(questRef, {\n    'steps.$[step].completed': true\n  }, {\n    arrayFilters: [{ 'step.id': stepId }]\n  });\n\n  // Check if all steps are completed\n  const questDoc = await getDocs(query(\n    collection(db, 'quests'),\n    where('id', '==', questId)\n  ));\n\n  const quest = questDoc.docs[0].data() as Quest;\n  if (quest.steps.every(step => step.completed)) {\n    await completeQuest(userId, questId, quest);\n  }\n}\n\n// Complete a quest\nasync function completeQuest(userId: string, questId: string, quest: Quest) {\n  // Update quest completion\n  await updateDoc(doc(db, 'quests', questId), {\n    completedAt: new Date()\n  });\n\n  // Update user profile\n  await updateDoc(doc(db, 'users', userId), {\n    activeQuests: arrayUnion(questId),\n    completedQuests: arrayUnion(questId)\n  });\n\n  // Award rewards\n  await awardExperience(userId, quest.rewards.xp);\n  if (quest.rewards.badge) {\n    await awardBadge(userId, quest.rewards.badge as any);\n  }\n}","import { useState } from 'react';\nimport { Challenge } from '../types';\nimport { Trophy, Clock, Users, CheckCircle, Star, ArrowRight } from 'lucide-react';\nimport { joinChallenge, claimChallengeRewards } from '../lib/challenges';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface ChallengeCardProps {\n  challenge: Challenge;\n  userProgress?: {\n    progress: number;\n    completed: boolean;\n    claimedRewards: boolean;\n  };\n}\n\nexport function ChallengeCard({ challenge, userProgress }: ChallengeCardProps) {\n  const { user } = useAuth();\n  const [joining, setJoining] = useState(false);\n  const [claiming, setClaiming] = useState(false);\n\n  const isParticipating = challenge.participants.includes(user?.uid || '');\n  const hasCompleted = challenge.completions.includes(user?.uid || '');\n  const canClaimRewards = hasCompleted && !userProgress?.claimedRewards;\n\n  const timeLeft = new Date(challenge.endDate).getTime() - Date.now();\n  const daysLeft = Math.ceil(timeLeft / (1000 * 60 * 60 * 24));\n\n  const handleJoin = async () => {\n    if (!user) return;\n    setJoining(true);\n    try {\n      await joinChallenge(user.uid, challenge.id);\n    } catch (err) {\n      console.error('Failed to join challenge:', err);\n    } finally {\n      setJoining(false);\n    }\n  };\n\n  const handleClaimRewards = async () => {\n    if (!user) return;\n    setClaiming(true);\n    try {\n      await claimChallengeRewards(user.uid, challenge);\n    } catch (err) {\n      console.error('Failed to claim rewards:', err);\n    } finally {\n      setClaiming(false);\n    }\n  };\n\n  return (\n    <div className=\"card group\">\n      <div className=\"p-6\">\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-4\">\n          <div>\n            <h3 className=\"text-xl font-display font-semibold text-gray-900 mb-2\">\n              {challenge.title}\n            </h3>\n            <p className=\"text-gray-700\">{challenge.description}</p>\n          </div>\n          <span className={`\n            px-3 py-1.5 rounded-full text-sm font-medium\n            ${challenge.type === 'weekly' \n              ? 'bg-accent-sage/20 text-accent-moss border border-accent-sage/30' \n              : 'bg-accent-clay/20 text-accent-rust border border-accent-clay/30'}\n          `}>\n            {challenge.type.charAt(0).toUpperCase() + challenge.type.slice(1)}\n          </span>\n        </div>\n\n        {/* Requirements */}\n        <div className=\"mb-6\">\n          <h4 className=\"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2\">\n            <Star className=\"h-4 w-4 text-accent-ochre\" />\n            Requirements\n          </h4>\n          <div className=\"space-y-2\">\n            {challenge.requirements.map((req, index) => (\n              <div \n                key={index} \n                className={`flex items-center p-2 rounded-lg transition-colors\n                  ${userProgress && userProgress.progress >= req.count\n                    ? 'bg-accent-sage/20 text-accent-moss border border-accent-sage/30'\n                    : 'bg-earth-700/50 text-gray-900'}`}\n              >\n                <CheckCircle className={`h-4 w-4 mr-2 flex-shrink-0 ${\n                  userProgress && userProgress.progress >= req.count\n                    ? 'text-accent-moss'\n                    : 'text-gray-500'\n                }`} />\n                <span>\n                  {req.count} {req.type}\n                  {req.skillCategory && ` in ${req.skillCategory}`}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Rewards */}\n        <div className=\"mb-6\">\n          <h4 className=\"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2\">\n            <Trophy className=\"h-4 w-4 text-accent-ochre\" />\n            Rewards\n          </h4>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center px-3 py-1.5 bg-accent-clay/20 text-accent-rust rounded-lg border border-accent-clay/30\">\n              <Trophy className=\"h-4 w-4 mr-2\" />\n              <span className=\"font-medium\">{challenge.rewards.xp} XP</span>\n            </div>\n            {challenge.rewards.badge && (\n              <div className=\"px-3 py-1.5 bg-accent-ochre/20 text-accent-rust rounded-lg border border-accent-ochre/30\">\n                {challenge.rewards.badge} Badge\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Status */}\n        <div className=\"flex items-center justify-between text-sm text-gray-700 mb-6\">\n          <div className=\"flex items-center\">\n            <Clock className=\"h-4 w-4 mr-1\" />\n            {daysLeft > 0 ? `${daysLeft} days left` : 'Ended'}\n          </div>\n          <div className=\"flex items-center\">\n            <Users className=\"h-4 w-4 mr-1\" />\n            {challenge.participants.length} participants\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"mt-6 pt-4 border-t border-earth-700\">\n          {!isParticipating && !hasCompleted && (\n            <button\n              onClick={handleJoin}\n              disabled={joining || daysLeft <= 0}\n              className=\"btn-primary w-full flex items-center justify-center gap-2 group\"\n            >\n              {joining ? (\n                <>\n                  <span className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"></span>\n                  Joining...\n                </>\n              ) : (\n                <>\n                  Join Challenge\n                  <ArrowRight className=\"h-4 w-4 transform group-hover:translate-x-1 transition-transform\" />\n                </>\n              )}\n            </button>\n          )}\n\n          {canClaimRewards && (\n            <button\n              onClick={handleClaimRewards}\n              disabled={claiming}\n              className=\"w-full bg-gradient-to-r from-accent-sage to-accent-clay text-white py-2 rounded-lg\n                         hover:from-accent-clay hover:to-accent-sage transition-all duration-300\n                         font-medium shadow-lg hover:shadow-accent-clay/50 flex items-center justify-center gap-2\"\n            >\n              {claiming ? (\n                <>\n                  <span className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"></span>\n                  Claiming...\n                </>\n              ) : (\n                <>\n                  <Trophy className=\"h-4 w-4\" />\n                  Claim Rewards\n                </>\n              )}\n            </button>\n          )}\n\n          {hasCompleted && !canClaimRewards && (\n            <div className=\"text-center text-accent-moss font-medium flex items-center justify-center gap-2\">\n              <CheckCircle className=\"h-5 w-5\" />\n              Challenge Completed!\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","import { HfInference } from '@huggingface/inference';\nimport { Challenge } from '../types';\n\n// Skill category mapping\nconst skillCategoryMap: { [key: string]: string } = {\n  // Audio/Music Production\n  'Pro Tools': 'Audio Production',\n  'Ableton': 'Music Production',\n  'Logic Pro': 'Music Production',\n  'FL Studio': 'Music Production',\n  'Audacity': 'Audio Production',\n  'Studio One': 'Audio Production',\n  'Reason': 'Music Production',\n  \n  // Video Production\n  'Adobe Premiere': 'Video Editing',\n  'Final Cut Pro': 'Video Editing',\n  'DaVinci Resolve': 'Video Editing',\n  'After Effects': 'Motion Graphics',\n  'Vegas Pro': 'Video Editing',\n  \n  // Graphics/Design\n  'Photoshop': 'Digital Design',\n  'Illustrator': 'Digital Design',\n  'InDesign': 'Digital Design',\n  'GIMP': 'Digital Design',\n  'Figma': 'UI/UX Design',\n  'Sketch': 'UI/UX Design',\n  'XD': 'UI/UX Design',\n  \n  // 3D/Animation\n  'Maya': '3D Animation',\n  'Blender': '3D Animation',\n  'Cinema 4D': '3D Animation',\n  'Unity': 'Game Development',\n  'Unreal Engine': 'Game Development',\n  \n  // Photography\n  'Lightroom': 'Photography',\n  'Capture One': 'Photography',\n  'Luminar': 'Photography',\n  \n  // Data & Analytics\n  'Excel': 'Data & Analytics',\n  'Google Sheets': 'Data & Analytics',\n  'Tableau': 'Data & Analytics',\n  'Power BI': 'Data & Analytics',\n  'Looker': 'Data & Analytics',\n  'SQL': 'Data & Analytics',\n  'R': 'Data & Analytics',\n  'Python': 'Data & Analytics',\n  'SPSS': 'Data & Analytics',\n  'SAS': 'Data & Analytics',\n  \n  // Presentation & Communication\n  'PowerPoint': 'Presentation & Communication',\n  'Keynote': 'Presentation & Communication',\n  'Google Slides': 'Presentation & Communication',\n  'Prezi': 'Presentation & Communication',\n  'Canva': 'Presentation & Communication'\n};\n\n// Get general category for a specific skill\nfunction getSkillCategory(skill: string): string {\n  // Try direct match first\n  const category = skillCategoryMap[skill];\n  if (category) return category;\n  \n  // If no direct match, check if the skill contains any category keywords\n  const lowerSkill = skill.toLowerCase();\n  if (lowerSkill.includes('audio') || lowerSkill.includes('sound')) return 'Audio Production';\n  if (lowerSkill.includes('video') || lowerSkill.includes('film')) return 'Video Editing';\n  if (lowerSkill.includes('design') || lowerSkill.includes('graphic')) return 'Digital Design';\n  if (lowerSkill.includes('3d') || lowerSkill.includes('animation')) return '3D Animation';\n  if (lowerSkill.includes('photo')) return 'Photography';\n  if (lowerSkill.includes('game')) return 'Game Development';\n  if (lowerSkill.includes('music')) return 'Music Production';\n  if (lowerSkill.includes('excel') || lowerSkill.includes('data') || lowerSkill.includes('analytics') || lowerSkill.includes('sql')) return 'Data & Analytics';\n  if (lowerSkill.includes('presentation') || lowerSkill.includes('powerpoint') || lowerSkill.includes('keynote') || lowerSkill.includes('speaking')) return 'Presentation & Communication';\n  \n  // If no category matches, return the skill itself as a general category\n  return skill.charAt(0).toUpperCase() + skill.slice(1).toLowerCase();\n}\n\nimport { \n  collection, \n  doc, \n  writeBatch,\n  serverTimestamp,\n  Timestamp,\n  query,\n  where,\n  getDocs,\n  addDoc\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { showError } from './alerts';\n\n// Initialize Hugging Face client\nconst API_KEY = import.meta.env.VITE_HUGGINGFACE_API_KEY;\n\n// Get popular skills from user profiles\nasync function getPopularSkills(): Promise<string[]> {\n  try {\n    const usersRef = collection(db, 'users');\n    const snapshot = await getDocs(usersRef);\n    \n    // Count category occurrences\n    const categoryCounts: { [key: string]: number } = {};\n    snapshot.forEach(doc => {\n      const userData = doc.data();\n      if (userData.skills && Array.isArray(userData.skills)) {\n        userData.skills.forEach((skill: string) => {\n          const category = getSkillCategory(skill);\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\n        });\n      }\n    });\n\n    // Sort categories by popularity\n    const sortedCategories = Object.entries(categoryCounts)\n      .sort(([,a], [,b]) => b - a)\n      .map(([category]) => category);\n\n    // If no categories found, return default categories\n    if (sortedCategories.length === 0) {\n      return [\n        'Audio Production',\n        'Video Editing',\n        'Digital Design',\n        '3D Animation',\n        'Photography'\n      ];\n    }\n\n    return sortedCategories;\n  } catch (error) {\n    console.error('Error fetching popular skills:', error);\n    // Return default categories if there's an error\n    return [\n      'Audio Production',\n      'Video Editing',\n      'Digital Design',\n      '3D Animation',\n      'Photography'\n    ];\n  }\n}\n\n// Default challenge templates\nfunction getDefaultChallenge(type: 'weekly' | 'monthly'): any {\n  const categories = [\n    'Audio Production',\n    'Video Editing',\n    'Digital Design',\n    'UI/UX Design',\n    'Photography',\n    'Data & Analytics',\n    'Presentation & Communication',\n    'Music Production',\n    '3D Animation',\n    'Game Development'\n  ];\n  \n  const randomCategory = categories[Math.floor(Math.random() * categories.length)];\n  \n  return {\n    title: `${type === 'weekly' ? 'Weekly' : 'Monthly'} ${randomCategory} Challenge`,\n    description: `Showcase your ${randomCategory} expertise and collaborate with others in this ${type === 'weekly' ? 'Week' : 'Month'}'s creative challenge.`,\n    requirements: [\n      {\n        type: 'Trades',\n        count: type === 'weekly' ? 2 : 4,\n        skillCategory: randomCategory\n      },\n      {\n        type: 'Collaborations',\n        count: type === 'weekly' ? 1 : 2,\n        skillCategory: 'Any'\n      },\n      {\n        type: 'Endorsements',\n        count: type === 'weekly' ? 2 : 5,\n        skillCategory: randomCategory\n      }\n    ],\n    rewards: {\n      xp: type === 'weekly' ? 200 : 500,\n      badge: `${type === 'weekly' ? 'Weekly' : 'Monthly'}${randomCategory.replace(/\\s+/g, '')}Master`\n    }\n  };\n}\n\n// Generate variations on the default challenge\nasync function generateVariation(type: 'weekly' | 'monthly', index: number): Promise<any> {\n  const popularCategories = await getPopularSkills(); // Now returns categories instead of specific skills\n  const categories = popularCategories.slice(0, 5); // Take top 5 most popular categories\n  const types = ['Trades', 'Collaborations', 'Endorsements'];\n  const category = categories[index % categories.length];\n  const requirements = [];\n  \n  // Add main requirement\n  requirements.push({\n    type: types[index % types.length],\n    count: type === 'weekly' ? Math.floor(Math.random() * 2) + 2 : Math.floor(Math.random() * 3) + 3,\n    skillCategory: category\n  });\n  \n  // Add collaboration requirement with 50% chance\n  if (Math.random() > 0.5) {\n    requirements.push({\n      type: 'Collaborations',\n      count: type === 'weekly' ? 1 : 2,\n      skillCategory: 'Any'\n    });\n  }\n  \n  // Add endorsement requirement with 30% chance\n  if (Math.random() > 0.7) {\n    requirements.push({\n      type: 'Endorsements',\n      count: type === 'weekly' ? 2 : 4,\n      skillCategory: category\n    });\n  }\n  \n  const descriptions = {\n    'Audio Production': 'Master the art of sound design, mixing, and audio post-production.',\n    'Music Production': 'Create and produce original music, from composition to final mix.',\n    'Video Editing': 'Create compelling video content through expert editing and production.',\n    'Motion Graphics': 'Combine animation and graphic design for dynamic visual content.',\n    'Digital Design': 'Create stunning visual designs that communicate and inspire.',\n    'UI/UX Design': 'Design intuitive and engaging user interfaces and experiences.',\n    '3D Animation': 'Bring ideas to life through 3D modeling, animation, and rendering.',\n    'Game Development': 'Create interactive experiences through game design and development.',\n    'Photography': 'Capture and edit remarkable photos that tell powerful stories.',\n    'Data & Analytics': 'Transform raw data into actionable insights through analysis and visualization.',\n    'Presentation & Communication': 'Create and deliver engaging presentations that effectively communicate ideas.'\n  };\n  \n  // Get description based on category, or generate a generic one if not in preset list\n  const description = descriptions[category] || \n    `Master the art of ${category} and showcase your expertise in this field.`;\n  \n  return {\n    title: `${type === 'weekly' ? 'Weekly' : 'Monthly'} ${category} Challenge`,\n    description: `${description} This ${type === 'weekly' ? 'Week' : 'Month'}, push your ${category} skills to new heights!`,\n    requirements,\n    rewards: {\n      xp: type === 'weekly' ? 100 + Math.floor(Math.random() * 200) : 500 + Math.floor(Math.random() * 500),\n      badge: `${type === 'weekly' ? 'Weekly' : 'Monthly'}${category.replace(/\\s+/g, '')}Master`\n    }\n  };\n}\n\n// Generate a new challenge\nexport async function generateChallenge(type: 'weekly' | 'monthly', useAI = false): Promise<string> {\n  console.log(`Generating ${type} challenge (variation)`);\n  \n  try {\n    // Generate a variation based on popular skills\n    const variation = await generateVariation(type, Math.floor(Math.random() * 100));\n    \n    // Create the challenge in Firestore\n    const docRef = await addDoc(collection(db, 'challenges'), {\n      ...variation,\n      type,\n      status: 'pending',\n      participants: [],\n      completions: [],\n      source: 'variation',\n      startDate: serverTimestamp(),\n      endDate: Timestamp.fromDate(\n        type === 'weekly' \n          ? new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n          : new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)\n      ),\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp()\n    });\n\n    console.log(`Challenge created successfully with ID: ${docRef.id}`);\n    return docRef.id;\n  } catch (error) {\n    console.error('Failed to generate challenge:', error);\n    await showError(\n      'Challenge Generation Error',\n      'Failed to generate challenge. Please try again.'\n    );\n    throw error;\n  }\n}\n\n// Delete all existing challenges\nasync function deleteAllChallenges(): Promise<void> {\n  console.log('Deleting all existing challenges...');\n  \n  try {\n    const challengesQuery = query(\n      collection(db, 'challenges'),\n      where('status', 'in', ['pending', 'live'])\n    );\n    \n    const snapshot = await getDocs(challengesQuery);\n    const batch = writeBatch(db);\n    \n    snapshot.docs.forEach(doc => {\n      batch.delete(doc.ref);\n    });\n    \n    await batch.commit();\n    console.log(`Deleted ${snapshot.size} challenges`);\n  } catch (error) {\n    console.error('Error deleting challenges:', error);\n    throw error;\n  }\n}\n\n// Generate fresh set of challenges\nexport async function checkAndGenerateChallenges(): Promise<void> {\n  try {\n    // First, delete all existing challenges\n    await deleteAllChallenges();\n\n    console.log('Generating fresh set of challenges...');\n    \n    // Generate exactly 10 weekly challenges\n    console.log('Generating 10 weekly challenges...');\n    for (let i = 0; i < 10; i++) {\n      await generateChallenge('weekly');\n      console.log(`Generated weekly challenge ${i + 1}/10`);\n      \n      // Add small delay between generations\n      if (i < 9) {\n        await new Promise(resolve => setTimeout(resolve, 500));\n      }\n    }\n\n    // Generate exactly 10 monthly challenges\n    console.log('Generating 10 monthly challenges...');\n    for (let i = 0; i < 10; i++) {\n      await generateChallenge('monthly');\n      console.log(`Generated monthly challenge ${i + 1}/10`);\n      \n      // Add small delay between generations\n      if (i < 9) {\n        await new Promise(resolve => setTimeout(resolve, 500));\n      }\n    }\n\n    console.log('Successfully generated all new challenges');\n  } catch (error) {\n    console.error('Error generating challenges:', error);\n    await showError(\n      'Challenge Generation Error',\n      'Failed to generate challenges. Please try again later.'\n    );\n    throw error;\n  }\n}\n\n// Initialize challenges for the first time\nexport async function initializeChallenges(): Promise<void> {\n  console.log('Initializing challenges...');\n  await checkAndGenerateChallenges();\n}\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { collection, query, where, getDocs, Timestamp } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { Challenge } from '../types';\nimport { ChallengeCard } from '../components/ChallengeCard';\nimport { Trophy, Calendar, RefreshCw, Sparkles, Filter } from 'lucide-react';\nimport { checkAndGenerateChallenges } from '../lib/ai-challenges';\nimport { showError } from '../lib/alerts';\n\nexport function Challenges() {\n  const { user } = useAuth();\n  const [challenges, setChallenges] = useState<Challenge[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [filter, setFilter] = useState<'all' | 'weekly' | 'monthly'>('all');\n\n  const fetchChallenges = async () => {\n    if (!user) return;\n\n    try {\n      // Fetch both weekly and monthly challenges\n      const weeklyQuery = query(\n        collection(db, 'challenges'),\n        where('type', '==', 'weekly'),\n        where('status', 'in', ['pending', 'active'])\n      );\n\n      const monthlyQuery = query(\n        collection(db, 'challenges'),\n        where('type', '==', 'monthly'),\n        where('status', 'in', ['pending', 'active'])\n      );\n\n      const [weeklySnapshot, monthlySnapshot] = await Promise.all([\n        getDocs(weeklyQuery),\n        getDocs(monthlyQuery)\n      ]);\n\n      if (!weeklySnapshot.empty || !monthlySnapshot.empty) {\n        const weeklyData = weeklySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data(),\n          startDate: doc.data().startDate?.toDate() || null,\n          endDate: doc.data().endDate?.toDate() || null,\n          createdAt: doc.data().createdAt?.toDate() || new Date(),\n          updatedAt: doc.data().updatedAt?.toDate() || new Date()\n        } as Challenge));\n\n        const monthlyData = monthlySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data(),\n          startDate: doc.data().startDate?.toDate() || null,\n          endDate: doc.data().endDate?.toDate() || null,\n          createdAt: doc.data().createdAt?.toDate() || new Date(),\n          updatedAt: doc.data().updatedAt?.toDate() || new Date()\n        } as Challenge));\n\n        // Sort and limit each type to 10 challenges\n        // Sort challenges prioritizing AI-generated ones\n        const sortChallenges = (challenges: Challenge[]) => {\n          return challenges\n            .sort((a, b) => {\n              // Sort by source (AI first)\n              if (a.source === 'ai' && b.source !== 'ai') return -1;\n              if (a.source !== 'ai' && b.source === 'ai') return 1;\n              // Then by creation date\n              return b.createdAt.getTime() - a.createdAt.getTime();\n            })\n            .slice(0, 10);\n        };\n\n        const sortedWeekly = sortChallenges(weeklyData);\n        const sortedMonthly = sortChallenges(monthlyData);\n\n        // Combine all challenges\n        setChallenges([...sortedWeekly, ...sortedMonthly]);\n      } else {\n        await checkAndGenerateChallenges();\n        await fetchChallenges();\n      }\n    } catch (err) {\n      console.error('Failed to fetch challenges:', err);\n      await showError(\n        'Error Loading Challenges',\n        'Unable to load challenges. Please try refreshing the page.'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchChallenges();\n  }, [user]);\n\n  const handleRefresh = async () => {\n    setRefreshing(true);\n    try {\n      await checkAndGenerateChallenges();\n      await fetchChallenges();\n    } catch (err) {\n      console.error('Failed to refresh challenges:', err);\n      await showError(\n        'Refresh Failed',\n        'Unable to refresh challenges. Please try again.'\n      );\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const filteredChallenges = challenges.filter(\n    challenge => filter === 'all' || challenge.type === filter\n  );\n\n  return (\n    <div className=\"min-h-screen\">\n      {/* Dynamic background */}\n      <div className=\"fixed inset-0 bg-mesh opacity-30\"></div>\n      <div className=\"fixed inset-0 bg-noise\"></div>\n\n      {/* Content */}\n      <div className=\"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        {/* Header */}\n        <div className=\"mb-12\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"p-2 bg-gradient-to-br from-accent-clay to-accent-ochre rounded-lg\">\n              <Trophy className=\"h-8 w-8 text-white\" />\n            </div>\n            <h1 className=\"text-4xl font-display font-bold text-white\">\n              Active Challenges\n            </h1>\n          </div>\n          <p className=\"text-xl text-gray-300\">\n            Complete challenges to earn XP and unlock special rewards\n          </p>\n        </div>\n\n        {/* Controls */}\n        <div className=\"flex flex-col sm:flex-row justify-between gap-4 mb-8\">\n          {/* Filter Tabs */}\n          <div className=\"flex gap-2 p-1 bg-earth-800/50 backdrop-blur-sm rounded-lg\">\n            <button\n              onClick={() => setFilter('all')}\n              className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${\n                filter === 'all'\n                  ? 'bg-gradient-to-r from-accent-clay to-accent-ochre text-white shadow-lg'\n                  : 'text-gray-400 hover:text-white'\n              }`}\n            >\n              All Challenges\n            </button>\n            <button\n              onClick={() => setFilter('weekly')}\n              className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${\n                filter === 'weekly'\n                  ? 'bg-gradient-to-r from-accent-clay to-accent-ochre text-white shadow-lg'\n                  : 'text-gray-400 hover:text-white'\n              }`}\n            >\n              Weekly\n            </button>\n            <button\n              onClick={() => setFilter('monthly')}\n              className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${\n                filter === 'monthly'\n                  ? 'bg-gradient-to-r from-accent-clay to-accent-ochre text-white shadow-lg'\n                  : 'text-gray-400 hover:text-white'\n              }`}\n            >\n              Monthly\n            </button>\n          </div>\n\n          {/* Refresh Button */}\n          <button\n            onClick={handleRefresh}\n            disabled={refreshing}\n            className=\"flex items-center gap-2 px-4 py-2 bg-earth-800/50 backdrop-blur-sm \n                     text-white rounded-lg hover:bg-earth-800/70 transition-all duration-300\n                     disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <RefreshCw className={`h-5 w-5 ${refreshing ? 'animate-spin' : ''}`} />\n            {refreshing ? 'Refreshing...' : 'Check for New Challenges'}\n          </button>\n        </div>\n\n        {/* Challenges Grid */}\n        {loading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {[1, 2, 3].map((n) => (\n              <div key={n} className=\"card p-6 animate-pulse\">\n                <div className=\"h-6 bg-earth-700/50 rounded w-3/4 mb-4\"></div>\n                <div className=\"space-y-2 mb-4\">\n                  <div className=\"h-4 bg-earth-700/50 rounded w-full\"></div>\n                  <div className=\"h-4 bg-earth-700/50 rounded w-5/6\"></div>\n                </div>\n                <div className=\"h-10 bg-earth-700/50 rounded\"></div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredChallenges.map((challenge) => (\n              <ChallengeCard\n                key={challenge.id}\n                challenge={challenge}\n                userProgress={user?.challengeProgress?.[challenge.id]}\n              />\n            ))}\n\n            {filteredChallenges.length === 0 && (\n              <div className=\"col-span-full\">\n                <div className=\"card p-12 text-center\">\n                  <Sparkles className=\"h-12 w-12 text-accent-clay mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-display font-semibold text-gray-900 mb-2\">\n                    No Active Challenges\n                  </h3>\n                  <p className=\"text-gray-600 mb-6\">\n                    There are no active challenges at the moment. Click refresh to check for new ones.\n                  </p>\n                  <button\n                    onClick={handleRefresh}\n                    disabled={refreshing}\n                    className=\"btn-primary inline-flex items-center gap-2\"\n                  >\n                    <RefreshCw className={`h-4 w-4 ${refreshing ? 'animate-spin' : ''}`} />\n                    Check for New Challenges\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { Challenge } from '../types';\nimport { generateChallenge } from '../lib/ai-challenges';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { Wand, Save, RotateCcw, AlertTriangle } from 'lucide-react';\n\ninterface ChallengeEditorProps {\n  challenge?: Challenge;\n  type: 'weekly' | 'monthly';\n  onSave: () => void;\n  onCancel: () => void;\n}\n\nexport function ChallengeEditor({ challenge, type, onSave, onCancel }: ChallengeEditorProps) {\n  const [editedChallenge, setEditedChallenge] = useState<Partial<Challenge>>(challenge || {});\n  const [generating, setGenerating] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleGenerateNew = async () => {\n    setGenerating(true);\n    setError(null);\n    try {\n      const challengeId = await generateChallenge(type, true);\n      const challengeDoc = await db.doc(`challenges/${challengeId}`).get();\n      setEditedChallenge(challengeDoc.data() as Challenge);\n    } catch (err) {\n      setError('Failed to generate challenge. Please try again or edit manually.');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSave = async () => {\n    if (!editedChallenge.title || !editedChallenge.description) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    setSaving(true);\n    setError(null);\n    try {\n      if (challenge?.id) {\n        await updateDoc(doc(db, 'challenges', challenge.id), {\n          ...editedChallenge,\n          updatedAt: new Date()\n        });\n      }\n      onSave();\n    } catch (err) {\n      setError('Failed to save challenge');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-xl font-semibold mb-2\">\n          {challenge ? 'Edit Challenge' : 'New Challenge'}\n        </h2>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={handleGenerateNew}\n            disabled={generating}\n            className=\"btn-secondary flex items-center gap-2\"\n          >\n            <Wand className=\"h-4 w-4\" />\n            {generating ? 'Generating...' : 'Generate with AI'}\n          </button>\n          {challenge && (\n            <button\n              onClick={() => setEditedChallenge(challenge)}\n              className=\"btn-secondary flex items-center gap-2\"\n            >\n              <RotateCcw className=\"h-4 w-4\" />\n              Reset\n            </button>\n          )}\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-6 p-4 bg-red-50 text-red-700 rounded-lg flex items-start gap-2\">\n          <AlertTriangle className=\"h-5 w-5 flex-shrink-0\" />\n          <p>{error}</p>\n        </div>\n      )}\n\n      <div className=\"space-y-6\">\n        {/* Title */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Title\n          </label>\n          <input\n            type=\"text\"\n            value={editedChallenge.title || ''}\n            onChange={(e) => setEditedChallenge(prev => ({ ...prev, title: e.target.value }))}\n            className=\"w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500\"\n            placeholder=\"Enter challenge title\"\n          />\n        </div>\n\n        {/* Description */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Description\n          </label>\n          <textarea\n            value={editedChallenge.description || ''}\n            onChange={(e) => setEditedChallenge(prev => ({ ...prev, description: e.target.value }))}\n            className=\"w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500\"\n            rows={4}\n            placeholder=\"Describe the challenge\"\n          />\n        </div>\n\n        {/* Requirements */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Requirements\n          </label>\n          {editedChallenge.requirements?.map((req, index) => (\n            <div key={index} className=\"flex gap-4 mb-2\">\n              <select\n                value={req.type}\n                onChange={(e) => {\n                  const newReqs = [...(editedChallenge.requirements || [])];\n                  newReqs[index] = { ...req, type: e.target.value as any };\n                  setEditedChallenge(prev => ({ ...prev, requirements: newReqs }));\n                }}\n                className=\"p-2 border rounded-lg\"\n              >\n                <option value=\"trades\">Trades</option>\n                <option value=\"collaborations\">Collaborations</option>\n                <option value=\"endorsements\">Endorsements</option>\n                <option value=\"skills\">Skills</option>\n              </select>\n              <input\n                type=\"number\"\n                value={req.count}\n                onChange={(e) => {\n                  const newReqs = [...(editedChallenge.requirements || [])];\n                  newReqs[index] = { ...req, count: parseInt(e.target.value) };\n                  setEditedChallenge(prev => ({ ...prev, requirements: newReqs }));\n                }}\n                className=\"p-2 border rounded-lg w-24\"\n                min=\"1\"\n              />\n              <input\n                type=\"text\"\n                value={req.skillCategory || ''}\n                onChange={(e) => {\n                  const newReqs = [...(editedChallenge.requirements || [])];\n                  newReqs[index] = { ...req, skillCategory: e.target.value };\n                  setEditedChallenge(prev => ({ ...prev, requirements: newReqs }));\n                }}\n                className=\"p-2 border rounded-lg flex-1\"\n                placeholder=\"Skill category (optional)\"\n              />\n            </div>\n          ))}\n          <button\n            onClick={() => setEditedChallenge(prev => ({\n              ...prev,\n              requirements: [\n                ...(prev.requirements || []),\n                { type: 'trades', count: 1 }\n              ]\n            }))}\n            className=\"text-sm text-indigo-600 hover:text-indigo-700\"\n          >\n            + Add Requirement\n          </button>\n        </div>\n\n        {/* Rewards */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Rewards\n          </label>\n          <div className=\"flex gap-4\">\n            <div>\n              <label className=\"block text-sm text-gray-600 mb-1\">XP</label>\n              <input\n                type=\"number\"\n                value={editedChallenge.rewards?.xp || 0}\n                onChange={(e) => setEditedChallenge(prev => ({\n                  ...prev,\n                  rewards: {\n                    ...prev.rewards,\n                    xp: parseInt(e.target.value)\n                  }\n                }))}\n                className=\"p-2 border rounded-lg w-24\"\n                min=\"0\"\n              />\n            </div>\n            <div className=\"flex-1\">\n              <label className=\"block text-sm text-gray-600 mb-1\">Badge (optional)</label>\n              <input\n                type=\"text\"\n                value={editedChallenge.rewards?.badge || ''}\n                onChange={(e) => setEditedChallenge(prev => ({\n                  ...prev,\n                  rewards: {\n                    ...prev.rewards,\n                    badge: e.target.value\n                  }\n                }))}\n                className=\"p-2 border rounded-lg w-full\"\n                placeholder=\"Badge identifier\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex justify-end gap-4 pt-4\">\n          <button\n            onClick={onCancel}\n            className=\"btn-secondary\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"btn-primary flex items-center gap-2\"\n          >\n            <Save className=\"h-4 w-4\" />\n            {saving ? 'Saving...' : 'Save Challenge'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport { collection, query, where, orderBy, onSnapshot } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { Challenge } from '../types';\nimport { ChallengeEditor } from '../components/ChallengeEditor';\nimport { Clock, Edit, Play, AlertTriangle } from 'lucide-react';\n\nexport function AdminChallenges() {\n  const [pendingChallenges, setPendingChallenges] = useState<Challenge[]>([]);\n  const [editingChallenge, setEditingChallenge] = useState<Challenge | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Subscribe to pending challenges\n    const q = query(\n      collection(db, 'challenges'),\n      where('status', '==', 'pending'),\n      orderBy('createdAt', 'desc')\n    );\n\n    const unsubscribe = onSnapshot(q, \n      (snapshot) => {\n        const challenges = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })) as Challenge[];\n        setPendingChallenges(challenges);\n        setLoading(false);\n      },\n      (err) => {\n        console.error('Error fetching challenges:', err);\n        setError('Failed to load challenges');\n        setLoading(false);\n      }\n    );\n\n    return () => unsubscribe();\n  }, []);\n\n  const handleActivate = async (challengeId: string) => {\n    try {\n      const { httpsCallable } = await import('firebase/functions');\n      const functions = getFunctions();\n      const activateChallenge = httpsCallable(functions, 'manuallyActivateChallenge');\n      \n      await activateChallenge({ challengeId });\n    } catch (err) {\n      console.error('Failed to activate challenge:', err);\n      setError('Failed to activate challenge');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map((n) => (\n            <div key={n} className=\"bg-white p-6 rounded-lg shadow-md\">\n              <div className=\"h-6 bg-gray-200 rounded w-1/4 mb-4\"></div>\n              <div className=\"space-y-2\">\n                <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Challenge Management</h1>\n        <p className=\"text-gray-600\">Review and activate pending challenges</p>\n      </div>\n\n      {error && (\n        <div className=\"mb-6 p-4 bg-red-50 text-red-700 rounded-lg flex items-start gap-2\">\n          <AlertTriangle className=\"h-5 w-5 flex-shrink-0\" />\n          <p>{error}</p>\n        </div>\n      )}\n\n      {editingChallenge ? (\n        <ChallengeEditor\n          challenge={editingChallenge}\n          type={editingChallenge.type}\n          onSave={() => setEditingChallenge(null)}\n          onCancel={() => setEditingChallenge(null)}\n        />\n      ) : (\n        <div className=\"space-y-6\">\n          {pendingChallenges.map((challenge) => (\n            <div key={challenge.id} className=\"bg-white rounded-lg shadow-md p-6\">\n              <div className=\"flex justify-between items-start mb-4\">\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-900\">{challenge.title}</h3>\n                  <div className=\"flex items-center text-sm text-gray-500 mt-1\">\n                    <Clock className=\"h-4 w-4 mr-1\" />\n                    {challenge.type.charAt(0).toUpperCase() + challenge.type.slice(1)} Challenge\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => setEditingChallenge(challenge)}\n                    className=\"p-2 text-gray-600 hover:text-indigo-600 transition-colors\"\n                  >\n                    <Edit className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                    onClick={() => handleActivate(challenge.id)}\n                    className=\"p-2 text-gray-600 hover:text-green-600 transition-colors\"\n                  >\n                    <Play className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              </div>\n\n              <p className=\"text-gray-600 mb-4\">{challenge.description}</p>\n\n              <div className=\"space-y-4\">\n                {/* Requirements */}\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Requirements</h4>\n                  <div className=\"space-y-2\">\n                    {challenge.requirements.map((req, index) => (\n                      <div key={index} className=\"flex items-center text-sm text-gray-600\">\n                        <span className=\"w-24\">{req.type}:</span>\n                        <span className=\"font-medium\">{req.count}</span>\n                        {req.skillCategory && (\n                          <span className=\"ml-2 text-gray-500\">in {req.skillCategory}</span>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Rewards */}\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Rewards</h4>\n                  <div className=\"flex items-center gap-4 text-sm\">\n                    <div className=\"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full\">\n                      {challenge.rewards.xp} XP\n                    </div>\n                    {challenge.rewards.badge && (\n                      <div className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full\">\n                        {challenge.rewards.badge} Badge\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n\n          {pendingChallenges.length === 0 && (\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\n              <Clock className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                No Pending Challenges\n              </h3>\n              <p className=\"text-gray-600\">\n                New challenges will appear here when generated\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}","import { \n  collection, \n  doc, \n  setDoc, \n  getDoc, \n  getDocs, \n  query, \n  where, \n  updateDoc,\n  deleteDoc,\n  serverTimestamp,\n  Timestamp \n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { Connection, UserProfile } from '../types';\nimport { showError, showSuccess } from './alerts';\n\n// Send a connection request\nexport async function sendConnectionRequest(fromUserId: string, toUserId: string): Promise<void> {\n  try {\n    // Check if connection already exists\n    const connectionsRef = collection(db, `users/${toUserId}/connections`);\n    const q = query(connectionsRef, where('userId', '==', fromUserId));\n    const existingConnections = await getDocs(q);\n\n    if (!existingConnections.empty) {\n      throw new Error('Connection request already exists');\n    }\n\n    // Create connection request\n    const connectionId = `${fromUserId}_${toUserId}`;\n    await setDoc(doc(db, `users/${toUserId}/connections`, connectionId), {\n      userId: fromUserId,\n      status: 'pending',\n      timestamp: serverTimestamp()\n    });\n\n    await showSuccess('Connection Request Sent', 'Your request has been sent successfully');\n  } catch (error) {\n    console.error('Error sending connection request:', error);\n    await showError(\n      'Failed to Send Request',\n      error instanceof Error ? error.message : 'An unexpected error occurred'\n    );\n    throw error;\n  }\n}\n\n// Accept a connection request\nexport async function acceptConnectionRequest(userId: string, connectionId: string): Promise<void> {\n  try {\n    const connectionRef = doc(db, `users/${userId}/connections`, connectionId);\n    const connectionDoc = await getDoc(connectionRef);\n\n    if (!connectionDoc.exists()) {\n      throw new Error('Connection request not found');\n    }\n\n    const connection = connectionDoc.data() as Connection;\n    if (connection.status !== 'pending') {\n      throw new Error('Connection request is no longer pending');\n    }\n\n    // Update status to accepted\n    await updateDoc(connectionRef, {\n      status: 'accepted',\n      timestamp: serverTimestamp()\n    });\n\n    // Create reciprocal connection\n    const reciprocalId = `${userId}_${connection.userId}`;\n    await setDoc(doc(db, `users/${connection.userId}/connections`, reciprocalId), {\n      userId: userId,\n      status: 'accepted',\n      timestamp: serverTimestamp()\n    });\n\n    await showSuccess('Connection Accepted', 'You are now connected!');\n  } catch (error) {\n    console.error('Error accepting connection request:', error);\n    await showError(\n      'Failed to Accept Request',\n      error instanceof Error ? error.message : 'An unexpected error occurred'\n    );\n    throw error;\n  }\n}\n\n// Decline a connection request\nexport async function declineConnectionRequest(userId: string, connectionId: string): Promise<void> {\n  try {\n    const connectionRef = doc(db, `users/${userId}/connections`, connectionId);\n    await deleteDoc(connectionRef);\n    await showSuccess('Connection Declined', 'The connection request has been declined');\n  } catch (error) {\n    console.error('Error declining connection request:', error);\n    await showError(\n      'Failed to Decline Request',\n      error instanceof Error ? error.message : 'An unexpected error occurred'\n    );\n    throw error;\n  }\n}\n\n// Remove a connection\nexport async function removeConnection(userId: string, connectionId: string): Promise<void> {\n  try {\n    // Get connection details first\n    const connectionRef = doc(db, `users/${userId}/connections`, connectionId);\n    const connectionDoc = await getDoc(connectionRef);\n\n    if (!connectionDoc.exists()) {\n      throw new Error('Connection not found');\n    }\n\n    const connection = connectionDoc.data() as Connection;\n\n    // Remove connection from both users\n    await deleteDoc(connectionRef);\n    const reciprocalId = `${userId}_${connection.userId}`;\n    await deleteDoc(doc(db, `users/${connection.userId}/connections`, reciprocalId));\n\n    await showSuccess('Connection Removed', 'The connection has been removed from your network');\n  } catch (error) {\n    console.error('Error removing connection:', error);\n    await showError(\n      'Failed to Remove Connection',\n      error instanceof Error ? error.message : 'An unexpected error occurred'\n    );\n    throw error;\n  }\n}\n\n// Check if users are connected\nexport async function checkConnectionStatus(userId: string, otherUserId: string): Promise<'none' | 'pending' | 'accepted'> {\n  try {\n    const connectionRef = doc(db, `users/${userId}/connections`, `${otherUserId}_${userId}`);\n    const connectionDoc = await getDoc(connectionRef);\n\n    if (!connectionDoc.exists()) {\n      return 'none';\n    }\n\n    return connectionDoc.data().status as 'pending' | 'accepted';\n  } catch (error) {\n    console.error('Error checking connection status:', error);\n    throw error;\n  }\n}","import { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  collection, \n  query, \n  where, \n  onSnapshot,\n  doc,\n  getDoc\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { startConversation } from '../lib/messaging';\nimport { \n  acceptConnectionRequest, \n  declineConnectionRequest \n} from '../lib/connections';\nimport { Connection, UserProfile } from '../types';\nimport { ProfilePicture } from '../components/ProfilePicture';\nimport { ProfileHoverCard } from '../components/ProfileHoverCard';\nimport { \n  Users, \n  UserPlus, \n  Clock, \n  Check, \n  X, \n  MessageSquare,\n  ExternalLink \n} from 'lucide-react';\n\nexport function Connections() {\n  const { user } = useAuth();\n  const [connections, setConnections] = useState<Connection[]>([]);\n  const [pendingRequests, setPendingRequests] = useState<Connection[]>([]);\n  const [profiles, setProfiles] = useState<{ [key: string]: UserProfile }>({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  // Fetch user profiles for connections\n  const fetchProfiles = async (userIds: string[]) => {\n    const uniqueIds = Array.from(new Set(userIds));\n    const newProfiles: { [key: string]: UserProfile } = {};\n    \n    for (const userId of uniqueIds) {\n      try {\n        const userDoc = await getDoc(doc(db, 'users', userId));\n        if (userDoc.exists()) {\n          newProfiles[userId] = {\n            id: userDoc.id,\n            ...userDoc.data()\n          } as UserProfile;\n        }\n      } catch (err) {\n        console.error(`Failed to fetch profile for ${userId}:`, err);\n      }\n    }\n    \n    setProfiles(prev => ({ ...prev, ...newProfiles }));\n  };\n\n  // Real-time updates for connections\n  useEffect(() => {\n    if (!user) return;\n\n    // Query for pending requests\n    const pendingQuery = query(\n      collection(db, `users/${user.uid}/connections`),\n      where('status', '==', 'pending')\n    );\n\n    // Query for accepted connections\n    const acceptedQuery = query(\n      collection(db, `users/${user.uid}/connections`),\n      where('status', '==', 'accepted')\n    );\n\n    // Subscribe to pending requests\n    const unsubPending = onSnapshot(pendingQuery, (snapshot) => {\n      const requests = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })) as Connection[];\n      setPendingRequests(requests);\n      \n      // Fetch profiles for new requests\n      const userIds = requests.map(req => req.userId);\n      fetchProfiles(userIds);\n    }, (err) => {\n      console.error('Error in pending requests subscription:', err);\n      setError('Failed to load pending requests');\n    });\n\n    // Subscribe to accepted connections\n    const unsubAccepted = onSnapshot(acceptedQuery, (snapshot) => {\n      const acceptedConnections = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })) as Connection[];\n      setConnections(acceptedConnections);\n      \n      // Fetch profiles for new connections\n      const userIds = acceptedConnections.map(conn => conn.userId);\n      fetchProfiles(userIds);\n      setLoading(false);\n    }, (err) => {\n      console.error('Error in accepted connections subscription:', err);\n      setError('Failed to load connections');\n      setLoading(false);\n    });\n\n    // Cleanup subscriptions\n    return () => {\n      unsubPending();\n      unsubAccepted();\n    };\n  }, [user]);\n\n  const handleAcceptRequest = async (connectionId: string) => {\n    if (!user) return;\n    try {\n      await acceptConnectionRequest(user.uid, connectionId);\n    } catch (err) {\n      console.error('Failed to accept request:', err);\n    }\n  };\n\n  const handleDeclineRequest = async (connectionId: string) => {\n    if (!user) return;\n    try {\n      await declineConnectionRequest(user.uid, connectionId);\n    } catch (err) {\n      console.error('Failed to decline request:', err);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map((n) => (\n            <div key={n} className=\"card p-4\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"h-12 w-12 bg-earth-700 rounded-full\"></div>\n                <div className=\"flex-1\">\n                  <div className=\"h-4 bg-earth-700 rounded w-1/4 mb-2\"></div>\n                  <div className=\"h-3 bg-earth-700 rounded w-3/4\"></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-display font-bold text-white mb-2\">\n          Your Network\n        </h1>\n        <p className=\"text-gray-200\">\n          Manage your professional connections and requests\n        </p>\n      </div>\n\n      {error && (\n        <div className=\"mb-8 bg-red-900/20 border border-red-500/50 text-red-500 p-4 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      {/* Pending Requests */}\n      {pendingRequests.length > 0 && (\n        <div className=\"mb-8\">\n          <h2 className=\"text-xl font-display font-semibold text-white mb-4 flex items-center gap-2\">\n            <Clock className=\"h-5 w-5 text-accent-clay\" />\n            Pending Requests\n          </h2>\n          <div className=\"space-y-4\">\n            {pendingRequests.map((request) => {\n              const profile = profiles[request.userId];\n              if (!profile) return null;\n\n              return (\n                <div key={request.id} className=\"card p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                      <ProfilePicture url={profile.profilePicture} size=\"md\" />\n                      <div>\n                        <h3 className=\"text-lg font-medium text-gray-900\">\n                          {profile.displayName}\n                        </h3>\n                        <p className=\"text-sm text-gray-600 line-clamp-1\">\n                          {profile.bio || 'No bio available'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        onClick={() => handleAcceptRequest(request.id)}\n                        className=\"p-2 text-accent-sage hover:text-accent-moss transition-colors\"\n                        title=\"Accept Request\"\n                      >\n                        <Check className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        onClick={() => handleDeclineRequest(request.id)}\n                        className=\"p-2 text-accent-rust hover:text-red-700 transition-colors\"\n                        title=\"Decline Request\"\n                      >\n                        <X className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Connections */}\n      <div>\n        <h2 className=\"text-xl font-display font-semibold text-white mb-4 flex items-center gap-2\">\n          <Users className=\"h-5 w-5 text-accent-clay\" />\n          Your Connections\n          <span className=\"text-sm text-gray-400\">({connections.length})</span>\n        </h2>\n\n        {connections.length === 0 ? (\n          <div className=\"card p-8 text-center\">\n            <UserPlus className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              No Connections Yet\n            </h3>\n            <p className=\"text-gray-600\">\n              Start building your network by connecting with other professionals\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {connections.map((connection) => {\n              const profile = profiles[connection.userId];\n              if (!profile) return null;\n\n              return (\n                <div key={connection.id} className=\"card p-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <ProfileHoverCard\n                      profile={profile}\n                      onMessageClick={async () => {\n                        try {\n                          const conversationId = await startConversation(user!.uid, profile);\n                          navigate(`/messages/${conversationId}`);\n                        } catch (err) {\n                          console.error('Failed to start conversation:', err);\n                        }\n                      }}\n                    >\n                      <ProfilePicture url={profile.profilePicture} size=\"lg\" />\n                    </ProfileHoverCard>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-lg font-medium text-gray-900 truncate\">\n                        {profile.displayName}\n                      </h3>\n                      {profile.portfolio && (\n                        <a\n                          href={profile.portfolio}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-sm text-accent-clay hover:text-accent-ochre flex items-center gap-1\"\n                        >\n                          Portfolio <ExternalLink className=\"h-3 w-3\" />\n                        </a>\n                      )}\n                      <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\n                        {profile.bio || 'No bio available'}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Skills */}\n                  <div className=\"mt-4\">\n                    <h4 className=\"text-sm font-medium text-gray-900 mb-2\">\n                      Top Skills\n                    </h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {profile.skills.slice(0, 3).map((skill) => (\n                        <span\n                          key={skill}\n                          className=\"px-2 py-1 bg-accent-sage/20 text-gray-900 text-sm rounded-full border border-accent-sage/30\"\n                        >\n                          {skill}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"mt-4 pt-4 border-t border-earth-700\">\n                    <button\n                      onClick={async () => {\n                        try {\n                          const conversationId = await startConversation(user!.uid, profile);\n                          navigate(`/messages/${conversationId}`);\n                        } catch (err) {\n                          console.error('Failed to start conversation:', err);\n                        }\n                      }}\n                      className=\"w-full btn-primary flex items-center justify-center gap-2\"\n                    >\n                      <MessageSquare className=\"h-4 w-4\" />\n                      Message\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { doc, getDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { UserProfile, Trade } from '../types';\nimport { ReputationCard } from '../components/ReputationCard';\nimport { ProfilePicture } from '../components/ProfilePicture';\nimport { Link as LinkIcon, Star, History, Shield, UserPlus, MessageSquare, Clock } from 'lucide-react';\nimport { getConnectionStatus, sendConnectionRequest } from '../lib/networking';\n\nexport function PublicProfile() {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [completedTrades, setCompletedTrades] = useState<Trade[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [connectionStatus, setConnectionStatus] = useState<'none' | 'pending' | 'accepted'>('none');\n  const [isConnecting, setIsConnecting] = useState(false);\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!id) return;\n\n      try {\n        // Fetch public profile data\n        const profileDoc = await getDoc(doc(db, 'users', id));\n        if (!profileDoc.exists()) {\n          setError('Profile not found');\n          return;\n        }\n\n        const profileData = {\n          id: profileDoc.id,\n          ...profileDoc.data()\n        } as UserProfile;\n\n        setProfile(profileData);\n\n        // Fetch completed trades\n        const tradesQuery = query(\n          collection(db, 'trades'),\n          where('creatorId', '==', id),\n          where('status', '==', 'completed')\n        );\n        const tradesSnapshot = await getDocs(tradesQuery);\n        const trades = tradesSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })) as Trade[];\n        setCompletedTrades(trades);\n\n        // Fetch connection status if user is logged in\n        if (user) {\n          const status = await getConnectionStatus(user.uid, id);\n          setConnectionStatus(status);\n        }\n      } catch (err) {\n        console.error('Error fetching profile:', err);\n        setError('Failed to load profile');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProfile();\n  }, [id, user]);\n\n  const handleConnect = async () => {\n    if (!user || !profile || isConnecting) return;\n    \n    setIsConnecting(true);\n    setConnectionStatus('pending');\n    \n    try {\n      await sendConnectionRequest(user.uid, profile.id);\n    } catch (err) {\n      console.error('Failed to send connection request:', err);\n      setConnectionStatus('none');\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-48 bg-earth-800 rounded-lg mb-8\"></div>\n          <div className=\"space-y-4\">\n            <div className=\"h-8 bg-earth-800 rounded w-1/3\"></div>\n            <div className=\"h-4 bg-earth-800 rounded w-2/3\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !profile) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-red-900/20 border border-red-500/50 text-red-500 p-4 rounded-lg\">\n          {error || 'Profile not found'}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"card overflow-hidden\">\n        {/* Cover Image */}\n        <div className=\"h-48 bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink relative\">\n          <div className=\"absolute inset-0 bg-mesh opacity-30\"></div>\n          <div className=\"absolute inset-0 bg-noise opacity-50\"></div>\n          \n          {/* Profile Picture */}\n          <div className=\"absolute -bottom-12 left-8\">\n            <ProfilePicture url={profile.profilePicture} size=\"xl\" />\n          </div>\n        </div>\n        \n        {/* Profile Content */}\n        <div className=\"p-6 mt-16\">\n          {/* Profile Header */}\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <h1 className=\"text-2xl font-display font-bold text-gray-900\">\n                {profile.displayName}\n              </h1>\n              <p className=\"text-gray-600\">{profile.email}</p>\n            </div>\n            \n            {user && user.uid !== profile.id && (\n              <div className=\"flex gap-2\">\n                {connectionStatus === 'accepted' ? (\n                  <Link\n                    to={`/messages/${profile.id}`}\n                    className=\"btn-primary flex items-center gap-2\"\n                  >\n                    <MessageSquare className=\"h-4 w-4\" />\n                    Message\n                  </Link>\n                ) : connectionStatus === 'pending' ? (\n                  <button\n                    disabled\n                    className=\"btn-secondary flex items-center gap-2 opacity-75\"\n                  >\n                    <Clock className=\"h-4 w-4\" />\n                    Request Pending\n                  </button>\n                ) : (\n                  <button\n                    onClick={handleConnect}\n                    disabled={isConnecting}\n                    className=\"btn-primary flex items-center gap-2\"\n                  >\n                    {isConnecting ? (\n                      <>\n                        <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                        Connecting...\n                      </>\n                    ) : (\n                      <>\n                        <UserPlus className=\"h-4 w-4\" />\n                        Connect\n                      </>\n                    )}\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Reputation Card */}\n          <div className=\"mb-8\">\n            <ReputationCard profile={profile} showEndorsements={false} />\n          </div>\n\n          {/* Bio */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3\">About</h2>\n            <p className=\"text-gray-700\">\n              {profile.bio || 'No bio available'}\n            </p>\n          </div>\n\n          {/* Skills */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3 flex items-center gap-2\">\n              <Star className=\"h-5 w-5 text-accent-ochre\" />\n              Skills\n            </h2>\n            <div className=\"flex flex-wrap gap-2\">\n              {profile.skills.map((skill) => (\n                <div\n                  key={skill}\n                  className=\"group flex items-center gap-2 px-3 py-1.5 bg-earth-800 \n                           text-gray-900 rounded-full text-sm border border-earth-700\n                           hover:border-neon-blue transition-all duration-300\"\n                >\n                  <span>{skill}</span>\n                  {profile.endorsements?.[skill] && (\n                    <span className=\"px-1.5 py-0.5 bg-neon-purple/10 text-neon-purple rounded-full text-xs\">\n                      {profile.endorsements[skill].length}\n                    </span>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Completed Trades */}\n          {completedTrades.length > 0 && (\n            <div className=\"mb-8\">\n              <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3 flex items-center gap-2\">\n                <History className=\"h-5 w-5 text-accent-ochre\" />\n                Completed Trades\n              </h2>\n              <div className=\"space-y-4\">\n                {completedTrades.map((trade) => (\n                  <Link\n                    key={trade.id}\n                    to={`/trades/${trade.id}`}\n                    className=\"block p-4 bg-earth-800 rounded-lg hover:bg-earth-700 transition-colors\"\n                  >\n                    <h3 className=\"font-medium text-gray-900 mb-2\">{trade.title}</h3>\n                    <p className=\"text-sm text-gray-600 line-clamp-2\">{trade.description}</p>\n                  </Link>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Portfolio */}\n          {profile.portfolio && (\n            <div>\n              <h2 className=\"text-lg font-display font-semibold text-gray-900 mb-3\">Portfolio</h2>\n              <a\n                href={profile.portfolio}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"inline-flex items-center gap-2 text-neon-blue hover:text-neon-purple transition-colors\"\n              >\n                <LinkIcon className=\"h-4 w-4\" />\n                {profile.portfolio}\n              </a>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","'use client';\nimport { createContext, Component, createElement, useContext, useState, useMemo, forwardRef } from 'react';\n\nconst ErrorBoundaryContext = createContext(null);\n\nconst initialState = {\n  didCatch: false,\n  error: null\n};\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.resetErrorBoundary = this.resetErrorBoundary.bind(this);\n    this.state = initialState;\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      didCatch: true,\n      error\n    };\n  }\n  resetErrorBoundary() {\n    const {\n      error\n    } = this.state;\n    if (error !== null) {\n      var _this$props$onReset, _this$props;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_this$props$onReset = (_this$props = this.props).onReset) === null || _this$props$onReset === void 0 ? void 0 : _this$props$onReset.call(_this$props, {\n        args,\n        reason: \"imperative-api\"\n      });\n      this.setState(initialState);\n    }\n  }\n  componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n    (_this$props$onError = (_this$props2 = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      didCatch\n    } = this.state;\n    const {\n      resetKeys\n    } = this.props;\n\n    // There's an edge case where if the thing that triggered the error happens to *also* be in the resetKeys array,\n    // we'd end up resetting the error boundary immediately.\n    // This would likely trigger a second error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call of cDU after the error is set.\n\n    if (didCatch && prevState.error !== null && hasArrayChanged(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onReset2, _this$props3;\n      (_this$props$onReset2 = (_this$props3 = this.props).onReset) === null || _this$props$onReset2 === void 0 ? void 0 : _this$props$onReset2.call(_this$props3, {\n        next: resetKeys,\n        prev: prevProps.resetKeys,\n        reason: \"keys\"\n      });\n      this.setState(initialState);\n    }\n  }\n  render() {\n    const {\n      children,\n      fallbackRender,\n      FallbackComponent,\n      fallback\n    } = this.props;\n    const {\n      didCatch,\n      error\n    } = this.state;\n    let childToRender = children;\n    if (didCatch) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n      if (typeof fallbackRender === \"function\") {\n        childToRender = fallbackRender(props);\n      } else if (FallbackComponent) {\n        childToRender = createElement(FallbackComponent, props);\n      } else if (fallback !== undefined) {\n        childToRender = fallback;\n      } else {\n        throw error;\n      }\n    }\n    return createElement(ErrorBoundaryContext.Provider, {\n      value: {\n        didCatch,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      }\n    }, childToRender);\n  }\n}\nfunction hasArrayChanged() {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]));\n}\n\nfunction assertErrorBoundaryContext(value) {\n  if (value == null || typeof value.didCatch !== \"boolean\" || typeof value.resetErrorBoundary !== \"function\") {\n    throw new Error(\"ErrorBoundaryContext not found\");\n  }\n}\n\nfunction useErrorBoundary() {\n  const context = useContext(ErrorBoundaryContext);\n  assertErrorBoundaryContext(context);\n  const [state, setState] = useState({\n    error: null,\n    hasError: false\n  });\n  const memoized = useMemo(() => ({\n    resetBoundary: () => {\n      context.resetErrorBoundary();\n      setState({\n        error: null,\n        hasError: false\n      });\n    },\n    showBoundary: error => setState({\n      error,\n      hasError: true\n    })\n  }), [context.resetErrorBoundary]);\n  if (state.hasError) {\n    throw state.error;\n  }\n  return memoized;\n}\n\nfunction withErrorBoundary(component, errorBoundaryProps) {\n  const Wrapped = forwardRef((props, ref) => createElement(ErrorBoundary, errorBoundaryProps, createElement(component, {\n    ...props,\n    ref\n  })));\n\n  // Format for display in DevTools\n  const name = component.displayName || component.name || \"Unknown\";\n  Wrapped.displayName = \"withErrorBoundary(\".concat(name, \")\");\n  return Wrapped;\n}\n\nexport { ErrorBoundary, ErrorBoundaryContext, useErrorBoundary, withErrorBoundary };\n","import { Routes, Route, Link } from 'react-router-dom';\nimport { Briefcase, LogOut, Trophy, Menu, X, Shield, Users } from 'lucide-react';\nimport { useAuth } from './contexts/authcontext';\nimport { useAdmin } from './contexts/admincontext';\nimport { ProtectedRoute } from './components/protectedroute';\nimport { AdminRoute } from './components/adminroute';\nimport { Login } from './pages/login';\nimport { Register } from './pages/register';\nimport { Discover } from './pages/discover';\nimport { Profile } from './pages/profile';\nimport { CreateTrade } from './pages/createtrade';\nimport { TradeDetails } from './pages/tradedetails';\nimport { Messages } from './pages/messages';\nimport { Conversation } from './pages/conversation';\nimport { Projects } from './pages/projects';\nimport { CreateProject } from './pages/createproject';\nimport { ProjectDetails } from './pages/projectdetails';\nimport { UserDirectory } from './pages/userdirectory';\nimport { Challenges } from './pages/challenges';\nimport { AdminChallenges } from './pages/adminchallenges';\nimport { Connections } from './pages/connections';\nimport { PublicProfile } from './pages/publicprofile';\nimport { useState } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\n\n// Error classifications for common error scenarios\ntype ErrorType = 'network' | 'auth' | 'rate-limit' | 'unknown';\n\ninterface ErrorClassification {\n  type: ErrorType;\n  title: string;\n  description: string;\n  action: string;\n  recoverable: boolean;\n}\n\nfunction classifyError(error: Error): ErrorClassification {\n  const message = error.message.toLowerCase();\n  \n  // Network errors\n  if (message.includes('network') || \n      message.includes('fetch') || \n      message.includes('offline')) {\n    return {\n      type: 'network',\n      title: 'Connection Error',\n      description: 'Unable to connect to our servers. Please check your internet connection.',\n      action: 'Retry',\n      recoverable: true\n    };\n  }\n\n  // Authentication errors\n  if (message.includes('auth/') || \n      message.includes('unauthorized') || \n      message.includes('permission-denied') ||\n      message.includes('unauthenticated')) {\n    return {\n      type: 'auth',\n      title: 'Authentication Error',\n      description: 'Your session may have expired. Please sign in again.',\n      action: 'Sign In',\n      recoverable: true\n    };\n  }\n\n  // Rate limiting errors\n  if (message.includes('too-many-requests') || \n      message.includes('rate-limit') ||\n      message.includes('try again later')) {\n    return {\n      type: 'rate-limit',\n      title: 'Too Many Attempts',\n      description: 'Please wait a few minutes before trying again.',\n      action: 'Got It',\n      recoverable: false\n    };\n  }\n\n  // Default unknown error\n  return {\n    type: 'unknown',\n    title: 'Unexpected Error',\n    description: 'Something went wrong. Our team has been notified.',\n    action: 'Retry',\n    recoverable: true\n  };\n}\n\nfunction ErrorFallback({ error, resetErrorBoundary }) {\n  const errorInfo = classifyError(error);\n  \n  const handleAction = () => {\n    // Clear any error-related state\n    localStorage.removeItem('errorState');\n    sessionStorage.clear();\n    \n    switch (errorInfo.type) {\n      case 'auth':\n        // Redirect to login for auth errors\n        window.location.href = '/login';\n        break;\n      case 'network':\n        // For network errors, try to reconnect\n        window.location.reload();\n        break;\n      case 'rate-limit':\n        // For rate limiting, just close the error\n        resetErrorBoundary();\n        break;\n      default:\n        // For unknown errors, try resetting the error boundary\n        resetErrorBoundary();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-cyber-black text-cyber-gray-50 flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full p-6 bg-cyber-gray-900 rounded-lg shadow-xl\">\n        <h2 className=\"text-xl font-bold text-red-500 mb-4\">{errorInfo.title}</h2>\n        <p className=\"text-cyber-gray-300 mb-4\">{errorInfo.description}</p>\n        {process.env.NODE_ENV === 'development' && (\n          <pre className=\"text-sm bg-cyber-gray-800 p-4 rounded mb-4 overflow-auto max-h-40\">\n            {error.message}\n            {error.stack && `\\n\\n${error.stack}`}\n          </pre>\n        )}\n        <div className=\"space-y-3\">\n          <button\n            onClick={handleAction}\n            className={`w-full px-4 py-2 rounded-lg transition-colors ${\n              errorInfo.recoverable\n                ? 'bg-neon-blue hover:bg-neon-purple text-white'\n                : 'bg-gray-600 text-gray-200'\n            }`}\n            disabled={!errorInfo.recoverable}\n          >\n            {errorInfo.action}\n          </button>\n          {!errorInfo.recoverable && (\n            <p className=\"text-sm text-cyber-gray-400 text-center\">\n              This error cannot be automatically resolved.\n              Please try again later or contact support.\n            </p>\n          )}\n          {errorInfo.type === 'network' && (\n            <div className=\"text-sm text-cyber-gray-400 mt-4\">\n              <p>Troubleshooting tips:</p>\n              <ul className=\"list-disc list-inside mt-2\">\n                <li>Check your internet connection</li>\n                <li>Try disabling VPN or proxy if in use</li>\n                <li>Clear your browser cache</li>\n              </ul>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  const { user, logout } = useAuth();\n  const { isAdmin } = useAdmin();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      setMobileMenuOpen(false); // Close mobile menu after logout\n      window.location.href = '/'; // Force navigation to home\n    } catch (error) {\n      console.error('Failed to log out:', error);\n      alert('Failed to log out. Please try again.'); // Simple user feedback\n    }\n  };\n\n  const closeMobileMenu = () => {\n    setMobileMenuOpen(false);\n  };\n\n  return (\n    <ErrorBoundary FallbackComponent={ErrorFallback}>\n      <div className=\"bg-neo-earth font-body\">\n        {/* Dynamic background */}\n        <div className=\"fixed inset-0 bg-mesh opacity-30\"></div>\n        <div className=\"fixed inset-0 bg-noise opacity-50\"></div>\n\n        {/* Header */}\n        <header className=\"sticky top-0 z-50\">\n          <div className=\"absolute inset-0 bg-earth-900/80 backdrop-blur-md\"></div>\n          <div className=\"absolute inset-0 bg-gradient-to-r from-accent-clay/5 to-accent-ochre/5\"></div>\n          <div className=\"absolute inset-0 bg-mesh opacity-10\"></div>\n          <div className=\"absolute inset-0 border-b border-earth-700/30\"></div>\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n            <div className=\"flex justify-between items-center relative\">\n              <Link to=\"/\" className=\"flex items-center space-x-3 group\">\n                <Briefcase className=\"h-8 w-8 text-neon-blue animate-float\" />\n                <h1 className=\"text-2xl font-display font-bold gradient-text\">\n                  TradeYa\n                </h1>\n              </Link>\n\n              {/* Mobile menu button */}\n              <button\n                className=\"md:hidden p-2 rounded-lg hover:bg-neon-purple/20\"\n                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              >\n                {mobileMenuOpen ? (\n                  <X className=\"h-6 w-6 text-neon-blue\" />\n                ) : (\n                  <Menu className=\"h-6 w-6 text-neon-blue\" />\n                )}\n              </button>\n\n              {/* Desktop Navigation */}\n              <nav className=\"hidden md:flex space-x-8\">\n                <Link to=\"/discover\" className=\"nav-link\">\n                  Discover\n                </Link>\n                <Link to=\"/projects\" className=\"nav-link\">\n                  Projects\n                </Link>\n                <Link to=\"/directory\" className=\"nav-link\">\n                  Directory\n                </Link>\n                <Link to=\"/messages\" className=\"nav-link\">\n                  Messages\n                </Link>\n                <Link to=\"/connections\" className=\"nav-link flex items-center gap-1\">\n                  <Users className=\"h-4 w-4\" />\n                  Network\n                </Link>\n                {user && (\n                  <Link to=\"/challenges\" className=\"nav-link flex items-center gap-1\">\n                    <Trophy className=\"h-4 w-4\" />\n                    Challenges\n                  </Link>\n                )}\n                {isAdmin && (\n                  <Link\n                    to=\"/admin/challenges\"\n                    className=\"nav-link flex items-center gap-1\"\n                  >\n                    <Shield className=\"h-4 w-4\" />\n                    Admin\n                  </Link>\n                )}\n                {user ? (\n                  <>\n                    <Link to=\"/profile\" className=\"nav-link\">\n                      Profile\n                    </Link>\n                    <button\n                      onClick={handleLogout}\n                      className=\"nav-link flex items-center\"\n                    >\n                      <LogOut className=\"h-5 w-5 mr-1\" />\n                      Logout\n                    </button>\n                  </>\n                ) : (\n                  <>\n                    <Link to=\"/login\" className=\"nav-link\">\n                      Login\n                    </Link>\n                    <Link to=\"/register\" className=\"nav-link\">\n                      Register\n                    </Link>\n                  </>\n                )}\n              </nav>\n\n              {user && (\n                <Link\n                  to=\"/trades/new\"\n                  className=\"hidden md:flex btn-primary\"\n                >\n                  Post a Trade\n                </Link>\n              )}\n            </div>\n\n            {/* Mobile Navigation */}\n            {mobileMenuOpen && (\n              <nav className=\"md:hidden mt-4 py-4 border-t border-earth-700/30\">\n                <div className=\"flex flex-col space-y-4\">\n                  <Link \n                    to=\"/discover\" \n                    className=\"nav-link\"\n                    onClick={closeMobileMenu}\n                  >\n                    Discover\n                  </Link>\n                  <Link \n                    to=\"/projects\" \n                    className=\"nav-link\"\n                    onClick={closeMobileMenu}\n                  >\n                    Projects\n                  </Link>\n                  <Link \n                    to=\"/directory\" \n                    className=\"nav-link\"\n                    onClick={closeMobileMenu}\n                  >\n                    Directory\n                  </Link>\n                  <Link \n                    to=\"/messages\" \n                    className=\"nav-link\"\n                    onClick={closeMobileMenu}\n                  >\n                    Messages\n                  </Link>\n                  <Link \n                    to=\"/connections\" \n                    className=\"nav-link flex items-center gap-1\"\n                    onClick={closeMobileMenu}\n                  >\n                    <Users className=\"h-4 w-4\" />\n                    Network\n                  </Link>\n                  {user && (\n                    <Link \n                      to=\"/challenges\" \n                      className=\"nav-link flex items-center gap-1\"\n                      onClick={closeMobileMenu}\n                    >\n                      <Trophy className=\"h-4 w-4\" />\n                      Challenges\n                    </Link>\n                  )}\n                  {isAdmin && (\n                    <Link \n                      to=\"/admin/challenges\" \n                      className=\"nav-link flex items-center gap-1\"\n                      onClick={closeMobileMenu}\n                    >\n                      <Shield className=\"h-4 w-4\" />\n                      Admin\n                    </Link>\n                  )}\n                  {user ? (\n                    <>\n                      <Link \n                        to=\"/profile\" \n                        className=\"nav-link\"\n                        onClick={closeMobileMenu}\n                      >\n                        Profile\n                      </Link>\n                      <button\n                        onClick={() => {\n                          handleLogout();\n                          closeMobileMenu();\n                        }}\n                        className=\"nav-link flex items-center\"\n                      >\n                        <LogOut className=\"h-5 w-5 mr-1\" />\n                        Logout\n                      </button>\n                      <Link\n                        to=\"/trades/new\"\n                        className=\"btn-primary text-center\"\n                        onClick={closeMobileMenu}\n                      >\n                        Post a Trade\n                      </Link>\n                    </>\n                  ) : (\n                    <>\n                      <Link \n                        to=\"/login\" \n                        className=\"nav-link\"\n                        onClick={closeMobileMenu}\n                      >\n                        Login\n                      </Link>\n                      <Link \n                        to=\"/register\" \n                        className=\"nav-link\"\n                        onClick={closeMobileMenu}\n                      >\n                        Register\n                      </Link>\n                    </>\n                  )}\n                </div>\n              </nav>\n            )}\n          </div>\n        </header>\n\n        {/* Main content */}\n        <main className=\"relative z-10\">\n          <div className=\"relative\">\n            <Routes>\n              {/* Add catch-all 404 route last */}\n              <Route path=\"/\" element={<Discover />} />\n              <Route path=\"/discover\" element={<Discover />} />\n              <Route path=\"/users/:id\" element={<PublicProfile />} />\n              <Route path=\"/login\" element={<Login />} />\n              <Route path=\"/register\" element={<Register />} />\n              <Route\n                path=\"/profile\"\n                element={\n                  <ProtectedRoute>\n                    <Profile />\n                  </ProtectedRoute>\n                }\n              />\n              <Route\n                path=\"/trades/new\"\n                element={\n                  <ProtectedRoute>\n                    <CreateTrade />\n                  </ProtectedRoute>\n                }\n              />\n              <Route path=\"/trades/:id\" element={<TradeDetails />} />\n              <Route\n                path=\"/messages\"\n                element={\n                  <ProtectedRoute>\n                    <Messages />\n                  </ProtectedRoute>\n                }\n              />\n              <Route\n                path=\"/messages/:id\"\n                element={\n                  <ProtectedRoute>\n                    <Conversation />\n                  </ProtectedRoute>\n                }\n              />\n              <Route\n                path=\"/projects\"\n                element={\n                  <ProtectedRoute>\n                    <Projects />\n                  </ProtectedRoute>\n                }\n              />\n              <Route\n                path=\"/projects/new\"\n                element={\n                  <ProtectedRoute>\n                    <CreateProject />\n                  </ProtectedRoute>\n                }\n              />\n              <Route path=\"/projects/:id\" element={<ProjectDetails />} />\n              <Route path=\"/directory\" element={<UserDirectory />} />\n              <Route\n                path=\"/connections\"\n                element={\n                  <ProtectedRoute>\n                    <Connections />\n                  </ProtectedRoute>\n                }\n              />\n              <Route\n                path=\"/challenges\"\n                element={\n                  <ProtectedRoute>\n                    <Challenges />\n                  </ProtectedRoute>\n                }\n              />\n              <Route\n                path=\"/admin/challenges\"\n                element={\n                  <AdminRoute>\n                    <AdminChallenges />\n                  </AdminRoute>\n                }\n              />\n              {/* 404 route */}\n              <Route \n                path=\"*\" \n                element={\n                  <div className=\"flex flex-col items-center justify-center min-h-[60vh] px-4\">\n                    <h1 className=\"text-4xl font-bold text-neon-blue mb-4\">404: Page Not Found</h1>\n                    <p className=\"text-lg text-text-secondary mb-6\">The page you're looking for doesn't exist.</p>\n                    <Link to=\"/\" className=\"btn-primary\">\n                      Return Home\n                    </Link>\n                  </div>\n                } \n              />\n            </Routes>\n          </div>\n        </main>\n      </div>\n    </ErrorBoundary>\n  );\n}\n\n/**\n * Root component of the application.\n * @component\n * @returns The main application component\n */\nexport default App;\n","import React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './app'\nimport './index.css'\nimport { AuthProvider } from './contexts/authcontext'\nimport { AdminProvider } from './contexts/admincontext'\nimport { ToastProvider } from './contexts/ToastContext'\nimport { initializeCollections } from './lib/firebase'\n\n// Setup error tracking\nwindow.addEventListener('unhandledrejection', (event) => {\n  console.error('Unhandled promise rejection:', event.reason);\n  // Show user-friendly error message for unhandled errors\n  showFatalError('An unexpected error occurred. Please refresh the page.');\n});\n\n// Validate environment variables\nconst requiredEnvVars = [\n  'VITE_FIREBASE_API_KEY',\n  'VITE_FIREBASE_AUTH_DOMAIN',\n  'VITE_FIREBASE_PROJECT_ID',\n  'VITE_FIREBASE_STORAGE_BUCKET',\n  'VITE_FIREBASE_MESSAGING_SENDER_ID',\n  'VITE_FIREBASE_APP_ID'\n] as const;\n\nconst missingVars = requiredEnvVars.filter(key => !import.meta.env[key]);\n\nif (missingVars.length > 0) {\n  const error = `Missing required environment variables: ${missingVars.join(', ')}`;\n  console.error(error);\n  showFatalError('Application configuration error. Please contact support.');\n  throw new Error(error);\n}\n\n// Function to show fatal errors\nfunction showFatalError(message: string) {\n  const errorHtml = `\n    <div style=\"\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: #1a1a1a;\n      color: #fff;\n      font-family: system-ui;\n    \">\n      <div style=\"\n        max-width: 500px;\n        padding: 2rem;\n        text-align: center;\n        background: #2a2a2a;\n        border-radius: 8px;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n      \">\n        <h1 style=\"color: #f43f5e; margin-bottom: 1rem;\">Application Error</h1>\n        <p style=\"color: #d1d5db; margin-bottom: 1.5rem;\">${message}</p>\n        <button onclick=\"window.location.reload()\" style=\"\n          background: #3b82f6;\n          color: white;\n          padding: 0.5rem 1rem;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        \">\n          Refresh Page\n        </button>\n      </div>\n    </div>\n  `;\n  document.body.innerHTML = errorHtml;\n}\n\nasync function initializeApp() {\n  try {\n    const container = document.getElementById('root');\n    if (!container) throw new Error('Failed to find the root element');\n    const root = createRoot(container);\n\n    // Initialize Firebase collections before rendering\n    await initializeCollections();\n\n    root.render(\n      <React.StrictMode>\n        <BrowserRouter>\n          <AuthProvider>\n            <AdminProvider>\n              <ToastProvider>\n                <App />\n              </ToastProvider>\n            </AdminProvider>\n          </AuthProvider>\n        </BrowserRouter>\n      </React.StrictMode>\n    );\n  } catch (error) {\n    console.error('Application initialization failed:', error);\n    showFatalError('Failed to start application. Please refresh the page.');\n  }\n}\n\ninitializeApp();\n"],"file":"assets/index-DwHQsa2Z.js"}